"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["33858"],{37749:function(e,t,n){n.d(t,{A:()=>i});let i={chrome:"chrome-_LLvs8",hidden:"hidden-wHbbPQ",spinner:"spinner-Ti9Gdl",left:"left-YVRGou",right:"right-pvXhar",top:"top-deZX1P",bottom:"bottom-D60oFA",middle:"middle-DqhMOs",img:"img-nwpk1x",loading:"loading-UuPN_c"}},12791:function(e,t,n){n.d(t,{W:()=>m});var i=n(4006),r=n(63950),l=n.n(r),o=n(76977);function u(e){let{children:t}=e;return(0,i.Y)(o.fI,{justifyContent:"center",alignItems:"center",onClick:e=>e.stopPropagation(),paddingBottom:{desktop:12,mobile:0},className:"container-H9iqVx",children:t})}var a=n(75189),c=n(45854);function d(e){let{item:t,comment:n}=e;return(0,i.Y)(u,{children:(0,i.Y)(c.t,{children:(0,i.Y)(a.b,{item:t,comment:n,priority:"primary"})})})}var s=n(59339);function p(e){let{isLoading:t=!1,publication:n,post:r,onLike:l}=e;return(0,i.Y)(u,{children:(0,i.Y)(c.t,{children:(0,i.Y)(s.u,{isLoading:t,publication:n,post:r,onLike:l})})})}function m(e){let{post:t,publication:n,feedItem:r,onLike:o}=e;if(r&&"comment"===r.type)return(0,i.Y)(d,{item:r,comment:r.comment});if(t&&n){var u,a;return(0,i.Y)(p,{publication:null!=(u=null==r?void 0:r.publication)?u:n,post:null!=(a=null==r?void 0:r.post)?a:t,onLike:null!=o?o:l()})}return null}},92825:function(e,t,n){n.d(t,{f:()=>D,S:()=>S});var i=n(4006),r=n(17402),l=n(89490),o=n(63136);function u(e){let{pub:t}=e,n=t.hero_text,r=t.rankingDetailFreeSubscriberCount;return n||r?(0,i.FD)(a,{children:[n&&(0,i.Y)(o.EY.B4,{clamp:3,children:n}),r&&(0,i.Y)(o.EY.B4,{color:"secondary",children:r})]}):null}let a=(0,l.I4)({display:"flex",direction:"column",gap:2});var c=n(84605),d=n(46271),s=n(35369),p=n(85050),m=n(39318),f=n(57324);function h(e){let{pub:t,isContributor:n,isSubscribed:r,utmSource:l}=e,{iString:o}=(0,c.GO)(),u=(0,d.Jd)(),a=(0,p.s)({surface:"profile"}),h=(0,m.eV6)(t,{user:u,addBase:!0,utm_source:l||f.VU.pubHoverCard,utm_medium:f.Jn.web,utm_campaign:f._9.profilePage});return n?null:(0,i.Y)(b,{children:r?(0,i.Y)(s.$n,{priority:"secondary-outline",href:h,size:"sm",children:o("Subscribed")}):(0,i.Y)(s.$n,{priority:"primary",href:h,onClick:a(t),size:"sm",children:o("Subscribe")})})}let b=(0,l.I4)({display:"flex",direction:"column",paddingTop:4});var Y=n(81203);function v(e){var t;let{pub:n}=e,r=(0,m.fOI)(n),l=n.name||"",u=null!=(t=n.subdomain)?t:"";return(0,i.FD)(y,{children:[(0,i.FD)(g,{children:[(0,i.Y)(o.EY.B2,{weight:"medium",children:(0,i.Y)(o.Yq,{href:r,children:l})}),(0,i.Y)(o.EY.B4,{color:"secondary",children:(0,i.Y)(o.Yq,{href:r,children:u})})]}),(0,i.Y)(Y.wg,{pub:n,size:48})]})}let y=(0,l.I4)({display:"flex",direction:"row",gap:12}),g=(0,l.I4)({display:"flex",direction:"column",flex:"grow",gap:2});var k=n(57820);function w(){return(0,i.Y)(D,{children:(0,i.Y)(k.y$,{flex:"grow",padding:40})})}var C=n(86500),_=n(76528);function S(e){var t;let{pubId:n,utmSource:l,trackOnShow:o}=e,{data:a}=(0,_.OU)("/api/v1/publication/public/".concat(n),{shouldRevalidate:!1});return((0,r.useEffect)(()=>{o&&a&&(0,C.u4)(C.qY.PUBLICATION_HOVER_CARD_SHOWN,{publication_id:n})},[o,null==a||null==(t=a.pub)?void 0:t.id]),a)?(0,i.FD)(D,{children:[(0,i.Y)(v,{pub:a.pub}),(0,i.Y)(u,{pub:a.pub}),(0,i.Y)(h,{isContributor:a.isContributor,isSubscribed:a.isSubscribed,pub:a.pub,utmSource:l})]}):(0,i.Y)(w,{})}let D=(0,l.I4)({display:"flex",direction:"column",sizing:"border-box",width:320,gap:12,padding:12})},19008:function(e,t,n){n.d(t,{h:()=>Y});var i=n(4006),r=n(35426),l=n(38390),o=n(23623),u=n(90460);function a(e){let{onClose:t}=e;return(0,i.Y)(l.hJ,{forceMount:!0,className:"backdrop-SPBUoO",onClick:()=>t()})}var c=n(17402);let d=(0,c.forwardRef)((e,t)=>{let{children:n}=e;return(0,i.Y)(l.UC,{forceMount:!0,ref:t,className:"panel-vMauWo",onOpenAutoFocus:e=>e.preventDefault(),onCloseAutoFocus:e=>e.preventDefault(),onPointerDownOutside:e=>{e.preventDefault()},children:n})}),s="transition-Dki0wq",p="from-b7KIRm",m="to-np0fky",f=e=>{let{children:t}=e;return(0,i.Y)(r.e.Child,{as:c.Fragment,enter:s,enterFrom:p,enterTo:m,leave:s,leaveFrom:m,leaveTo:p,children:t})};var h=n(80988),b=n(45346);function Y(e){let{isOpen:t,onClose:n=()=>void 0,children:c}=e;return(0,u.h)(t),(0,i.Y)(l.bL,{open:t,onOpenChange:e=>{e||n()},children:(0,i.Y)(l.ZL,{forceMount:!0,children:(0,i.Y)(r.e.Root,{show:t,children:(0,i.FD)(h.k,{children:[(0,i.Y)(b.B,{children:(0,i.Y)(a,{onClose:n})}),(0,i.Y)(o.a,{children:(0,i.Y)(f,{children:(0,i.Y)(d,{children:c})})})]})})})})}},59339:function(e,t,n){n.d(t,{u:()=>v});var i=n(4006),r=n(17402),l=n(58398),o=n(46271),u=n(3228),a=n(48226),c=n(52347),d=n(99978),s=n(69277),p=n(70408),m=n(82634);function f(){return(0,i.FD)(i.FK,{children:[(0,i.Y)(a.c,{disabled:!1,priority:"primary"}),(0,i.Y)(u.k,{disabled:!1,priority:"primary"}),(0,i.Y)(m.Q,{disabled:!1,priority:"primary"}),(0,i.Y)(d.w,{disabled:!1,priority:"primary"})]})}var h=n(49807),b=n(82776),Y=n(57324);function v(e){let{isLoading:t=!1,publication:n,post:m,onLike:v}=e,y=(0,o.Jd)(),[g,k]=(0,r.useState)(!1),{isLiked:w,likeCount:C,handleLike:_}=function(e,t){let[n,i]=(0,r.useState)(()=>!!(null==e?void 0:e.reaction)),[l,o]=(0,r.useState)(()=>{var t;return null!=(t=null==e?void 0:e.reactions["❤"])?t:0});(0,r.useEffect)(()=>{if(e){var t;i(!!e.reaction),o(null!=(t=e.reactions["❤"])?t:0)}},[e]);let u=(0,r.useCallback)(()=>{if(!e)return;let r=!n;i(r),o(e=>e+(r?1:-1)),t(e.id,r)},[t,e,n]);return{isLiked:n,likeCount:l,handleLike:u}}(m,v),{handleRestack:S,postWithRestackState:D}=function(e){let[t,n]=(0,r.useState)(()=>!!(null==e?void 0:e.restacked)),[i,l]=(0,r.useState)(()=>{var t;return null!=(t=null==e?void 0:e.restacks)?t:0});return(0,r.useEffect)(()=>{if(e){var t;n(!!e.restacked),l(null!=(t=e.restacks)?t:0)}},[null==e?void 0:e.id]),{handleRestack:(0,r.useCallback)(e=>{n(t=>t!==e?(l(t=>t+(e?1:-1)),e):t)},[]),postWithRestackState:(0,r.useMemo)(()=>e?(0,p._)((0,s._)({},e),{restacked:t,restacks:i}):null,[e,t,i])}}(m);if(t)return(0,i.Y)(f,{});if(!n||!m)return null;let F=!y||!n.community_enabled,I=(0,b.showCommentsOnPost)({publication:n,post:m}),x="profile"===n.homepage_type?(0,h.q$n)(n,m):(0,h.wu9)(n,m,{comments:!0,urlParams:{utm_source:Y.VU.substack,utm_medium:Y.Jn.web,utm_campaign:Y._9.postViewer}});return(0,i.FD)(i.FK,{children:[(0,i.Y)(a.c,{onClick:_,count:C,active:w,disabled:F,priority:"primary"}),(0,i.Y)(u.k,{href:x,count:m.comment_count,newTab:"profile"!==n.homepage_type,disabled:F||!I,priority:"primary"}),(0,i.Y)(c.H,{pub:n,post:D,priority:"primary",onRestack:S}),(0,i.Y)(d.w,{priority:"primary",onClick:()=>{k(!0)}}),(0,i.Y)(l.Z,{isOpen:g,onClose:()=>k(!1),medium:"post viewer",utm_campaign:"post-expanded-share",user:y,post:m,pub:n})]})}},45854:function(e,t,n){n.d(t,{t:()=>l});var i=n(4006),r=n(76977);function l(e){let{children:t}=e;return(0,i.Y)(r.fI,{justifyContent:"space-between",alignItems:"center",sizing:"border-box",gap:32,className:"layout-Pwsidg",children:t})}},70568:function(e,t,n){function i(e){var t,n,i,r,l,o,u,a,c;let d=null==(t=e.attachments)?void 0:t.find(e=>["post","comment","link","publication"].includes(e.type)),s=null!=(o=null==(n=e.attachments)?void 0:n.filter(e=>"image"===e.type))?o:[],p=null!=(u=null==(i=e.attachments)?void 0:i.filter(e=>"video"===e.type))?u:[];return{linkAttachment:d,imageAttachments:s,videoAttachments:p,quoteAttachments:null!=(a=null==(r=e.attachments)?void 0:r.filter(e=>"post"===e.type&&!!e.postSelection))?a:[],imageRestackAttachments:null!=(c=null==(l=e.attachments)?void 0:l.filter(e=>"post"===e.type&&!!e.postImageSelection))?c:[]}}n.d(t,{B:()=>i}),n(4006),n(10278),n(42686),n(2675),n(8103),n(22858),n(78479),n(89490),n(93812),n(39318)}}]);