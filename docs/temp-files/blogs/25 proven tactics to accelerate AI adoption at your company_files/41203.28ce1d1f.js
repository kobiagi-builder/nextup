"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["41203"],{61060:function(e,t,n){n.d(t,{A:()=>l});let l={root:"root-LeqPP3",badge:"badge-WYVub3",circle:"circle-_ZTVoA"}},77043:function(e,t,n){n.d(t,{$L:()=>o,Rc:()=>i,TB:()=>a,YR:()=>r,be:()=>l});let l=20,i=24,r=24;function o(e,t,n){let l=t/16;return l+(e-t)/(n-t)*(n/16-l)}function a(e){let{layout:t,navPosition:n,isPostView:i=!1}=e;return"stacked"===t?i?{min:l,max:110}:"top"===n?{min:l,max:220}:{min:l,max:110}:{min:l,max:80}}},63558:function(e,t,n){n.d(t,{A:()=>s});var l=n(69277),i=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=20,fill:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,i._)((0,l._)({},s),{name:"PauseIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,children:(0,o.Y)("path",{stroke:"none",d:"M5.29883 17.9082H7.52539C8.375 17.9082 8.82422 17.459 8.82422 16.5996V3.29883C8.82422 2.41016 8.375 2 7.52539 2H5.29883C4.44922 2 4 2.44922 4 3.29883V16.5996C4 17.459 4.44922 17.9082 5.29883 17.9082ZM12.3984 17.9082H14.6152C15.4746 17.9082 15.9141 17.459 15.9141 16.5996V3.29883C15.9141 2.41016 15.4746 2 14.6152 2H12.3984C11.5391 2 11.0898 2.44922 11.0898 3.29883V16.5996C11.0898 17.459 11.5391 17.9082 12.3984 17.9082Z"})}))}},43510:function(e,t,n){n.d(t,{A:()=>s});var l=n(69277),i=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=20,fill:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","fill"]);return(0,o.Y)(a.A,(0,i._)((0,l._)({},s),{name:"PlayIconFilled",svgParams:{viewBox:"0 0 20 20"},width:t,height:t,fill:n,children:(0,o.Y)("path",{stroke:"none",d:"M5.04688 18.5527C5.4375 18.5527 5.76953 18.3965 6.16016 18.1719L17.5469 11.5898C18.3574 11.1113 18.6406 10.7988 18.6406 10.2812C18.6406 9.76367 18.3574 9.45117 17.5469 8.98242L6.16016 2.39063C5.76953 2.16602 5.4375 2.01953 5.04688 2.01953C4.32422 2.01953 3.875 2.56641 3.875 3.41602V17.1465C3.875 17.9961 4.32422 18.5527 5.04688 18.5527Z"})}))}},59307:function(e,t,n){n.d(t,{A:()=>a});var l=n(69277),i=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,i._)((0,l._)({},e),{name:"PlayIconRounded",svgParams:{height:16,width:16},stroke:"none",children:(0,r.Y)("path",{d:"M3.35866 16C2.58101 16 2 15.4101 2 14.4447V1.55531C2 0.598883 2.58101 0 3.35866 0C3.75196 0 4.10056 0.134078 4.54749 0.393296L15.1575 6.54302C15.9531 7.00782 16.3106 7.39218 16.3106 8C16.3106 8.61676 15.9531 9.00112 15.1575 9.45698L4.54749 15.6067C4.10056 15.8659 3.75196 16 3.35866 16Z"})}))},78895:function(e,t,n){n.d(t,{A:()=>a});var l=n(69277),i=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,i._)((0,l._)({},e),{name:"SubstackLogoIcon",svgParams:{height:18,width:16,fill:"#ff6719",stroke:"none"},children:[(0,r.Y)("path",{d:"M16 4H0V6H16V4Z"}),(0,r.Y)("path",{d:"M0 8V18L7.9993 13.534L16 18V8H0Z"}),(0,r.Y)("path",{d:"M16 0H0V2H16V0Z"})]}))},20504:function(e,t,n){n.d(t,{AI:()=>eL,at:()=>eF,TV:()=>eW,jB:()=>eM,I:()=>eE,Z1:()=>eT,sZ:()=>eR,cX:()=>eD,W1:()=>eH,mj:()=>eB,H$:()=>ez,b3:()=>eP});var l=n(69277),i=n(4006),r=n(32485),o=n.n(r),a=n(69843),s=n.n(a),d=n(60250),c=n(17402),u=n(78895),h=n(70408),m=n(90883),f=n(77043),p=n(2977),g=n(84605),v=n(53989),b=n(85478),y=n(78338);let _=e=>{let{pub:t,isChatActive:n,isMeetingsActive:l}=e,{language:i}=(0,g.GO)(),{getSettingFor:r}=(0,v.Pu)(),{getConfigFor:o}=(0,b.mJ)(),a=!!o("publication_tabs_reorder"),s=!!r("notes_feed_enabled"),d=!!(r("reader_referrals_enabled")&&r("reader_referrals_leaderboard_enabled")),u=!!r("group_sections_and_podcasts_in_menu_enabled"),h=(0,c.useMemo)(()=>(0,y.Bf)(t.navigationBarItems||[],{isFeedEnabled:s,isChatActive:!!n,isChatEnabled:!!t.threads_v2_enabled,isMeetingsActive:!!l,hasMultipleNewsletters:t.sections&&t.sections.length>0,isReaderReferralsLeaderboardActive:d,language:i,useReordering:a}).filter(e=>!e.is_hidden),[t.navigationBarItems,t.threads_v2_enabled,t.sections,s,n,l,d,i,a]);return(0,c.useMemo)(()=>z({groupNewsletters:u,navBarItems:h,pub:t,language:i}),[u,h,t,i])};var w=n(75107),Y=n(87677),k=n(8853),C=n(37767),x=n(68410),I=n(76977),S=n(88774);let A=e=>{var t,n;return null!=(n=null==(t=e.subItems)?void 0:t.some(e=>e.subItems&&e.subItems.length>0))&&n};function N(e){let{className:t,hideBorders:n,items:l,menuItemClassName:r,selectedMenuItemClassName:a,selectedSlug:s,pub:u,maxWidth:h}=e,{isMobile:m}=(0,x.sM)(),f=(0,c.useRef)(null),[p,g]=(0,c.useState)(!1),[v,b]=(0,c.useState)(!1);function y(e){let{scrollLeft:t,scrollWidth:n,clientWidth:l}=e;g(t>10),b(n-(l+t)>10)}let _=e=>()=>{let{current:t}=f;t&&t.scrollBy({left:250*e,behavior:"smooth"})};return(0,c.useEffect)(()=>{y(f.current)},[]),(0,i.Y)("div",{className:o()("overflow-list-container",t),style:{maxWidth:h},children:(0,i.FD)(I.Ye,{borderBottom:n?void 0:"detail",borderTop:n||m?void 0:"detail",className:o()("section-bar",{scroll:!0,"overflow-left":p,"overflow-right":v}),font:"text",height:m?44:48,justifyContent:m?"start":"center",paddingX:4,position:"relative",children:[(0,i.Y)("div",{ref:f,className:"overflow-items",onScroll:e=>y(e.target),children:l.map(e=>{let{label:t,href:n,slug:l,isNative:d,onClick:c,noFollow:h,subItems:m,newTab:f}=e;return m?(0,i.Y)(S.W1,{placement:"bottom-start",trigger:(0,i.Y)("div",{className:o()("menu-item",{selected:l===s},r,a&&{[a]:l===s}),children:(0,i.FD)(C.A,{native:d,rel:h?"nofollow":null,onClick:c,children:[(0,i.Y)("span",{className:"overflow-item-text",children:t}),(0,i.Y)(w.A,{className:"chevron-_e2GYQ",size:16})]})}),children:m.map(e=>{let{label:t,href:n,isNative:l,onClick:r,noFollow:o,logoUrl:a}=e,s=a||(null==u?void 0:u.logo_url);return(0,i.Y)(S.Dr,{href:n,leading:s?(0,i.Y)(k.c,{height:24,radius:"xs",src:s,width:24}):null,native:l,rel:o?"nofollow":void 0,onClick:r,children:t})})}):(0,i.Y)("div",{className:o()("menu-item",{selected:l===s},r,a&&{[a]:l===s}),children:(0,i.Y)(C.A,{href:n,native:d,newTab:f,rel:h?"nofollow":null,onClick:c,children:(0,i.Y)("span",{className:"overflow-item-text",children:t})})})})}),(0,i.Y)("div",{className:"left-button",children:(0,i.Y)("div",{className:"scroll-button-hitbox",role:"button",onClick:_(-1),children:(0,i.Y)(d.A,{strokeWidth:1.5})})}),(0,i.Y)("div",{className:"right-button",children:(0,i.Y)("div",{className:"scroll-button-hitbox",role:"button",onClick:_(1),children:(0,i.Y)(Y.A,{strokeWidth:1.5})})})]})})}var E=n(96400),L=n(4016),F=n(49807),D=n(82776);let T={zeteo:{121146:"Weâ€™re Not Kidding"}},M=["/about","/chat","/archive","/newsletters","/videos","/watch"],B=e=>{let{isChatActive:t,isMeetingsActive:n,pub:l,selectedSectionId:r,hideBorders:o,maxWidth:a}=e,s=_({pub:l,isChatActive:t,isMeetingsActive:n}).filter(e=>!A(e)&&(!e.subItems||e.subItems.length>0));return(0,i.Y)(N,{items:s,className:"sections-overflow",selectedSlug:r,pub:l,hideBorders:o,maxWidth:a})},R={label:"Recipe Index",subItems:[{label:"By Protein",subItems:[{href:"https://whattocook.substack.com/t/beef",label:"Beef"},{href:"https://whattocook.substack.com/t/chicken",label:"Chicken"},{href:"https://whattocook.substack.com/t/lamb",label:"Lamb"},{href:"https://whattocook.substack.com/t/pork",label:"Pork"},{href:"https://whattocook.substack.com/t/seafood",label:"Seafood"},{href:"https://whattocook.substack.com/t/vegetarian",label:"Vegetarian"},{href:"https://whattocook.substack.com/t/ground-meat",label:"Ground meat"}]},{label:"By Season",subItems:[{href:"https://whattocook.substack.com/t/spring",label:"Spring"},{href:"https://whattocook.substack.com/t/summer",label:"Summer"},{href:"https://whattocook.substack.com/t/fall",label:"Fall"},{href:"https://whattocook.substack.com/t/winter",label:"Winter"}]},{label:"By Meal Type",subItems:[{href:"https://whattocook.substack.com/t/one-pot",label:"One-pot"},{href:"https://whattocook.substack.com/t/sheet-pan",label:"Sheet-pan dinners"},{href:"https://whattocook.substack.com/t/kid-friendly",label:"Kid-friendly"},{href:"https://whattocook.substack.com/t/freezer-friendly",label:"Freezer-friendly"},{href:"https://whattocook.substack.com/t/grill",label:"Grill"},{href:"https://whattocook.substack.com/t/soup",label:"Soup"},{href:"https://whattocook.substack.com/t/salad",label:"Salad"},{href:"https://whattocook.substack.com/t/breakfast",label:"Breakfast"},{href:"https://whattocook.substack.com/t/dessert",label:"Dessert"},{href:"https://whattocook.substack.com/t/15-minute-meals",label:"15-minute meals"},{href:"https://whattocook.substack.com/t/30-minute-meals",label:"30-minute meals"}]},{label:"Meal Plans and More",subItems:[{href:"https://whattocook.substack.com/t/meal-plan",label:"Really simple meal plans"},{href:"https://whattocook.substack.com/t/entertaining-menus",label:"Entertaining Menus"},{href:"https://whattocook.substack.com/t/cooking-tips",label:"Cooking tips"},{href:"https://whattocook.substack.com/t/cooking-videos",label:"Cooking videos"},{href:"https://whattocook.substack.com/t/holiday-meal-plans",label:"Holiday meal plans"}]}]},z=e=>{let{groupNewsletters:t,navBarItems:n,pub:l,language:i}=e,{iString:r}=E.TH.i(i),o=[];o.push({href:"/",label:r("Home"),slug:"/home"}),l.podcast_enabled&&l.show_pub_podcast_tab&&o.push({href:"/podcast",label:r("Podcast"),slug:"/podcast"});let a=[];(0,L.ob)({pub:l})?a=P({navBarItems:n,groups:[{label:"Shows",condition:e=>!!e.section}]}):(0,L.wj)({pub:l})?a=P({navBarItems:n,groups:[{condition:e=>{var t;return(null==(t=e.section)?void 0:t.id)===118995},excludeFromOthers:!0,isStandalone:!0},{condition:e=>{var t;return(null==(t=e.section)?void 0:t.id)===121146},excludeFromOthers:!0,isStandalone:!0},{label:"Shows",condition:e=>{var t,n;return!!(null==(t=e.section)?void 0:t.is_podcast)||(null==(n=e.postTag)?void 0:n.slug)==="townhall"}},{label:"Columns",condition:e=>{var t,n,l;return!!e.section&&!(null==(t=e.section)?void 0:t.is_podcast)&&![132068,243259,214805].includes(null!=(l=null==(n=e.section)?void 0:n.id)?l:-1)}},{label:"Documentaries",condition:e=>{var t,n;return[132068,214805,243259].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)}}]}):(0,L.s7)({pub:l})?(o.push({href:"/watch",label:"Watch",slug:"/watch"}),o.push({href:"/listen",label:"Shows",slug:"/listen"}),a=P({navBarItems:n.filter(e=>"/watch"!==e.link_url&&(!e.section||!e.section.is_podcast||(0,D.sectionIsSpecificallyMarkedAsNewsletter)({section:e.section,pub:l}))),groups:[{label:"Newsletters",condition:e=>!!e.section}]})):a=(0,L.d4)({pub:l})?P({navBarItems:n,groups:[{label:"Projects",condition:e=>{var t,n;return[146942,146943,150226].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"News / Research",condition:e=>{var t,n;return[146936,146935].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"Calls-to-Action",condition:e=>{var t,n;return[146939,146941,146949].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)},excludeFromOthers:!0},{label:"Recommendations",condition:e=>{var t,n;return[146958].includes(null!=(n=null==(t=e.section)?void 0:t.id)?n:-1)||"https://bookshop.org/shop/globalfreedoms"===e.link_url},excludeFromOthers:!0},{label:"Podcasts",condition:e=>{var t;return!!(null==(t=e.section)?void 0:t.is_podcast)},excludeFromOthers:!0}]}):t?P({navBarItems:n,groups:[{label:r("Newsletters"),condition:e=>{var t;return!!e.section&&!(null==(t=e.section)?void 0:t.is_podcast)}},{label:r("Podcasts"),condition:e=>{var t;return!!(null==(t=e.section)?void 0:t.is_podcast)}}]}):n;let s=[...o,...W({groupedNavBarItems:a,pub:l})];if((0,L.O3)({pub:l})){var d,c;if((null==(c=l.theme)||null==(d=c.custom_header)?void 0:d.navStyle)==="stacked"){let e=s.findIndex(e=>"RECIPE INDEX"===e.label);-1!==e&&(s[e]=R)}}return s},P=e=>{let{navBarItems:t,groups:n}=e,l=[...t],i=[],r=[...t];for(let e of n)if(e.isStandalone){let t=l.find(e.condition);if(!t)continue;i.push(t),r=r.filter(e=>e!==t),e.excludeFromOthers&&(l=l.filter(e=>e!==t))}else{var o;let t=l.filter(e.condition);if(0===t.length)continue;i.push({label:null!=(o=e.label)?o:"Other",navBarItems:t}),r=r.filter(t=>!e.condition(t)),e.excludeFromOthers&&(l=l.filter(t=>!e.condition(t)))}return[...i,...r]},W=e=>{let{groupedNavBarItems:t,pub:n}=e;return t.map(e=>"navBarItems"in e?{label:e.label,subItems:e.navBarItems.map(e=>O({navBarItem:e,pub:n}))}:O({navBarItem:e,pub:n}))},O=e=>{var t,n,i,r,o,a,s;let{navBarItem:d,pub:c}=e;if(d.is_group)return{label:(0,D.truncateText)((0,y.ly)(d),30),subItems:(null!=(t=d.children)?t:[]).map(e=>O({navBarItem:e,pub:c}))};if(d.section){let e=d.section,t=e.is_podcast&&null!=(o=null==(i=c.sections.find(t=>t.id===e.id))||null==(n=i.podcastSettings)?void 0:n.podcast_art_url)?o:e.logo_url;return(0,h._)((0,l._)({label:null!=(a=null==(r=T[c.subdomain])?void 0:r[e.id])?a:(0,D.truncateText)(e.name,30),href:(0,F.Dor)(c,{section:e})},t?{logoUrl:t}:null),{slug:e.id})}let u=(0,y.DF)(d),m="link"===u&&!(d.standard_key||M.includes(null!=(s=d.link_url)?s:"")),f=m&&c.tier<2;return(0,h._)((0,l._)({href:(0,F.cSL)(c,d,{addBase:m}),label:(0,D.truncateText)((0,y.ly)(d),30)},f?{noFollow:f}:null,"page"===u?{isNative:!0}:null),{slug:(0,F.cSL)(c,d,{addBase:!1}),newTab:m})};var H=n(68349),V=n(35369);let q="visible-S5xqLB",j=e=>{let{isChatActive:t,isMeetingsActive:n,pub:l,selectedSectionId:r,maxWidth:a,withoutLeftPadding:s=!1,withoutRightPadding:d=!1}=e,{language:u}=(0,g.GO)(),{getSettingFor:h}=(0,v.Pu)(),{getConfigFor:m}=(0,b.mJ)(),f=!!m("publication_tabs_reorder"),p="100%"===a,[_,w]=(0,c.useState)(!1),Y=!!h("notes_feed_enabled"),k=!!(h("reader_referrals_enabled")&&h("reader_referrals_leaderboard_enabled")),C=z({groupNewsletters:!!h("group_sections_and_podcasts_in_menu_enabled"),navBarItems:(0,y.Bf)(l.navigationBarItems||[],{isFeedEnabled:Y,isChatActive:!!t,isChatEnabled:!!l.threads_v2_enabled,isMeetingsActive:!!n,hasMultipleNewsletters:l.sections&&l.sections.length>0,isReaderReferralsLeaderboardActive:k,language:u,useReordering:f}).filter(e=>!e.is_hidden),pub:l,language:u}).flatMap(e=>e.subItems?e.subItems:e),x=(0,c.useRef)(null),[S,A]=(0,c.useState)(!1),[N,E]=(0,c.useState)(!1),L=(0,c.useCallback)(e=>{let{scrollLeft:t,scrollWidth:n,clientWidth:l}=e;p||A(t>10),E(n-(l+t)>10)},[p]);(0,c.useLayoutEffect)(()=>{x.current&&L(x.current)},[C,L]);let F=(0,c.useCallback)(()=>{x.current&&(x.current.scrollWidth>x.current.clientWidth?w(!0):w(!1))},[]);return(0,c.useLayoutEffect)(()=>(window.addEventListener("resize",F),F(),()=>{window.removeEventListener("resize",F)}),[F]),(0,i.Y)(I.pT,{justifyContent:"center",alignItems:"center",style:{width:a,minWidth:280},paddingX:16*!!p,children:(0,i.FD)("div",{className:"scrollWrapper-acnikR",children:[!p&&(0,i.Y)("div",{className:o()("fadeLeft-eSWM6i",S&&q),style:{marginRight:p?"16px":0}}),(0,i.Y)(I.Ye,{ref:x,justifyContent:_?"start":"center",gap:8,wrap:"nowrap",className:"scrollContainer-Zw8XO7",onScroll:e=>{L(e.target)},paddingY:8,paddingLeft:p||s?0:40,paddingRight:p||d?0:40,children:C.map(e=>{var t;let n=e.slug===r;return(0,i.Y)(V.$n,{priority:n?"primary":"secondary-outline",size:"sm",onClick:()=>{e.onClick?e.onClick():e.href&&(0,H.V2)(e.href,{local_navigation:!e.isNative})},rounded:!0,color:n?"inherit":"secondary",children:e.label},null!=(t=e.slug)?t:e.label)})}),(0,i.Y)("div",{className:o()("fadeRight-6i2p1g",N&&q),style:{marginLeft:p?"16px":0}})]})})};var K=n(13950);let U=e=>{let{menuItems:t,maxWidth:n,itemGap:l,moreButtonWidth:i,containerPadding:r=32,isFullWidth:o=!1,windowWidth:a="undefined"!=typeof window?window.innerWidth:0,isSmallScreen:s=!1,reservedWidth:d=0}=e,u=(0,c.useRef)(null),h=(0,c.useRef)(null),m=(0,c.useRef)(null),[f,p]=(0,c.useState)([]),[g,v]=(0,c.useState)([]),[b,y]=(0,c.useState)(!1),_=(0,c.useCallback)(()=>{let e;if(!m.current)return;if(o)e=a-(s?20:40)-r;else if(n&&"number"==typeof n)e=n;else if(u.current)e=u.current.offsetWidth-r;else{if(!h.current)return;e=h.current.offsetWidth}e-=d;let c=[];m.current.querySelectorAll(".measure-item").forEach((e,n)=>{let l=e.offsetWidth;t[n]&&c.push({item:t[n],width:l,index:n})});let f=0,g=0;for(let t=0;t<c.length;t++){let n=c[t];if(!n)continue;let r=f+(t>0?l:0)+n.width;if(t===c.length-1){r<=e&&(f=r,g++);break}if(r+(l+i)<=e)f=r,g++;else break}0===g&&c.length>0&&(g=c.length);let b=t.slice(0,g),_=t.slice(g);p(e=>e.length!==b.length||e.some((e,t)=>{var n;return e.slug!==(null==(n=b[t])?void 0:n.slug)})?b:e),v(e=>e.length!==_.length||e.some((e,t)=>{var n;return e.slug!==(null==(n=_[t])?void 0:n.slug)})?_:e),y(!0)},[t,n,o,a,s,l,i,r,d]);return(0,c.useLayoutEffect)(()=>{if(_(),!o)return window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[_,o]),{measurementRef:m,containerRef:h,outerContainerRef:u,visibleItems:f,overflowItems:g,isReady:b}},J="chevron-fUHuKc",G="measurementContainer-Wd518f",$=e=>{let{isChatActive:t,isMeetingsActive:n,pub:l,selectedSectionId:r,hideBorders:a,maxWidth:s,alignStart:d}=e,{iString:u}=(0,g.GO)(),{isMobile:h}=(0,x.sM)(),m="100%"===s,[f,p]=(0,c.useState)("undefined"!=typeof window?window.innerWidth:0),v=f<=992,b=_({pub:l,isChatActive:t,isMeetingsActive:n}).filter(e=>!A(e)&&(!e.subItems||e.subItems.length>0)),y=b.filter(e=>e.subItems&&e.subItems.length>0),Y=b.filter(e=>!e.subItems||0===e.subItems.length),N=(0,c.useRef)(null),[E,L]=(0,c.useState)(0),{measurementRef:F,containerRef:D,outerContainerRef:T,visibleItems:M,overflowItems:B,isReady:R}=U({menuItems:Y,maxWidth:s,itemGap:0,moreButtonWidth:80,containerPadding:0,isFullWidth:m,windowWidth:f,isSmallScreen:v,reservedWidth:E}),z=(0,c.useMemo)(()=>new Set(M.map(e=>{var t;return null!=(t=e.slug)?t:e.label})),[M]);(0,c.useLayoutEffect)(()=>{if(!N.current)return;let e=N.current.querySelectorAll(".measure-group-item"),t=0;e.forEach(e=>{t+=e.offsetWidth}),L(t)},[y]),(0,c.useLayoutEffect)(()=>{let e=()=>{p(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let P=(e,t,n)=>{let{label:l,href:r,isNative:a,onClick:s,noFollow:d,subItems:c,newTab:u}=e;return c?(0,i.Y)(S.W1,{placement:"bottom-start",trigger:(0,i.Y)("div",{className:o()("menu-item",{selected:t}),children:(0,i.FD)(C.A,{native:a,rel:d?"nofollow":null,onClick:s,children:[(0,i.Y)("span",{className:"overflow-item-text",children:l}),(0,i.Y)(w.A,{className:J,size:16})]})}),children:c.map(e=>{let t=e.logoUrl;return(0,i.Y)(S.Dr,{href:e.href,leading:t?(0,i.Y)(k.c,{height:24,radius:"xs",src:t,width:24}):null,native:e.isNative,rel:e.noFollow?"nofollow":void 0,onClick:e.onClick,children:e.label},e.slug)})},n):(0,i.Y)("div",{className:o()("menu-item",{selected:t}),children:(0,i.Y)(C.A,{href:r,native:a,newTab:u,rel:d?"nofollow":null,onClick:s,children:(0,i.Y)("span",{className:"overflow-item-text",children:l})})},n)};return(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{ref:F,className:G,children:Y.map((e,t)=>(0,i.Y)("div",{className:"measure-item",children:P(e,!1,"measure-".concat(t))},t))}),(0,i.Y)("div",{ref:N,className:G,children:y.map((e,t)=>(0,i.Y)("div",{className:"measure-group-item",children:P(e,!1,"measure-group-".concat(t))},t))}),(0,i.Y)("div",{ref:T,className:o()("overflow-list-container","sections-overflow"),style:{maxWidth:m?"100%":s,width:m?"100%":void 0,paddingLeft:m&&!v?20:void 0,paddingRight:m?20:void 0,visibility:R?"visible":"hidden"},children:(0,i.Y)(I.Ye,{ref:D,borderBottom:a?void 0:"detail",borderTop:a||h?void 0:"detail",className:"section-bar",font:"text",height:h?44:48,justifyContent:h||v||d?"start":"center",position:"relative",children:(0,i.FD)("div",{className:"overflow-items",children:[b.map(e=>{var t;let n=e.subItems&&e.subItems.length>0,l=null!=(t=e.slug)?t:e.label;if(!(n||!R||z.has(l)))return null;let i=e.slug===r;return P(e,i,l)}),B.length>0&&(0,i.Y)(S.W1,{placement:"bottom-start",trigger:(0,i.Y)("div",{className:"menu-item",children:(0,i.FD)(C.A,{children:[(0,i.Y)("span",{className:"overflow-item-text",children:u("More")}),(0,i.Y)(w.A,{className:J,size:16})]})}),children:B.map(e=>{let t=e.noFollow?null:e.logoUrl;return(0,i.Y)(S.Dr,{href:e.href,leading:t?(0,i.Y)(k.c,{height:24,radius:"xs",src:t,width:24}):null,native:e.isNative,rel:e.noFollow?"nofollow":void 0,onClick:e.onClick,children:e.label},e.slug)})},"more-menu")]})})})]})},X="measurementContainer-lK1Sqq",Z="chevron-J7_gYb",Q=e=>{let{isChatActive:t,isMeetingsActive:n,pub:l,selectedSectionId:r,maxWidth:o}=e,{iString:a}=(0,g.GO)(),s="100%"===o,[d,u]=(0,c.useState)("undefined"!=typeof window?window.innerWidth:0),h=_({pub:l,isChatActive:t,isMeetingsActive:n}).filter(e=>!A(e)&&(!e.subItems||e.subItems.length>0)),m=h.filter(e=>e.subItems&&e.subItems.length>0),f=h.filter(e=>!e.subItems||0===e.subItems.length),p=(0,c.useRef)(null),[v,b]=(0,c.useState)(0),{measurementRef:y,containerRef:Y,visibleItems:C,overflowItems:x,isReady:N}=U({menuItems:f,maxWidth:o,itemGap:8,moreButtonWidth:80,containerPadding:32,isFullWidth:s,windowWidth:d,reservedWidth:v});return(0,c.useLayoutEffect)(()=>{if(!p.current)return;let e=p.current.querySelectorAll(".measure-group-item"),t=0;e.forEach(e=>{t+=e.offsetWidth+8}),b(t)},[m]),(0,c.useLayoutEffect)(()=>{let e=()=>{u(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{ref:y,className:X,children:f.map((e,t)=>(0,i.Y)(V.$n,{className:"measure-item",priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:e.label},t))}),(0,i.Y)("div",{ref:p,className:X,children:m.map((e,t)=>(0,i.FD)(V.$n,{className:"measure-group-item",priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:[e.label,(0,i.Y)(w.A,{className:Z,size:16})]},t))}),(0,i.Y)(I.pT,{justifyContent:"center",alignItems:"center",style:{width:s?"100%":o,minWidth:160,visibility:N?"visible":"hidden"},paddingX:16*!!s,children:(0,i.FD)(I.Ye,{ref:Y,justifyContent:"center",gap:8,wrap:"nowrap",paddingY:8,children:[C.map(e=>{var t;let n=e.slug===r;return(0,i.Y)(V.$n,{priority:n?"primary":"secondary-outline",size:"sm",onClick:()=>{e.onClick?e.onClick():e.href&&(0,H.V2)(e.href,{local_navigation:!e.isNative})},rounded:!0,color:n?"inherit":"secondary",children:e.label},null!=(t=e.slug)?t:e.label)}),m.map(e=>{var t,n;return(0,i.Y)(S.W1,{placement:"bottom-start",trigger:(0,i.FD)(V.$n,{priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:[e.label,(0,i.Y)(w.A,{className:Z,size:16})]}),children:null==(t=e.subItems)?void 0:t.map(e=>{var t;let n=e.noFollow?null:e.logoUrl;return(0,i.Y)(S.Dr,{href:e.href,native:e.isNative,onClick:e.onClick,leading:n?(0,i.Y)(k.c,{height:24,radius:"xs",src:n,width:24}):null,children:e.label},null!=(t=e.slug)?t:e.label)})},null!=(n=e.slug)?n:e.label)}),x.length>0&&(0,i.Y)(S.W1,{placement:"bottom-start",trigger:(0,i.FD)(V.$n,{priority:"secondary-outline",size:"sm",rounded:!0,color:"secondary",children:[a("More"),(0,i.Y)(w.A,{className:Z,size:16})]}),children:x.map(e=>{let t=e.noFollow?null:e.logoUrl;return(0,i.Y)(S.Dr,{href:e.href,native:e.isNative,onClick:e.onClick,leading:t?(0,i.Y)(k.c,{height:24,radius:"xs",src:t,width:24}):null,children:e.label},e.slug)})})]})})]})};var ee=n(89230),et=n(3680),en=n(33764),el=n(89490),ei=n(91401),er=n(75303),eo=n(63136);let ea="menuItem-DLEJaw",es=e=>{let{item:t,pub:n,selectedSectionId:l,onClose:r,depth:o=0}=e,[a,s]=(0,c.useState)(!1),d=t.logoUrl;if(t.subItems&&t.subItems.length>0)return(0,i.FD)(I.VP,{children:[(0,i.Y)(V.$n,{onClick:()=>s(!a),className:ea,priority:"tertiary",children:(0,i.FD)(I.Ye,{alignItems:"center",justifyContent:"space-between",gap:12,paddingY:12,children:[(0,i.Y)(I.Ye,{alignItems:"center",gap:12,children:(0,i.Y)(eo.EY,{weight:"regular",font:"text",children:t.label})}),(0,i.Y)(w.A,{size:20,style:{transform:a?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s ease"}})]})}),a&&(0,i.Y)(I.VP,{paddingTop:8,paddingLeft:0===o?8:16,children:t.subItems.map(e=>(0,i.Y)(es,{item:e,pub:n,selectedSectionId:l,onClose:r,depth:o+1},e.label))})]});if(t.subItems)return null;let u=t.slug===l;return(0,i.Y)(C.A,{href:t.href,native:t.isNative,rel:t.noFollow?"nofollow":void 0,onClick:()=>{var e;null==(e=t.onClick)||e.call(t),r()},className:ea,"data-selected":u,children:(0,i.FD)(I.Ye,{alignItems:"center",gap:12,paddingLeft:16*!d,paddingY:12,children:[d&&(0,i.Y)(k.c,{height:24,radius:"xs",src:d,width:24}),(0,i.Y)(eo.EY,{font:"text",children:t.label})]})})},ed=e=>{var t;let{item:n,pub:l,selectedSectionId:r,onClose:o,onToggleExpand:a,isExpanded:s}=e;return(0,i.FD)(I.VP,{gap:0,children:[(0,i.Y)(V.$n,{size:"sm",onClick:()=>null==a?void 0:a(n.label),className:ea,priority:"tertiary",children:(0,i.FD)(I.Ye,{alignItems:"center",justifyContent:"space-between",gap:12,paddingY:4,paddingLeft:8,children:[(0,i.Y)(I.Ye,{alignItems:"center",gap:12,children:(0,i.Y)(eo.EY,{weight:"regular",font:"text",children:n.label})}),(0,i.Y)(w.A,{size:20,style:{transform:s?"rotate(0deg)":"rotate(-90deg)",transition:"transform 0.2s ease"}})]})}),s&&(0,i.Y)(I.VP,{gap:0,paddingTop:8,paddingLeft:8,children:null==(t=n.subItems)?void 0:t.map(e=>(0,i.Y)(es,{item:e,pub:l,selectedSectionId:r,onClose:o,depth:1},e.label))})]})},ec=e=>{let{item:t,selectedSectionId:n,onClose:l}=e,r=t.slug===n;return(0,i.Y)(C.A,{href:t.href,native:t.isNative,rel:t.noFollow?"nofollow":void 0,onClick:()=>{var e;null==(e=t.onClick)||e.call(t),l()},className:ea,"data-selected":r,children:(0,i.Y)(I.Ye,{alignItems:"center",gap:12,paddingX:16,paddingY:4,sizing:"border-box",height:32,children:(0,i.Y)(eo.EY,{font:"text",children:t.label})})})},eu=e=>{let{isChatActive:t,isMeetingsActive:n,pub:l,selectedSectionId:r}=e,{iString:o}=(0,g.GO)(),[a,s]=(0,c.useState)(!1),[d,u]=(0,c.useState)(new Set),h=_({pub:l,isChatActive:t,isMeetingsActive:n}).filter(e=>"/"!==e.href&&(!e.subItems||e.subItems.length>0)),m=()=>{s(!1)},f=e=>{u(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})};return(0,i.FD)(i.FK,{children:[(0,i.Y)(V.K0,{size:"md",priority:"tertiary","aria-label":o("Navigation menu"),onClick:()=>s(!0),children:(0,i.Y)(ee.A,{size:20})}),(0,i.Y)(ei._,{isOpen:a,onClose:m,width:320,className:"drawer-_gS8Z4",style:a?{}:{visibility:"hidden"},children:(0,i.Y)(ei._.Body,{radius:"none",children:(0,i.FD)(I.VP,{gap:16,children:[(0,i.Y)(I.Ye,{alignItems:"start",paddingX:8,gap:12,children:(0,i.Y)(el.az,{onClick:m,cursor:"pointer",children:(0,i.Y)(et.A,{height:24})})}),(0,i.Y)(I.Ye,{paddingX:8,paddingBottom:4,justifyContent:"center",children:(0,i.Y)(er.AE,{href:"/",onClick:m,children:l.logo_url_wide?(0,i.Y)(en.o,{src:l.logo_url_wide,maxWidth:224,useRetinaSizing:!0,imageIsFixedWidth:!0}):l.name})}),h.map(e=>{var t;return(null==(t=e.subItems)?void 0:t.length)?(0,i.Y)(ed,{item:e,pub:l,selectedSectionId:r,onClose:m,onToggleExpand:f,isExpanded:d.has(e.label)},e.label):(0,i.Y)(ec,{item:e,pub:l,selectedSectionId:r,onClose:m},e.label)})]})})})]})},eh=()=>Math.max(document.documentElement.scrollTop||document.body.scrollTop,0),em=e=>{let{alwaysShow:t,disable:n,menuContentRef:l,menuHeight:i,ignoreScroll:r=!1}=e,o=(0,c.useRef)(!1),a=(0,c.useRef)(eh()),s=(0,c.useRef)(eh()),d=(0,c.useCallback)((e,t)=>{a.current=t,l.current&&(l.current.style.position=e,l.current.style.top="fixed"===e&&t>=0?"":"".concat(t,"px"))},[l]),u=(0,c.useCallback)(()=>{d("absolute",eh()-i),o.current=!1},[i,d]),h=(0,c.useCallback)(e=>{let t=e.target;((null==t?void 0:t.classList.contains("footnote-number"))||(null==t?void 0:t.classList.contains("footnote-anchor")))&&(o.current=!0,setTimeout(u,0))},[u]),m=(0,c.useCallback)(()=>{var e;if(t)return void d("fixed",0);if(o.current)return;let r=s.current;s.current=eh();let c=s.current,u=(null==(e=l.current)?void 0:e.style.position)==="fixed",h=c<=0||0>=(0,H.A9)(),m=c>=(0,H.A9)(),f=c>r,p=c<r;if(h)return void d("fixed",0);if(n)return void d("absolute",0);if(!m){if(f){if(u&&a.current>=0)return void d("absolute",c);if(!u&&a.current<c-i)return void d("fixed",-i)}if(p){if(a.current>c)return void d("fixed",c);let e=Math.max(c-i,0);if(a.current<e)return void d("absolute",e)}}},[t,l,n,d,i]);(0,c.useEffect)(()=>{if("undefined"!=typeof window&&!r)return window.addEventListener("scroll",m),window.addEventListener("click",h),m(),()=>{window.removeEventListener("scroll",m),window.removeEventListener("click",h)}},[n,h,m,d,r])};var ef=n(86500),ep=n(44333),eg=n(81203),ev=n(72682),eb=n(71783),ey=n(8312),e_=n(37764),ew=n(39318),eY=n(57324);let ek={mainMenuContent:"mainMenuContent-DME8DR",profileContext:"profileContext-urkyyv",relative:"relative-ozgOAS",topBar:"topBar-pIF0J1",titleWithWordmark:"titleWithWordmark-GfqxEZ",titleContainer:"titleContainer-DJYq5v",overflowVisible:"overflowVisible-joA5t0",fullScreen:"fullScreen-Zzi89N",title:"title-oOnUGd",buttonsContainer:"buttonsContainer-SJBuep",logoContainer:"logoContainer-p12gJb",wordmark:"wordmark-WcDTTu",logoLeftAvatar:"logoLeftAvatar-XEWHpd",logoLeftWordmark:"logoLeftWordmark-FeTNhG",logoCenterPostAvatar:"logoCenterPostAvatar-MJBapZ",logoLeftPostAvatar:"logoLeftPostAvatar-lNfa5H",logoCenterPostWordmark:"logoCenterPostWordmark-j7Svao",logoLeftPostWordmark:"logoLeftPostWordmark-ERptdm",logoLeftNav:"logoLeftNav-eAaUI5",logoCenterSlot:"logoCenterSlot-xJtI3r",logoCenterPostSlot:"logoCenterPostSlot-qYOnTB",logoTopCenterSlot:"logoTopCenterSlot-hss6WZ",stackedTopCenter:"stackedTopCenter-TPTTqw",logoCenterPostLeftSlot:"logoCenterPostLeftSlot-EIqNto"},eC=e=>{let{pub:t,wordmarkHeight:n,isMinimized:r=!1,maxWordmarkSize:o,wordmarkFont:a,headingFont:s}=e;if(t.logo_url_wide)return(0,i.Y)("img",{alt:t.name,src:(0,F.dJ9)(t.logo_url_wide,null,{height:2*n,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"],aspect:1318/252}),className:ek.wordmark,style:{maxHeight:Math.max(20,r?eF:n)}});let d=(0,f.$L)(n,f.Rc,o/2),c=null!=a?a:s,u=c?(0,ey.OK)(c):null;return(0,i.Y)("span",{style:(0,l._)({fontSize:"".concat(d,"rem"),lineHeight:1},u),children:t.name})},ex=e=>{var t;let{pub:n,wordmarkHeight:l,maxWordmarkSize:r,homeHref:a,fullScreen:s=!1,isMinimized:d=!1,anchor:c="center",wordmarkFont:u,headingFont:h}=e,m=n.logo_url_wide?f.be:f.Rc,p=n.logo_url_wide?r:r/2,g=n.logo_url_wide?l:l&&l!==eL?Math.min(Math.max(l,m),p):f.YR;return(0,i.Y)("div",{className:o()(ek.titleContainer,ek.overflowVisible,s&&ek.fullScreen),style:{flexGrow:0,maxWidth:"100%"},children:(0,i.Y)(eo.EY,{as:"h1",className:o()(ek.title,{[null!=(t=ek.titleWithWordmark)?t:""]:n.logo_url_wide}),font:"pub-headings",id:"wordlogo",children:(0,i.Y)(er.AE,{href:a,children:(0,i.Y)(ev.c,{anchor:c,max:p,min:m,property:"wordmarkLogoSize",value:g,children:e=>(0,i.Y)(eC,{headingFont:h,isMinimized:d,maxWordmarkSize:r,pub:n,wordmarkFont:u,wordmarkHeight:e})})})})})},eI=e=>{var t,n,r,a,s,g,v,y,_,w,Y,k,C,S,A,N;let{className:E,freeSignup:D,freeSignupEmail:T,hideNavBar:M,hideTitle:R,isAccountContext:z,isChatActive:P,isMeetingsActive:W,isPostView:O,pub:H,selectedSectionId:q,showCustomerSupportModeModal:U,user:J}=e;R="profile"===H.homepage_type||R;let{getConfigFor:G}=(0,b.mJ)(),{isMobile:X}=(0,x.sM)(),Z=(0,m.md)(eb.Jv),ee=(0,m.md)(eb.MS),[et]=(0,ep.rd)(),en=(0,c.useRef)(null),el=(0,c.useRef)(null),ei="profile"===H.homepage_type,er=ei&&et.path.match(/\/profile\/(subscribers|followers|following)/),eo=!ei&&!!H.logo_url&&!(0,L.S2)({pub:H}),ea=!R,es=!!G("show_menu_on_posts"),ed=O?es:!M,ec=(e=>{var t,n,l,i,r,o,a;let s,{theme:d,isPostView:c=!1,showNavOnPosts:u=!1}=e,h=(null==d||null==(t=d.custom_header)?void 0:t.layout)||e_.Tb.layout,m=(null==d||null==(n=d.custom_header)?void 0:n.navPosition)||e_.Tb.navPosition,{max:p}=(0,f.TB)({layout:h,navPosition:m,isPostView:c}),g=(null==d||null==(l=d.custom_header)?void 0:l.navStyle)==="stacked",v="stacked"===h?"top"===m&&(!c||u)?"bottom-center":"top-center":"logo_left"===h?"top-left":"top-center";return"stacked"===h?(s="top"===m?"top-center":"bottom-center",g&&(s="top-left")):s="logo_left"===h?"top-center":"top-left",{layout:h,wordmarkLogoSize:Math.min((null==d||null==(i=d.custom_header)?void 0:i.wordmarkLogoSize)||eL,p),maxWordmarkSize:p,wordmarkPosition:v,publicNavPosition:s,publicNavStyle:(null==d||null==(r=d.custom_header)?void 0:r.navStyle)||"text",backgroundColor:null!=(a=null==d||null==(o=d.custom_header)?void 0:o.backgroundColor)?a:void 0}})({theme:Z&&H.theme?(0,h._)((0,l._)({},H.theme),{custom_header:(0,l._)({},e_.Tb,H.theme.custom_header,Z)}):H.theme,isPostView:O,showNavOnPosts:es}),{wordmarkPosition:eh,wordmarkLogoSize:ev,maxWordmarkSize:ey,publicNavPosition:eC,layout:eI}=ec,eA=null!=ee?ee:null==(n=H.theme)||null==(t=n.font_options)?void 0:t.wordmark,eN=null!=(g=null==(a=H.theme)||null==(r=a.font_options)?void 0:r.heading)?g:null==(s=H.theme)?void 0:s.font_preset_heading,eF="buttons"===ec.publicNavStyle,eD="stacked"===ec.publicNavStyle,eT="logo_center"===eI&&eD?"stacked":eI,eM=X?240:340,eB=X?160:300,eP=X&&"bottom-center"!==eh?eE:ev||(H.logo_url_wide?eL:f.YR),{currentTopBarHeight:eW,currentMenuHeight:eO,isMinimized:eH}=eS({forceMaximized:!O&&!z,forceMinimized:!!z,isMobile:X,showNavBar:"stacked"===eT&&!eD&&ed,showWordmark:ea,themeLayoutOptions:ec,scaledWordmarkHeight:eP,isTextWordmark:!H.logo_url_wide}),eV=X?eR:ez,eq=!X&&"top-center"===eh&&("stacked"===eT||"logo_center"===eT),ej="bottom-center"===eh;em({alwaysShow:!1,disable:!O,menuContentRef:en,menuHeight:eO,ignoreScroll:ej});let eK=z?(0,F.$_T)(H):"/",eU=ei&&!O&&!z&&!X,eJ=()=>{(0,ef.u4)(ef.qY.NAV_BAR_HOME_LINK_CLICKED)},eG=!!ec.backgroundColor;return(0,i.Y)(K.DH,{prefix:eG?"header":void 0,children:(0,i.FD)("div",{className:o()("main-menu",E),"data-testid":"navbar",children:[(0,i.FD)("div",{ref:en,className:o()(ek.mainMenuContent,eU&&ek.profileContext,ej&&ek.relative),children:[(0,i.FD)(I.Ye,{alignItems:"center",borderBottom:ed?void 0:"detail",className:ek.topBar,gap:12,justifyContent:"space-between",paddingBottom:X?12*!ed:0,paddingTop:12*!!X,paddingX:eV,style:X?void 0:{position:"relative",height:eW-1},children:[R||"top-left"!==eh?ed&&"top-left"===eC?(0,i.Y)("div",{className:o()(ek.logoContainer,{[null!=(_=ek.logoLeftNav)?_:""]:"logo_center"===eT}),style:{display:ei?"none":null,flexBasis:0,flexGrow:1},children:eF?(0,i.Y)(Q,{isChatActive:!0,isMeetingsActive:!1,maxWidth:eB,pub:H,selectedSectionId:q}):eD?(0,i.Y)(eu,{isChatActive:P,pub:H,selectedSectionId:q}):(0,i.Y)($,{alignStart:!0,hideBorders:!0,isChatActive:P,isMeetingsActive:W,pub:H,selectedSectionId:q,maxWidth:eM})}):(0,i.FD)("div",{className:o()(ek.logoContainer,{[null!=(w=ek.stackedTopCenter)?w:""]:"stacked"===eT&&"top-center"===eh,[null!=(Y=ek.logoCenterPostLeftSlot)?Y:""]:"logo_center"===eT&&O}),style:{display:ei?"none":null,visibility:eo?"visible":"hidden",flexBasis:0,flexGrow:1},children:[ei&&(0,i.FD)(I.Ye,{alignItems:"center",gap:40,children:[(0,i.Y)(I.pT,{alignItems:"center",as:"a",height:20,href:(0,F.yRP)((0,F.$_T)(),{utm_content:eY.fL.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:(0,i.Y)(u.A,{style:{transform:"scale(1.4)"}})}),er&&(0,i.Y)(V.K0,{className:ek.backButton,href:(0,ew.fOI)(H),size:"md",children:(0,i.Y)(d.A,{size:20})})]}),eo&&(0,i.Y)(eg.wg,{href:eK,pub:H,size:40,onClick:eJ})]}):"logo_left"===ec.layout?(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:o()(ek.logoLeftAvatar,{[null!=(v=ek.logoLeftPostAvatar)?v:""]:O}),children:(0,i.Y)(eg.wg,{href:eK,pub:H,size:40,onClick:eJ})}),(0,i.Y)("div",{className:o()(ek.logoLeftWordmark,{[null!=(y=ek.logoLeftPostWordmark)?y:""]:O}),children:(0,i.Y)(ex,{anchor:"left",headingFont:eN,homeHref:eK,maxWordmarkSize:ey,pub:H,wordmarkFont:eA,wordmarkHeight:eP,isMinimized:eH})})]}):(0,i.Y)(ex,{anchor:"left",headingFont:eN,homeHref:eK,maxWordmarkSize:ey,pub:H,wordmarkFont:eA,wordmarkHeight:eP,isMinimized:eH}),!R&&"top-center"===eh&&(0,i.Y)("div",{className:o()({[null!=(k=ek.logoCenterSlot)?k:""]:"logo_center"===eT,[null!=(C=ek.logoCenterPostSlot)?C:""]:"logo_center"===eT&&O,[null!=(S=ek.logoTopCenterSlot)?S:""]:"stacked"===eT}),style:{flexBasis:0,flexGrow:eq||X?2:0,display:"flex",justifyContent:X?"flex-start":"center"},children:"logo_center"===eT?(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:o()(ek.logoLeftAvatar,{[null!=(A=ek.logoCenterPostAvatar)?A:""]:O}),style:{visibility:eo?"visible":"hidden"},children:(0,i.Y)(eg.wg,{href:eK,pub:H,size:40,onClick:eJ})}),(0,i.Y)("div",{className:o()(ek.logoLeftWordmark,{[null!=(N=ek.logoCenterPostWordmark)?N:""]:O}),children:(0,i.Y)(ex,{headingFont:eN,homeHref:eK,maxWordmarkSize:ey,pub:H,wordmarkFont:eA,wordmarkHeight:eP,isMinimized:eH})})]}):(0,i.Y)(ex,{headingFont:eN,homeHref:eK,maxWordmarkSize:ey,pub:H,wordmarkFont:eA,wordmarkHeight:eP,isMinimized:eH})}),ed&&"top-center"===eC&&(0,i.FD)(i.FK,{children:[(0,i.Y)(I.pT,{alignItems:"center",justifyContent:"center",sizing:"border-box",style:{flexBasis:0,flexGrow:2*(!R&&"top-left"===eh),maxWidth:"100%",visibility:"hidden",width:510},children:(0,i.Y)("div",{style:{width:510,height:1}})}),(0,i.Y)("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)"},children:eF?(0,i.Y)(Q,{isChatActive:!0,isMeetingsActive:!1,maxWidth:eB,pub:H,selectedSectionId:q}):(0,i.Y)($,{hideBorders:!0,isChatActive:P,isMeetingsActive:W,pub:H,selectedSectionId:q,maxWidth:eM})})]}),(0,i.Y)(I.Ye,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:+("logo_left"!==eI)},children:(0,i.Y)("div",{ref:el,className:ek.buttonsContainer,children:(0,i.Y)(p.A,{freeSignup:D,freeSignupEmail:T,isMeetingsActive:W,pub:H,showCustomerSupportModeModal:U,user:J})})})]}),ed&&"bottom-center"===eC&&("buttons"===ec.publicNavStyle?(0,i.Y)(I.pT,{alignItems:"center",justifyContent:"start",children:(0,i.Y)(j,{isChatActive:!0,isMeetingsActive:!1,maxWidth:"100%",pub:H,selectedSectionId:q})}):(0,i.Y)(B,{isChatActive:P,isMeetingsActive:W,pub:H,selectedSectionId:q})),!R&&"bottom-center"===eh&&(0,i.Y)(I.Ye,{justifyContent:"center",paddingY:8,children:(0,i.Y)(ex,{fullScreen:!0,headingFont:eN,homeHref:eK,maxWordmarkSize:ey,pub:H,wordmarkFont:eA,wordmarkHeight:eP})})]}),!ej&&(0,i.Y)("div",{style:{height:eO}})]})})},eS=e=>{let{forceMaximized:t,forceMinimized:n,isMobile:l,showNavBar:i,showWordmark:r,themeLayoutOptions:o,scaledWordmarkHeight:a,isTextWordmark:d=!1}=e,[u,h]=(0,c.useState)(!1),m=(0,c.useRef)(null),p=!!n||!t&&u,g=e=>{if(l)return i?eD:eT;if(r){let e=d?f.Rc:eL;return(d?eM:eB)+("bottom-center"!==o.wordmarkPosition&&!p&&a>e?a-e:0)}return eM},v=i?l?eP:eW:0,b=g(p),y=g(!1),_="bottom-center"===o.wordmarkPosition?a:0,w=y+v+_,Y=(0,c.useCallback)(()=>{let e=m.current,t=document.documentElement.scrollTop||document.body.scrollTop;m.current=t,s()(e)||(t>e?t>w+5&&h(!0):t<=0&&h(!1))},[w]);return(0,c.useEffect)(()=>{h(!1)},[o.wordmarkPosition,o.layout]),(0,c.useEffect)(()=>(window.addEventListener("scroll",Y),()=>window.removeEventListener("scroll",Y)),[Y]),{currentTopBarHeight:b,currentMenuHeight:b+v+_,isMinimized:p}};var eA=n(73815),eN=n(10455);let eE=20,eL=36,eF=40,eD=44,eT=56,eM=72,eB=88,eR=12,ez=20,eP=45,eW=50,eO=e=>{var t;let{className:n,freeSignup:r,freeSignupEmail:a,hideNavBar:s,hideTitle:h,isAccountContext:m,isChatActive:f,isMeetingsActive:g,isPostView:v,pub:y,selectedSectionId:_,showCustomerSupportModeModal:w,user:Y,profile:k}=e;h="profile"===y.homepage_type||h;let{getConfigFor:C}=(0,b.mJ)(),{isMobile:S}=(0,x.sM)(),[A]=(0,ep.rd)(),N=(0,c.useRef)(null),E=(0,c.useRef)(null),D=(0,c.useRef)(null),T="profile"===y.homepage_type,M=T&&A.path.match(/\/profile\/(subscribers|followers|following)/),R=!T&&!!y.logo_url&&!(0,L.S2)({pub:y}),z=!!(!h&&y.logo_url_wide),P=v?!!C("show_menu_on_posts"):!s,W=(0,L.S2)({pub:y})||!!(C("larger_wordmark_on_publication_homepage")&&z),{currentMenuHeight:O,currentTopBarHeight:H,isMinimized:q,maxMenuHeight:j}=eV({hasExpandableTopBar:W,forceMaximized:!v&&!m,forceMinimized:!!m,isMobile:S,showNavBar:P,showWordmark:z}),K=S?eR:W?40:ez,U=!S&&W&&q?20:0,J=S?W?32:eE:W?72:eL,G=!S&&W&&q?eF/72:1;em({alwaysShow:!1,disable:!v,menuContentRef:N,menuHeight:O});let{shouldCenterTitle:$}=eq({buttonsRef:D,titleRef:E,horizontalGap:12,horizontalPadding:W?40:ez}),X=S||!$,Z=m?(0,F.$_T)(y):"/",Q=T&&!v&&!m&&!S;return(0,i.Y)(ej,{profile:k,pub:y,useAccentTheme:!!m,children:(0,i.FD)("div",{className:o()("main-menu",n),"data-testid":"navbar",children:[(0,i.FD)("div",{ref:N,className:o()(ek.mainMenuContent,Q&&ek.profileContext),children:[(0,i.FD)(I.Ye,{alignItems:"center",borderBottom:P?void 0:"detail",className:ek.topBar,gap:12,justifyContent:"space-between",paddingBottom:S?12*!P:void 0,paddingTop:S?12:void 0,paddingX:K,style:S?void 0:{position:"relative",height:H-1},children:[(0,i.FD)("div",{className:ek.logoContainer,style:(0,l._)({display:T||!R&&X?"none":null,flexBasis:0,flexGrow:+!X},W?{transform:"translateX(-".concat(U,"px)")}:null),children:[T&&(0,i.FD)(I.Ye,{alignItems:"center",gap:40,children:[(0,i.Y)(I.pT,{alignItems:"center",as:"a",height:20,href:(0,F.yRP)((0,F.$_T)(),{utm_content:eY.fL.islandSubstackLogo}),justifyContent:"center",tabIndex:-1,width:20,children:S?(0,i.Y)(u.A,{height:24}):(0,i.Y)(u.A,{style:{transform:"scale(1.4)"}})}),M&&(0,i.Y)(V.K0,{className:ek.backButton,href:(0,ew.fOI)(y),size:S?"sm":"md",children:(0,i.Y)(d.A,{size:20})})]}),R&&(0,i.Y)(eg.wg,{href:Z,pub:y,size:S?32:40,onClick:()=>{(0,ef.u4)(ef.qY.NAV_BAR_HOME_LINK_CLICKED)}})]}),!h&&(0,i.Y)("div",{ref:E,className:ek.titleContainer,style:(0,l._)({flexGrow:0},W?{transform:"translateX(".concat(X?-U:0,"px)")}:null),children:(0,i.Y)(eo.EY,{as:"h1",className:o()(ek.title,{[null!=(t=ek.titleWithWordmark)?t:""]:y.logo_url_wide}),font:"pub-headings",children:(0,i.Y)(er.AE,{href:Z,children:y.logo_url_wide?(0,i.Y)("img",{alt:y.name,src:(0,F.dJ9)(y.logo_url_wide,null,{height:2*J,crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:(0,l._)({display:"block",height:J},W?{transform:"scale(".concat(G,")"),transformOrigin:X?"left":"center"}:null)}):y.name})})}),(0,i.Y)(I.Ye,{alignItems:"center",justifyContent:"end",style:{flexBasis:0,flexGrow:1},children:(0,i.Y)("div",{ref:D,className:ek.buttonsContainer,style:W?{transform:"translateX(".concat(U,"px)")}:void 0,children:(0,i.Y)(p.A,{freeSignup:r,freeSignupEmail:a,isMeetingsActive:g,pub:y,showCustomerSupportModeModal:w,user:Y})})})]}),P&&(0,i.Y)(B,{isChatActive:f,isMeetingsActive:g,pub:y,selectedSectionId:_})]}),(0,i.Y)("div",{style:{height:j}})]})})},eH=e=>{var t;return(null==(t=e.pub.theme)?void 0:t.custom_header)?(0,i.Y)(eI,(0,l._)({},e)):(0,i.Y)(eO,(0,l._)({},e))},eV=e=>{let{forceMaximized:t,forceMinimized:n,hasExpandableTopBar:l,isMobile:i,showNavBar:r,showWordmark:o}=e,[a,d]=(0,c.useState)(!1),u=(0,c.useRef)(null),h=!!n||!t&&a,m=e=>i?r?l?44:eD:eT:l?e?72:120:o?eB:eM,f=r?i?eP:eW:0,p=m(n)+f,g=m(h),v=(0,c.useCallback)(()=>{let e=u.current,t=document.documentElement.scrollTop||document.body.scrollTop;u.current=t,s()(e)||(t>e?t>p+5&&d(!0):t<=0&&d(!1))},[p]);return(0,c.useEffect)(()=>(window.addEventListener("scroll",v),()=>window.removeEventListener("scroll",v)),[v]),{currentMenuHeight:g+f,currentTopBarHeight:g,isMinimized:h,maxMenuHeight:p}},eq=e=>{let{buttonsRef:t,titleRef:n,horizontalGap:l,horizontalPadding:i}=e,{isMobile:r}=(0,x.sM)(),[o,a]=(0,c.useState)(!r),s=(0,c.useCallback)(()=>{if(!t.current||!n.current)return;if(r)return void a(!1);let e=t.current.getBoundingClientRect().width,o=n.current.getBoundingClientRect().width;a(.5*document.body.clientWidth-e-l-i>.5*o)},[t,l,i,r,n]);return(0,c.useEffect)(()=>(window.addEventListener("resize",s),s(),setTimeout(s,0),()=>{window.removeEventListener("resize",s)}),[s]),{shouldCenterTitle:o}},ej=e=>{let{profile:t,pub:n,useAccentTheme:l,children:r}=e;return l?(0,i.Y)(eA.Z,{children:r}):"profile"===n.homepage_type&&t?(0,i.Y)(eN.b,{theme:t.theme,children:r}):(0,i.Y)(K.DH,{children:r})}},6641:function(e,t,n){n.d(t,{S:()=>v});var l=n(4006),i=n(35426),r=n(38390),o=n(32485),a=n.n(o),s=n(48697),d=n(17402),c=n(13950),u=n(35369),h=n(76977),m=n(80988),f=n(45346),p=n(48028),g=n(55734);let v=e=>{let{children:t,disableCloseOnBackdropClick:n=!1,fullscreenMobile:o,hideCloseButton:v,initialFocus:b,isOpen:y,testId:_="modal",width:w=660,stretchModal:Y=!1,onClose:k=()=>void 0}=e,C=(0,d.useRef)(null);return(0,l.Y)(c.DH,{children:(0,l.Y)(r.bL,{open:y,onOpenChange:e=>{e||k()},children:(0,l.Y)(r.ZL,{forceMount:!0,children:(0,l.Y)(i.e.Root,{show:y,children:(0,l.FD)(m.k,{children:[(0,l.Y)(f.B,{children:(0,l.Y)(f.k,{disableCloseOnBackdropClick:n,onClose:k})}),(0,l.Y)(g.p,{children:(0,l.FD)(p.I,{className:Y?a()("modalBodyStretched-aq1p4E","the-free-press-theme"):a()("modalBody-s4SL_V","the-free-press-theme"),disableCloseOnBackdropClick:n,fullscreenMobile:o,initialFocus:void 0===b?C:b,testId:_,width:w,children:[(0,l.Y)("div",{ref:C,"aria-hidden":"true",style:{position:"absolute",left:"-9999px"},tabIndex:-1}),(0,l.Y)(c.DH,{children:(0,l.FD)(h.I1,{paddingTop:v?24:8,children:[!v&&(0,l.Y)(h.Ye,{justifyContent:"end",children:(0,l.Y)(r.bm,{asChild:!0,children:(0,l.Y)(u.K0,{priority:"quaternary",onClick:k,children:(0,l.Y)(s.A,{})})})}),t]})})]})})]})})})})})}},46275:function(e,t,n){n.d(t,{BR:()=>s,Sn:()=>a});var l=n(4006),i=n(17402),r=n(92636);let o=(0,i.createContext)({isOnDestination:(0,r.Sg)()});function a(e){let{children:t}=e,n=(0,i.useMemo)(()=>({isOnDestination:(0,r.Sg)()}),[]);return(0,l.Y)(o.Provider,{value:n,children:t})}function s(){return(0,i.useContext)(o)}o.displayName="IsDestinationContext"},97640:function(e,t,n){n.d(t,{Vd:()=>p,_b:()=>m});var l=n(4006),i=n(17402),r=n(79909),o=n(25006),a=n(94729),s=n(59922),d=n(12501),c=n(82772),u=n(68349),h=n(4016);function m(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:i=!1,activityToken:r,children:o}=e;return(0,l.Y)(g,{defaultState:null==t?void 0:t.activity,shouldLoad:n,shouldPoll:i,activityToken:r,children:o})}let f=(0,i.createContext)({lastViewedAt:null,activityUnreadCount:0,activityUnreadAtMax:!1,refetch:async()=>!0,markAllAsRead:async()=>{},hasLoadedOnce:!1});function p(){return(0,i.useContext)(f)}function g(e){let{defaultState:t,shouldLoad:n=!0,shouldPoll:m=!1,activityToken:p,children:g}=e,v=(0,d.st)({pathname:"/api/v1/activity/unread",deps:[],auto:n,initialResult:t,query:{token:p}}),b=(0,o.df)(),y=!!b&&(0,h.lu)({pub:b}),_=!(0,c.ov)()&&!y,w=async()=>{let e=await (0,a.x6)("/api/v1/activity/unread",{method:"post",json:{after:new Date().toISOString(),token:p}});v.setResult(e)};(0,s.A)(async()=>{if(m&&n&&(0,u.Tf)()){var e;let t=(null==(e=v.result)?void 0:e.count)||0,n=await v.refetch();if(t!==(!(n instanceof Error)&&n.count||0))return!0}},6e4);let Y=null!=v.result?v.result.count:0;return(0,i.useEffect)(()=>{try{var e,t;null==(e=(t=navigator).setAppBadge)||e.call(t,Y)}catch(e){console.warn(e)}},[Y]),(0,l.FD)(f.Provider,{value:{lastViewedAt:null!=v.result?v.result.lastViewedAt:null,activityUnreadCount:Y,activityUnreadAtMax:null!=v.result&&v.result.max,refetch:v.refetch,markAllAsRead:w,hasLoadedOnce:v.hasLoadedOnce},children:[(0,l.Y)(r.Metadata,{badge:_?Y:void 0}),g]})}f.displayName="NotificationsContext"},77405:function(e,t,n){n.d(t,{s:()=>eY,J:()=>eC});var l=n(69277),i=n(70408),r=n(32641),o=n(4006),a=n(32708),s=n(82853),d=n(42691),c=n(49436),u=n(48309),h=n(84934),m=n(70010),f=n(93540),p=n(80964),g=n(54718),v=n(47796),b=n(57157),y=n(17402),_=n(41935),w=n(94090),Y=n(82936),k=n(58050),C=n(84605),x=n(40691),I=n(85478),S=n(46271),A=n(27749),N=n(32485),E=n.n(N),L=n(45773),F=n(78834),D=n(70511),T=n(78649),M=n(33764),B=n(93355),R=n(86500),z=n(12501),P=n(17028),W=n(62870),O=n(93812),H=n(92563),V=n(29682),q=n(39318),j=n(49807),K=n(98949);let U={header:"header-LkrdOr",footer:"footer-EnTWMp",swatchContainer:"swatchContainer-aa9QGg",checkIconContainer:"checkIconContainer-OhnBup"};function J(e){var t,n,l,i,r,a;let{comment:s,imageShareAsset:d,aspectRatio:c}=e,{width:u,height:h}=(0,H.S8)(c),{img:m,imgDownload:f,shareData:p,useNativeShare:g}=(0,B.Y)({shareTitle:"A note from ".concat(s.name),shareText:s.body,shareUrl:(0,j.M$q)("c-".concat(s.id)),imageUrl:null!=(t=null==d?void 0:d.composed_url)?t:"",imageDownloadUrl:null!=(r=null!=(i=(0,q.tbS)({noteId:"c-".concat(s.id),variant:null!=(n=null==d?void 0:d.variant)?n:"orange",type:"composed",aspectRatio:null!=(l=null==d?void 0:d.aspectRatio)?l:"stories"}))?i:null==d?void 0:d.composed_url)?r:"",imageUrlSameOrigin:null!=(a=null==d?void 0:d.composed_url)?a:""});async function v(){if((0,R.u4)(R.qY.NOTE_IMAGE_ASSET_DOWNLOADED,{comment_id:s.id,aspect_ratio:null==d?void 0:d.aspectRatio,source:"note-image-asset",interaction:"click"}),p)try{await navigator.share(p)}catch(e){}}return(0,o.Y)(W.Cs,{onClick:v,href:g?void 0:f,children:(0,o.FD)(W.OK,{size:h,aspectRatio:u/h,children:[!(0,K.Fr)()&&m&&(0,o.Y)(W.lh,{onClick:v,width:u}),(0,o.Y)(W.BB,{img:m})]})})}function G(e){var t,n,l;let{comment:i}=e,[r,a]=(0,y.useState)("stories"),[s,d]=(0,y.useState)("orange"),c=((e,t)=>{let{result:n,error:l}=(0,z.st)({pathname:"/api/v1/note/assets/c-".concat(e.id),query:{aspectRatio:t},deps:[e.id,t],auto:!0});return(0,y.useMemo)(()=>l?[]:n,[n,l])})(i,r),u=null==c?void 0:c.find(e=>e.aspectRatio===r&&e.variant===s),h=null!=(l=null==(n=i.attachments)||null==(t=n.find(e=>"image"===e.type))?void 0:t.imageUrl)?l:i.photo_url;return(0,o.Y)(T.Q,{children:(0,o.FD)(Z,{children:[(0,o.Y)(P.az,{className:U.header,children:(0,o.Y)(Q,{aspectRatio:r,setAspectRatio:a})}),(0,o.Y)(P.Ye,{justifyContent:"center",padding:12,children:(0,o.Y)(J,{aspectRatio:r,comment:i,imageShareAsset:u})}),(0,o.Y)($,{selectedVariant:s,setSelectedVariant:d,photoUrl:h})]})})}function $(e){let{selectedVariant:t,setSelectedVariant:n,photoUrl:l}=e;return(0,o.Y)(P.fI,{gap:8,justifyContent:"center",children:V.ix.map(e=>(0,o.Y)(X,{variant:e,setSelectedVariant:n,isSelected:t===e,photoUrl:l},e))})}function X(e){let{variant:t,setSelectedVariant:n,isSelected:r,photoUrl:a}=e,s=(0,O.kE)({variant:t,width:32,height:32,backgroundImageSrc:a});return(0,o.FD)(P.az,{width:32,height:32,radius:"sm",cursor:"pointer",overflow:"hidden",sizing:"border-box",position:"relative",onClick:function(){n(t)},className:E()(U.swatchContainer,r&&U.selected),children:[(0,o.Y)(P.az,{className:U.checkIconContainer,children:r&&(0,o.Y)(L.A,{size:24})}),"css"===s.type?(0,o.Y)(P.az,{height:32,width:32,sizing:"border-box",style:s.style}):(0,o.Y)(M.o,{src:s.src,maxWidth:32,imageProps:(0,i._)((0,l._)({},s.imgProps),{height:32})})]})}let Z=(0,P.I4)({display:"flex",direction:"column",alignItems:"center",overflow:"hidden",paddingBottom:20});function Q(e){let{aspectRatio:t,setAspectRatio:n}=e;return(0,o.Y)(P.fI,{gap:8,borderBottom:"detail",padding:16,justifyContent:"center",children:V.yo.map(e=>(0,o.Y)(P.$n,{size:"sm",priority:t===e?"primary-mono":"secondary",onClick:()=>n(e),leading:"grid"===e?(0,o.Y)(F.A,{size:20}):(0,o.Y)(D.A,{size:20}),children:"grid"===e?"Grid":"Stories"},e))})}var ee=n(75840),et=n(94729),en=n(68349),el=n(35369),ei=n(76977),er=n(88774),eo=n(19832),ea=n(51177),es=n(36372),ed=n(52145),ec=n(504),eu=n(5180),eh=n(83629),em=n(46453),ef=n(2481),ep=n(16291),eg=n(56262),ev=n(70189),eb=n(82776),ey=n(57324),e_=n(44307);let ew=e=>{let{item:t,parentItem:n}=e;if(!t.comment&&!t.post)return null;let l=null;if("post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply"))l=t.post.id;else if((null==n?void 0:n.type)==="note_reply"){var i;let e=null==(i=t.parentComments[0])?void 0:i.id;e&&(l=e)}else l=t.comment.id;return l?{id:l,type:"post"in t&&("post"===t.type||(null==n?void 0:n.type)==="post_reply")?"post":"comment"}:null};function eY(e){var t,n,l,i,r,v,b;let{publication:_,post:N,comment:E,item:L,parentItem:F,allowHide:D=!1,size:T="sm"}=e,M=(0,es.d)(),{getConfigFor:B}=(0,I.mJ)(),P=(0,A.PK)(),W=(0,ee.T)(),O=(0,eu.wA)(),H=(0,eu.Ro)(),{iString:V}=(0,C.GO)(),[q,K]=(0,y.useState)(!1),[U,J]=(0,y.useState)(!1),$=(0,S.Jd)(),{openModal:X}=(0,x.hS)(),Z=null!=(v=null==E||null==(t=E.ancestor_path)?void 0:t.split(".").filter(Boolean).map(Number).map(e=>H.comments.get(e)))?v:[],Q=E?(0,eg.getCommentAuthor)(E):_&&N?(0,eg.getPostAuthor)(_,N):{id:0,name:"void"},em=L&&"entity_key"in L?L.entity_key:void 0,eY=(0,Y.bd)(Q,{surface:P,noteId:em,onClick(e){L&&(0,ec.Qb)(L,P,e,{tabId:W})}}),eC=(0,w.a2)({comment:E,publication:_,post:N,item:L}),ex=(0,k.A)(Q,P,em),eI=(0,z.st)({pathname:"/api/v1/comment/".concat(null!=(b=null==E?void 0:E.id)?b:0),method:"DELETE",json:{publication_id:null==_?void 0:_.id}}),eS=async()=>{if(!E||(K(!1),eI.isLoading))return;let e=await eI.refetch();e instanceof Error?alert((0,en.uX)(e)):(M.popToast(()=>(0,o.Y)(es.y,{text:V("Note deleted"),Icon:a.A})),O({type:"comment_delete",payload:{publication:null!=_?_:void 0,post:null!=N?N:void 0,comment:E}}))},eA=(0,ef.NP)(),eN=async()=>{E&&eA.open({editComment:E,tabId:W,surface:P,editingUserId:null==$?void 0:$.id})},eE=L&&"post"===L.type&&L.mediaClip?L.mediaClip:void 0,eL=async(e,t)=>{await (0,et.x6)("/api/v1/comment/".concat(e.id,"/juice"),{method:"POST",json:{times_to_show:t}}),M.popToast(()=>(0,o.Y)(es.y,{text:V("Juiced"),Icon:d.A})),J(!1)},eF=async(e,t)=>{let n,l=ew({item:e,parentItem:F});if(!l)return;switch(t){case"1hour":n=1;break;case"8hours":n=8;break;case"24hours":n=24}let i=n?{expires_at:(0,ep.A)().add(n,"hour").toISOString()}:{},{id:r,type:a}=l;await (0,et.x6)("/api/v1/notification_settings/".concat(a,"/").concat(r,"/mute"),{method:"POST",json:i}),O({type:"item_pause_notifications",payload:{entityKey:e.entity_key}}),M.popToast(()=>(0,o.Y)(es.y,{text:V("Paused"),Icon:c.A}))},eD=async e=>{let t=ew({item:e,parentItem:F});if(!t)return;let{id:n,type:l}=t;await (0,et.x6)("/api/v1/notification_settings/".concat(l,"/").concat(n,"/mute"),{method:"DELETE"}),O({type:"item_unpause_notifications",payload:{entityKey:e.entity_key}}),M.popToast(()=>(0,o.Y)(es.y,{text:V("Unpaused"),Icon:c.A}))},eT=async()=>{try{if(!E)return void M.popToast(()=>(0,o.Y)(es.y,{text:V("Error starting workflow: comment not found")}));let{workflowId:e}=await (0,et.x6)("/api/v1/comment/".concat(E.id,"/workflow"),{method:"POST",json:{}});M.popToast(()=>(0,o.Y)(es.y,{text:"Workflow started with id ".concat(e)}))}catch(e){M.popToast(()=>(0,o.Y)(es.y,{text:"Error starting workflow: ".concat(e)}))}},eM=(0,z.st)({pathname:"/api/v1/video/assets/clips/".concat(null==eE?void 0:eE.id),method:"DELETE"}),eB=async()=>{if(!eE||eM.isLoading)return;let e=await eM.refetch();e instanceof Error?alert((0,en.uX)(e)):(M.popToast(()=>(0,o.Y)(es.y,{text:V("Clip deleted"),Icon:a.A})),O({type:"clip_delete",payload:{mediaClip:eE,author:Q}}))},eR=D&&L&&"entity_key"in L&&$&&$.id!==Q.id,ez=$&&$.id===Q.id,eP=$&&!!(null==L||null==(n=L.post)?void 0:n.publishedBylines.find(e=>e.id===$.id)),eW=$&&(null==F?void 0:F.type)==="note_reply"&&(null==L||null==(l=L.parentComments[0])?void 0:l.user_id)===$.id,eO=(ez||eP||eW)&&(null==L?void 0:L.type)&&["comment","post"].includes(L.type),eH=[(0,o.Y)(er.Dr,{leading:(0,o.Y)(s.A,{}),onClick:()=>{let e={r:(0,eb.userReferralKey)($),utm_source:ey.VU.notesShareAction,utm_medium:ey.Jn.web},t=E?(0,j.Zgx)(E,{urlParams:e}):N?(0,j.q$n)(_,N,{mediaClip:eE,urlParams:e}):null;(0,en.lW)(t),M.popToast(()=>(0,o.Y)(es.y,{text:V("Copied link to clipboard"),Icon:s.A})),(0,R.u4)(R.qY.FEED_ITEM_SHARE_LINK_CLICKED,{type:"copy",shared_post_id:null==N?void 0:N.id,shared_comment_id:null==E?void 0:E.id})},children:V("Copy link")}),!E&&N&&(0,o.Y)(ek,{post:N}),...ex,E?(0,o.Y)(er.Dr,{leading:(0,o.Y)(u.A,{}),onClick:()=>{X({children:(0,o.Y)(G,{comment:E}),width:540})},children:V("Save as image")}):null].filter(Boolean),eV=[(0,eb.canEditComment)($,E)&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(h.A,{}),onClick:eN,children:V("Edit")}),E&&((null==$?void 0:$.is_global_admin)||(null==$?void 0:$.id)===E.user_id||B("show_note_stats_for_all_notes")||(0,eb.canManageCommentAsPrimaryUser)($,E))?(0,o.Y)(er.Dr,{leading:(0,o.Y)(m.A,{}),href:(0,ev.Kg)(E,{noBase:eh.Z}),native:!0,children:V("View stats")}):null].filter(Boolean),eq=(null==L?void 0:L.type)&&["comment","post"].includes(L.type)&&H.mutedFeedItems.has(L.entity_key),ej=[eR&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(f.A,{}),onClick:async()=>{try{O({type:"item_hide",payload:{entityKey:L.entity_key}}),await (0,et.x6)("/api/v1/note/".concat(L.entity_key,"/hide"),{method:"POST",json:{tabId:W,surface:P}})}catch(e){M.popToast(()=>(0,o.Y)(es.y,{text:(0,en.uX)(e)}))}},children:($.is_admin||$.is_contributor)&&"post-page-restacks-list"===P?V("Hide note from post"):V("Hide note")}),eO&&(eq?(0,o.Y)(ed.MI,{onClick:()=>eD(L),customLabel:V("Unpause notifications")}):(0,o.Y)(ed.DE,{onMute:e=>eF(L,e),customLabel:V("Pause notifications")})),(null==$?void 0:$.is_global_admin)&&E&&(null==(r=E.attachments)||null==(i=r[0])?void 0:i.type)==="video"?(0,o.Y)(er.Dr,{leading:(0,o.Y)(p.A,{}),priority:"secondary",onClick:eT,children:V("Run workflow")}):null].filter(Boolean),eK=[...eY,eC,(0,eb.canDeleteComment)($,E,{pub:null!=_?_:void 0,parentComments:Z})&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(a.A,{}),priority:"destructive",onClick:()=>K(!0),children:V("Delete")}),eE&&ez&&(0,o.Y)(er.Dr,{leading:(0,o.Y)(a.A,{}),priority:"destructive",onClick:eB,children:V("Delete this clip")}),(null==$?void 0:$.is_global_admin)&&E?(0,o.Y)(er.Dr,{leading:(0,o.Y)(d.A,{}),priority:"destructive",onClick:async()=>{J(!0)},children:V("Juice")}):null].filter(Boolean),eU=[0!==eH.length&&eH,0!==eV.length&&(0,o.Y)(er.H9,{children:eV}),0!==ej.length&&(0,o.Y)(er.H9,{children:ej}),0!==eK.length&&(0,o.Y)(er.H9,{children:eK})];return 0===eU.length?null:(0,o.FD)(o.FK,{children:[(0,o.Y)(ei.ov,{className:e_.A.moreButtonContainer,children:(0,o.Y)(er.W1,{trigger:(0,o.Y)(el.K0,{priority:"quaternary",size:T,className:e_.A.moreButton,"aria-label":V("More options"),children:(0,o.Y)(g.A,{size:16})}),onOpen:()=>{L&&(0,ec.Qb)(L,P,"menu",{tabId:W})},children:eU})}),(0,o.Y)(eo.m,{isOpen:q,title:V("Delete note"),description:V("Are you sure you want to permanently delete this note? This action cannot be undone."),primaryButton:(0,o.Y)(el.$n,{priority:"destructive",onClick:eS,children:V("Delete")}),secondaryButton:(0,o.Y)(el.$n,{priority:"secondary",onClick:()=>K(!1),children:V("Cancel")}),onClose:()=>K(!1)}),(null==$?void 0:$.is_global_admin)&&(0,o.Y)(eo.m,{isOpen:U,title:V("Juice note"),description:V("How many additional impressions would you like this note to receive? 100 impressions equals roughly 1-3 likes."),primaryButton:(0,o.FD)(ea.t7,{priority:"secondary-outline",size:"md",children:[(0,o.Y)(ea.gm,{onClick:async()=>{await eL(E,100)},children:"100"}),(0,o.Y)(ea.gm,{onClick:async()=>{await eL(E,500)},children:"500"}),(0,o.Y)(ea.gm,{onClick:async()=>{await eL(E,1e3)},children:"1000"})]}),secondaryButton:(0,o.Y)(ei.pT,{flex:"grow",children:(0,o.Y)(el.$n,{priority:"secondary",onClick:()=>J(!1),children:V("Cancel")})}),onClose:()=>J(!1)})]})}function ek(e){var{post:t}=e,n=(0,r._)(e,["post"]);let a=(0,S.Jd)(),{requireLogin:s}=(0,em.eE)(),d=eC(t),{iString:c}=(0,C.GO)();return(0,o.Y)(er.Dr,(0,i._)((0,l._)({leading:t.is_saved?(0,o.Y)(v.A,{}):(0,o.Y)(b.A,{}),onClick:()=>a?d():null==s?void 0:s({redirectOverride:(0,j.wu9)(null,t,{urlParams:{triggerSave:!0}})})},n),{children:c(t.is_saved?"Unsave":"Save")}))}function eC(e){let t=(0,eu.wA)(),n=(0,_.ib)();return()=>{let l=e.id,i=!e.is_saved;(0,_.E0)(l,i,{surface:"reader"}),n(i),t({type:"post_save",payload:{postId:l,isSaved:i}})}}},27749:function(e,t,n){n.d(t,{IJ:()=>u,PK:()=>m});var l=n(4006),i=n(17402),r=n(78479),o=n(5180),a=n(68391),s=n(46453),d=n(2481),c=n(62088);function u(e){let{state:t,dispatch:n,surface:u,children:m}=e,{onboardingModalRef:f}=(0,s.eE)(),p=(0,i.useMemo)(()=>({dispatch:n}),[]);return(0,l.Y)(h.Provider,{value:u,children:(0,l.Y)(o.et.Provider,{value:p,children:(0,l.Y)(o.tO.Provider,{value:t,children:(0,l.Y)(r.sc,{children:(0,l.Y)(d.wG,{children:(0,l.FD)(a.Kl,{children:[m,(0,l.Y)(c.M9,{isOpen:!!t.isSigningIn,onCancel:()=>n({type:"sign_in",payload:{isSigningIn:!1}}),onSuccess:()=>{n({type:"sign_in",payload:{isSigningIn:!1}}),document.location.reload()},onSignup:()=>{var e;n({type:"sign_in",payload:{isSigningIn:!1}}),null==(e=f.current)||e.open()},noExit:t.signInNoExit})]})})})})})})}let h=(0,i.createContext)("feed");function m(){return(0,i.useContext)(h)}},57446:function(e,t,n){n.d(t,{Q:()=>p});var l=n(4006),i=n(17402),r=n(85478),o=n(46271),a=n(44333),s=n(68349),d=n(83873),c=n(39318),u=n(92636),h=n(41086);let m=(0,i.createContext)({ageVerification:null,isLoading:!1});m.displayName="AgeVerificationContext";let f=["/settings","/account","/action/disable_email","/newsletters","/publish/home","/publish/settings","/publish/payments"];function p(e){var t;let{children:n}=e,p=(0,o.Jd)(),[{path:g},v]=(0,a.rd)(),{getConfigFor:b}=(0,r.mJ)(),y=null!=(t=b("mobile_age_verification_learn_more_link"))?t:null,[_,w]=(0,i.useState)(null);return(0,i.useEffect)(()=>{let e=()=>{let e=(0,h.y)(window.location.href,"redirect_url");e?(0,s.V2)(e,{local_navigation:!1}):v("/",!0)},t=window.location.hostname.replace(/\.localhost$/,""),n=t===u.xJ||t==="reader.".concat(u.xJ)||t==="www.".concat(u.xJ);if(function(e,t){let n=e=>"/"===e?e:e.replace(/\/$/,""),l=n(e);for(let e of f)if(l===e||l.startsWith("".concat(e,"/")))return!0;return!!t&&n((0,s.Hm)(t))===l}(g,y))return void w(null);if(!(null==p?void 0:p.id)){w(null),"/age-verification-required"===g&&e();return}let l=null==p?void 0:p.age_verification;if(!l||!l.force_verification){w(null),"/age-verification-required"===g&&e();return}if("/age-verification-required"===g){if(!n){let e=(0,c.q$g)(),t=new URL(window.location.href),n="".concat(e).concat(t.pathname).concat(t.search);(0,s.V2)(n,{local_navigation:!1});return}if(l.status===d.Y.CompletedAdult){w(null),e();return}w(l);return}if(w(l),l.status===d.Y.NotCompleted||l.status===d.Y.CompletedUnderage){let e=window.location.href;if(n)v((0,c.yRP)("/age-verification-required",{redirect_url:e}),!0);else{let t=(0,c.q$g)(),n=(0,c.yRP)("".concat(t,"/age-verification-required"),{redirect_url:e});(0,s.V2)(n,{local_navigation:!1})}}},[null==p?void 0:p.id,null==p?void 0:p.age_verification,g,v]),(0,l.Y)(m.Provider,{value:{ageVerification:_,isLoading:!1},children:n})}},55200:function(e,t,n){n.d(t,{l:()=>i});var l=n(39318);function i(e,t){return(null==e?void 0:e.profile_set_up_at)?(0,l.gYq)(e,t):(0,l.W$o)((null==t?void 0:t.utm_source)?{utm_source:t.utm_source}:void 0)}},20562:function(e,t,n){n.d(t,{t:()=>d});var l=n(69277),i=n(4006),r=n(76977),o=n(63136),a=n(92636),s=n(49807);let d=e=>{let{firehoseFeedUrl:t,pub:n,section:d,trackingSource:c,variant:u="default"}=e,h=(0,a.yR)("/p/how-do-i-add-a-bulwark-member-only",(0,l._)({utm_source:c},d?{utm_content:d.id}:null)),m=(0,a.yR)("/account/add-all-podcasts",(0,l._)({utm_source:c},d?{utm_content:d.id}:null)),f=t?(0,i.FD)(o.EY.B3,{as:"li",font:"text",children:["Click here to set up your podcast app for"," ",(0,i.Y)("a",{href:t,rel:"noopener noreferrer",target:"_blank",children:"everything in one feed"})]}):null,p=(0,s.eV6)(n,{params:{utm_source:c}});return(0,i.Y)("div",{className:"container-o06YlK",children:"member-only"===u?(0,i.FD)(r.I1,{as:"ul",gap:4,children:[(0,i.FD)(o.EY.B3,{as:"li",font:"text",children:["Want to listen without ads? Join Bulwark+ for exclusive ad-free versions of all Bulwark shows."," ",(0,i.Y)("a",{href:p,rel:"noopener noreferrer",target:"_blank",children:"Upgrade now"})]}),(0,i.FD)(o.EY.B3,{as:"li",font:"text",children:["Already a Bulwark+ member? Login to access premium shows. ",(0,i.Y)("a",{href:h,children:"Learn more here"})]})]}):(0,i.FD)(r.I1,{as:"ul",gap:4,children:[(0,i.FD)(o.EY.B3,{as:"li",font:"text",children:["Learn about"," ",(0,i.Y)("a",{href:h,rel:"noopener noreferrer",target:"_blank",children:"setting up your Bulwark+ private podcast feeds"})]}),f||(0,i.FD)(o.EY.B3,{as:"li",font:"text",children:["Add the Bulwark Premium Show"," ",(0,i.Y)("a",{href:m,rel:"noopener noreferrer",target:"_blank",children:"super feed"})]})]})})}},12592:function(e,t,n){n.d(t,{c:()=>a});var l=n(4006),i=n(32485),r=n.n(i),o=n(89490);let a=e=>{let{children:t,columns:n=2,paddingTop:i=24}=e,a=(0,o.iF)({paddingTop:i,paddingX:16,paddingBottom:32});return(0,l.Y)("div",{className:r()("container-kIrj2N",a,{"containerThreeColumn-Rot594":3===n,"containerFourColumn-vOHVwe":4===n}),children:t})}},12387:function(e,t,n){n.d(t,{F:()=>h});var l=n(4006),i=n(32485),r=n.n(i),o=n(48697),a=n(89490),s=n(35369),d=n(76977),c=n(63136),u=n(74460);let h=e=>{let{title:t,description:n,Icon:i,onDismiss:r,theme:o="default",showClose:a=!0,flex:s="auto"}=e;return(0,l.FD)(b,{theme:o,flex:s,children:[i&&(0,l.Y)(m,{Icon:i}),(0,l.FD)(y,{children:[t&&(0,l.Y)(f,{theme:o,children:t}),n&&(0,l.Y)(p,{theme:o,children:n})]}),a&&(0,l.Y)(g,{onClose:r})]})},m=e=>{let{Icon:t}=e;return(0,l.Y)(v,{children:(0,l.Y)(t,{size:18,className:u.A.icon})})},f=e=>{let{children:t,theme:n}=e;return(0,l.Y)(c.EY.B4,{weight:"medium",color:"default"===n?"primary":n,className:u.A.title,children:t})},p=e=>{let{children:t,theme:n}=e;return(0,l.Y)(c.EY.B4,{weight:"regular",color:"default"===n?"secondary":n,className:u.A.description,children:t})},g=e=>{let{onClose:t}=e;return(0,l.Y)(v,{children:(0,l.Y)(s.K0,{priority:"quaternary",onClick:t,size:"xs",className:u.A.dismiss,children:(0,l.Y)(o.A,{size:18})})})},v=(0,a.I4)({display:"flex",alignItems:"center",justifyContent:"center",width:20,height:20}),b=e=>{let{theme:t,children:n,flex:i}=e;return(0,l.Y)(d.fI,{flex:i,gap:12,paddingX:16,paddingY:12,radius:"sm",className:r()(u.A.alert,u.A["theme_".concat(t)]),children:n})},y=(0,a.I4)({display:"flex",direction:"column",flex:"grow",alignItems:"start"})},91401:function(e,t,n){n.d(t,{_:()=>T});var l=n(4006),i=n(35426),r=n(38390),o=n(89490),a=n(10238);let s="transition-w_bxsw",d="from-z8IAhO",c="to-tJ4gLS";function u(e){let{onClose:t,disableCloseOnBackdropClick:n}=e;return(0,l.Y)(r.hJ,{forceMount:!0,className:"backdrop-XhnYC7",onClick:()=>{n||t()}})}let h=e=>{let{children:t}=e;return(0,l.Y)(i.e.Child,{enter:s,enterFrom:d,enterTo:c,leave:s,leaveFrom:c,leaveTo:d,children:t})};var m=n(20347),f=n(3849),p=n(69277),g=n(76977),v=n(12601);let b={paddingTop:20,paddingBottom:20};var y=n(84843);let _={paddingTop:20,paddingBottom:20},w={flex:"1",justifyContent:"center"};var Y=n(32485),k=n.n(Y),C=n(17402),x=n(11510);let I=(0,C.forwardRef)((e,t)=>{let{children:n,className:i,width:o,initialFocus:a,disableCloseOnBackdropClick:s=!1,testId:d,style:c}=e,u=(0,x.Iu)();return(0,l.Y)(r.UC,{forceMount:!0,ref:t,"data-testid":d,className:k()(i,"panel-kkbipN",u&&"mobile-_09kdk"),style:(0,p._)({width:u?void 0:o},c),onOpenAutoFocus:e=>{(null==a?void 0:a.current)&&(e.preventDefault(),a.current.focus())},onCloseAutoFocus:e=>{e.preventDefault()},onPointerDownOutside:e=>{e.preventDefault()},onEscapeKeyDown:e=>{s&&e.preventDefault()},children:n})});I.displayName="DrawerPanel";let S="transition-yXnIcD",A="from-ohdinI",N="to-pJrLpA",E=e=>{let{children:t}=e;return(0,l.Y)(i.e.Child,{as:C.Fragment,enter:S,enterFrom:A,enterTo:N,leave:S,leaveFrom:N,leaveTo:A,children:t})};var L=n(90460),F=n(10996);function D(e){let{children:t,renderOverReactLaagPortal:n}=e;return(0,l.Y)(o.az,{className:"layout-oewxMQ",style:{zIndex:n?a.Up+1:a.Up},children:t})}let T=e=>{let{isOpen:t,onClose:n=()=>void 0,children:o,testId:a="drawer",className:s,width:d=440,disableCloseOnBackdropClick:c=!1,initialFocus:m,renderOverReactLaagPortal:f=!1,style:p}=e;return(0,L.h)(t),(0,l.Y)(r.bL,{open:t,onOpenChange:e=>{e||null==n||n()},children:(0,l.Y)(r.ZL,{forceMount:!0,children:(0,l.Y)(i.e.Root,{show:t,children:(0,l.FD)(D,{renderOverReactLaagPortal:f,children:[(0,l.Y)(h,{children:(0,l.Y)(u,{onClose:n,disableCloseOnBackdropClick:c})}),(0,l.Y)(F.e$,{children:(0,l.Y)(E,{children:(0,l.Y)(I,{width:d,className:s,initialFocus:m,disableCloseOnBackdropClick:c,testId:a,style:p,children:o})})})]})})})})};T.Header=e=>{let{onClose:t,showClose:n=!0,title:i,description:r,showDivider:o=!1}=e,a=o?y.P0:y.UG;return(0,l.Y)(a,{style:(0,p._)({},_),children:(0,l.FD)(g.fI,{children:[(0,l.FD)(y.fS,{style:(0,p._)({},w),children:[i&&(0,l.Y)(y.$q,{text:i,isInsideDialog:!1}),r&&(0,l.Y)(y.ph,{text:r,isInsideDialog:!1})]}),n&&t&&(0,l.Y)(y.J,{onClose:t,position:"relative"})]})})},T.Body=function(e){var t=(0,m._)({},(0,f._)(e));return(0,l.Y)(g.VP,(0,p._)({flex:"grow",overflow:"auto",padding:20},t))},T.Footer=e=>{let{primaryButton:t,secondaryButton:n,showDivider:i,direction:r="row"}=e,o="column"===r,a=!!n||!!t,s=i?o?v.X_:v.RY:o?v.MM:v.It,d=o?v.iF:v.Y9,c=[n,t].filter(Boolean);return(0,l.Y)(s,{style:(0,p._)({},b),children:a&&(0,l.Y)(d,{children:c})})}},68940:function(e,t,n){n.d(t,{u:()=>s});var l=n(4006),i=n(68349),r=n(81929),o=n(63136),a=n(89961);function s(e){var t,n;let s,{modifier:d,children:c,className:u}=e,h=(t=void 0===d?[]:Array.isArray(d)?d:[d],n=(0,i.cX)(),0===(s=t.map(e=>{switch(null==e?void 0:e.toLowerCase()){case"cmd":return n?"âŒ˜":"Ctrl";case"shift":return n?"â‡§":"Shift";case"alt":case"opt":return n?"âŒ¥":"Alt";case"ctrl":return n?"âŒƒ":"Ctrl";case"esc":return"Esc";case"left":return"â†";case"right":return"â†’";case"up":return"â†‘";case"down":return"â†“";default:return""}}).filter(Boolean)).length?"":s.join(""));return(0,l.Y)(r.vw,{priority:"secondary-outline",theme:"default",className:u,children:(0,l.FD)(o.EY,{as:"kbd",font:"text",weight:"regular",color:"secondary",className:a.A.kbd,children:[h,c]})})}},51177:function(e,t,n){n.d(t,{gm:()=>b,q7:()=>v,t7:()=>g});var l=n(69277),i=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(17402),c=n(82519),u=n(84605),h=n(35369),m=n(76977),f=n(88774);n(48625);var p=n(5370);let g=e=>{var{priority:t="secondary-outline",size:n="md"}=e,i=(0,r._)(e,["priority","size"]);"secondary-outline"===t&&(t="tertiary");let a="tertiary"===t;return(0,o.Y)(_.Provider,{value:{priority:t,size:n},children:(0,o.Y)(m.fI,(0,l._)({radius:"sm"===n?"xs":"sm",className:s()(p.A.group,a&&p.A.outlined)},i))})},v=e=>{var{children:t,priority:n="primary",size:a="md",menuItems:s,additionalMenuProps:d={}}=e,h=(0,r._)(e,["children","priority","size","menuItems","additionalMenuProps"]);let{iString:m}=(0,u.GO)();return(0,o.FD)(g,{priority:n,size:a,children:[(0,o.Y)(b,(0,i._)((0,l._)({},h),{children:t})),(0,o.Y)(f.W1,(0,i._)((0,l._)({},d),{placement:"bottom-end",trigger:(0,o.Y)(y,(0,i._)((0,l._)({},h),{"aria-label":m("Dropdown menu"),children:(0,o.Y)(c.A,{size:"sm"===a?16:"md"===a?20:24})})),children:s}))]})},b=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);let{priority:c,size:u}=(0,d.useContext)(_);return(0,o.Y)(h.$n,(0,i._)((0,l._)({priority:c,size:u,className:s()(p.A.segment,n)},a),{ref:t}))}),y=(0,d.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);let{priority:c,size:u}=(0,d.useContext)(_);return(0,o.Y)(h.K0,(0,i._)((0,l._)({priority:c,size:u,className:s()(p.A.segment,n)},a),{ref:t}))}),_=(0,d.createContext)({priority:"primary",size:"md"})},56007:function(e,t,n){n.d(t,{Ho:()=>h,bn:()=>d,dj:()=>m,tE:()=>u});var l=n(69277),i=n(70408),r=n(4006),o=n(28001),a=n(17402),s=n(58526);let d=5e3,c=(0,a.createContext)({popToast:()=>{throw Error("Popping toast requires a ToastProvider.")},addOffset:()=>{}});function u(e){let{children:t}=e,[n,l]=(0,a.useState)([]),[i,u]=(0,a.useState)(0),h=(0,a.useRef)(0);return(0,r.Y)(o.Kq,{duration:d,swipeThreshold:20,swipeDirection:"down",children:(0,r.FD)(c.Provider,{value:{popToast:(e,t)=>{let{dedupeKey:n}=null!=t?t:{},i="toast-".concat(h.current++),r=e(),o=a.default.cloneElement(r,{key:i,onOpenChange:e=>{e||setTimeout(()=>{l(e=>e.filter(e=>e.id!==i))},200)}});l(e=>[...n?e.filter(e=>e.dedupeKey!==n):e,{id:i,element:o,dedupeKey:n}])},addOffset:e=>{u(Math.min(i+e,0))}},children:[t,n.map(e=>e.element),(0,r.Y)(s.U,{offset:i})]})})}let h=e=>{let t=(0,a.forwardRef)((t,n)=>{let o=m();return(0,r.Y)(e,(0,i._)((0,l._)({},o,t),{ref:n}))});return t.displayName="withToastContext(".concat(e.name||e.displayName||"Anonymous",")"),t};function m(){return(0,a.useContext)(c)}},72682:function(e,t,n){n.d(t,{c:()=>f});var l=n(69277),i=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(17402),d=n(90839),c=n(95436);let u={container:"container-Zymr63",dragging:"dragging-DRHmIF",cornerHandle:"cornerHandle-kfhB90",topLeft:"topLeft-tcLuIp",topRight:"topRight-JvUgIs",bottomLeft:"bottomLeft-n_juA8",bottomRight:"bottomRight-uyYwbn"},h="theme-editor-dragging",m=["topLeft","topRight","bottomLeft","bottomRight"],f=e=>{var t;let{children:n,value:o,min:f,max:p,property:g,disabled:v,anchor:b="center"}=e,{isActive:y,isPreviewMode:_,sendThemePropertyDragEnd:w}=(0,c.T)(),Y=(0,d.s)(),k=!!Y&&y(Y),{isDragging:C,previewValue:x,getHandleProps:I}=function(e){let{value:t,min:n,max:l,onDragEnd:i,anchor:r="center"}=e,[o,a]=(0,s.useState)(t),[d,c]=(0,s.useState)(!1),u=(0,s.useRef)(null),h=(0,s.useRef)(t),m=(0,s.useRef)(i);m.current=i;let f=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(!d){if(null!==f.current)if(t!==f.current)return;else f.current=null;a(t),h.current=t}},[t,d]);let p=(0,s.useCallback)(e=>Math.round(Math.max(n,Math.min(l,e))),[n,l]),g=(0,s.useCallback)((e,t)=>{let n;e.preventDefault(),e.stopPropagation(),f.current=null;let l=e.target.parentElement;if(!l)return;let i=(l.querySelector("img")||l).getBoundingClientRect(),o=i.width/i.height,a=i.top+i.height/2,s=!1;"center"===r?(n=i.left+i.width/2,s=!0):n="left"===r?i.left:i.right,u.current={anchorX:n,anchorY:a,symmetric:s,aspectRatio:o},c(!0)},[r]),v=(0,s.useCallback)(e=>{let t=u.current;if(!t)return;let n=Math.abs(e.clientX-t.anchorX),l=p(Math.min(2*Math.abs(e.clientY-t.anchorY),(t.symmetric?2*n:n)/t.aspectRatio));h.current=l,a(l)},[p]),b=(0,s.useCallback)(()=>{u.current&&(f.current=h.current,m.current(h.current),u.current=null,c(!1))},[]);return(0,s.useEffect)(()=>{if(d)return window.addEventListener("mousemove",v),window.addEventListener("mouseup",b),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",b)}},[d,v,b]),{isDragging:d,previewValue:o,getHandleProps:(0,s.useCallback)(e=>({onMouseDown:t=>g(t,e)}),[g])}}({value:o,min:f,max:p,onDragEnd:(0,s.useCallback)(e=>{w({property:g,value:e})},[g,w]),anchor:b}),S=(0,s.useCallback)(e=>{C&&(e.preventDefault(),e.stopPropagation())},[C]);return((0,s.useEffect)(()=>{if(C)document.documentElement.classList.add(h);else{let e=setTimeout(()=>{document.documentElement.classList.remove(h)},100);return()=>{clearTimeout(e),document.documentElement.classList.remove(h)}}},[C]),_&&k&&!v)?(0,r.FD)("div",{className:a()(u.container,{[null!=(t=u.dragging)?t:""]:C}),onClick:S,children:[n(x),m.map(e=>(0,r.Y)("div",(0,i._)((0,l._)({},I(e)),{className:a()(u.cornerHandle,u[e])}),e))]}):(0,r.Y)(r.FK,{children:n(o)})}},15663:function(e,t,n){n.d(t,{r:()=>p});var l=n(4006),i=n(35426),r=n(17402),o=n(78649),a=n(97640),s=n(46271),d=n(86500),c=n(12501),u=n(76977),h=n(21398),m=n(16291);let f="transition-FsyEAS";function p(){var e;let{activityUnreadCount:t}=(0,a.Vd)(),{isLoading:p,result:g,refetch:v}=(0,c.st)({pathname:"/api/v1/activity-feed-web",query:{limit:1},auto:!1});(0,r.useEffect)(()=>{t>0&&v()},[t]);let[b,y]=(0,r.useState)(!1),[_,w]=(0,r.useState)(!1),{isLoading:Y,fetch:k,result:C}=(0,h.vZ)({module:"./MiniNotificationsViewer",onRequest:()=>Promise.all([n.e("39966"),n.e("28946"),n.e("14958")]).then(n.bind(n,18298)),fetchImmediately:!1}),x=(0,m.A)(),{userSettings:I,changeSetting:S}=(0,s.ur)(),A=null==g||null==(e=g.activityItems)?void 0:e[0],N=(null==A?void 0:A.created_at)?(0,m.A)(null==A?void 0:A.created_at):x.subtract(100,"year"),E=(null==I?void 0:I.last_notification_alert_shown_at)?(0,m.A)(I.last_notification_alert_shown_at):x.subtract(100,"year"),L=7>x.diff(N,"day")&&N.diff(E,"hour")>2,F=(0,r.useRef)(null),D=()=>{F.current&&window.clearTimeout(F.current)},T=()=>{D(),F.current=window.setTimeout(()=>{y(!1)},6e3)};return(0,r.useEffect)(()=>{L&&t>0&&(C&&!b?window.setTimeout(()=>{y(!0),S("last_notification_alert_shown_at",(0,m.A)().toISOString()),(0,d.u4)(d.qY.NOTIFICATIONS_ALERT_SHOWN,["comment_audience","comment_id","community_comment_id","created_at","id","mention_id","publication_id","sender_count","target_comment_id","target_community_comment_id","target_community_post_id","target_post_id","target_user_id","type"].reduce((e,t)=>(e[t]=null==A?void 0:A[t],e),{})),T()},2e3):C||Y||k())},[p,g,t,Y,L,b,y]),(0,l.Y)(l.FK,{children:(b||_)&&g&&(0,l.Y)(i.e,{style:{position:"fixed",left:"auto",right:20,top:92,zIndex:100},appear:!0,show:b,beforeEnter:()=>w(!0),afterLeave:()=>w(!1),enter:f,enterFrom:"enterFrom-dljIVN",enterTo:"enterTo-HLLVxF",leave:f,leaveFrom:"leaveFrom-aHkaAL",leaveTo:"leaveTo-k1oI5e",children:(0,l.Y)(o.Q,{children:(0,l.Y)(u.pT,{radius:"md",border:"detail",className:"alert-pEnrFa",onMouseEnter:D,onMouseLeave:T,shadow:"lg",bg:"primary",children:(0,l.Y)(h.Ic,{module:"@/frontend/reader2/activity/MiniNotificationsViewer",resolve:e=>e.MiniNotificationsStack,onRequest:()=>Promise.all([n.e("39966"),n.e("28946"),n.e("14958")]).then(n.bind(n,18298)),result:g,isReadOnly:!0})})})})})}},11710:function(e,t,n){n.d(t,{_:()=>c});var l=n(4006),i=n(63701),r=n(84605),o=n(17028),a=n(16993),s=n(22238),d=n(74055);function c(e){let{isOpen:t,onClose:n,scheduledLiveStreams:c,onCancelStream:u}=e,{iString:h}=(0,r.GO)(),m=(0,l.Y)(o.pT,{bg:"accent-red",radius:"full",width:48,height:48,alignItems:"center",justifyContent:"center",children:(0,l.Y)(i.A,{color:"var(--color-accent-fg-red)"})});return(0,l.FD)(a.aF,{isOpen:t,onClose:n,width:540,children:[(0,l.Y)(a.rQ,{title:h("Scheduled live videos"),icon:m,showClose:!0,onClose:n}),(0,l.Y)(o.I1,{paddingX:20,paddingY:20,gap:20,className:d.A.streamList,children:c.map(e=>(0,l.Y)(s.Q,{stream:e,onCancelStream:u},e.liveStream.id))})]})}},15144:function(e,t,n){n.d(t,{D1:()=>i,d9:()=>r});var l=n(94729);let i=function(){let{before:e,tab:t="all"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return async n=>{try{var i,r;let o=await (0,l.x6)("/api/v1/messages/inbox",{query:{paginate:"true",tab:t,before:e}});n({type:"inbox-new_items",payload:{threads:null==o?void 0:o.threads,hasMore:null==o?void 0:o.more,directMessagesUnreadCount:null==o?void 0:o.directMessagesUnreadCount,pendingInviteCount:null==o?void 0:o.pendingInviteCount,pendingInviteUnreadCount:null!=(i=null==o?void 0:o.pendingInviteUnreadCount)?i:null==o?void 0:o.pendingInviteCount,pubChatUnreadCount:null!=(r=null==o?void 0:o.pubChatUnreadCount)?r:0,mostRecentChatTimestamp:o.mostRecentChatTimestamp}})}catch(e){if(console.warn("error",e),e instanceof l.fk)n({type:"inbox-new_error",payload:{error:e}});else throw e}}},r=e=>async t=>{"direct-message"===e&&t(i({tab:"people"})),t({type:"inbox-set_filter",payload:e})}},78338:function(e,t,n){n.d(t,{Bf:()=>s,DF:()=>a,ly:()=>o});var l=n(69277),i=n(70408),r=n(38123);function o(e){var t,n,l;return e.link_title||(null==(t=e.postTag)?void 0:t.name)||(null==(n=e.section)?void 0:n.name)||(null==(l=e.post)?void 0:l.title)||""}function a(e){var t;return e.postTag?"tag":e.section?"section":(null==(t=e.post)?void 0:t.type)==="page"?"page":e.post?"post":"link"}function s(e,t){let{isChatActive:n,isMeetingsActive:o,hasMultipleNewsletters:a,isChatEnabled:s,isFeedEnabled:d,isReaderReferralsLeaderboardActive:c,language:u="en",useReordering:h=!1}=t,m=(function(e){let t=new Map;for(let n of e)t.set(n.id,(0,i._)((0,l._)({},n),{children:[]}));let n=[];for(let e of t.values())if(e.parent_id){let n=t.get(e.parent_id);n&&n.children.push(e)}else n.push(e);for(let e of t.values())e.children.length>0&&e.children.sort((e,t)=>e.sibling_rank-t.sibling_rank);return n.sort((e,t)=>e.sibling_rank-t.sibling_rank)})(e).filter(e=>!e.standard_key),f=new Map(e.filter(e=>e.standard_key).map(e=>[e.standard_key,e])),{iString:p}=I18N.i(u);for(let e of m){var g;(null==(g=e.section)?void 0:g.hide_from_navbar)&&(e.is_hidden=!0)}let v=[d&&{standard_key:"notes",link_title:"Notes",link_url:"/notes"},s&&{standard_key:"chat",link_title:"Chat",link_url:"/chat",is_hidden:!n},o&&{standard_key:"meetings",link_title:"Meetings",link_url:"/meetings"},...m,{standard_key:"archive",link_title:p("Archive"),link_url:"/archive"},a&&{standard_key:"newsletters",link_title:p("Newsletters"),link_url:"/newsletters",is_hidden:!0},c&&{standard_key:"leaderboard",link_title:p("Leaderboard"),link_url:"/leaderboard"},{standard_key:"about",link_title:p("About"),link_url:"/about"}].filter(e=>!!e).map(e=>{if(e.standard_key){let t=f.get(e.standard_key);if(t)return(0,r.qy)((0,l._)({},e),t)}return e});if(h){let e=["about","notes","chat","archive"];return[...v.filter(t=>!e.includes(t.standard_key||"")),...e.map(e=>v.find(t=>t.standard_key===e)).filter(e=>!!e)].filter(e=>!!e)}return v}}}]);