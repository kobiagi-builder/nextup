"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["463"],{2256:function(e,t,n){n.d(t,{r:()=>a});var i=n(4006),r=n(10996);let o=52101!=n.j?{coverTheme:"coverTheme-PJLqY5"}:null;function a(e){let{children:t}=e;return(0,i.Y)(r.NP,{theme:o.coverTheme,children:t})}},9266:function(e,t,n){if(n.d(t,{Ay:()=>V,Be:()=>W,cL:()=>K}),52101!=n.j)var i=n(69277);if(52101!=n.j)var r=n(70408);var o=n(79785),a=n(4006),l=n(32485),s=n.n(l),d=n(12215);if(52101!=n.j)var c=n(87677);if(52101!=n.j)var u=n(48697);var p=n(17402),m=n(2256),h=n(97432),g=n(33764),_=n(70780),f=n(84605),b=n(53989),v=n(85478),y=n(34835),Y=n(39520),w=n(86500),E=n(53928),S=n(68349),I=n(89490),x=n(35369),C=n(76977),T=n(81203),A=n(63136),k=n(54754),D=n(21398),N=n(11510),F=n(61554),L=n(49095),R=n(28194),P=n(56262),O=n(39318);if(52101!=n.j)var q=n(41086);var j=n(82776);if(52101!=n.j)var U=n(57324);var B=n(82121);function M(){let e=(0,o._)(["By ",""]);return M=function(){return e},e}let z="intro_popup_last_hidden_at";function W(e){let{includePrice:t=!0,includeRankingDetail:i=!0,includeByline:r=!0,includeBadge:o=!1,rankingDetailOverrideText:l=null,language:s="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=s||e.language,{iTemplate:c}=I18N.i(s||e.language),u=(0,j.getByLine)(e),p=null;return i&&(p=l||(e.rankingDetailByLanguage&&"en"!==d&&e.rankingDetailByLanguage[d]?e.rankingDetailByLanguage[d].rankingDetail:e.rankingDetail)),(0,a.FD)(k.r,{separator:" \xb7 ",children:[r&&u?(0,a.FD)(C.pT,{inline:!0,gap:4,children:[c(M(),u),o&&(0,a.Y)(D.Ic,{module:"../user_badge/UserBadge",resolve:e=>e.UserStatusSymbols,onRequest:()=>Promise.resolve().then(n.bind(n,49095)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,a.Y)(C.pT,{alignItems:"center",children:(0,a.Y)(L.UserStatusSymbols,{size:"sm",tier:e.author_bestseller_tier})}):(0,a.Y)(a.FK,{})})]}):null,p,t&&function(e,t){let{language:n}=t,i=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],r=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],o=i||r;if(o)return(0,R.xB)(o,{language:n})}(e,{language:s})]})}let V=52101!=n.j?(0,p.memo)(e=>{var t,n;let{publication:o,user:l,post:s,onHide:c,freeSignup:u,hidden:h,alwaysShow:g,showOnMount:_,freeSignupEmail:f,email:b,referralCode:Y,blurbs:E,launchWelcomePage:I}=e,{getConfigFor:x}=(0,v.mJ)(),C=x("welcome_page_query_params"),[T,A]=(0,p.useState)(!1),[k,D]=(0,p.useState)(!!(I||g)),N=(e,t)=>{var n;return C&&null!=(n=(0,q.y)(e))?n:t},[F]=(0,p.useState)(N("no_skip",void 0)),[L]=(0,p.useState)(N("no_blurbs",!1)),[R]=(0,p.useState)(()=>{let e=N("hero_text",void 0);return e?decodeURIComponent(e):void 0});(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&W(!0)};if(k)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[k]),(0,p.useEffect)(()=>{if(I&&!V()||M()){if("undefined"!=typeof window&&(0,S.iQ)(document.documentElement,"has-intro-popup"),(0,q.y)("r")){let e=(0,q.y)("r");l&&(0,j.userReferralKey)(l)===e||(0,w.u4)(w.qY.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,j.userFromReferralKey)(e)})}B()}else c&&c(),(0,y.E)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,S.vy)(document.documentElement,"has-intro-popup"),!g&&"undefined"!=typeof window&&(0,S.nB)(document.documentElement,"show-intro-popup")&&(0,S.vy)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,S.qm)(e)),()=>{"undefined"!=typeof window&&(0,S.vy)(document.documentElement,"has-intro-popup"),W(!0)}},[]);let B=()=>{"undefined"!=typeof window&&((0,S.iQ)(document.documentElement,"show-intro-popup"),(0,w.u4)(w.qY.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!f,has_free_signup:!!u,functional_version:!0,launch_welcome_page:I,always_show:g,hidden:h,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null}),g||(0,w.b8)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),D(!0)},M=(0,p.useCallback)(()=>!!g||!h&&(!!_||!!T||!V()&&!!(null==s||s&&!(0,P.isPaidAudience)(s.audience))&&!u&&(!l||!l.is_free_subscribed&&!l.is_subscribed)),[g,u,h,s,_,T,l]),W=e=>{e||(K(),setTimeout(()=>{(0,y.E)({hide_intro_popup:!0})},500)),c&&c(),!g&&"undefined"!=typeof window&&(0,S.nB)(document.documentElement,"show-intro-popup")&&(0,S.vy)(document.documentElement,"show-intro-popup")},V=()=>{let e=d.get(z);if(e&&new Date(e)>new Date(Date.now()-864e5))return!0;return!1},K=()=>{d.set(z,new Date().toJSON(),{expires:3650})},$=async e=>{(0,w.u4)(w.qY.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),K(),A(!0),(0,y.E)({freeSignup:!0,freeSignupEmail:e.body.email});let t=g?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,O.yRP)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,O.yRP)("/subscribe",(0,r._)((0,i._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:U.VU.coverPage,email:e.body.email,skip_redirect_check:!0}))};return k&&M()?(0,a.Y)(m.r,{children:(0,a.Y)("div",{className:"intro-popup",children:(0,a.Y)("div",{className:"intro-popup-page",children:(0,a.Y)(G,{source:"cover_page",email:b,pub:o,user:null!=l?l:null,freeSignup:u,freeSignupEmail:f,referralCode:Y,forceSignup:null!=(n=null!=(t=(0,q.y)("force"))?t:F)?n:void 0,onMaybeLater:F?void 0:()=>{(0,w.u4)(w.qY.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),W()},onFreeSignup:$,onSubscribeInApp:()=>W(),blurbs:E,hideBlurbs:L,overrideSubtitle:R})})})}):null}):null,K=e=>(0,a.Y)("div",{className:"intro-inline",children:(0,a.Y)(G,(0,i._)({},e))}),G=e=>{let{autoFocus:t=!0,pub:r,user:o,email:l,freeSignup:d,freeSignupEmail:u,referralCode:m,source:g,forceSignup:y,submitButtonText:Y,onMaybeLater:S,onFreeSignup:T,onSubscribeInApp:k,blurbs:L,hideBlurbs:R,overrideSubtitle:P}=e,j=(0,p.useContext)(b.l9),M=(0,N.Iu)(),{iString:z}=(0,f.GO)(),{getConfigFor:W}=(0,v.mJ)(),V=(0,q.y)("referralCode"),K=(0,q.y)("refSource"),G=z("Learn More"),Q=j.getSettingFor("welcome_page_opt_out_text"),X="No thanks"===Q?z("No thanks"):null!=Q?Q:z("No thanks"),Z=(0,O.DNs)(r,{params:(0,i._)({utm_source:U.VU.subscribeEmail,utm_content:U.fL.learnMore},V&&{referralCode:V},K&&{refSource:K})});(0,p.useEffect)(()=>{"subscribe_page"===g&&(0,w.u4)(w.qY.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,w.u4)(w.qY.FULL_EMAIL_FORM_SHOWN,{source:g,functional_version:!0}),(0,E.jN)(E.ti.TRACK_REGISTRATION_SHOWN)},[g]);let ee=L&&!R?L.filter(e=>""!=e.description):[],et=!y&&!r.invite_only&&M&&!(null==o?void 0:o.reader_installed_at)&&W("welcome_page_app_button");return(0,a.FD)("div",{className:"full-email-form",children:[(0,a.FD)("div",{className:"vertically-centered",children:[S&&!r.invite_only&&(0,a.Y)(H,{onClick:S}),(0,a.Y)($,{pub:r,overrideSubtitle:P}),!r.invite_only||o&&o.is_free_subscribed?(0,a.FD)(a.FK,{children:[(0,a.Y)(C.Ye,{justifyContent:"center",style:{width:"100%"},children:(0,a.FD)(C.I1,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,a.Y)(C.I1,{className:B.A.emailFormContainer,justifyContent:"center",alignItems:"center",children:(0,a.Y)(h.A,{email:l,isWelcomePageColor:!0,freeSignup:d,freeSignupEmail:u,pub:r,referralCode:m,source:g,submitButtonText:Y,user:o,onConfirmationRequired:"enabled"===r.payments_state?()=>null:void 0,onSuccess:T||(()=>document.location.href="/"),autoFocus:t})}),(0,a.Y)(I.az,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:B.A.tosText,children:(0,a.Y)(F.U,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center",pub:r})})]})}),!y&&(S?(0,a.FD)(x.$n,{priority:"quaternary",className:B.A.maybeLater,onClick:S,"data-testid":"maybeLater",children:[X,(0,a.Y)(c.A,{size:20})]}):(0,a.FD)(x.$n,{priority:"quaternary",className:B.A.maybeLater,href:Z,localNavigation:!1,children:[G,(0,a.Y)(c.A,{size:20})]}))]}):(0,a.Y)(D.Ic,{onRequest:()=>n.e("60273").then(n.bind(n,66312)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:r,user:o,freeSignupEmail:u}),!!(null==ee?void 0:ee.length)&&(0,a.Y)("div",{className:"blurb-buffer"}),!!(null==ee?void 0:ee.length)&&(0,a.Y)(C.Ye,{className:"blurbs",gap:20,children:ee.map(e=>(0,a.FD)(C.I1,{gap:8,className:"blurb",children:[(0,a.Y)(A.EY.B4,{className:s()("blurb-text",B.A.blurbText),children:(0,a.Y)(J,{text:"“".concat(e.description,"”")})}),(0,a.FD)(A.EY.B4,{weight:"semibold",className:s()("blurb-text",B.A.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.Y)("a",{href:(0,O.$_T)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),et&&(0,a.Y)(_.T,{publication:r,user:o,email:l,onSubscribeSuccess:k})]})},$=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:r}=(0,b.Pu)(),{language:o}=(0,f.GO)(),{title:l,subtitle:d,logoUrl:c,coverPhotoUrl:u,hideTitle:p,hideSubtitle:m}=((e,t)=>{let n,i,r,o,a,l,{getConfigFor:s}=(0,v.mJ)();if(s("section_specific_welcome_pages")&&e.section){var d;n=e.section.name,i=e.section.description,r=null!=(d=e.section.logo_url)?d:e.logo_url,a=!!((o=e.section.cover_photo_url)&&e.section.hide_intro_title),l=!!(o&&e.section.hide_intro_subtitle)}else n=e.name,i=e.hero_text,r=e.logo_url,a=!!((o=e.cover_photo_url)&&e.hide_intro_title),l=!!(o&&e.hide_intro_subtitle);return t&&(i=t),{title:n,subtitle:i,logoUrl:r,coverPhotoUrl:o,hideTitle:a,hideSubtitle:l}})(t,n),h=r("display_welcome_page_details"),_=u&&(0,O.d4Y)(u);return(0,a.FD)(a.FK,{children:[u?(0,a.Y)(g.o,{className:"publication-cover-photo",src:u,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,i._)({},_&&_.width&&{height:"min(35vh, ".concat(680*_.height/_.width,"px)")})}):c&&(0,a.Y)(I.az,{paddingBottom:32,"data-testid":"intro-popup-logo",children:(0,a.Y)(T.Nq,{logoUrl:c,size:88})}),!p&&(0,a.Y)("h1",{className:s()("publication-name",{"no-logo":!c,"with-cover":u},B.A.balancedText),children:l}),!m&&d&&(0,a.Y)("p",{className:s()("publication-tagline with-cover",{verbose:!0,"with-cover":u},B.A.balancedText),children:d}),(0,a.Y)("div",{className:"publication-meta",children:W(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!h,language:o})})]})},H=e=>{let{onClick:t}=e;return(0,a.Y)(x.K0,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:B.A.closeWelcomeModal,children:(0,a.Y)(u.A,{size:20})})},J=e=>{let{text:t}=e,{truncatedText:n,measureRef:i}=(0,Y.L)({text:t,truncationRules:[{minLines:5,truncateTo:4}],ellipsesText:"...”"}),r=n?"".concat(n,"...”"):t;return(0,a.FD)("div",{style:{position:"relative"},children:[(0,a.Y)("div",{children:r}),(0,a.Y)("div",{ref:i,style:{visibility:"hidden",position:"absolute",width:"100%"}})]})}},68776:function(e,t,n){n.d(t,{Qi:()=>o}),n(4006);var i=n(17402);let r=(0,i.createContext)({});r.displayName="WWWContext";let o=()=>(0,i.useContext)(r)},77441:function(e,t,n){n.d(t,{f:()=>g});var i=n(4006),r=n(17402),o=n(15734),a=n.n(o),l=n(82519),s=n(84605),d=n(86500),c=n(35369),u=n(76977),p=n(88774),m=n(50874);let h=90887==n.j?[".txt",".srt",".vtt"]:null,g=e=>{let{postId:t,mediaUpload:n,transcription:o,onTranscriptionUploadStarted:g,onTranscriptionUploadCancelled:_,onTranscriptionUploadError:f,onTranscriptionUploaded:b,disabled:v,setUploadedFile:y}=e,{iString:Y}=(0,s.GO)(),[w,E]=(0,r.useState)(!1),[S,I]=(0,r.useState)(""),x=o&&"in_progress"===o.status,[C,T]=(0,r.useState)(null),A=async e=>{if(T(e),null==g||g(),e.length>0&&e[0]){var i,r,o;let a;y&&y(e[0]);let l=null!=(i=e[0].name.split(".").pop())?i:"";(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_STARTED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:l}),r=e[0],o=async t=>{I(t);let i=null,r={};try{if("txt"===l){var o;[i,r]=(0,m.b5)(t,null!=(o=null==n?void 0:n.duration)?o:0)}else"vtt"===l?[i,r]=(0,m._b)(t):"srt"===l&&([i,r]=(0,m._b)(t));let a=(0,m.gD)(i);if(i&&!a)await k(e[0],l,i,r);else{let e=Y("Error validating transcription file"),t="".concat(e,": ").concat(a);console.error(t),null==f||f(t)}}catch(t){let e=Y("Error parsing transcription file");console.error(e,t),null==f||f(e),y&&y(null)}finally{F()}},(a=new FileReader).onload=e=>{var t;o(null==(t=e.target)?void 0:t.result)},a.readAsText(r)}},k=async(e,i,r,o)=>{let{body:l}=await a().post("/api/v1/drafts/".concat(t,"/upload_transcription/start")).send({speaker_map:o}),{originalTranscriptionFileKey:s,unalignedTranscriptionFileKey:c,alignedTranscriptionFileKey:u}=l;E(!0);try{var p;await a().put(s).send(e).set("Content-Type",e.type),await a().put(c).send(JSON.stringify(r)).set("Content-Type","application/json"),await a().put(u).send(JSON.stringify(null!=(p=null==r?void 0:r.segments)?p:[])).set("Content-Type","application/json"),await a().post("/api/v1/drafts/".concat(t,"/upload_transcription/complete")).send(),await a().post("/api/v1/drafts/".concat(t,"/realign_transcription")).send({edits:{}}).then(e=>{var r;(null==(r=e.body)?void 0:r.data)&&((0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_COMPLETED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:i}),E(!1),b(e.body.data),F())})}catch(e){(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_FAILED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:i}),console.error("File upload failed:",e),null==f||f(Y("Error uploading transcription file"))}};(0,r.useEffect)(()=>{},[S]);let{openFileDialog:D,fileInputRef:N}=function(e){let{onFilesSelected:t}=e,n=(0,r.createRef)(),i=e=>{let n=e.target;n.files&&n.files.length>0&&t(n.files)};return(0,r.useEffect)(()=>{let e=n.current;if(e)return e.addEventListener("change",i),()=>{e.removeEventListener("change",i)}},[n]),{openFileDialog:()=>{var e;null==(e=n.current)||e.click()},fileInputRef:n}}({onFilesSelected:A}),F=()=>{T(null),N.current&&(N.current.value=""),null==_||_()},L=null==C?void 0:C[0],R=e=>{(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_TYPE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id,type:e}),N.current&&(N.current.accept=e,setTimeout(()=>D(),50))};return x?null:(0,i.FD)(u.I1,{gap:8,children:[!w&&(0,i.FD)(p.W1,{onOpen:()=>{(0,d.u4)(d.qY.TRANSCRIPTION_UPLOAD_FILE_CLICKED,{post_id:t,audio_upload_id:null==n?void 0:n.id})},trigger:(0,i.Y)(c.$n,{disabled:v,priority:"secondary",trailing:(0,i.Y)(l.A,{}),children:Y("Upload transcript")}),children:[(0,i.Y)(p.Dr,{onClick:()=>R(".txt"),children:Y("Upload .txt file")}),(0,i.Y)(p.Dr,{onClick:()=>R(".vtt"),children:Y("Upload .vtt file")}),(0,i.Y)(p.Dr,{onClick:()=>R(".srt"),children:Y("Upload .srt file")})]}),L&&(0,i.Y)(u.I1,{gap:8}),(0,i.Y)("input",{type:"file",ref:N,style:{display:"none"},accept:h.join(",")})]})}},60346:function(e,t,n){n.d(t,{H:()=>h});var i=n(4006),r=n(32485),o=n.n(r),a=n(33764),l=n(84605),s=n(17028),d=n(46453),c=n(11510),u=n(49807);if(52101!=n.j)var p=n(57324);var m=n(44307);function h(e){let{onDismiss:t,version:n,asParent:r}=e,a=(0,c.Iu)();return(0,i.FD)(s.I1,{borderTop:r?"detail":"transparent",gap:8,justifyContent:"center",alignItems:"center",className:o()(m.A.transparentLoginPrompt,"app"===n&&m.A.appPrompt,r&&m.A.asParent),minHeight:a?400:void 0,onClick:e=>{e.preventDefault(),e.stopPropagation()},children:["login"===n&&(0,i.Y)(g,{}),"app"===n&&(0,i.Y)(_,{onDismiss:t})]})}function g(){let{iString:e}=(0,l.GO)(),{requireLogin:t,onboardingModalRef:n}=(0,d.eE)();return(0,i.FD)(i.FK,{children:[(0,i.Y)(s.EY,{size:19,color:"primary",font:"display",fontWeight:"semibold",translated:!0,children:"Log in for more"}),(0,i.Y)(s.EY,{color:"secondary",size:15,translated:!0,children:"Or create an account"}),(0,i.FD)(s.Ye,{gap:8,paddingTop:8,children:[(0,i.Y)(s.$n,{style:{width:"138px"},size:"sm",priority:"secondary-outline",onClick:()=>null==t?void 0:t(),children:e("Login")}),(0,i.Y)(s.$n,{onClick:()=>{var e;return null==(e=n.current)?void 0:e.open()},style:{width:"138px"},size:"sm",priority:"primary",children:e("Create account")})]})]})}function _(e){let{onDismiss:t}=e,{iString:n}=(0,l.GO)();return(0,i.FD)(s.I1,{alignItems:"center",gap:16,paddingY:16,paddingX:24,paddingTop:32,children:[(0,i.Y)(s.pT,{width:48,paddingY:4,radius:"md",border:"detail",alignItems:"center",justifyContent:"center",bg:"primary",children:(0,i.Y)(a.o,{src:"https://substack.com/img/substack.png",maxWidth:40,useRetinaSizing:!0,imageIsFixedWidth:!0})}),(0,i.Y)(s.EY.B2,{size:17,textAlign:"center",font:"display",fontWeight:"semibold",translated:!0,children:"Get every post and note from creators you love with the Substack app."}),(0,i.FD)(s.I1,{style:{width:"100%"},padding:16,gap:8,children:[(0,i.Y)(s.$n,{size:"md",priority:"primary",onClick:t,href:(0,u._h3)({tab:"notes",redirect:"app-store",utm_source:p.VU.menu}),newTab:!0,children:n("Switch to the app")}),(0,i.Y)(s.$n,{onClick:t,size:"md",priority:"secondary",children:n("Maybe later")})]})]})}},72678:function(e,t,n){n.d(t,{g:()=>p});var i=n(4006);if(52101!=n.j)var r=n(50802);var o=n(17402),a=n(84605),l=n(12501),s=n(68349),d=n(88774),c=n(36372),u=n(39318);function p(e){let{pub:t}=e,{iString:n}=(0,a.GO)(),{popToast:p}=(0,c.d)(),{refetch:m,isLoading:h}=(0,l.st)({pathname:"/api/v1/live_stream/recording",method:"post"}),g=(0,o.useCallback)(async()=>{let e=await m();"id"in e?(0,s.V2)("".concat((0,u.$_T)({subdomain:t.subdomain}),"/publish/recording/").concat(e.id,"?startPractice=true")):p(()=>(0,i.Y)(c.y,{text:n("Something went wrong. Please try again.")}))},[m,t.subdomain]);return(0,i.Y)(d.Dr,{leading:(0,i.Y)(r.A,{}),disabled:h,onClick:g,children:n("Record a podcast")})}},8665:function(e,t,n){n.d(t,{Q:()=>o});var i=n(4006),r=n(59085);function o(){return(0,i.Y)(r.A,{size:12,color:"var(--color-fg-secondary)"})}},89256:function(e,t,n){n.d(t,{Lx:()=>T,Wp:()=>x,X_:()=>I,_V:()=>k,cY:()=>C});var i=n(69277),r=n(70408),o=n(4006),a=n(32485),l=n.n(a),s=n(43954),d=n(54718),c=n(56195),u=n(17402),p=n(86500);n(56804);var m=n(12501),h=n(76528),g=n(17028),_=n(97515),f=n(88774),b=n(65228),v=n(31679),y=n(70486),Y=n(62488),w=n(93427),E=n(39318),S=n(35407);function I(e){var t;let{onClick:n}=e,i=(0,y.Pk)();return i.inbox.pendingInviteCount?(0,o.Y)(g.VP,{className:l()(S.A.invitesRow),children:(0,o.FD)(v._h,{onClick:n,children:[(null!=(t=i.inbox.pendingInviteUnreadCount)?t:0)>0&&(0,o.Y)(w.XV,{className:S.A.unreadDot}),(0,o.Y)(g.fI,{width:56,justifyContent:"center",alignItems:"center",children:(0,o.Y)(s.A,{size:20})}),(0,o.Y)(v.Ru,{children:(0,o.FD)(g.fI,{justifyContent:"space-between",alignItems:"center",children:[(0,o.Y)(g.EY.B3,{weight:"semibold",translated:!0,children:"Requests"}),(0,o.Y)(g.EY.B4,{color:"secondary",flex:"auto"})]})})]})}):null}function x(){return(0,o.Y)(f.W1,{trigger:(0,o.Y)(g.K0,{"aria-label":"View more",priority:"tertiary",children:(0,o.Y)(d.A,{size:20})}),children:(0,o.Y)(f.Dr,{href:(0,E.tFi)({section:"privacy"}),target:"_blank",leading:(0,o.Y)(c.A,{}),children:(0,o.Y)(g.EY.B3,{weight:"semibold",children:"Messaging settings"})})})}function C(e){let t=[],n=[...(null==e?void 0:e.threads)||[],...(null==e?void 0:e.spamThreads)||[]];for(let e of null!=n?n:[])if("direct-message"===e.type){var o,a;t.push((0,r._)((0,i._)({},e),{members:e.messageThread.members.map(e=>{let{user:t}=e;return t}),messageThreadId:e.messageThread.id,recentMessageId:null!=(a=null==(o=e.recentMessage)?void 0:o.id)?a:null,recentMessage:e.recentMessage?{comment:e.recentMessage,userId:e.recentMessage.user_id}:null}))}return t}function T(e){let{error:t,items:n,isLoading:i,selectedConversationId:r,onSelect:a}=e,l=(0,Y.Z)(),{refetch:s}=(0,m.st)({pathname:"/api/v1/messages/inbox/invites/seen",method:"POST",auto:!1});return(0,u.useEffect)(()=>{i||(s(),(0,p.u4)(p.qY.DIRECT_MESSAGE_REQUESTS_VIEWED,{pending_conversation_requests:n.length,surface:l}))},[i]),(0,o.Y)(o.FK,{children:t?(0,o.Y)(o.FK,{children:"'Error'"}):i?(0,o.Y)(v.S,{}):(0,o.Y)(g.VP,{paddingY:12,gap:8,flex:"grow",children:n.length?n.map(e=>(0,o.Y)(b.L,{item:e,onSelect:(t,n)=>a(e.messageThread.id,n),isUnread:!e.lastViewedAt,isSelected:r===e.messageThread.id,tab:"requests"},e.id)):(0,o.Y)(A,{})})})}function A(e){let{spam:t}=e;return(0,o.Y)(g.VP,{flex:"grow",justifyContent:"center",alignItems:"center",sizing:"border-box",children:(0,o.Y)(_.p,{title:t?"No spam requests yet":"No requests yet",description:t?"Message requests that may be low-quality or unwanted will appear here.":"Control whose messages arrive as requests in your Settings.",button:t?void 0:(0,o.Y)(g.$n,{priority:"primary-mono",href:(0,E.tFi)({section:"privacy"}),newTab:!0,size:"sm",children:"Go to Settings"})})})}function k(){return(0,h.OU)("/api/v1/messages/dm/invites")}},30:function(e,t,n){function i(e,t){return e.map(t).filter(e=>null!=e)}function r(e,t,n){let i=e.slice();return i[t]=n,i}n.d(t,{A6:()=>r,Gt:()=>i}),n(58156)},54542:function(e,t,n){function*i(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;for(let i=e;i<t;i+=n)yield i}function*r(e){let t=Array.from(e);for(let e=t.length-1;e>=0;e--)yield t[e]}n.d(t,{BE:()=>r,y1:()=>i})},50874:function(e,t,n){n.d(t,{$r:()=>g,_b:()=>m,b5:()=>u,gD:()=>h,qD:()=>c});var i=n(69277),r=n(70408);n(39944);var o=n(69843),a=n.n(o),l=n(82776);let s=90887==n.j?[{regex:/\((\d{2}):(\d{2}):(\d{2})\):/,parse:e=>3600*parseInt(e[1])+60*parseInt(e[2])+parseInt(e[3])},{regex:/\((\d{2}):(\d{2})\):/,parse:e=>60*parseInt(e[1])+parseInt(e[2])},{regex:/\((\d{2}:\d{2}\.\d{1,3})\)/,parse:e=>{let[t,n]=e[1]?e[1].split(":").map(parseFloat):[0,0];return 60*t+n}}]:null,d=90887==n.j?[{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s\(\d{2}:\d{2}\):/,parse:e=>e[1]},{regex:/^(.*?[\w\s’‘,.'-]*)\s*\(\d{2}:\d{2}\.\d{1,3}\)$/,parse:e=>e[1]}]:null,c=e=>{let{rows:t,maxWordsPerRow:n=60}=e;if(a()(t[0]))return[];let o=[],l=(0,r._)((0,i._)({},t[0]),{words:t[0].words.map(e=>(0,r._)((0,i._)({},e),{originalIndex:0}))});for(let e=1;e<t.length;e++){let a=t[e];if(!a)continue;let s=(0,r._)((0,i._)({},a),{words:a.words.map(t=>(0,r._)((0,i._)({},t),{originalIndex:e}))});l.speaker===s.speaker&&l.words.length+s.words.length<=n?l={start:l.start,end:s.end,text:"".concat(l.text," ").concat(s.text),words:l.words.concat(...s.words),speaker:l.speaker}:(o.push(l),l=s)}return o.push(l),o},u=(e,t)=>{let n=e.split("\n"),o=[],a="",l="",c=0,u=0,p=new Set,m={},h=0;return n.forEach((e,i)=>{var r,g;let _=null!=(r=s.find(t=>!!e.match(t.regex)))?r:null,f=null!=(g=d.find(t=>!!e.match(t.regex)))?g:null,b=e.trim();if(_){let t=e.match(_.regex);t&&(u=_.parse(t),l&&(o.push({speaker:m[a],start:c,end:u,text:l.trim(),words:[]}),l=""),c=u,b=b.replace(_.regex,""))}if(f){let t=e.match(f.regex);t&&(a=f.parse(t),p.has(a)||(p.add(a),m[a]="SPEAKER_".concat(h++)),l+="".concat(b.substring(a.length)," "))}else""!==b.trim()&&(l+="".concat(b," "));i===n.length-1&&l&&o.push({speaker:m[a],start:c,end:t,text:l.trim(),words:[]})}),[{segments:o},Object.entries(m).reduce((e,t)=>(0,r._)((0,i._)({},e),{[t[1]]:t[0]}),{})]};function p(e){let[t,n,i]=e.split(":").map(parseFloat);return 3600*t+60*n+i}let m=e=>{let t=e.split("\n").map(e=>e.trim()),n=[],o=new Set,l={},s=0;for(let e=0;e<t.length;e++){let i=t[e];if(a()(i))continue;let r=i.trim();if(r.includes("--\x3e")){let i=r.split(" --\x3e ").map(e=>e.trim()),d=p(i[0]),c=p(i[1]);e++;let u=[],m="";for(;e<t.length&&!a()(t[e])&&""!==t[e].trim();){let n=t[e].trim();if(n.startsWith("<v ")){let e=n.match(/<v\s+([^>]+)>/);if(e&&e[1]){m=e[1].trim(),o.has(m)||(o.add(m),l[m]="SPEAKER_".concat(s++));let t=n.indexOf(">")+1;t<n.length&&u.push(n.substring(t).trim())}}else u.push(n);e++}n.push({speaker:l[m],start:d,end:c,text:u.join(" ").trim(),words:[]})}}return[{segments:n},Object.entries(l).reduce((e,t)=>(0,r._)((0,i._)({},e),{[t[1]]:t[0]}),{})]},h=e=>e?e.segments.some(e=>!e.text)?"Segment text is missing":e.segments.some(e=>a()(e.end)||a()(e.start))?"Segment start or end time is missing":null:"Transcription is missing",g=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return e.forEach(e=>{let i="(".concat((0,l.secondsToHHMMSS)(e.start,{strict:!0}),"):\n").concat(e.text.trim(),"\n");if(Object.keys(t).length>0){var r;let o=t[null!=(r=e.speaker)?r:""];o?n.push("".concat(o," ").concat(i)):n.push(i)}else e.user_id?n.push("user_".concat(e.user_id," ").concat(i)):n.push(i)}),n.join("\n")}}}]);