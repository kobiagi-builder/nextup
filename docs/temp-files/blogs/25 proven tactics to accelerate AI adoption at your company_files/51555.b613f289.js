"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["51555"],{94285:function(e,t,n){n.d(t,{A:()=>r});let r={root:"root-ke3ITh",theme_error:"theme_error-EdHJ89",themeError:"theme_error-EdHJ89",xs:"xs-u94A3p",sm:"sm-rkc_jb",md:"md-FWdzy4",icon:"icon-JVHTJb",theme_accent:"theme_accent-BLPCPx",themeAccent:"theme_accent-BLPCPx",theme_success:"theme_success-K1reIy",themeSuccess:"theme_success-K1reIy",theme_select:"theme_select-db4cFz",themeSelect:"theme_select-db4cFz",theme_highlight:"theme_highlight-c5Va8G",themeHighlight:"theme_highlight-c5Va8G",theme_mono:"theme_mono-w3BrBe",themeMono:"theme_mono-w3BrBe"}},57241:function(e,t,n){n.d(t,{A:()=>r});let r={layout:"layout-q5QzAB"}},55739:function(e,t,n){n.d(t,{A:()=>r});let r={backdrop:"backdrop-IqiELY",transition:"transition-CrwMKT",from:"from-UFAeOt",to:"to-HQoi62"}},52820:function(e,t,n){n.d(t,{EL:()=>x,Kd:()=>f,S$:()=>w,WR:()=>y,Wk:()=>g,qL:()=>_});var r,i=n(69277),o=n(70408),a=n(4006),l=n(44383),s=n.n(l),u=n(17402),d=n(34835),c=n(94729),m=n(98149);let p={variantOverrides:{},experimentFeatures:{},experimentExposures:{}};function f(){return"undefined"!=typeof window&&(0,i._)({variantOverrides:{},experimentFeatures:{},experimentExposures:{}},s()(window._preloads,["variantOverrides","experimentFeatures","experimentExposures","pubIdOverride"]))||p}let v=f(),h="undefined"!=typeof window?null==(r=window._preloads)?void 0:r.siteConfigs:{},x=(e,t)=>{let n=t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n},r=e=>{if(!e)return null;let r=n(e);if((0,m.rc)(r))return{intendedVariant:r,shouldLog:!1};if(t.variantOverrides&&e in t.variantOverrides)return{intendedVariant:t.variantOverrides[e],shouldLog:!1};let i=t.experimentExposures||{};if(i[e])return{intendedVariant:i[e],shouldLog:!1};let o=t.experimentFeatures||{};return o[e]?{intendedVariant:o[e],shouldLog:!0}:null},i=async(e,t,n)=>{if("undefined"!=typeof window){window._preloads.experimentExposures=window._preloads.experimentExposures||{};let r=window._preloads.experimentExposures;r[e]=t;try{await (0,c.x6)("/api/v1/experiment_exposure",{json:{experiment_name:e,variant_name:t,ignore_downsampling:!!n},method:"post"})}catch(t){delete r[e]}}};return{getExperimentVariant:e=>{let t=r(e);return t?t.intendedVariant:null},exposeExperiment:async function(e){let{ignoreDownsampling:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{intendedVariant:n,shouldLog:o}=r(e)||{};return!!o&&(await i(e,n,!!t),!0)},getExposedVariant:e=>{if(!e)return null;let r=n(e);if((0,m.rc)(r))return r;if(t.variantOverrides&&e in t.variantOverrides)return t.variantOverrides[e];let i=t.experimentExposures||{};return i[e]?i[e]:null},refreshExperimentVariants:async function(){let e,{ignoreDownsampling:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t&&(e=new URLSearchParams({ignore_downsampling:"true"}));let n=await (0,c.x6)("/api/v1/experiment_features",{method:"get",query:e});(null==n?void 0:n.features)&&(0,d.E)({experimentFeatures:n.features})}}},_=(0,u.createContext)(x(h,v));function w(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||v,o=(0,u.useMemo)(()=>x(t,i),[t,...Object.values(i)]);return(0,a.Y)(_.Provider,{value:o,children:r})}function g(){return(0,u.useContext)(_)}_.displayName="ExperimentsContext";let y=e=>{let t=(0,u.forwardRef)((t,n)=>{let r=g();return(0,a.Y)(e,(0,o._)((0,i._)({},r,t),{ref:n}))});return t.displayName="withExperimentsContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},84565:function(e,t,n){n.d(t,{Ke:()=>f,NQ:()=>h,sV:()=>v,yq:()=>x});var r,i,o=n(69277),a=n(70408),l=n(4006),s=n(17402),u=n(52820),d=n(85478);let c=(0,u.Kd)(),m="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.siteConfigs)?i:{},p=(e,t)=>(0,o._)({},(0,u.EL)(e,t),(0,d.UE)(e)),f=(0,s.createContext)(p(m,c));function v(e){let{siteConfigs:t={},experimentInfo:n,children:r}=e,i=n||c,o=(0,s.useMemo)(()=>p(t,i),[t,i]);return(0,l.Y)(f.Provider,{value:o,children:r})}function h(){return(0,s.useContext)(f)}f.displayName="ExperimentsAndSiteConfigContext";let x=e=>{let t=(0,s.forwardRef)((t,n)=>{let r=h();return(0,l.Y)(e,(0,a._)((0,o._)({},r,t),{ref:n}))});return t.displayName="withExperimentsAndSiteConfigContext(".concat(e.displayName||e.name||"Anonymous",")"),t}},3084:function(e,t,n){n.d(t,{iB:()=>p});var r,i,o=n(69277),a=n(70408),l=n(4006),s=n(17402),u=n(94729);let d="undefined"!=typeof window&&null!=(i=null==(r=window._preloads)?void 0:r.publicationUserSettings)?i:{},c=e=>({getSettingForPubUser:t=>{if(!t||!e)return null;let n=e[t];return void 0===n?null:n}}),m=(0,s.createContext)((0,a._)((0,o._)({},c(d)),{changeUserSetting:()=>Promise.resolve(void 0)}));function p(e){let{preloadPubUserSettings:t={},children:n}=e,[r,i]=(0,s.useState)(t),d=(0,s.useCallback)(async(e,t)=>{i(n=>(0,a._)((0,o._)({},n),{[e]:t}));try{await (0,u.x6)("/api/v1/publication_user_settings/user",{method:"PUT",json:{type:e,value:t}})}catch(e){console.error(e)}},[i]),p=(0,s.useMemo)(()=>(0,a._)((0,o._)({},c(r)),{changeUserSetting:d}),[r,d]);return(0,l.Y)(m.Provider,{value:p,children:n})}m.displayName="PublicationUserSettingsContext"},46271:function(e,t,n){n.d(t,{Jd:()=>h,Qg:()=>x,ur:()=>_,vu:()=>v});var r,i,o,a,l=n(69277),s=n(70408),u=n(4006),d=n(17402),c=n(94729);let m="undefined"!=typeof window&&null!=(o=null==(r=window._preloads)?void 0:r.user)?o:null,p="undefined"!=typeof window&&null!=(a=null==(i=window._preloads)?void 0:i.userSettings)?a:{},f=(0,d.createContext)({user:m,setUser:()=>void 0,userSettings:p,changeSetting:()=>Promise.resolve()});function v(e){let{defaultValue:t,userSettings:n,children:r}=e,[i,o]=(0,d.useState)(t||m),[a,v]=(0,d.useState)(null!=n?n:p),h=async(e,t,n,r)=>{if(!i&&!(null==r?void 0:r.token))return;let o=a[e];v((0,s._)((0,l._)({},a),{[e]:t}));try{await (0,c.x6)("/api/v1/user-setting",{method:"PUT",json:{type:e,value_bool:"bool"!==n&&(n||"boolean"!=typeof t)?void 0:t,value_datetime:"datetime"!==n&&(n||"string"!=typeof t)?void 0:t,value_text:"text"===n?t:void 0,token:null==r?void 0:r.token}})}catch(t){if(t instanceof c.fk)alert(t.getMessage()),v(t=>(0,s._)((0,l._)({},t),{[e]:o}));else throw t}},x=(0,d.useMemo)(()=>({user:i,setUser:o,userSettings:a,changeSetting:h}),[i,a]);return(0,u.Y)(f.Provider,{value:x,children:r})}function h(){return(0,d.useContext)(f).user}function x(){return(0,d.useContext)(f).userSettings}function _(){return(0,d.useContext)(f)}f.displayName="UserContext"},48028:function(e,t,n){n.d(t,{I:()=>m});var r=n(69277),i=n(4006),o=n(38390),a=n(32485),l=n.n(a),s=n(17402),u=n(84014),d=n(11510),c=n(18359);let m=(0,s.forwardRef)((e,t)=>{let{children:n,className:a,fullscreenMobile:s,width:m,style:p,onClose:f,disableCloseOnBackdropClick:v,testId:h,initialFocus:x}=e,_=(0,d.Iu)(),w=_&&!s&&f;return(0,i.FD)(o.UC,{forceMount:!0,ref:t,"data-testid":h,className:l()(a,c.A.panel,_&&c.A.mobile,s&&c.A.fullscreenMobile),style:(0,r._)({width:_?void 0:m},p),onOpenAutoFocus:e=>{(null==x?void 0:x.current)&&(e.preventDefault(),x.current.focus())},onCloseAutoFocus:e=>{e.preventDefault()},onPointerDownOutside:e=>{e.preventDefault()},onEscapeKeyDown:e=>{v&&e.preventDefault()},children:[w&&(0,i.Y)(u.D,{close:f}),n]})});m.displayName="ModalPanel"},55734:function(e,t,n){n.d(t,{r:()=>p,p:()=>m});var r=n(4006),i=n(35426),o=n(32485),a=n.n(o),l=n(17402);let s="transition-vApOKl",u="mobile-v3F3YQ",d="from-yIK2iV",c="to-tgOjA4",m=e=>{let{children:t}=e;return(0,r.Y)(i.e.Child,{as:l.Fragment,enter:s,enterFrom:d,enterTo:c,leave:s,leaveFrom:c,leaveTo:d,children:t})},p=e=>{let{children:t}=e;return(0,r.Y)(i.e.Child,{as:l.Fragment,enter:a()(s,u),enterFrom:a()(d,u),enterTo:a()(c,u),leave:a()(s,u),leaveFrom:a()(c,u),leaveTo:a()(d,u),children:t})}}}]);