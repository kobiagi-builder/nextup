"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["63601"],{39625:function(e,t,n){n.d(t,{A:()=>i});let i={textInput:"textInput-kYr7wC"}},72032:function(e,t,n){n.d(t,{A:()=>i});let i={header:"header-m3czQu",headerWithJustTitle:"headerWithJustTitle-AWuTLu",noImage:"noImage-VVe5Lh",actions:"actions-mMxsK2",thickRule:"thickRule-c8r1qH",bodyWrapperTwoMiddleColumns:"bodyWrapperTwoMiddleColumns-EOoshF",notifyButton:"notifyButton-wkevVH",hoverText:"hoverText-OtXqlP",notifyButtonInternal:"notifyButtonInternal-wv0x02",titleNotifyButton:"titleNotifyButton-bWyjlY",caret:"caret-vNjCU3",collapsed:"collapsed-KQpXLZ"}},45663:function(e,t,n){n.d(t,{A:()=>i});let i={specialFeatureHeaderContainer:"specialFeatureHeaderContainer-Skrlng",thickRule:"thickRule-oguYhe",threeColumnContainer:"threeColumnContainer-ziuSvf",mediumRule:"mediumRule-wQbBfo",headerButtonMobile:"headerButtonMobile-DURJFG",america250HomepageHeader:"america250HomepageHeader-Gp7Pmn",a250Rule:"a250Rule-oAzvtB",a250Logo:"a250Logo-sb3SfS"}},22232:function(e,t,n){n.d(t,{A:()=>i});let i={noAnimation:"noAnimation-jU0t5u"}},78918:function(e,t,n){n.d(t,{A:()=>i});let i={container:"container-xlqXTa",containerHoverLight:"containerHoverLight-pv1hHj"}},60996:function(e,t,n){n.d(t,{k:()=>g});var i=n(79785),l=n(4006),r=n(17402),o=n(84605),a=n(45064),s=n(76977),d=n(16993),c=n(57820),u=n(18947),p=n(49807),h=n(81675);function m(){let e=(0,i._)([""," by ",""]);return m=function(){return e},e}function g(e){let{onClose:t,post:n,pub:i,comment:g}=e,{iString:v,iTemplate:Y,language:f}=(0,o.GO)(),[b,y]=(0,r.useState)({width:400,height:400}),[_,w]=(0,r.useState)(!1),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(!g&&!n)return;let e=e=>{e.data.iframeHeight&&(y({width:500,height:e.data.iframeHeight}),w(!0))};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[g,n]);let I=g?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat("".concat(g.body||""),"</p>").concat(g.name?"<p> - ".concat(g.name,"</p>"):g.handle?"<p> - @".concat(g.handle,"</p>"):"",'<a data-comment-link href="').concat((0,p.Zgx)(g),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):i&&n?'<div class="substack-post-embed"><p lang="'.concat(f,'">').concat(Y(m(),n.title,i.author_name),"</p><p>").concat(n.subtitle,'</p><a data-post-link href="').concat((0,u.st)(i,n.slug),'">').concat(v("Read on Substack"),'</a></div><script async src="').concat((0,p.Ewe)(),'/embedjs/embed.js" charset="utf-8"><\/script>'):"",{width:k,height:S,scaler:D}=(e=>{let{width:t,height:n}=e,i="undefined"!=typeof window?window.innerHeight:1/0,l=1;return i<700?l=.7:i<800?l=.75:i<900&&(l=.8),{width:t*l,height:n*l,scaler:l}})(b);return(0,l.FD)(l.FK,{children:[(0,l.Y)(d.rQ,{title:v("Embed note"),showDivider:!0,showClose:!0,onClose:t}),(0,l.Y)(d.cw,{gap:20,children:(0,l.FD)(s.VP,{style:{width:_?k:void 0,height:S},minHeight:_?void 0:220,bg:"secondary",radius:"md",overflow:"hidden",border:"detail",children:[(0,l.Y)("iframe",{ref:C,style:{transform:"scale(".concat(D,")"),width:b.width,height:b.height,display:_?"block":"none"},className:h.A.iframe,src:g?(0,p.RYA)(g,{isPreview:!0}):i&&n?(0,u.ti)(i,n.slug,{isPreview:!0}):"",onLoad:()=>{w(!0)}}),!_&&(0,l.Y)(s.ov,{flex:"grow",children:(0,l.Y)(c.y$,{})})]})}),(0,l.Y)(d.jl,{direction:"column",primaryButton:(0,l.Y)(a.c,{value:I,confirmationText:v("Copied code to clipboard")})})]})}},30796:function(e,t,n){n.d(t,{h:()=>c});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(10278),s=n(76977),d=n(71305);function c(e){let{className:t,assets:n,readOnly:l,onClick:c,maxHeight:p=420,children:h,feedItem:m,commentId:g}=e,v=(0,a.Cu)(n),[Y,f]=(0,o.useState)(null),b=(0,o.useRef)(null),y=(0,a.wY)(b,0),[_,w]=v;if(!_||!w)return null;let C=_.width&&_.height?_.width/_.height:1,I=w.width&&w.height?w.width/w.height:1,k=C+I,S=y-6,D=Math.min(p,S/k),F=[S*C/k,S*I/k];return(0,i.FD)(s.pT,{ref:b,className:r()(d.A.imageDiptych,t),gap:6,overflow:"hidden",children:[v.map((e,t)=>(0,i.Y)(u,{asset:e.src,explicit:e.explicit,readOnly:l,width:F[t],height:D,index:t,onClick:l?void 0:n=>{n.preventDefault(),c&&c({attachmentId:e.id,attachmentType:"image"}),f({index:t})},children:h},e.src)),!l&&(0,i.Y)(a.yx,{assets:v,imageViewer:Y,setImageViewer:f,readOnly:l,feedItem:m,commentId:g})]})}function u(e){let{asset:t,explicit:n,onClick:l,readOnly:o,width:s=500,height:c,children:u,index:p}=e;return(0,i.Y)(a.Vn,{asset:t,explicit:n,onClick:l,readOnly:o,width:s,height:c,className:r()(d.A.diptychImage,d.A["index-".concat(p+1)]),children:u})}},30653:function(e,t,n){n.d(t,{M:()=>x});var i=n(79785),l=n(4006),r=n(32485),o=n.n(r),a=n(17402),s=n(8853),d=n(71900),c=n(9599),u=n(2538),p=n(84605),h=n(86500),m=n(68349),g=n(24078),v=n(89490),Y=n(35369),f=n(16993),b=n(84843),y=n(81203),_=n(46453),w=n(11510),C=n(39318),I=n(57324),k=n(82130);function S(){let e=(0,i._)(["Tell "," you appreciate their post"]);return S=function(){return e},e}function D(){let e=(0,i._)(["Join the discussion for ","'s post"]);return D=function(){return e},e}function F(){let e=(0,i._)(["Quickly share posts with your followers"]);return F=function(){return e},e}let P=[{angle:-25,rotation:5,scale:1,flip:!1},{angle:135,rotation:-5,scale:.66,flip:!0}];function x(e){let{isOpen:t,setOpen:n,author:i,pub:r,action:o,postId:s,postSlug:d}=e,c=(0,w.Iu)(),{iString:u,iTemplate:g}=(0,p.GO)(),{requireLogin:v}=(0,_.eE)();if((0,a.useEffect)(()=>{t&&(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SHOWN,{action:o,author_id:null==i?void 0:i.id,post_id:s})},[t,o,i,s]),!i||!r)return null;let y=()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_DISMISSED,{action:o,author_id:null==i?void 0:i.id,post_id:s}),n(!1)},k={like:u("Like this in the app"),comment:u("Comment in the app"),restack:u("Restack this in the app")},P={like:g(S(),i.name),comment:g(D(),i.name),restack:g(F())},x=k[o],A=P[o];return(0,l.FD)(f.aF,{isOpen:t,onClose:y,children:[(0,l.Y)(b.rQ,{icon:(0,l.Y)(T,{action:o,author:i,pub:r}),alignItems:"center",title:x,description:A,showClose:!0,onClose:y}),(0,l.Y)(f.q1,{}),(0,l.Y)(f.jl,{direction:"column",primaryButton:(0,l.Y)(Y.$n,{priority:"primary",onClick:()=>{if((0,h.u4)(h.qY.POST_UFI_APP_UPSELL_GET_APP_CLICKED,{action:o,author_id:null==i?void 0:i.id,post_id:s,is_mobile:c}),c){let e=(0,C.XV8)(r.subdomain,d,{redirect:"app-store",source:I.VU.postUfiModal});(0,m.V2)(e,{newTab:!0}),n(!1)}},children:u(c?"Open Substack":"Get the app")}),secondaryButton:(0,l.Y)(Y.$n,{priority:"secondary",onClick:()=>{(0,h.u4)(h.qY.POST_UFI_APP_UPSELL_SIGN_IN_CLICKED,{action:o,author_id:null==i?void 0:i.id,post_id:s}),n(!1),null==v||v()},children:u("Sign in")})})]})}function T(e){let{action:t,author:n,pub:i}=e,r=n.photo_url?(0,l.Y)(g.eu,{photoUrl:n.photo_url,size:84,className:k.A.avatar}):i.logo_url?(0,l.Y)(y.Nq,{pub:i,size:84,className:k.A.avatar}):(0,l.Y)(s.c,{src:"/img/substack-app-icon.png",width:84,height:84});return(0,l.FD)(v.az,{position:"relative",width:84,height:84,children:[r,P.map((e,n)=>(0,l.Y)(A,{config:e,action:t},n))]})}function A(e){let{config:t,action:n}=e,i=t.angle*Math.PI/180,r=46*Math.cos(i),o=46*Math.sin(i);return(0,l.Y)(v.az,{className:k.A.stickerContainer,style:{"--sticker-x":"".concat(r,"px"),"--sticker-y":"".concat(o,"px"),"--sticker-scale":t.scale,"--sticker-rotation":"".concat(t.rotation,"deg"),"--sticker-flip":t.flip?"-1":"1"},children:(0,l.Y)(E,{action:n})})}function E(e){let{action:t}=e;return"like"===t?(0,l.Y)(c.A,{size:32,className:o()(k.A.sticker,k.A.like)}):"comment"===t?(0,l.Y)(d.A,{size:32,className:o()(k.A.sticker,k.A.comment)}):"restack"===t?(0,l.Y)(u.A,{size:32,className:o()(k.A.sticker,k.A.restack)}):null}},13950:function(e,t,n){n.d(t,{DH:()=>d,xF:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(10996),s=n(6045);function d(e){let{prefix:t,children:n}=e;if(t){let e="header"===t?s.A.headerTheme:"footer"===t?s.A.footerTheme:s.A.footerSecondaryTheme;return(0,i.Y)(c.Provider,{value:t,children:(0,i.Y)("div",{className:r()(s.A.pubTheme,e),children:n})})}return(0,i.Y)(a.NP,{theme:s.A.pubTheme,children:n})}let c=(0,o.createContext)(null);function u(){let e=(0,o.useContext)(c);return{onOpen:o.default.useCallback(()=>{let t=document.getElementById("menu-portal");if(!t||!e)return;let n="header"===e?s.A.headerTheme:"footer"===e?s.A.footerTheme:s.A.footerSecondaryTheme;t.className=r()(s.A.pubTheme,n)},[e]),onClose:o.default.useCallback(()=>{let e=document.getElementById("menu-portal");e&&(e.className="")},[])}}},7e4:function(e,t,n){n.d(t,{b:()=>k});var i=n(79785),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(84605),d=n(35369),c=n(33727),u=n(60322),p=n(76977),h=n(16993),m=n(81203),g=n(63136),v=n(36372),Y=n(39318),f=n(82776);function b(){let e=(0,i._)(["Recommend ","?"]);return b=function(){return e},e}function y(){let e=(0,i._)(["Recommend "," and "," other Substacks?"]);return y=function(){return e},e}function _(){let e=(0,i._)(["Since you embedded "," in your post, we thought you might like to recommend them to your subscribers."]);return _=function(){return e},e}function w(){let e=(0,i._)(["Since you embedded these Substacks in your post, we thought you might like to recommend them to your subscribers."]);return w=function(){return e},e}function C(){let e=(0,i._)(["Recommend "," Substack"]);return C=function(){return e},e}function I(){let e=(0,i._)(["Recommend "," Substacks"]);return I=function(){return e},e}function k(e){var t,n;let{pub:i,pubsToRecommend:o}=e,{iString:c,iTemplate:u,iPlural:m}=(0,s.GO)(),g=(0,v.d)(),[Y,f]=(0,r.useState)(!0),[k,D]=(0,r.useState)(!1),[F,P]=(0,r.useState)(new Set((o||[]).map(e=>e.id)));if(0===o.length||!o[0])return null;let x=()=>{f(!1)},T=async()=>{try{D(!0);let e=Array.from(F);await a().put("/api/v1/recommendations/multiple").send({recommending_publication_id:i.id,recommended_publication_ids:e,source:"post_publish_cta",suggested:e.map(()=>!0)}),e.length&&g.popToast(()=>(0,l.Y)(v.y,{text:m("Added %1 recommendation","Added %1 recommendations",e.length)})),x()}catch(e){console.error("Failed to add recommendations: ",e),g.popToast(()=>(0,l.Y)(v.y,{text:c("Failed to add recommendations")})),x()}finally{D(!1)}},A=F.size,E=1===o.length?u(b(),o[0].name):u(y(),o[0].name,o.length-1),N=1===o.length?u(_(),null!=(n=null==(t=o[0])?void 0:t.name)?n:""):u(w());return(0,l.Y)(l.FK,{children:Y?(0,l.FD)(h.aF,{isOpen:Y,onClose:x,children:[(0,l.Y)(h.rQ,{title:E,description:N,onClose:x,showClose:!0,showDivider:!0}),(0,l.Y)(h.cw,{children:(0,l.Y)(p.VP,{gap:16,children:o.map(e=>(0,l.Y)(S,{pub:e,checked:F.has(e.id),onChange:()=>{var t;let n;return t=e.id,void((n=new Set(F)).has(t)?n.delete(t):n.add(t),P(n))}},e.id))})}),(0,l.Y)(h.jl,{showDivider:!0,primaryButton:(0,l.Y)(d.$n,{onClick:T,disabled:0===A,loading:k,children:0===A?c("Recommend"):u(1===A?C():I(),A)}),secondaryButton:(0,l.Y)(d.$n,{onClick:x,priority:"secondary",children:c("Cancel")})})]}):null})}function S(e){let{pub:t,checked:n,onChange:i}=e;return(0,l.Y)("label",{children:(0,l.FD)(c.Z,{padding:12,gap:12,direction:"row",alignItems:"center",cursor:"pointer",children:[(0,l.Y)(m.wg,{pub:t,size:40,openInNewTab:!0}),(0,l.FD)(p.VP,{gap:2,flex:"grow",children:[(0,l.Y)(g.EY.B3,{children:(0,l.Y)(g.Yq,{href:(0,Y.$_T)(t),target:"_blank",children:t.name})}),(0,l.Y)(g.EY.B4,{color:"secondary",children:(0,f.getByLine)(t)})]}),(0,l.Y)(u.S,{name:"pub-".concat(t.id),checked:n,onChange:i,size:"sm"})]})})}},84236:function(e,t,n){n.d(t,{Jq:()=>u,pJ:()=>p});var i=n(69277),l=n(70408),r=n(4006),o=n(76977),a=n(63136),s=n(39318),d=n(49807);let c=(e,t)=>{var n;return null==(n=e.sponsorship_campaigns)?void 0:n.find(e=>{let n="podcast"===e.campaign_type,i=e.section_id&&t&&e.section_id===t.id,l=!e.section_id&&!t;return n&&(i||l)})},u=(e,t)=>!!c(e,t),p=e=>{var t;let{align:n="left",direction:u="row",gap:p=16,pub:h,post:m=null,section:g=null,textField:v="short_text",imageHeight:Y=16,paddingY:f,paddingX:b}=e,y=c(h,g);if(!y)return null;let _="episode_short_text"===v?y.episode_short_text:y.short_text;if(!_)return null;let w=(0,s.qCG)({campaignId:y.id,medium:"podcast",pubId:h.id,url:y.link_url,postId:null==m?void 0:m.id,referrer:"undefined"!=typeof window?window.location.href:void 0}),C=(0,r.FD)(r.FK,{children:[(0,r.Y)(a.EY.Digit,{color:"pub-secondary-text",weight:"regular",children:_}),y.image_url&&(0,r.Y)("img",{alt:null!=(t=y.image_alt_text)?t:"",src:(0,d.dJ9)(y.image_url,250),style:{width:"auto",height:Y}})]}),I=(0,i._)({alignItems:"center",as:"a",gap:p,href:w,target:"_blank",justifyContent:(()=>{switch(n){case"center":return"center";case"right":return"end";default:return}})()},f&&{paddingY:f},b&&{paddingX:b});return"column"===u?(0,r.Y)(o.I1,(0,l._)((0,i._)({},I),{children:C})):(0,r.Y)(o.Ye,(0,l._)((0,i._)({},I),{children:C}))}},4013:function(e,t,n){n.d(t,{A:()=>d});var i=n(69277),l=n(70408),r=n(4006),o=n(32641),a=n(97731);let s=e=>{var{name:t,children:n}=e,s=(0,o._)(e,["name","children"]);return(0,r.Y)(a.A,(0,l._)((0,i._)({},s),{name:t,svgParams:{viewBox:"0 0 24 24",height:24,width:24,stroke:"#1C110B"},children:n}))},d=e=>(0,r.FD)(s,(0,l._)((0,i._)({},e),{name:"ActivationUsersIcon",children:[(0,r.Y)("path",{d:"M17 21V19C17 16.7909 15.2091 15 13 15H5C2.79086 15 1 16.7909 1 19V21",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 11C11.2091 11 13 9.20917 13 7.00003C13 4.79089 11.2091 3.00003 9 3.00003C6.79086 3.00003 5 4.79089 5 7.00003C5 9.20917 6.79086 11 9 11Z",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{d:"M23 21V19C22.9986 17.1772 21.765 15.5858 20 15.13",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"}),(0,r.Y)("path",{d:"M16 3.13004C17.7699 3.58321 19.0078 5.17803 19.0078 7.00504C19.0078 8.83204 17.7699 10.4269 16 10.88",strokeWidth:"1.3",strokeLinecap:"round","stroke-linejoin":"round"})]}))},32999:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=24,color:n="var(--color-utility-white)",className:s}=e,d=(0,r._)(e,["size","color","className"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},d),{name:"EyeIconFilled",svgParams:{viewBox:"0 0 24 24"},stroke:"none",width:t,height:t,fill:n,className:s,children:(0,o.Y)("path",{d:"M11.869 18.1925C17.6987 18.1925 21.7307 13.4687 21.7307 11.9962C21.7307 10.5163 17.6914 5.7998 11.869 5.7998C6.11209 5.7998 2 10.5163 2 11.9962C2 13.4687 6.11209 18.1925 11.869 18.1925ZM11.869 16.0566C9.59825 16.0566 7.79331 14.2123 7.79331 11.9962C7.79331 9.72174 9.59825 7.93573 11.869 7.93573C14.1179 7.93573 15.9374 9.72174 15.9374 11.9962C15.9374 14.2123 14.1179 16.0566 11.869 16.0566ZM11.869 13.4614C12.6769 13.4614 13.3464 12.7981 13.3464 11.9962C13.3464 11.187 12.6769 10.5236 11.869 10.5236C11.0538 10.5236 10.3843 11.187 10.3843 11.9962C10.3843 12.7981 11.0538 13.4614 11.869 13.4614Z"})}))}},46137:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,l._)((0,i._)({},e),{name:"FoundingBadgeIcon",svgParams:{height:14,width:14,viewBox:"0 0 14 14"},children:[(0,r.Y)("circle",{cx:"3.93749",cy:"5.97916",r:"3.4375"}),(0,r.Y)("path",{d:"M8.39583 9.49273C8.39583 11.3912 6.85681 12.9302 4.95833 12.9302C3.05985 12.9302 1.52083 11.3912 1.52083 9.49273C1.52083 7.59425 3.05985 6.05523 4.95833 6.05523C6.85681 6.05523 8.39583 7.59425 8.39583 9.49273Z"}),(0,r.Y)("path",{d:"M12.4792 9.49273C12.4792 11.3912 10.9402 12.9302 9.04172 12.9302C7.14324 12.9302 5.60422 11.3912 5.60422 9.49273C5.60422 7.59425 7.14324 6.05523 9.04172 6.05523C10.9402 6.05523 12.4792 7.59425 12.4792 9.49273Z"}),(0,r.Y)("circle",{cx:"6.99999",cy:"3.9375",r:"3.4375"}),(0,r.Y)("circle",{cx:"10.0625",cy:"5.97916",r:"3.4375"})]}))},3364:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{color:t="#262626"}=e,n=(0,r._)(e,["color"]);return(0,o.FD)(a.A,(0,l._)((0,i._)({},n),{name:"LockThinIcon",svgParams:{height:16,width:16},children:[(0,o.Y)("path",{className:"lock-shackle",d:"M5 6L5 3.9C5 2.57452 6.11929 1.5 7.5 1.5C8.88071 1.5 10 2.57452 10 3.9V6",stroke:t}),(0,o.Y)("path",{className:"lock-body",d:"M2 7.5C2 6.94772 2.44772 6.5 3 6.5H12C12.5523 6.5 13 6.94772 13 7.5V12.5C13 13.0523 12.5523 13.5 12 13.5H3C2.44771 13.5 2 13.0523 2 12.5V7.5Z",fill:t,stroke:t})]}))}},20297:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(33167),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideArrowUpRight",svgParams:{height:24,width:24},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},89839:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(57157),a=n(97731);let s=function(e){return(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideBookmark",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))}},18325:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(54687),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideComments",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},43427:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(23345),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideHeart",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},14394:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(4006),o=n(60927),a=n(97731);let s=e=>(0,r.Y)(a.A,(0,l._)((0,i._)({},e),{name:"LucideArrowLeftRight",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)(o.A,{height:24,stroke:e.stroke,fill:e.fill,strokeWidth:e.strokeWidth})}))},78330:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"LucideShare",svgParams:{height:24,width:24,fill:"#000000",strokeWidth:0},children:(0,r.Y)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.Y)("path",{d:"M12.4376 15.6C4.77778 15.6 2 20.3999 2 20.3999C2 12.5999 5.88889 8.4 12.4376 8.4V3L22 11.9812L12.4376 21V15.6Z",strokeWidth:e.strokeWidth,fill:e.fill,className:"lucide",strokeLinecap:"round",strokeLinejoin:"round"})})}))},58299:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"NoteForwardIcon",svgParams:{height:24,width:24,stroke:e.stroke,strokeWidth:e.strokeWidth},children:(0,r.Y)("path",{d:"M21 3V8M21 8H16M21 8L18 5.29962C16.7056 4.14183 15.1038 3.38328 13.3879 3.11547C11.6719 2.84766 9.9152 3.08203 8.32951 3.79031C6.74382 4.49858 5.39691 5.65051 4.45125 7.10715C3.5056 8.5638 3.00158 10.2629 3 11.9996M3 21V16M3 16H8M3 16L6 18.7C7.29445 19.8578 8.89623 20.6163 10.6121 20.8841C12.3281 21.152 14.0848 20.9176 15.6705 20.2093C17.2562 19.501 18.6031 18.3491 19.5487 16.8925C20.4944 15.4358 20.9984 13.7367 21 12",strokeLinecap:"round","stroke-linejoin":"round"})}))},71941:function(e,t,n){n.d(t,{A:()=>s});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(97731);let s=e=>{var{size:t=24,color:n="var(--color-fg-primary)"}=e,s=(0,r._)(e,["size","color"]);return(0,o.Y)(a.A,(0,l._)((0,i._)({},s),{name:"NoteQuoteForwardIcon",svgParams:{viewBox:"0 0 24 24"},width:t,height:t,stroke:n,strokeWidth:2,fill:"none",children:(0,o.Y)("path",{d:"M13.4147 2.09993C10.4072 1.67249 7.2423 2.61548 4.92891 4.92887C1.02366 8.83411 1.02366 15.1658 4.92891 19.071C8.83415 22.9762 15.1658 22.9762 19.071 19.071C21.3844 16.7576 22.3274 13.5927 21.9 10.5852M18.5 2.62126C18.8978 2.22343 19.4374 1.99994 20 1.99994C20.5626 1.99994 21.1021 2.22343 21.5 2.62126C21.8978 3.01908 22.1213 3.55865 22.1213 4.12126C22.1213 4.68387 21.8978 5.22343 21.5 5.62126L13 14.1213L8.99998 15.1213L9.99998 11.1213L18.5 2.62126Z",strokeLinecap:"round","stroke-linejoin":"round"})}))}},26184:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.FD)(o.A,(0,l._)((0,i._)({},e),{name:"PinIconSmall",svgParams:{height:16,width:14},children:[(0,r.Y)("path",{d:"M7 1.00006L10 1.00006C10.5523 1.00006 11.0846 1.47946 10.8452 1.97714C10.6681 2.3451 10.2927 2.75194 9.5 3.17301L10 7.51891C10.7819 7.7681 11.949 8.31222 12.9204 9.21856C13.4827 9.74324 13.0402 10.561 12.2711 10.561H7"}),(0,r.Y)("path",{d:"M7 1.00006L4 1.00006C3.44772 1.00006 2.91538 1.47946 3.15482 1.97714C3.33185 2.3451 3.70727 2.75194 4.5 3.17301L4 7.51891C3.2181 7.7681 2.05103 8.31222 1.07961 9.21856C0.517263 9.74324 0.959808 10.561 1.72891 10.561H7"}),(0,r.Y)("path",{d:"M7 10.561L7 15","stroke-linecap":"round","stroke-linejoin":"round"})]}))},23747:function(e,t,n){n.d(t,{A:()=>a});var i=n(69277),l=n(70408),r=n(4006),o=n(97731);let a=e=>(0,r.Y)(o.A,(0,l._)((0,i._)({},e),{name:"YoutubeIcon",svgParams:{height:24,width:24},children:(0,r.Y)("path",{d:"M21.582 6.07467C21.352 5.21467 20.674 4.53667 19.814 4.30667C18.254 3.88867 12 3.88867 12 3.88867C12 3.88867 5.746 3.88867 4.186 4.30667C3.326 4.53667 2.648 5.21467 2.418 6.07467C2 7.63467 2 11.8887 2 11.8887C2 11.8887 2 16.1427 2.418 17.7027C2.648 18.5627 3.326 19.2407 4.186 19.4707C5.746 19.8887 12 19.8887 12 19.8887C12 19.8887 18.254 19.8887 19.814 19.4707C20.675 19.2407 21.352 18.5627 21.582 17.7027C22 16.1427 22 11.8887 22 11.8887C22 11.8887 22 7.63467 21.582 6.07467ZM10 15.3527V8.42467L16 11.8887L10 15.3527Z"})}))},9292:function(e,t,n){n.d(t,{Sb:()=>o});var i=n(69277),l=n(70408),r=n(4006);function o(e){return(0,r.Y)("svg",(0,l._)((0,i._)({width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg"},e),{children:(0,r.Y)("path",{d:"M5.67709 10C6.02484 10 6.28151 9.73617 6.28151 9.37872V7.91489H6.37259C7.82981 7.91489 8.69917 8.39574 9.30773 9.54894C9.48574 9.88085 9.69273 9.97021 9.93698 9.97021C10.2682 9.97021 10.5 9.64255 10.5 9.00426C10.5 5.94894 9.16283 4.10638 6.37259 4.10638H6.28151V2.64255C6.28151 2.28511 6.02484 2 5.66881 2C5.43698 2 5.27139 2.09787 5.01886 2.33617L1.73183 5.4766C1.56624 5.6383 1.5 5.82553 1.5 6C1.5 6.16596 1.57038 6.36596 1.73183 6.5234L5.01886 9.68511C5.24655 9.90213 5.43698 10 5.67709 10Z"})}))}n(97731)},97683:function(e,t,n){n.d(t,{B:()=>ee,D:()=>$});var i=n(79785),l=n(4006),r=n(38376),o=n(49436),a=n(70010),s=n(12723),d=n(25005),c=n(27775),u=n(35404),p=n(14520),h=n(44435),m=n(3549),g=n(56195),v=n(12203),Y=n(80827),f=n(61250),b=n(27786),y=n(3160),_=n(93540),w=n(50180),C=n(33167),I=n(54718),k=n(17402),S=n(15734),D=n.n(S),F=n(37767),P=n(41935),x=n(69277),T=n(70408),A=n(68349),E=n(35369),N=n(76977),B=n(67211),M=n(84270),R=n(16993),L=n(36372);function O(e){var t,n;let{isOpen:i,onClose:r,post:o}=e,a=(0,L.d)(),[s,d]=(0,k.useState)(!1),c=null==(n=o.postTheme)||null==(t=n.variant_config)?void 0:t.fullWidthImage,u={hideOverlay:(null==c?void 0:c.hideOverlay)||!1,hideSectionLink:(null==c?void 0:c.hideSectionLink)||!1,textColor:(null==c?void 0:c.textColor)||"black"},[p,h]=(0,k.useState)(u),m=async()=>{d(!0);try{var e;let t=(0,T._)((0,x._)({},null==(e=o.postTheme)?void 0:e.variant_config),{fullWidthImage:p});await D().patch("/api/v1/post/".concat(o.id,"/theme")).send({variant_config:t}),location.reload()}catch(e){a.popToast(()=>(0,l.Y)(L.y,{text:(0,A.uX)(e)}))}finally{d(!1)}},g=()=>{h(u),r()};return(0,l.FD)(R.aF,{isOpen:i,onClose:g,children:[(0,l.Y)(R.rQ,{showClose:!0,title:"Full Width Image Options",onClose:g}),(0,l.Y)(R.cw,{children:(0,l.FD)(N.I1,{gap:12,children:[(0,l.Y)(M.z,{label:"Text Color",options:[{value:"black",label:"Black"},{value:"red",label:"Red"},{value:"white",label:"White"}],value:p.textColor,onChange:e=>h((0,T._)((0,x._)({},p),{textColor:e}))}),(0,l.Y)(B.Y,{label:"Hide overlay",value:p.hideOverlay,onChange:e=>h((0,T._)((0,x._)({},p),{hideOverlay:e}))}),(0,l.Y)(B.Y,{label:"Hide section link",value:p.hideSectionLink,onChange:e=>h((0,T._)((0,x._)({},p),{hideSectionLink:e}))})]})}),(0,l.Y)(R.jl,{primaryButton:(0,l.Y)(E.$n,{disabled:s,priority:"primary",onClick:m,children:"Save"}),secondaryButton:(0,l.Y)(E.$n,{disabled:s,priority:"secondary",onClick:g,children:"Cancel"})})]})}var z=n(84605),U=n(86500),q=n(94729),H=n(13022),W=n(28528),G=n(88774),K=n(52145),V=n(16291),j=n(4016),X=n(39318),J=n(49807),Z=n(82776);function Q(){let e=(0,i._)([""," top posts"]);return Q=function(){return e},e}function $(e){var t,n,i,I;let{pub:S,post:F,hideDropCapOption:x,hidePinning:T,hidePostHeaderOptions:E,user:N,emailSent:B,allowSendEmail:M,handleCrossPost:R,onToggleMenu:U,onSummaryOpen:$,trigger:ee,disabled:et}=e,en=(0,k.useContext)(W.wZ),ei=(0,L.d)(),{iString:el,iTemplate:er}=(0,z.GO)(),[eo,ea]=(0,k.useState)(!1),[es,ed]=(0,k.useState)(!1),[ec,eu]=(0,k.useState)(!1),[ep,eh]=(0,k.useState)(!1),[em,eg]=(0,k.useState)(!1),[ev,eY]=(0,k.useState)(null),[ef,eb]=(0,k.useState)(null),[ey,e_]=(0,k.useState)(null),[ew,eC]=(0,k.useState)(!1);(0,k.useEffect)(()=>{(async()=>{eg(!!await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"GET"}))})()},[F.id]);let eI=async e=>{let t;switch(e){case"1hour":t=1;break;case"8hours":t=8;break;case"24hours":t=24}let n=t?{expires_at:(0,V.A)().add(t,"hour").toISOString()}:{};await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"POST",json:n}),eg(!0),ei.popToast(()=>(0,l.Y)(L.y,{text:el("Paused notifications"),Icon:r.A}))},ek=async()=>{await (0,q.x6)("/api/v1/notification_settings/post/".concat(F.id,"/mute"),{method:"DELETE"}),eg(!1),ei.popToast(()=>(0,l.Y)(L.y,{text:el("Unpaused notifications"),Icon:o.A}))},eS=async()=>{let e={everyone:"everyone",only_free:"free subscribers",only_paid:"paid subscribers",founding:"founding members"}[F.audience];if(confirm("Send this published post as an email to ".concat(e,"?")))try{await D().post("/api/v1/drafts/".concat(F.id,"/publish")).send({send:!0,only_send:!0}),location.reload()}catch(e){alert((0,A.uX)(e))}},eD=async()=>{try{await D().put("/api/v1/posts/".concat(F.id,"/clear_cache")),location.reload()}catch(e){alert((0,A.uX)(e))}},eF=async()=>{ea(!0);try{let e=await D().post("/api/v1/posts/".concat(F.id,"/duplicate"));(0,A.V2)((0,X.I_S)(S,e.body.id),{local_navigation:!1})}catch(e){alert((0,A.uX)(e)),ea(!1)}},eP=async e=>{eu(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({post_preview_crop_gravity:e}),location.reload()},ex=async e=>{eh(!0),await D().patch("/api/v1/post/".concat(F.id,"/theme")).send({disable_drop_cap:e}),location.reload()},eT=async()=>{if(ev)return;eY(S.id);let e=F.pins.includes(S.id),t="/api/v1/publication/".concat(S.id,"/pin/").concat(F.id);try{e?(await D().del(t),F.pins=F.pins.filter(e=>e!==S.id)):(await D().post(t),S.multiple_pins||(F.pins=[]),F.pins.push(S.id)),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eY(null)}},eA=async()=>{if(ef)return;let e=F.section_id;if(!e)return;eb(e);let t="/api/v1/publication/".concat(S.id,"/section/").concat(e,"/pin/").concat(F.id);try{F.is_section_pinned?(await D().del(t),F.is_section_pinned=!1):(await D().post(t),F.is_section_pinned=!0),(["/","/beta","/publish"].includes(location.pathname)||location.pathname.startsWith("/s/"))&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{eb(null)}},eE=async()=>{if(ey)return;e_(S.id);let e=F.top_exclusions.includes(S.id),t="/api/v1/publication/".concat(S.id,"/exclusion/").concat(F.id);try{e?(await D().del(t),F.top_exclusions=[]):(await D().post(t),F.top_exclusions=[S.id]),["/","/beta","/publish"].includes(location.pathname)&&location.reload()}catch(e){alert((0,A.uX)(e))}finally{e_(null)}},eN=(null==(t=F.postTheme)?void 0:t.post_preview_crop_gravity)||en.cropGravity,eB=!(null==(n=F.postTheme)?void 0:n.disable_drop_cap),eM=null==(i=S.sections)?void 0:i.find(e=>e.id===F.section_id),eR="undefined"!=typeof window?window.location.pathname:"",eL=!!(0,H.Ay)("enable_post_summarization"),eO=(0,j.lu)({pub:S}),ez=F.is_section_pinned!==(ef===F.section_id),eU=F.pins.includes(S.id)!==(ev===S.id),eq=F.top_exclusions.includes(S.id)!==(ey===S.id),eH=eO&&!E&&(null==(I=F.postTheme)?void 0:I.header_variant)==="full-width-image";return(0,l.FD)(l.FK,{children:[(0,l.Y)(P.Cg,{isOpen:es,setIsOpen:ed}),(0,l.Y)(O,{isOpen:ew,onClose:()=>eC(!1),post:F}),(0,l.FD)(G.W1,{trigger:ee,onOpen:()=>{null==U||U({active:!0})},onClose:()=>{null==U||U({active:!1})},disabled:et,children:[(0,l.FD)(G.H9,{isFirst:!0,children:[(0,l.Y)(G.Dr,{leading:(0,l.Y)(a.A,{}),href:(0,J.PuM)(S,F.id,{referrer:eR}),native:!0,children:el("View stats")}),(0,l.Y)(G.Dr,{leading:(0,l.Y)(s.A,{}),href:(0,J.U_V)(S,F.id,{referrer:eR}),native:!0,children:el("Share assets")})]}),(0,l.FD)(G.H9,{children:[(0,l.Y)(G.Dr,{leading:(0,l.Y)(d.A,{}),href:(0,X.wu9)(S,F,{edit:!0}),children:el("Edit")}),!B&&M&&F.is_published&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(c.A,{}),onClick:eS,children:el("Send as email")}),(0,l.Y)(G.Dr,{leading:(0,l.Y)(u.A,{}),disabled:eo,onClick:eF,children:eo?"Duplicating...":"Duplicate"}),R&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(p.A,{}),onClick:R,children:el("Cross post")}),eO&&(0,l.Y)(G.Dr,{disabled:ec,leading:(0,l.Y)(h.A,{}),onClick:()=>eP("auto"===eN?"center":"auto"),children:ec?"Updating...":"auto"===eN?"Disable smart cropping":"Enable smart cropping"}),eO&&!x&&(0,l.Y)(G.Dr,{disabled:ep,leading:(0,l.Y)(m.A,{}),onClick:()=>ex(eB),children:ep?"Updating...":eB?"Disable drop cap":"Enable drop cap"}),eH&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(g.A,{}),onClick:()=>eC(!0),children:el("Edit full width image options")}),eL&&$&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(v.A,{}),onClick:$,children:el("Reader guide")}),(0,H.Ay)("show_open_post_as_pdf_button")&&(0,l.Y)(G.Dr,{leading:(0,l.Y)(Y.A,{}),onClick:()=>{ed(!0),(0,A.V2)((0,J.MGs)(S,F.id),{local_navigation:!1})},children:el("Open as PDF")})]}),(0,l.FD)(G.H9,{children:[!T&&F.slug&&(0,l.FD)(l.FK,{children:[(0,Z.isPinnable)(S)&&F.section_id&&(F.section_name||(null==eM?void 0:eM.name))&&(0,l.FD)(G.Dr,{leading:ez?(0,l.Y)(f.A,{}):(0,l.Y)(b.A,{}),onClick:eA,children:[ez?"Unpin from":"Pin to"," ",F.section_name||(null==eM?void 0:eM.name)]}),(0,Z.isPinnable)(S)&&(0,l.Y)(G.Dr,{leading:eU?(0,l.Y)(f.A,{}):(0,l.Y)(b.A,{}),onClick:eT,children:eU?"Unpin from homepage":"Pin to homepage"})]}),F.slug&&"adhoc_email"!==F.type&&(0,l.Y)(G.Dr,{leading:eq?(0,l.Y)(y.A,{}):(0,l.Y)(_.A,{}),onClick:eE,children:er(Q(),eq?"Include in":"Hide from")}),em?(0,l.Y)(K.MI,{onClick:ek,customLabel:el("Unpause notifications")}):(0,l.Y)(K.DE,{onMute:e=>eI(e),customLabel:el("Pause notifications")})]}),(null==N?void 0:N.is_global_admin)&&(0,l.FD)(G.H9,{children:[(0,l.Y)(G.Dr,{priority:"secondary",onClick:eD,leading:(0,l.Y)(w.A,{}),children:el("Clear from cache")}),(0,l.Y)(G.Dr,{priority:"secondary",href:"".concat((0,X.$_T)({subdomain:"admin"}),"/posts/").concat(F.id),leading:(0,l.Y)(C.A,{}),children:el("Open in Underground")})]})]})]})}function ee(e){let{pub:t,post:n,iconHeight:i,hidePinning:r,user:o,emailSent:a,allowSendEmail:s,iconClassName:d}=e,c=(0,l.Y)(F.A,{onClick:()=>{(0,U.u4)(U.qY.EDIT_POST_DROPDOWN_MENU_OPENED)},children:(0,l.Y)(I.A,{stroke:"var(--color-fg-secondary)",size:i,className:d})});return(0,l.Y)($,{trigger:c,pub:t,post:n,hidePinning:r,user:o,emailSent:a,allowSendEmail:s})}},50883:function(e,t,n){n.d(t,{T:()=>T});var i=n(69277),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(84605),d=n(86500),c=n(69618),u=n(68349),p=n(35369),h=n(8149),m=n(48535),g=n(76977),v=n(67211),Y=n(20500),f=n(76171),b=n(16993),y=n(81203),_=n(94996),w=n(63136),C=n(11587),I=n(65842),k=n(36372),S=n(16291),D=n(98111),F=n(56262),P=n(39318);let x={everyone:"Everyone",only_paid:"Paid subscribers",founding:"Founding members"},T=e=>{let{pub:t,post:n,user:o,open:y,setOpen:D,placeholderText:T=""}=e,E=(0,S.A)().add(2,"minutes"),[N,B]=(0,r.useState)(null),[M,R]=(0,r.useState)(T),[L,O]=(0,r.useState)(!1),[z,U]=(0,r.useState)(!0),[q,H]=(0,r.useState)("PREAMBLE"),[W,G]=(0,r.useState)(null),[K,V]=(0,r.useState)(void 0),[j,X]=(0,r.useState)(!0),[J,Z]=(0,r.useState)(!0),[Q,$]=(0,r.useState)(!1),[ee,et]=(0,r.useState)((0,S.A)().add(1,"day").toDate()),[en,ei]=(0,r.useState)(""),{iString:el}=(0,s.GO)(),er={everyone:"to everyone",founding:"to founding members",only_paid:"to paid subscribers"}[null!=K?K:"null"],eo=j?"Send":"Publish",ea=Q&&ee?(0,S.A)(ee).max(E).fromNow():"",es=j?er:"",ed="".concat(eo," cross-post ").concat(es," ").concat(ea),ec=null==N?void 0:N.find(e=>e.id===W),eu=(0,k.d)();(0,r.useEffect)(()=>{let e=async()=>{try{var e;let t=await a().get("/api/v1/restack/restackable-pubs"),n=(null==t||null==(e=t.body)?void 0:e.publications)||[];B(n),U(!1),n.length>0&&(G(n[0].id),V("everyone"))}catch(e){console.error("Failed to load user profile for restacking: ",e)}};y&&!N&&z&&e()},[y,o,z,U,N,B]),(0,r.useEffect)(()=>{y&&N&&0===N.length&&!z&&(0,u.V2)((0,P.f5H)())},[y,N,z]);let ep=(e,i)=>{D(!y,i),H("PREAMBLE"),ei(null),U(!1),i&&(R(""),(0,d.u4)(d.qY.RESTACK_POST_SUBMITTED,{restacked_publication_id:t.id,restacked_post_id:n.id,restacking_user_id:o.id,restacking_publication_id:null==ec?void 0:ec.id,restacking_blurb:M}),eu.popToast(()=>(0,l.Y)(k.y,{text:Q?"This post is scheduled to cross-post ".concat(ea):"This post was cross-posted to your subscribers"}))),(0,d.u4)(d.qY.CROSS_POST_MODAL_CLOSED,{didRestack:i})},eh=async()=>{(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_CLICKED),U(!0);try{if(Q){let e=(0,S.A)(ee).max(E).toDate();if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(n.id,"/schedule")).send({audience:K,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J,scheduledAt:e})}else{if(!ec)throw Error("no selectedPub");await a().post("/api/v1/restack/".concat(n.id)).send({audience:K,restackingPubId:ec.id,introText:M,sendEmail:j,publishToWeb:J})}(0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMITTED),ep({},!0);return}catch(e){if((0,d.u4)(d.qY.CROSS_POST_MODAL_SUBMIT_FAILED,{error:(0,u.uX)(e,"Could not retrieve error message")}),console.error("Failed to restack post:",e),e instanceof TypeError)throw ei("An unknown error ocurred. This post was not recommended."),U(!1),e;ei((0,u.uX)(e,"This post could not be recommended.")),U(!1)}};return(0,l.FD)(b.aF,{isOpen:y,onClose:ep,children:[(0,l.Y)(b.rQ,{showClose:!0,onClose:ep,title:el("Cross-post to your Substack"),showDivider:!0}),"PREAMBLE"===q?(0,l.FD)(l.FK,{children:[(0,l.Y)(b.cw,{children:(0,l.FD)(g.I1,{gap:20,children:[(0,l.Y)(A,{post:n,pub:t}),(0,l.Y)(C.T,(0,i._)({placeholder:el("Say why this post is worth reading..."),onChange:e=>{L||(O(!0),(0,d.u4)(d.qY.CROSS_POST_MODAL_TYPING_STARTED)),R(e.target.value)},value:M,maxLength:800,rows:5},c.b)),en&&(0,l.Y)(Y.yn,{children:en})]})}),(0,l.Y)(b.jl,{direction:"column",primaryButton:(0,l.Y)(p.$n,{priority:"primary",onClick:()=>{if((0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_CLICKED),!M){ei("Please write something to your subscribers to continue"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUE_FAILED);return}ei(""),H("AUDIENCE_SELECTION"),(0,d.u4)(d.qY.CROSS_POST_MODAL_CONTINUED)},disabled:!M,loading:z,children:el("Continue")})})]}):(0,l.FD)(l.FK,{children:[(0,l.Y)(b.cw,{children:(0,l.FD)(g.I1,{gap:20,children:[(0,l.FD)(I.A0,{children:[(0,l.Y)(f.JU,{children:el("Post to")}),(0,l.Y)(_.I,{value:null==ec?void 0:ec.id,onChange:e=>{let t=e.currentTarget.value;V("everyone"),G(Number(t))},children:null==N?void 0:N.map(e=>(0,l.Y)("option",{value:e.id,children:e.name}))})]}),(0,l.FD)(I.A0,{children:[(0,l.Y)(f.JU,{children:el("Send to")}),(0,l.Y)(_.I,{value:K,onChange:e=>V(e.target.value),children:((null==ec?void 0:ec.payments_state)==="enabled"?(0,F.getAudiencesForPublicListing)():["everyone"]).map(e=>(0,l.Y)("option",{value:e,children:x[e]}))})]}),(0,l.FD)(g.I1,{gap:12,children:[(0,l.Y)(f.JU,{children:el("Delivery")}),(0,l.Y)(v.Y,{value:j,label:el("Send cross-post via email"),onChange:e=>X(e)}),(0,l.Y)(v.Y,{value:J,label:el("Publish cross-post to web"),onChange:e=>Z(e)}),(0,l.Y)(v.Y,{value:Q,label:el("Schedule time to publish cross-post"),onChange:e=>$(e),contentBelow:(0,l.Y)(h.N,{open:Q,children:(0,l.Y)(g.I1,{paddingTop:8,children:(0,l.Y)(m.ZZ,{value:null!=ee?ee:new Date,max:(0,S.A)().add(92,"days").toDate(),onChange:e=>{et(new Date(e.currentTarget.value))}})})})})]}),en&&(0,l.Y)(w.EY.B4,{color:"error",children:en})]})}),(0,l.Y)(b.jl,{direction:"column",primaryButton:(0,l.Y)(p.$n,{priority:j||J?"primary":"secondary",onClick:eh,disabled:z||!j&&!J,children:ed})})]})]})},A=e=>{let{post:t,pub:n}=e;return(0,l.FD)(g.I1,{gap:12,border:"detail",radius:"md",shadow:"xs",bg:"secondary",padding:12,children:[(0,l.FD)(g.Ye,{alignItems:"center",gap:8,children:[(0,l.Y)(y.Nq,{pub:n,size:20}),(0,l.Y)(w.EY.Meta,{weight:"medium",children:n.name})]}),(0,l.FD)(g.I1,{gap:2,children:[(0,l.Y)(w.EY.B3,{weight:"semibold",clamp:2,children:t.title}),(0,l.Y)(w.EY.B4,{color:"secondary",clamp:2,children:t.truncated_body_text?(t.truncated_body_text||"").replace(D.T.PUBLICATION_NAME,n.name):t.subtitle||""})]})]})}},73869:function(e,t,n){n.d(t,{m:()=>Q});var i=n(4006),l=n(65892),r=n(17402),o=n(69277),a=n(70408),s=n(90179),d=n.n(s),c=n(15871),u=n(43627),p=n(74979),h=n(83673),m=n.n(h),g=n(38970),v=n.n(g),Y=n(33031),f=n.n(Y),b=n(48697),y=n(84605),_=n(35369),w=n(76977),C=n(25318),I=n(94996),k=n(63136),S=n(46009);let D=e=>{let{addLabel:t,hideAdd:n,isValidSection:l,metadata:o,pub:a,renderEditMetadata:s,renderMetadata:d,selectedIds:p,selectedLabel:h,validateMetadata:g,onChangeMetadata:Y,onChangeSelectedIds:f}=e,[b,y]=(0,r.useState)(null),_=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),I=v()(a.sections,"id"),D=(0,S.j_)({pub:a}),T=m()(p.map(e=>{var t;return -1===e?{id:-1,name:null!=(t=D.title)?t:""}:I[e]})),A=e=>{f(p.filter(t=>t!==e))},E=e=>{y(e)};return(0,i.FD)(w.I1,{gap:16,children:[(0,i.Y)(C.D,{label:h,children:(0,i.Y)(w.I1,{gap:8,children:p.length?(0,i.Y)(c.Mp,{collisionDetection:c.fp,sensors:_,onDragEnd:e=>{let{active:t,over:n}=e;if(t.id!==n.id){let e=p.findIndex(e=>e===t.id),i=p.findIndex(e=>e===n.id);f((0,u.be)(p,e,i))}},children:(0,i.Y)(u.gB,{items:T,strategy:u.kL,children:T.map(e=>{var t;return(0,i.Y)(P,{disableDrag:!!b,id:e.id,children:(0,i.Y)(x,{isEditing:b===e.id,renderEditMetadata:s,renderMetadata:d,sectionId:e.id,sectionMetadata:null!=(t=null==o?void 0:o[e.id])?t:null,sectionName:e.name,validateMetadata:g,onChangeMetadata:Y,onEdit:E,onRemove:A},e.id)},e.id)})})}):(0,i.Y)(k.EY.B3,{color:"pub-secondary-text",children:"No sections selected"})})}),!n&&(0,i.Y)(C.D,{label:null!=t?t:"Add section",children:(0,i.Y)(F,{excludedSectionIds:[...T.map(e=>e.id),...l?a.sections.filter(e=>!l(e)).map(e=>e.id):[]],pub:a,onSelect:e=>{f([...p,e])}})})]})},F=e=>{let{excludedSectionIds:t,pub:n,onSelect:l}=e,{iString:r}=(0,y.GO)(),o=n.sections.filter(e=>!(null==t?void 0:t.includes(e.id)));return(0,i.FD)(I.I,{value:"",onChange:e=>{let t=e.target.value;t&&l(parseInt(t))},children:[(0,i.Y)(I.K,{children:r("Select a section")}),f()(o,"name").map(e=>(0,i.Y)("option",{value:e.id,children:e.name}))]})},P=e=>{let{children:t,disableDrag:n,id:l}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:l}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return n?(0,i.Y)("div",{children:t}):(0,i.Y)("div",(0,a._)((0,o._)({ref:c},r,d),{role:"button",style:g,children:t}))},x=e=>{let{isEditing:t,renderEditMetadata:n,renderMetadata:o,sectionId:a,sectionName:s,sectionMetadata:d,validateMetadata:c,onChangeMetadata:u,onEdit:p,onRemove:h}=e,[m,g]=(0,r.useState)(d),[v,Y]=(0,r.useState)(null);return(0,i.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,i.FD)(w.I1,{children:[(0,i.Y)(k.EY.B4,{weight:"semibold",children:s}),!t&&o&&(0,i.Y)("div",{children:o(d)}),t&&n&&(0,i.FD)(w.I1,{alignItems:"start",gap:12,paddingTop:12,children:[n({errors:v,value:m,onChange:g}),u&&(0,i.FD)(w.Ye,{gap:8,children:[(0,i.Y)(_.$n,{size:"sm",onClick:()=>{if(u){if(c){let{isValid:e,message:t}=c(m);if(!e&&t)return void Y([t]);Y(null)}u({sectionId:a,value:m}),p(null)}},children:"Done"}),(0,i.Y)(_.$n,{priority:"secondary",size:"sm",onClick:()=>{p(null)},children:"Cancel"})]})]})]}),!t&&(0,i.FD)(w.Ye,{alignItems:"center",gap:8,children:[!!n&&(0,i.Y)(_.K0,{size:"xs",onClick:()=>{p(a)},children:(0,i.Y)(l.A,{size:14})}),(0,i.Y)(_.K0,{size:"xs",onClick:()=>{h(a)},children:(0,i.Y)(b.A,{size:14})})]})]})},T=e=>{let{emptyText:t,label:n,value:l}=e;return(0,i.FD)(w.Ye,{alignItems:"baseline",gap:4,children:[(0,i.FD)(k.EY.B4,{fontWeight:"semibold",children:[n,":"]}),(0,i.Y)(k.EY.B4,{color:l?"primary":"secondary",children:l||t})]})};var A=n(89160),E=n(79796),N=n(60141),B=n(16993);let M=e=>{let{pub:t,onClose:n}=e,{isSaving:l,metadata:r,ids:s,onChangeMetadata:c,onChangeOrder:u,onSave:p}=(0,E.i)({pub:t}),{isSaving:h,metadata:m,ids:g,onChangeMetadata:v,onChangeOrder:Y,onSave:f}=(0,E.i)({pub:t,pubSetting:"fp_primary_column_section_ids"}),{ids:b,isSaving:y,onChange:C,onSave:I}=(0,A.G)({pub:t}),k=async()=>{await p(),await f(),await I(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit featured and archived sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.FD)(w.I1,{gap:36,children:[(0,i.Y)(D,{addLabel:"Add From the Free Press section",metadata:m,pub:t,renderEditMetadata:e=>{var t,n;let{value:l,onChange:r}=e;return(0,i.FD)(w.I1,{gap:8,children:[(0,i.Y)(N.A,{label:"Tagline",value:null!=(t=null==l?void 0:l.tagline)?t:"",width:260,onChange:e=>{var t;r({frequency:null!=(t=null==l?void 0:l.frequency)?t:"",tagline:e})}}),(0,i.Y)(N.A,{label:"Frequency",value:null!=(n=null==l?void 0:l.frequency)?n:"",width:260,onChange:e=>{r((0,a._)((0,o._)({},l),{frequency:e}))}})]})},renderMetadata:e=>{var t,n;return(0,i.FD)(w.I1,{children:[(0,i.Y)(T,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,i.Y)(T,{emptyText:"no frequency set",label:"Frequency",value:null!=(n=null==e?void 0:e.frequency)?n:""})]})},selectedIds:g,selectedLabel:"From The Free Press sections",onChangeMetadata:e=>{var t;let{sectionId:n,value:i}=e;v({metadata:i?(0,a._)((0,o._)({},r),{[n]:(0,a._)((0,o._)({},i),{frequency:null!=(t=null==i?void 0:i.frequency)?t:""})}):d()(r,n)})},onChangeSelectedIds:e=>{Y({ids:e})}}),(0,i.Y)(D,{addLabel:"Add featured section",metadata:r,pub:t,renderEditMetadata:e=>{var t,n;let{value:l,onChange:r}=e;return(0,i.FD)(w.I1,{gap:8,children:[(0,i.Y)(N.A,{label:"Tagline",value:null!=(t=null==l?void 0:l.tagline)?t:"",width:260,onChange:e=>{var t;r({frequency:null!=(t=null==l?void 0:l.frequency)?t:"",tagline:e})}}),(0,i.Y)(N.A,{label:"Frequency",value:null!=(n=null==l?void 0:l.frequency)?n:"",width:260,onChange:e=>{r((0,a._)((0,o._)({},l),{frequency:e}))}})]})},renderMetadata:e=>{var t,n;return(0,i.FD)(w.I1,{children:[(0,i.Y)(T,{emptyText:"no tagline set",label:"Tagline",value:null!=(t=null==e?void 0:e.tagline)?t:""}),(0,i.Y)(T,{emptyText:"no frequency set",label:"Frequency",value:null!=(n=null==e?void 0:e.frequency)?n:""})]})},selectedIds:s,selectedLabel:"Featured sections",onChangeMetadata:e=>{var t;let{sectionId:n,value:i}=e;c({metadata:i?(0,a._)((0,o._)({},r),{[n]:(0,a._)((0,o._)({},i),{frequency:null!=(t=null==i?void 0:i.frequency)?t:""})}):d()(r,n)})},onChangeSelectedIds:e=>{u({ids:e})}}),(0,i.Y)(D,{addLabel:"Add archived section",pub:t,selectedIds:b,selectedLabel:"Archived sections",onChangeSelectedIds:e=>{C({ids:e})}})]})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l||y||h,onClick:k,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l||y||h,priority:"secondary",onClick:n,children:"Cancel"})})]})};var R=n(27428);let L=e=>{let{pub:t,onClose:n}=e,{isSaving:l,ids:r,onSave:o,onChange:a}=(0,R.M)({pub:t}),s=async()=>{await o(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit event sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add event section",pub:t,selectedIds:r,selectedLabel:"Event sections",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l,onClick:s,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l,priority:"secondary",onClick:n,children:"Cancel"})})]})};var O=n(77124),z=n(57753),U=n(84270);let q=e=>{let{pub:t,onClose:n}=e,{ids:l,metadata:s,onChangeOrder:d,onChangeMetadata:c,onSave:u}=(0,O.q)({pub:t}),[p,h]=(0,r.useState)(!1),m=async()=>{h(!0),await u(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{title:"Edit podcast sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add podcast section",isValidSection:e=>e.is_podcast,metadata:s,pub:t,renderEditMetadata:e=>{var t;let{value:n,onChange:l}=e;return(0,i.Y)(w.I1,{gap:12,children:(0,i.Y)(U.z,{label:"Carousel color",options:z.ek.map(e=>({label:e,value:e})),value:null!=(t=null==n?void 0:n.carouselColor)?t:"black",onChange:e=>{l({carouselColor:e})}})})},renderMetadata:e=>{var t;return(0,i.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q3[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20})},selectedIds:l,selectedLabel:"Podcast sections",onChangeMetadata:e=>{let{sectionId:t,value:n}=e;c({metadata:(0,a._)((0,o._)({},s),{[t]:n})})},onChangeSelectedIds:e=>{d({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:p,onClick:m,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:p,priority:"secondary",onClick:n,children:"Cancel"})})]})};var H=n(95691),W=n(7755);let G=e=>{let{pub:t,onClose:n}=e,{isSaving:l,metadata:r,ids:s,onChangeMetadata:d,onChangeOrder:c,onSave:u}=(0,H.P)({pub:t}),p=async()=>{await u(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit video sections",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(D,{addLabel:"Add video section",metadata:r,pub:t,renderEditMetadata:e=>{var t,n;let{errors:l,value:r,onChange:o}=e;return(0,i.FD)(w.I1,{gap:12,children:[(0,i.Y)(U.z,{label:"Carousel color",options:z.ek.map(e=>({label:e,value:e})),value:null!=(t=null==r?void 0:r.carouselColor)?t:"black",onChange:e=>{var t;o({carouselColor:e,youtubeUrl:null!=(t=null==r?void 0:r.youtubeUrl)?t:""})}}),(0,i.Y)(N.A,{errors:l,label:"YouTube URL",value:null!=(n=null==r?void 0:r.youtubeUrl)?n:"",width:260,onChange:e=>{var t;o({carouselColor:null!=(t=null==r?void 0:r.carouselColor)?t:"black",youtubeUrl:e})}})]})},renderMetadata:e=>{var t;return(0,i.FD)(w.Ye,{alignItems:"center",gap:8,children:[(0,i.Y)(w.Ye,{height:20,radius:"xs",style:{backgroundColor:z.Q3[null!=(t=null==e?void 0:e.carouselColor)?t:"black"].hex},width:20}),(null==e?void 0:e.youtubeUrl)?(0,i.Y)(k.EY.B4,{children:(0,i.Y)("a",{href:null==e?void 0:e.youtubeUrl,rel:"noopener noreferrer",target:"_blank",children:"YouTube link"})}):(0,i.Y)(k.EY.B4,{color:"pub-secondary-text",children:"No YouTube link set"})]})},selectedIds:s,selectedLabel:"Video sections",validateMetadata:e=>{var t;let n=(null!=(t=null==e?void 0:e.youtubeUrl)?t:"").trim();if(!n)return{isValid:!0,message:null};let{isValid:i,message:l}=(0,W.Hx)({platform:"youtube",url:n,language:"en"});return{isValid:i,message:l}},onChangeMetadata:e=>{var t,n;let{sectionId:i,value:l}=e;d({metadata:(0,a._)((0,o._)({},r),{[i]:(0,a._)((0,o._)({},l),{carouselColor:null!=(t=null==l?void 0:l.carouselColor)?t:"black",youtubeUrl:null!=(n=null==l?void 0:l.youtubeUrl)?n:""})})})},onChangeSelectedIds:e=>{c({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:l,onClick:p,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:l,priority:"secondary",onClick:n,children:"Cancel"})})]})},K=e=>{let{pub:t,selectedIds:n,selectedLabel:l,onChangeSelectedIds:r}=e,s=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:5}})),d=v()(t.authorPagesInfo,"user_id"),p=m()(n.map(e=>d[e]?(0,a._)((0,o._)({},d[e]),{id:e}):null)),h=e=>{r(n.filter(t=>t!==e))};return(0,i.FD)(w.I1,{gap:16,children:[(0,i.Y)(C.D,{label:l,children:(0,i.Y)(w.I1,{gap:8,children:n.length?(0,i.Y)(c.Mp,{collisionDetection:c.fp,sensors:s,onDragEnd:e=>{let{active:t,over:i}=e;if(t.id!==i.id){let e=n.findIndex(e=>e===t.id),l=n.findIndex(e=>e===i.id);r((0,u.be)(n,e,l))}},children:(0,i.Y)(u.gB,{items:p,strategy:u.kL,children:p.map(e=>(0,i.Y)(j,{id:e.user_id,children:(0,i.Y)(X,{authorId:e.user_id,authorName:e.name,onRemove:h})},e.user_id))})}):(0,i.Y)(k.EY.B3,{color:"pub-secondary-text",children:"No authors selected"})})}),(0,i.Y)(C.D,{label:"Add an author",children:(0,i.Y)(V,{excludedAuthorIds:p.map(e=>e.id),pub:t,onSelect:e=>{r([...n,e])}})})]})},V=e=>{var t,n;let{excludedAuthorIds:l,pub:r,onSelect:o}=e,{iString:a}=(0,y.GO)(),s=null!=(n=null==(t=r.authorPagesInfo)?void 0:t.filter(e=>!!e.name&&!!e.bio&&!!e.photo_url).filter(e=>!(null==l?void 0:l.includes(e.user_id))))?n:[];return(0,i.FD)(I.I,{value:"",onChange:e=>{let t=e.target.value;t&&o(parseInt(t))},children:[(0,i.Y)(I.K,{children:a("Select a section")}),f()(s,"name").map(e=>(0,i.Y)("option",{value:e.user_id,children:e.name}))]})},j=e=>{let{children:t,disableDrag:n,id:l}=e,{attributes:r,isDragging:s,listeners:d,setNodeRef:c,transform:h,transition:m}=(0,u.gl)({id:l}),g={transform:p.Ks.Translate.toString(h),transition:m,zIndex:+!!s,cursor:s?"grabbing":"grab"};return n?(0,i.Y)("div",{children:t}):(0,i.Y)("div",(0,a._)((0,o._)({ref:c},r,d),{role:"button",style:g,children:t}))},X=e=>{let{authorId:t,authorName:n,onRemove:l}=e;return(0,i.FD)(w.Ye,{alignItems:"start",bg:"white",border:"detail-themed",justifyContent:"space-between",paddingLeft:12,paddingRight:8,paddingY:8,radius:"sm",children:[(0,i.Y)(w.I1,{children:(0,i.Y)(k.EY.B4,{weight:"semibold",children:n})}),(0,i.Y)(_.K0,{size:"xs",onClick:()=>{l(t)},children:(0,i.Y)(b.A,{size:14})})]})};var J=n(1918);let Z=e=>{let{pub:t,onClose:n}=e,{ids:l,onSave:o,onChange:a}=(0,J.i)({pub:t}),[s,d]=(0,r.useState)(!1),c=async()=>{d(!0),await o(),window.location.reload()};return(0,i.FD)(B.aF,{isOpen:!0,onClose:n,children:[(0,i.Y)(B.rQ,{showClose:!0,title:"Edit authors",onClose:n}),(0,i.Y)(B.cw,{children:(0,i.Y)(K,{pub:t,selectedIds:l,selectedLabel:"Authors to show",onChangeSelectedIds:e=>{a({ids:e})}})}),(0,i.Y)(B.jl,{primaryButton:(0,i.Y)(_.$n,{disabled:s,onClick:c,children:"Save"}),secondaryButton:(0,i.Y)(_.$n,{disabled:s,priority:"secondary",onClick:n,children:"Cancel"})})]})},Q=e=>{let{pub:t,sectionType:n,user:o}=e,[a,s]=(0,r.useState)(!1);return(null==o?void 0:o.is_admin)?(0,i.FD)(i.FK,{children:[(0,i.Y)(_.K0,{priority:"primary-mono",size:"sm",onClick:()=>{s(!0)},children:(0,i.Y)(l.A,{size:16})}),a&&"columns"===n&&(0,i.Y)(M,{pub:t,onClose:()=>{s(!1)}}),a&&"event"===n&&(0,i.Y)(L,{pub:t,onClose:()=>{s(!1)}}),a&&"podcast"===n&&(0,i.Y)(q,{pub:t,onClose:()=>{s(!1)}}),a&&"video"===n&&(0,i.Y)(G,{pub:t,onClose:()=>{s(!1)}}),a&&"who-we-are"===n&&(0,i.Y)(Z,{pub:t,onClose:()=>{s(!1)}})]}):null}},22076:function(e,t,n){n.d(t,{n:()=>s});var i=n(4006),l=n(25006),r=n(86500),o=n(38914),a=n(49807);let s=e=>{var t;let{trigger:n,liveStream:s,trackingSurface:d}=e,c=(0,l.df)();if(!c)return null;let u=null==s||null==(t=s.id)?void 0:t.toString(),p={title:s.title,description:s.description||"",location:(0,a.QMq)({pub:c,utm_campaign:u,utm_source:"add_to_calendar_button",utm_medium:"web"}),start:s.scheduled_at||new Date,duration:[1,"hour"],allDay:!1,busy:!0};return(0,i.Y)(o.L,{event:p,handleClick:e=>{(0,r.u4)(r.qY.ADD_TO_CALENDAR_CLICKED,{liveStreamId:s.id,surface:d,type:e})},menuProps:{trigger:n}})}},82528:function(e,t,n){n.d(t,{y:()=>v});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(79909),d=n(13950),c=n(53696),u=n(15894),p=n(17306),h=n(68410),m=n(76977),g=n(72032);let v=e=>{let{actions:t,aboveTitle:n,belowDescription:o,bodyWrapperVariant:v,children:Y,description:f,image:b,isLoading:y,metadata:_,title:w,pageCTA:C,hideDivider:I=!1}=e,{isMobile:k}=(0,h.sM)(),S=!!(w&&!f&&!n&&!o&&!t&&!b),{markdownProps:D}=(0,p.$)(f);return(0,r.FD)(d.DH,{children:[_&&(0,r.Y)(s.Metadata,(0,i._)({},_)),(0,r.Y)(c.r,{paddingTop:k?40:64,children:!y&&(0,r.FD)(m.I1,{gap:k?24:40,paddingBottom:64,children:[(0,r.Y)("div",{className:a()(g.A.header,{[g.A.noImage]:!b,[g.A.headerWithJustTitle]:S}),children:k?(0,r.FD)(m.I1,{gap:24,children:[n&&(0,r.Y)(m.Ye,{alignSelf:"start",children:n}),(0,r.Y)(u.T,{preset:"h1-serif",children:w}),b&&(0,r.Y)(m.Ye,{children:b}),f&&(0,r.Y)(u.T,(0,l._)((0,i._)({},D),{preset:"d1-sans-regular"})),o]}):(0,r.FD)(r.FK,{children:[(0,r.FD)(m.I1,{children:[n&&(0,r.Y)(m.Ye,{alignSelf:"start",children:n}),(0,r.Y)(u.T,{preset:"h1-serif",children:w}),(0,r.FD)(m.I1,{gap:24,children:[f&&(0,r.Y)(u.T,(0,l._)((0,i._)({},D),{preset:"d1-sans-regular"})),o]})]}),b&&(0,r.Y)(m.Ye,{justifyContent:"end",children:b}),t&&(0,r.Y)("div",{className:g.A.actions,children:t})]})}),!I&&(0,r.Y)("div",{className:g.A.thickRule,children:C}),(0,r.Y)("div",{className:a()({[g.A.bodyWrapperTwoMiddleColumns]:"two-middle-columns"===v}),children:Y})]})})]})}},53696:function(e,t,n){n.d(t,{r:()=>r});var i=n(4006),l=n(76977);let r=e=>{let{children:t,paddingTop:n}=e;return(0,i.Y)(l.I1,{className:"container-Y7VoFt",paddingTop:n,children:t})}},82180:function(e,t,n){n.d(t,{Z:()=>Y});var i=n(69277),l=n(70408),r=n(4006),o=n(13589),a=n(85612),s=n(15894),d=n(57753),c=n(84605),u=n(74894),p=n(68349),h=n(76977),m=n(36372),g=n(59294),v=n(7755);let Y=e=>{let{pub:t,section:n,user:Y}=e,{iString:f}=(0,c.GO)(),[b,y]=(0,o.Mk)(),[_,w]=(0,o.Mk)(),[C,I]=(0,o.Mk)(),k=(0,m.d)(),{feedUrl:S}=(0,g.Zq)({pub:t,user:null!=Y?Y:null,section:n}),D=(0,v.Em)({pub:t,section:n,spotifySettings:(0,u.Om)({pub:t,section:null!=n?n:null})}),F={as:"a",cursor:"pointer",rel:"noreferrer noopener",target:"_blank"};return(0,r.FD)(h.Ye,{alignItems:"center",gap:12,children:[(0,r.Y)(s.T,{preset:"d1-sans-medium",children:"Listen On:"}),(0,r.FD)(h.Ye,{alignItems:"center",gap:16,children:[D.spotify_url&&(0,r.Y)(h.Ye,(0,l._)((0,i._)({},y,F),{href:D.spotify_url,children:(0,r.Y)(a.MO,{fill:b?"#1DB954":d.Q3.black.hex,size:24})})),D.apple_podcasts_url&&(0,r.Y)(h.Ye,(0,l._)((0,i._)({},w,F),{href:D.apple_podcasts_url,children:(0,r.Y)(a.uv,{fill:_?"#B53CD9":d.Q3.black.hex,size:24})})),(0,r.Y)(h.Ye,(0,l._)((0,i._)({},I),{cursor:"pointer",onClick:()=>{k.popToast(()=>(0,r.Y)(m.y,{text:f("RSS feed URL copied")})),(0,p.lW)(S)},children:(0,r.Y)(a.It,{fill:C?"#F88800":d.Q3.black.hex,size:24})}))]})]})}},22240:function(e,t,n){n.d(t,{L:()=>o});var i=n(4006),l=n(15894),r=n(76977);let o=e=>{let{children:t}=e;return(0,i.Y)(r.Ye,{children:(0,i.Y)(r.Ye,{className:"container-f0oiU0",paddingBottom:8,children:(0,i.Y)(l.T,{preset:"detail-large",children:t})})})}},70103:function(e,t,n){n.d(t,{Z:()=>l});var i=n(4006);let l=e=>{let{children:t}=e;return(0,i.Y)("div",{className:"container-mcXs8_",children:t})}},73062:function(e,t,n){n.d(t,{i:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(45773),a=n(49436),s=n(63446),d=n(76977);let c="hoverText-TwVQuR",u=e=>{let{isSubscribed:t,onClick:n,className:l,minimize:u,subscribedText:p="Notified",unsubscribedText:h="Get Notified",visible:m=!0}=e;return(0,i.Y)(s.v,{className:r()("notifyButton-lmtipU",u?"minimize-yxTwzX":void 0,t&&"subscribed-oEC2qb",l),"data-subscribed":t,size:"sm",style:{visibility:m?"visible":"hidden"},variant:"outline",onClick:n,onMouseOver:e=>{e.stopPropagation()},children:(0,i.Y)(d.Ye,{alignItems:"center",className:"notifyButtonInternal-e4KibS",gap:8*!u,justifyContent:"space-between",position:"relative",children:t?(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:r()(u?c:null),children:p}),(0,i.Y)(o.A,{size:16})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:r()(u?c:null),children:h}),(0,i.Y)(a.A,{size:16})]})})})}},78956:function(e,t,n){n.d(t,{A:()=>d});var i=n(4006),l=n(83673),r=n.n(l),o=n(17402),a=n(16074),s=n(76977);let d=e=>{let{children:t,gap:n=32,includeBottomDivider:l,includeTopDivider:d,paddingTop:c=0}=e,u=o.Children.toArray(t),p=r()(u).flatMap((e,t)=>0!==t||d?[(0,i.Y)(a.c,{flex:"auto"}),e]:[e]);return(0,i.FD)(s.I1,{gap:n,paddingTop:c,children:[p,l&&(0,i.Y)(a.c,{flex:"auto"})]})}},86227:function(e,t,n){n.d(t,{u:()=>a});var i=n(4006),l=n(61755),r=n(68410),o=n(76977);let a=e=>{let{post:t,pub:n,user:a}=e,{isMobile:s}=(0,r.sM)();return(0,i.FD)(o.Ye,{gap:s?16:40,justifyContent:"center",children:[(0,i.Y)(l.qS,{cta:s?"Comment":"Make a comment",post:t,pub:n,showCounts:!1,size:"large"}),(0,i.Y)(l.ct,{cta:s?"Like":"Like article",post:t,pub:n,showCounts:!1,size:"large",user:a}),(0,i.Y)(l.wu,{cta:s?"Share":"Share article",post:t,pub:n,user:a})]})}},36027:function(e,t,n){n.d(t,{E:()=>h});var i=n(4006),l=n(15894),r=n(68410),o=n(28528),a=n(84032),s=n(47173),d=n(76977),c=n(56262),u=n(82776);let p="verticalDivider-JbC7L1",h=e=>{let{post:t}=e,{isMobile:n}=(0,r.sM)(),{pub:h}=(0,o.np)(),m=(0,c.getDurationForPostPreview)({post:t});return(0,i.Y)(l.T,{color:"tertiary",preset:"caption",style:{lineHeight:1},children:(0,i.FD)(d.Ye,{gap:16,children:[(0,i.Y)(a.aR,{customFormat:"MMMM D, YYYY",post:t}),(0,i.Y)("div",{className:p}),(0,i.Y)(s.q,{clamp:1,post:t,pub:h}),!!m&&!n&&(0,i.FD)(i.FK,{children:[(0,i.Y)("div",{className:p}),(0,u.formatPodcastDuration)(m)]})]})})}},64703:function(e,t,n){n.d(t,{k:()=>d});var i=n(4006),l=n(22076),r=n(63446),o=n(15894),a=n(76977),s=n(16291);let d=e=>{let{liveStream:t,trackingSurface:n}=e,d=(0,s.A)(t.scheduled_at).format("dddd MMMM D, YYYY"),c=(0,s.A)(t.scheduled_at).format("h:mm A");return(0,i.FD)(a.I1,{gap:24,children:[(0,i.FD)(a.I1,{gap:8,children:[(0,i.Y)(o.T,{preset:"h5-serif",children:t.title}),(0,i.Y)(o.T,{preset:"d3-serif",children:t.description}),(0,i.Y)(o.T,{preset:"timestamp",children:d}),(0,i.Y)(o.T,{preset:"timestamp",children:c})]}),(0,i.Y)(a.Ye,{children:(0,i.Y)(l.n,{liveStream:t,trackingSurface:n,trigger:(0,i.Y)("div",{children:(0,i.Y)(r.v,{size:"sm",trailingIcon:"plus",variant:"outline",children:"Add to calendar"})})})})]})}},72987:function(e,t,n){n.d(t,{N:()=>I});var i=n(4006),l=n(17402),r=n(33764),o=n(82528),a=n(82180),s=n(73090),d=n(22240),c=n(64703),u=n(16074),p=n(76977);let h=e=>{let{scheduledLiveStreams:t}=e;return(0,i.FD)(p.I1,{gap:40,children:[(0,i.Y)(d.L,{children:"Upcoming livestreams"}),(0,i.Y)(p.I1,{gap:24,children:t.map((e,t)=>(0,i.FD)(i.FK,{children:[0!==t&&(0,i.Y)(u.c,{}),(0,i.Y)(c.k,{liveStream:e,trackingSurface:"section-page"})]}))})]})};var m=n(7903),g=n(98695),v=n(37659),Y=n(27428),f=n(95691),b=n(79454),y=n(2058),_=n(68410),w=n(46009),C=n(22092);let I=e=>{let t,n,d,{freeSignup:c,freeSignupEmail:I,isPodcast:k,isTagPage:S=!1,newPosts:D,pub:F,scheduledLiveStreams:P,section:x,tag:T,user:A,utm:E}=e,{isMobile:N}=(0,_.sM)(),[B,M]=(0,l.useState)(null!=P?P:null),{ids:R}=(0,Y.M)({pub:F}),{ids:L}=(0,f.P)({pub:F}),O=(0,C.E)({pub:F,section:x});if((0,l.useEffect)(()=>{let e=async()=>{M(await (0,b.f7)())};O&&!B&&e()},[O,B]),!x&&!S&&!k)return console.warn("Needs to be a section, tag, or pub-level podcast"),null;let z=!!x&&L.includes(x.id),U=!!x&&R.includes(x.id);if(k){let e=x?(0,w.lL)({pub:F,section:x}):(0,w.j_)({pub:F});t=e.title,n=e.description,d=e.artUrl}else z?(t=null==x?void 0:x.name,n=null==x?void 0:x.description,d=null==x?void 0:x.logo_url):S?(t=(null==T?void 0:T.name)||"Page not found",n=null):(t=null==x?void 0:x.name,n=null==x?void 0:x.description);return(0,i.Y)(o.y,{belowDescription:(0,i.FD)(p.pT,{direction:N?"column":"row",justifyContent:"space-between",children:[k?(0,i.Y)(a.Z,{pub:F,section:x,user:A}):z?(0,i.Y)(v.m,{pub:F,section:x}):void 0,x&&(k||z)&&(0,i.Y)(m.S,{freeSignup:c,freeSignupEmail:I,isPodcastOrVideo:!0,pub:F,section:x,user:A})]}),bodyWrapperVariant:"two-middle-columns",description:n,image:d?(0,i.Y)(r.o,{className:"sectionImage-AFt6TD",imageIsFixedWidth:!1,maxWidth:540,src:d,useRetinaSizing:!0}):void 0,pageCTA:!x||S||k||z?void 0:(0,i.Y)(m.S,{freeSignup:c,freeSignupEmail:I,isPodcastOrVideo:!1,pub:F,section:x,user:A}),title:t,children:(0,i.FD)(p.I1,{gap:40,children:[B&&B.length>0&&(0,i.FD)(i.FK,{children:[(0,i.Y)(h,{scheduledLiveStreams:B}),(0,i.Y)(u.c,{})]}),(0,i.Y)(y.M,{hideCommunity:!0,hideTop:S,isPodcast:k&&!x,newPosts:D,postTagId:null==T?void 0:T.id,pub:F,renderLoading:()=>null,renderTabs:e=>{let{activeTabId:t,tabs:n,onClick:l}=e;return n.length<=1||k?null:(0,i.Y)(p.I1,{alignItems:"center",className:"tabsContainer-P8p3c9",paddingBottom:N?40:64,children:(0,i.Y)(g.p,{activeTabId:t,tabs:n,onClick:l})})},sectionId:null==x?void 0:x.id,source:S?"tag-archive":void 0,user:A,utm:E,children:e=>{let{posts:t}=e;return(0,i.Y)(s.R,{isEvents:U,posts:t})}})]})})}},7903:function(e,t,n){n.d(t,{S:()=>m});var i=n(4006),l=n(45773),r=n(17402),o=n(63446),a=n(73062),s=n(84605),d=n(12501),c=n(76977),u=n(36372),p=n(39318),h=n(22092);let m=e=>{let{pub:t,section:n,isPodcastOrVideo:m,user:g,minimize:v,freeSignup:Y,freeSignupEmail:f}=e,{iString:b}=(0,s.GO)(),{popToast:y}=(0,u.d)(),[_,w]=(0,r.useState)(!1),[C,I]=(0,r.useState)(!1),k=!!g||!!f&&!!Y,{refetch:S}=(0,d.st)({pathname:"/api/v1/subscription/sections/email",auto:!1,method:"PATCH"}),{result:D,refetch:F}=(0,d.st)({pathname:"/api/v1/subscription",auto:!1});(0,r.useEffect)(()=>{(async()=>{let e=(0,p.Dlv)(window.location.href);if((null==e?void 0:e.searchParams.get("subscribe"))==="true"&&k){await S({json:{[n.id]:{setting:"individual"}}});let e=new URL(window.location.href);e.searchParams.delete("subscribe"),window.history.replaceState({},"",e.toString())}k&&await F(),I(!0)})()},[k]),(0,r.useEffect)(()=>{(null==D?void 0:D.email_settings)&&w("individual"===D.email_settings[n.id])},[D,n.id]);let P=async()=>{if(!k){let e=(0,h._)(t,{sectionSlug:n.slug,next:(0,p.yRP)(window.location.href,{subscribe:!0})});window.location.href=e;return}let e=!_;await S({json:{[n.id]:{setting:e?"individual":"disabled"}}}).then(()=>{w(e),y(()=>(0,i.Y)(u.y,{Icon:l.A,text:e?"Subscription updated!":"Unsubscribed!"}))})};return(0,i.Y)(c.Ye,{justifyContent:m?void 0:"end",children:m?(0,i.Y)(a.i,{isSubscribed:_,minimize:v,visible:C,onClick:P}):(0,i.Y)(o.v,{style:{visibility:C?"visible":"hidden"},variant:"tertiary",onClick:P,children:_?"".concat(b("Subscribed")," "):"".concat(b("Subscribe")," +")})})}},37659:function(e,t,n){n.d(t,{m:()=>d});var i=n(4006),l=n(23747),r=n(15894),o=n(95691),a=n(57753),s=n(76977);let d=e=>{var t;let{pub:n,section:d}=e,{metadata:c}=(0,o.P)({pub:n}),u=null==(t=c[d.id])?void 0:t.youtubeUrl;return u?(0,i.FD)(s.Ye,{alignItems:"center",as:"a",gap:8,href:u,rel:"noopener noreferrer",target:"_blank",children:[(0,i.Y)(r.T,{preset:"d1-sans-medium",children:"Watch on YouTube"}),(0,i.Y)(l.A,{fill:a.Q3.black.hex,height:30,stroke:"none"})]}):null}},1918:function(e,t,n){n.d(t,{i:()=>a});var i=n(38970),l=n.n(i),r=n(17402),o=n(13770);let a=e=>{let{pub:t}=e,n=l()(t.authorPagesInfo,"user_id"),{setting:i,save:a}=(0,o.E)({key:"about_us_author_ids",fallback:[]}),[s,d]=(0,r.useState)(i),c=async()=>{await a({setting:s})};return{ids:s,onChange:e=>{let{ids:t}=e;d(t.filter(e=>n[e]))},onSave:c}}},57753:function(e,t,n){n.d(t,{Ip:()=>r,Q3:()=>l,ek:()=>i});let i=["black","brightOrange","brightBlue","darkGreen","darkOrange","lightGray","mediumBlue","mediumGreen","mediumOrange","mediumPurple","mediumRed","mediumYellow","offWhite"],l={black:{hex:"#161613",invertTextColors:!0},brightOrange:{hex:"#f74701",invertTextColors:!1},brightBlue:{hex:"#0366F3",invertTextColors:!0},darkGreen:{hex:"#3A564B",invertTextColors:!0},darkOrange:{hex:"#d37735",invertTextColors:!1},lightGray:{hex:"#bebdb8",invertTextColors:!1},mediumBlue:{hex:"#005591",invertTextColors:!0},mediumGreen:{hex:"#2db750",invertTextColors:!0},mediumOrange:{hex:"#f69227",invertTextColors:!1},mediumPurple:{hex:"#5358C8",invertTextColors:!0},mediumRed:{hex:"#f2312c",invertTextColors:!0},mediumYellow:{hex:"#F3C82E",invertTextColors:!1},offWhite:{hex:"#f6f4ef",invertTextColors:!1}},r=["cbs_news","cbsnews","paramount"]},79454:function(e,t,n){n.d(t,{Cr:()=>r,IZ:()=>a,N7:()=>o,c:()=>s,f7:()=>c,zG:()=>d});var i=n(15734),l=n.n(i);let r=async e=>{let{extraText:t,extraLink:n}=e;await l().put("/api/v1/publication_settings").send({homepage_message_text:t,homepage_message_link:n})},o=async e=>{let{slug:t}=e;try{var n;return null!=(n=(await l().get("/api/v1/posts/".concat(t))).body)?n:null}catch(e){return null}},a=async e=>{let{postIds:t,pub:n}=e;await l().post("/api/v1/publication/".concat(n.id,"/pin")).send({post_ids:t})},s=async e=>{let{contentBlockId:t,contentBlockPins:n}=e;await l().post("/api/v1/content_block/".concat(t,"/pins")).send({pins:n})},d=async e=>{let{pub:t}=e;try{var n;return null!=(n=(await l().get("/api/v1/live_streams/active/pub/".concat(t.id))).body.activeLiveStream)?n:null}catch(e){return null}},c=async()=>{try{var e;return null!=(e=(await l().get("/api/v1/live_streams/scheduled")).body.scheduledLiveStreams)?e:[]}catch(e){return[]}}},29098:function(e,t,n){n.d(t,{A:()=>l});var i=n(17402);function l(){let{root:e=null,threshold:t=0,rootMargin:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof window||"undefined"==typeof IntersectionObserver)return[null,null];let[l,r]=(0,i.useState)(null),[o,a]=(0,i.useState)(null),s=(0,i.useRef)(new IntersectionObserver(e=>{let[t]=e;return r(t)},{root:e,threshold:t,rootMargin:n}));return(0,i.useEffect)(()=>{var e;let t=(null==o||null==(e=o.base)?void 0:e.addEventListener)?o.base:(null==o?void 0:o.addEventListener)?o:null,{current:n}=s;return n.disconnect(),t&&n.observe(t),()=>n.disconnect()},[o]),[a,l]}},99145:function(e,t,n){n.d(t,{BR:()=>c,bf:()=>d,v9:()=>s});var i=n(4006),l=n(6411),r=n.n(l),o=n(17402),a=n(21398);function s(){return(0,o.useContext)(d)}let d=(0,o.createContext)({open:()=>void 0});function c(e){let{children:t,load:l,pub:s,enableShortcuts:c=!0}=e,[u,p]=(0,o.useState)(!1),[h,m]=(0,o.useState)(!1),[g,v]=(0,o.useState)(),[Y,f]=(0,o.useState)();(0,o.useEffect)(()=>{if(!l||!s)return;let e=()=>p(!0);if(c)return r().bind(["/","command+k"],e),()=>{r().unbind(["/"],e),r().unbind(["command+k"],e)}},[]);let b=(0,o.useMemo)(()=>({open:e=>{m(!!(null==e?void 0:e.postsOnly)),v(()=>null==e?void 0:e.onSelectResult),f(()=>null==e?void 0:e.onClose),p(!0)}}),[]);return l&&s?(0,i.FD)(d.Provider,{value:b,children:[t,(0,i.Y)(a.Ic,{module:"@/frontend/substack/search/PublicationSearch",resolve:e=>e.PublicationSearch,isOpen:u,postsOnly:h,pub:s,onClose:()=>{null==Y||Y(),p(!1)},onRequest:()=>Promise.all([n.e("53307"),n.e("84921"),n.e("33357")]).then(n.bind(n,43288)),onSelectResult:g})]}):(0,i.Y)(i.FK,{children:t})}},58050:function(e,t,n){n.d(t,{A:()=>P,cC:()=>x,km:()=>T,ku:()=>S,tg:()=>F,uy:()=>D});var i=n(69277),l=n(79785),r=n(4006),o=n(91648),a=n.n(o),s=n(74242),d=n(31062),c=n(17402),u=n(25250),p=n(82936),h=n(84605),m=n(46271),g=n(72026),v=n(6547),Y=n(94729),f=n(76528),b=n(68349),y=n(88774),_=n(36372),w=n(46453),C=n(50963);function I(){let e=(0,l._)(["Followed ",""]);return I=function(){return e},e}function k(){let e=(0,l._)(["Unfollowed ",""]);return k=function(){return e},e}function S(e){let t=(0,m.Jd)();return(0,f.OU)("/api/v1/feed/following",(0,i._)({auto:!!t},e))}function D(){let{mutate:e}=(0,u.iX)();return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return e("/api/v1/feed/following",...n)}}function F(e,t){let{data:n}=S(t);return(null!=n?n:[]).includes(null!=e?e:0)}function P(e,t,n){let{isFollowing:i,toggle:l}=x(e,t,n),o=(0,m.Jd)(),a=(0,p.Hv)(null==e?void 0:e.id),s=!!(o&&e&&o.id!==e.id)&&!a,d=[];return s&&d.push((0,r.Y)(y.Dr,{leading:i?(0,r.Y)(v.A,{stroke:"var(--color-fg-primary)"}):(0,r.Y)(g.D,{stroke:"var(--color-fg-primary)"}),onClick:l,children:i?"Unfollow":"Follow"})),d}function x(e,t,n,i){let l=(0,m.Jd)(),{onboardingModalRef:o,requireLogin:c}=(0,w.eE)(),u=F(null==e?void 0:e.id,i),{mutate:p,data:g}=S(i),v=(0,_.d)(),f=(0,C.$k)((null==e?void 0:e.name)||""),{iString:y,iTemplate:D}=(0,h.GO)(),P=async i=>{if(e){if(!l&&o.current)return void(c?c():o.current.open());p(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return i?[...t,e.id]:a()(t,e.id)},{revalidate:!1});try{await (0,Y.x6)("/api/v1/feed/".concat(e.id,"/follow"),{method:i?"POST":"DELETE",json:{surface:t,noteId:n}}),v.popToast(()=>(0,r.Y)(_.y,{Icon:i?s.A:d.A,text:i?D(I(),f):D(k(),f),cta:y("Undo"),onAccept:()=>P(!i)}))}catch(e){v.popToast(()=>(0,r.Y)(_.y,{text:(0,b.uX)(e)}));return}}};return{isFollowing:u,toggle:()=>P(!u),isLoaded:!!g}}function T(e,t,n){let{isFollowing:i,toggle:l}=x(e,t,n),[r,o]=(0,c.useState)(!1);return{isFollowing:i,buttonProps:{onClick:()=>{l(),i||o(!0)},onMouseLeave:()=>o(!1)}}}},95282:function(e,t,n){n.d(t,{MT:()=>K,YU:()=>q,qN:()=>O});var i=n(69277),l=n(70408),r=n(79785),o=n(4006),a=n(17402),s=n(43262),d=n(27437);n(84777);var c=n(84565),u=n(84605),p=n(42686),h=n(89607),m=n(27749),g=n(22434),v=n(27332),Y=n(40740),f=n(6950),b=n(75840),y=n(25859),_=n(4560),w=n(58292),C=n(60897),I=n(86500),k=n(56804),S=n(12501),D=n(68349),F=n(76977),P=n(63136),x=n(504),T=n(5180),A=n(83629),E=n(56262),N=n(83873),B=n(28700),M=n(49807),R=n(44307);function L(){let e=(0,r._)(["This comment is only visible to paid subscribers of ",""]);return L=function(){return e},e}function O(e){let{comment:t,item:n,isParent:r,showReplyingTo:s,showContext:d,utm_content:u,parentCommentUserId:p,hideable:h=!1}=e,v=(0,m.PK)(),f=(0,b.T)(),y=(0,T.l$)(n),_="treatment"===(0,c.NQ)().getExperimentVariant("web_gutterless_feed")&&"permalink"!==v&&"post-discussion"!==v,C=!t.ancestor_path,F=n.publication&&n.post&&(0,E.getPostAuthor)(n.publication,n.post),P=(0,S.st)({pathname:"/api/v1/trending-topics/toggle",method:"POST"}),N=null;if(!C){var B,R,L;let e=null==(B=t.ancestor_path)?void 0:B.split(".").pop(),i=e&&Number(e);N=null!=(L=null==(R=n.parentComments)?void 0:R.find(e=>(null==e?void 0:e.id)===i))?L:null}let O=!!(s&&(C&&F||!C&&N)),q=(0,x.KY)(n,{isModuleItem:!0}),H=async()=>{var e,t,i,l,r;(0,x.Qb)(n,v,"context",{tabId:f}),(0,I.u4)(I.qY.SEE_MORE_NOTES_IN_CATEGORY_CLICKED,{tagId:null==(e=n.context.tag)?void 0:e.id,noteId:null==(t=n.comment)?void 0:t.id}),await P.refetch({method:"POST",json:{enable:!0,categoryID:null==(l=n.context)||null==(i=l.tag)?void 0:i.id}}),(0,D.V2)("/home/category/".concat(null==(r=n.context.tag)?void 0:r.id),{local_navigation:!1})},W=(0,E.getCommentAuthor)(t),G=(0,a.useRef)(t.reaction),[K,V]=(0,a.useState)(!1);(0,a.useEffect)(()=>{!G.current&&t.reaction&&n.canShowFollowUpsell&&V(!0),G.current&&!t.reaction&&V(!1),G.current=t.reaction},[t.reaction,n.canShowFollowUpsell]);let j=!r&&["comment_like","comment_restack","note_like","generic"].includes(n.context.type),X={comment:t,item:n,author:W,trackProfileClicked:()=>(0,x.Qb)(n,v,"profile",{tabId:f}),utm_content:u,hideable:h,parentCommentUserId:p,showReplyMeta:O,isTopLevel:C,postAuthor:F,parentComment:N,onSavePostClick:q,showFollowUpsell:K,onFollowUpsellDismiss:()=>V(!1)};return(0,o.Y)(w.CF,{showGutter:r,hasContext:d,onClick:e=>{if(!e.defaultPrevented&&!y){(0,x.Qb)(n,v,"item",{tabId:f});let i="search"===v&&"undefined"!=typeof location?location.pathname:null,l=(0,M.Zgx)(t,{noBase:!t.hidden&&A.Z,urlParams:{utmSource:i}});(0,k.o)(e,t.hidden&&n.publication?(0,M.eV6)(n.publication,{addBase:!0,params:{next:l}}):l,{newTab:!!t.hidden,native:t.hidden,state:{showBack:!0}})}},entityKey:n.entity_key,children:(0,o.FD)(Y.k,{user:W,item:n,comment:t,children:[d||j?(0,o.Y)(g.x,{context:n.context,onClick:()=>(0,x.Qb)(n,v,"context",{tabId:f}),utm_content:u}):null,n.context.tag?(0,o.Y)(g.x,{context:(0,l._)((0,i._)({},n.context),{type:"topic"}),onClick:H,utm_content:u}):null,_?(0,o.Y)(z,(0,i._)({},X)):(0,o.Y)(U,(0,i._)({},X))]})})}function z(e){var t,n;let{comment:i,item:l,author:r,trackProfileClicked:a,utm_content:s,hideable:d,parentCommentUserId:c,showReplyMeta:u,isTopLevel:h,postAuthor:g,parentComment:Y,onSavePostClick:y,showFollowUpsell:C,onFollowUpsellDismiss:I}=e,k=(0,m.PK)(),S=(0,b.T)();return(0,o.FD)(F.VP,{gap:6,children:[(0,o.FD)(F.Ye,{gap:12,alignItems:"start",children:[(0,o.Y)(F.ov,{height:40,children:(0,o.Y)(w.NT,{user:r,onClick:a,utm_content:s})}),(0,o.FD)(F.I1,{gap:4,flex:"grow",minWidth:0,children:[(0,o.Y)(v.LY,{author:r,post:null!=(t=l.post)?t:void 0,comment:i,onClick:a,utm_content:s,publication:null!=(n=l.publication)?n:void 0,item:l,allowHide:d,parentCommentUserId:c}),u&&(0,o.Y)(G,{isTopLevel:h,postAuthor:null!=g?g:null,parentComment:Y,item:l})]})]}),i.body&&(0,o.Y)(q,{comment:i,item:l}),i.attachments&&(0,o.Y)(p.ti,{parent:i,attachments:i.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,x.Qb)(l,k,"attachment",{tabId:S,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:n}})},onSavePostClick:y,utm_content:s,item:l}),!i.hidden&&(0,o.Y)(_.M,{item:l,comment:i}),C&&(0,o.Y)(f.Z,{author:r,noteId:l.entity_key,onDismiss:I})]})}function U(e){var t,n;let{comment:i,item:l,author:r,trackProfileClicked:a,utm_content:s,hideable:d,parentCommentUserId:c,showReplyMeta:u,isTopLevel:h,postAuthor:g,parentComment:Y,onSavePostClick:y,showFollowUpsell:C,onFollowUpsellDismiss:I}=e,k=(0,m.PK)(),S=(0,b.T)();return(0,o.FD)(F.Ye,{gap:12,alignItems:"start",children:[(0,o.Y)(w.NT,{user:r,onClick:a,utm_content:s}),(0,o.FD)(F.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,o.FD)(F.I1,{gap:12,children:[(0,o.FD)(F.I1,{gap:4,children:[(0,o.Y)(v.LY,{author:r,post:null!=(t=l.post)?t:void 0,comment:i,onClick:a,utm_content:s,publication:null!=(n=l.publication)?n:void 0,item:l,allowHide:d,parentCommentUserId:c}),u&&(0,o.Y)(G,{isTopLevel:h,postAuthor:null!=g?g:null,parentComment:Y,item:l}),i.body&&(0,o.Y)(q,{comment:i,item:l})]}),i.attachments&&(0,o.Y)(p.ti,{parent:i,attachments:i.attachments,onAttachmentClick:function(){let{commentId:e,attachmentType:t,attachmentId:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(0,x.Qb)(l,k,"attachment",{tabId:S,extraEventProps:{commentId:e,clicked_attachment_type:t,clicked_attachment_id:n}})},onSavePostClick:y,utm_content:s,item:l})]}),!i.hidden&&(0,o.Y)(_.M,{item:l,comment:i}),C&&(0,o.Y)(f.Z,{author:r,noteId:l.entity_key,onDismiss:I})]})]})}function q(e){let{comment:t,item:n,large:i,paddingRight:l}=e,r=(0,m.PK)(),d=(0,b.T)(),{bodyJson:c,truncatedBodyJson:u,isTruncated:p,shouldExpandInline:g}=(0,C.A)(t),[v,Y]=(0,a.useState)(!1),f=i||!p||v,y=f?c:u;return t.age_verification&&t.age_verification.status!==N.Y.CompletedAdult?(0,o.Y)(F.VP,{paddingTop:8,children:(0,o.Y)(s.T,{content:t,description:t.body,source:"feed"})}):(0,o.FD)(F.I1,{className:R.A.feedCommentBody,paddingRight:l,children:[(0,o.Y)(w.Wz,{children:t.hidden&&n?(0,o.Y)(H,{pub:null==n?void 0:n.publication}):y&&(0,o.Y)(h.w,{content:y,onLinkClicked:()=>{n&&(0,x.Qb)(n,r,"link",{tabId:d,extraEventProps:{commentId:t.id}})},attachedLinks:K(t)},f)}),!f&&(0,o.Y)(W,{onClick:e=>{n&&(0,x.Qb)(n,r,"see_more",{tabId:d,extraEventProps:{commentId:t.id}}),g?(e.preventDefault(),Y(!0)):(0,D.V2)((0,M.Zgx)(t,{noBase:A.Z,urlParams:{utmSource:"search"===r&&"undefined"!=typeof location?location.pathname:null}}),{event:e,state:{showBack:!0}})}})]})}function H(e){let{pub:t}=e,{iString:n,iTemplate:i}=(0,u.GO)(),l=(null==t?void 0:t.name)||"";return(0,o.FD)(o.FK,{children:[(0,o.Y)("i",{children:i(L(),l)}),(0,o.Y)("br",{}),(0,o.Y)("b",{children:n("Subscribe to view ")})]})}function W(e){let{iString:t}=(0,u.GO)();return(0,o.FD)(F.pT,{className:R.A.seeMore,children:[(0,o.Y)(F.pT,{className:R.A.seeMoreFade}),(0,o.Y)(P.EY.B3,{color:"secondary",weight:"medium",className:R.A.seeMoreText,children:(0,o.Y)(y.Yq,(0,l._)((0,i._)({},e),{children:t("See more")}))})]})}function G(e){var t;let{isTopLevel:n,postAuthor:i,parentComment:l,item:r}=e,a=n?i:l?{id:l.user_id,user_id:l.user_id,name:l.name,photo_url:l.photo_url,handle:l.handle}:i,s=n?(0,M.q$n)(r.publication,r.post,{noBase:A.Z}):(0,M.Zgx)(l,{noBase:A.Z}),c=(null==(t=n?i:l)?void 0:t.name)||"";return a?(0,o.FD)(P.EY.B5,{color:"secondary",translated:!0,children:["Replying to"," ",(0,o.Y)(d.ProfileHoverCard,{subject:a,utmSource:"feed",trigger:(0,o.Y)(y.Yq,{href:s,children:I18N.p(c)})})]}):null}function K(e){return e.attachments?e.attachments.map(e=>"link"===e.type?e.linkMetadata.url:"post"===e.type?(0,M.wu9)(e.publication,e.post):"publication"===e.type?(0,M.$_T)(e.publication):"comment"===e.type?(0,M.Zgx)(e.comment):"user"===e.type?(0,B.gY)(e.user):"").filter(Boolean):[]}},44451:function(e,t,n){n.d(t,{GJ:()=>ee,XZ:()=>_.XZ});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(3213),d=n(17402),c=n(84565),u=n(84605),p=n(46271),h=n(95282),m=n(27749),g=n(2675),v=n(42652),Y=n(2192),f=n(53906),b=n(25979),y=n(37120),_=n(20482),w=n(68279),C=n(60346),I=n(40144),k=n(22434),S=n(27332),D=n(40740),F=n(75840),P=n(25859),x=n(99289),T=n(58292),A=n(94328),E=n(58418),N=n(56804),B=n(82772),M=n(17028),R=n(44552),L=n(75303),O=n(63136),z=n(95187),U=n(504),q=n(5180),H=n(60281),W=n(83629),G=n(42588),K=n(2548),V=n(11510),j=n(20437),X=n(56262),J=n(75914),Z=n(70189),Q=n(49807),$=n(44307);let ee=(0,d.memo)(function(e){let{item:t,className:n,showLoginPrompt:i}=e,l=et[t.type];return l?(0,r.Y)(l,{item:t,className:n,children:i&&(0,r.Y)(C.H,{version:"login"})}):null}),et={post:function(e){let{item:t,className:n,children:i}=e,l=(0,m.PK)(),o=(0,d.useContext)(F.P),{iString:a}=(0,u.GO)();return(0,r.FD)(_.B_,{item:t,className:n,ariaLabel:a("Post"),children:[i,(0,r.Y)(en,{item:t,context:(0,r.Y)(k.x,{context:t.context,onClick:()=>(0,U.Qb)(t,l,"context",{tabId:o}),utm_content:t.entity_key}),hideable:!0})]})},comment:function(e){var t,n;let{item:i,className:l,children:o}=e,{iString:a}=(0,u.GO)(),{publication:s,post:c,comment:p,parentComments:g}=i,v=s||c||!g||1===g.length?void 0:g[0],Y=null!=(n=g&&g[g.length-1])?n:null,f=s&&c&&(0,X.getPostAuthor)(s,c),b=(0,m.PK)(),y="comment_restack"!==i.context.type&&"comment_like"!==i.context.type&&"post-discussion"!==b,w=(0,d.useContext)(F.P),C="comment_restack"===i.context.type||"comment_like"===i.context.type?"user/".concat(null==(t=i.context.users[0])?void 0:t.id):i.entity_key;return(0,r.Y)(_.B_,{item:i,className:l,ariaLabel:a("Note"),children:(0,r.FD)(r.FK,{children:[o,(0,r.FD)(er,{children:[y&&(0,r.Y)(eo,{author:f,rootFeedComment:v,parentComments:g,parentComment:Y,item:i,utm_content:C,feedSurface:b,tabId:w}),(0,r.Y)(h.qN,{comment:p,item:i,showReplyingTo:!y,utm_content:C,hideable:!0})]})]})})},userSuggestions:function(e){let{item:t}=e,n=(0,V.Iu)(),o=(0,d.useRef)(null),a=(0,R.h9)(o),{state:s,handleArrowClick:c}=(0,K.jA)(o,{scrollFullPage:!0}),u=(0,p.ur)(),h=(0,Z.st)();return(0,B.S8)(o,()=>{u.changeSetting("suggestions_feed_item_last_shown_at",new Date().toISOString())},{threshold:.2}),(0,r.Y)(_.B_,{item:t,children:(0,r.FD)(M.I1,{paddingTop:16,children:[(0,r.FD)(M.pT,{alignItems:"center",justifyContent:"space-between",paddingLeft:{mobile:16,desktop:0},children:[(0,r.Y)(M.EY.H4,{translated:!0,children:(0,r.Y)(P.Yq,{onClick:e=>(0,N.o)(e,h),children:"Suggestions"})}),(0,r.Y)(M.$n,{size:"sm",priority:"tertiary",onClick:e=>(0,N.o)(e,h),children:"See all"})]}),(0,r.FD)(M.pT,{className:$.A.peopleYouMayKnowContainer,alignItems:"center",flex:"grow",position:"relative",children:[(0,r.Y)(M.pT,{flex:"grow",overflow:"hidden",children:(0,r.FD)(M.pT,(0,l._)((0,i._)({},a.props),{ref:o,className:$.A.peopleYouMayKnow,alignItems:"center",gap:8,paddingX:{desktop:0,mobile:16},paddingBottom:16,paddingTop:12,children:[!1,t.userSuggestions.map(e=>(0,r.Y)(H.pp,{feedUserSuggestion:e,surface:"feed"},e.user.id))]}))}),!n&&(0,r.FD)(r.FK,{children:[(0,r.Y)(z.p_,{direction:"left",isVisible:s.showLeft,onClick:c(-1)}),(0,r.Y)(z.p_,{direction:"right",isVisible:s.showRight,onClick:c(1)})]})]})]})})},facebookConnect:function(e){let{item:t}=e;return(0,r.Y)(_.B_,{item:t,children:(0,r.Y)(M.pT,{paddingY:20,children:(0,r.Y)(H.h8,{})})})},inviteFriends:function(e){let{item:t}=e,[n]=(0,E.A)(H.Ft);return n?null:(0,r.Y)(_.B_,{item:t,children:(0,r.Y)(M.pT,{paddingY:20,paddingX:20,children:(0,r.Y)(H.pS,{utmSource:"feed_item"})})})},featuredPublication:w.G,featuredCollection:y.U,chat:function(e){let{item:t}=e,{iString:n}=(0,u.GO)();return t.community_post.user&&(0,r.Y)(_.B_,{item:t,ariaLabel:n("Chat"),children:(0,r.Y)(v.H,{item:t,author:t.community_post.user})})},profileSearchResults:function(e){let{item:t}=e;return(0,r.Y)(_.B_,{item:t,children:(0,r.Y)(Y.T,{item:t})})},categoryLeaderboard:b.b,trendingTopicsExplore:function(e){let{item:t}=e;return(0,r.Y)(_.B_,{item:t,children:(0,r.Y)(f.q,{item:t})})},videoSuggestionsExplore:I.b};function en(e){let{item:t,showGutter:n,context:l,hideable:o=!1}=e,{publication:a,post:s}=t,u=a&&s?(0,X.getPostAuthor)(a,s):void 0,p=(0,m.PK)(),h=(0,d.useContext)(F.P),g=(0,q.l$)(t),v="treatment"===(0,c.NQ)().getExperimentVariant("web_gutterless_feed")&&"permalink"!==p,Y="post"===t.type&&t.mediaClip?t.mediaClip.clip_info:null;if(!a||!s||!u)return null;let f={author:u,clipInfo:Y,post:s,item:t,publication:a,hideable:o,trackProfileClicked:()=>(0,U.Qb)(t,p,"profile",{tabId:h}),trackPostClicked:()=>(0,U.Qb)(t,p,"attachment",{tabId:h})};return(0,r.Y)(T.CF,{onClick:e=>{e.defaultPrevented||g||((0,U.Qb)(t,p,"item",{tabId:h}),(0,N.o)(e,(0,Q.q$n)(a,s,{noBase:W.Z,mediaClip:"post"===t.type&&t.mediaClip||void 0})))},showGutter:n,hasContext:!!l,entityKey:t.entity_key,children:(0,r.FD)(D.k,{user:u,item:t,children:[l,v?(0,r.Y)(ei,(0,i._)({},f)):(0,r.Y)(el,(0,i._)({},f))]})})}function ei(e){var t,n;let{author:i,trackProfileClicked:l,post:o,item:a,publication:s,hideable:d,trackPostClicked:c,clipInfo:u}=e;return(0,r.FD)(es,{children:[(0,r.FD)(M.pT,{gap:12,alignItems:"start",children:[(0,r.Y)(M.ov,{height:40,children:(0,r.Y)(T.NT,{user:i,onClick:l,utm_content:a.entity_key})}),(0,r.Y)(M.I1,{gap:8,flex:"grow",minWidth:0,children:(0,r.Y)(S.LY,{author:i,post:o,onClick:l,utm_content:a.entity_key,publication:s,item:a,allowHide:d})})]}),o&&(null==(n=o.liveStream)||null==(t=n.liveStream)?void 0:t.status)&&["scheduled","pending","active"].includes(o.liveStream.liveStream.status)?(0,r.Y)(G.S,{liveStream:o.liveStream,post:o,feedItem:a}):(0,J.tL)(a)&&o.videoUpload?(0,r.Y)(j.R8,{tag:(0,r.Y)(A.b_,{item:a,pub:s,post:o}),composing:!1,mediaUpload:o.videoUpload,videoPlayerProps:(0,g.g2)({post:o,item:a,clipInfo:u})}):(0,r.Y)(g.Sp,{item:a,publication:s,post:o,onClick:c,clipInfo:u}),(0,r.Y)(x.j,{item:a,pub:s,post:o})]})}function el(e){var t,n;let{author:i,trackProfileClicked:l,post:o,item:a,publication:s,hideable:d,trackPostClicked:c,clipInfo:u}=e;return(0,r.FD)(M.pT,{gap:12,alignItems:"start",children:[(0,r.Y)(T.NT,{user:i,onClick:l,utm_content:a.entity_key}),(0,r.FD)(M.I1,{gap:8,flex:"grow",minWidth:0,children:[(0,r.FD)(M.I1,{gap:12,children:[(0,r.Y)(S.LY,{author:i,post:o,onClick:l,utm_content:a.entity_key,publication:s,item:a,allowHide:d}),o&&(null==(n=o.liveStream)||null==(t=n.liveStream)?void 0:t.status)&&["scheduled","pending","active"].includes(o.liveStream.liveStream.status)?(0,r.Y)(G.S,{liveStream:o.liveStream,post:o,feedItem:a}):(0,J.tL)(a)&&o.videoUpload?(0,r.Y)(j.R8,{tag:(0,r.Y)(A.b_,{item:a,pub:s,post:o}),composing:!1,mediaUpload:o.videoUpload,videoPlayerProps:(0,g.g2)({post:o,item:a,clipInfo:u})}):(0,r.Y)(g.Sp,{item:a,publication:s,post:o,onClick:c,clipInfo:u})]}),(0,r.Y)(x.j,{item:a,pub:s,post:o})]})]})}let er=(0,L.I4)({gap:8},L.VP);function eo(e){var t,n;let{author:i,rootFeedComment:l,parentComments:o,parentComment:a,item:s,utm_content:d,feedSurface:c,tabId:u}=e,p="note_reply"===s.context.type&&s.comment.user_id!==(null!=(n=null==i?void 0:i.id)?n:null==o||null==(t=o[0])?void 0:t.user_id);return(0,r.FD)(r.FK,{children:[i?(0,r.FD)(r.FK,{children:[(0,r.Y)(en,{item:s,showGutter:!0,context:p?(0,r.Y)(k.x,{context:s.context,onClick:()=>(0,U.Qb)(s,c,"context",{tabId:u}),utm_content:d}):void 0}),o&&o.length>1&&a&&(0,r.Y)(ea,{url:(0,Q.Zgx)(a,{noBase:W.Z}),showGutter:!0})]}):l?(0,r.FD)(r.FK,{children:[(0,r.Y)(h.qN,{isParent:!0,comment:l,item:s,showContext:p,utm_content:d}),o&&o.length>2&&a&&(0,r.Y)(ea,{url:(0,Q.Zgx)(a,{noBase:W.Z}),showGutter:!0})]}):null,a&&o&&o.length>0&&(0,r.Y)(h.qN,{showReplyingTo:o.length>2,isParent:!0,comment:a,item:s,showContext:p&&!(i||l),utm_content:d})]})}function ea(e){let{url:t,showGutter:n}=e;return(0,r.Y)(T.CF,{onClick:e=>(0,N.o)(e,t),showGutter:n,hasAvatar:!1,children:(0,r.FD)(M.Ye,{children:[(0,r.FD)(M.I1,{alignItems:"center",justifyContent:"center",className:$.A.seeMoreThread,children:[(0,r.Y)(M.I1,{className:a()($.A.seeMoreThreadSegment,$.A.top)}),(0,r.Y)(s.A,{size:16,stroke:"var(--color-utility-detail)"}),(0,r.Y)(M.I1,{className:$.A.seeMoreThreadSegment,flex:"grow"})]}),(0,r.Y)(M.I1,{className:$.A.seeMoreReplies,flex:"grow",minWidth:0,children:(0,r.Y)(M.EY.B4,{color:"highlight",children:(0,r.Y)(P.Yq,{href:t,children:"See more replies"})})})]})})}let es=(0,L.I4)((0,l._)((0,i._)({},O.nS),{display:"flex",direction:"column",gap:12,width:"100%"}))},92538:function(e,t,n){n.d(t,{n:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return[["1d",e("For 1 day")],["30d",e("For 30 days")],["90d",e("For 90 days")],["1y",e("For 1 year")],["1000y",e("Forever")]]}},7292:function(e,t,n){n.d(t,{t:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return{list:{id:"list",label:e("List"),description:e("A list of posts"),postCount:{desktop:7,tablet:7,mobile:7}},grid:{id:"grid",label:e("Grid"),description:e("A grid of nine posts"),postCount:{desktop:9,tablet:9,mobile:7}},"grid-groups":{id:"grid-groups",label:e("Groups (sections or tags)"),description:e("A grid of nine posts, grouped by section or tag"),postCount:{desktop:9,tablet:9,mobile:7}},custom:{id:"custom",label:e("Advanced"),description:e("Advanced layout options"),postCount:{desktop:0,tablet:0,mobile:0}}}}},5646:function(e,t,n){n.d(t,{T:()=>l});var i=n(84605);let l=()=>{let{iString:e}=(0,i.GO)();return[["visible",e("Do not delete comments")],["delete_this_comment",e("Delete this comment")],["delete_all_comments",e("Also delete all comments")]]}},70107:function(e,t,n){n.d(t,{f:()=>l});var i=n(17402);let l=e=>{let{key:t,initialValue:n}=e,[l,r]=(0,i.useState)(n);return(0,i.useEffect)(()=>{let e=localStorage.getItem(t);null!=e&&r("true"===e)},[t]),[l,e=>{r(e),e?localStorage.setItem(t,"true"):localStorage.removeItem(t)}]}},40075:function(e,t,n){n.d(t,{Y:()=>r});var i=n(17402),l=n(94729);let r=e=>{let{pub:t,user:n,preloadedActiveLiveStream:r,disabled:o}=e,[a,s]=(0,i.useState)(null!=r?r:null);return(0,i.useEffect)(()=>{n||o||(0,l.x6)("/api/v1/live_streams/active/pub/".concat(t.id)).then(e=>{let{activeLiveStream:t}=e;return s(t)})},[t,n,o]),{activeLiveStream:a}}},26289:function(e,t,n){n.d(t,{By:()=>r,sY:()=>o,yr:()=>l});var i=n(17402);let l=e=>{var t,n;let l=null==e||null==(t=e.current)?void 0:t.player,[r,o]=(0,i.useState)("number"==typeof(null==l?void 0:l.currentTime)?l.currentTime:0),[a,s]=(0,i.useState)(!!l&&!l.paused);return(0,i.useEffect)(()=>{var t;let n=null==(t=e.current)?void 0:t.player;if(n){let e=e=>{"number"==typeof e.target.currentTime&&o(e.target.currentTime)},t=()=>s(!0),i=()=>s(!1),l=()=>s(!1);return n.addEventListener("timeupdate",e),n.addEventListener("play",t),n.addEventListener("pause",i),n.addEventListener("ended",l),n.paused||a||s(!0),()=>{n.removeEventListener("timeupdate",e),n.removeEventListener("play",t),n.removeEventListener("pause",i),n.removeEventListener("ended",l)}}},[null==e||null==(n=e.current)?void 0:n.player]),{currentTime:r,isPlaying:a}},r=e=>o(e.current),o=e=>{let t=null==e?void 0:e.player,[n,l]=(0,i.useState)(!!t&&!t.paused);return(0,i.useEffect)(()=>{let t=null==e?void 0:e.player;if(t){let e=()=>l(!0),i=()=>l(!1),r=()=>l(!1);return t.addEventListener("play",e),t.addEventListener("pause",i),t.addEventListener("ended",r),t.paused||n||l(!0),()=>{t.removeEventListener("play",e),t.removeEventListener("pause",i),t.removeEventListener("ended",r)}}},[null==e?void 0:e.player]),n}},60285:function(e,t,n){n.d(t,{k:()=>s});var i=n(76703),l=n.n(i),r=n(17402),o=n(39318),a=n(41086);let s=e=>{let{alwaysPersistQuery:t,initialValue:n,key:i,type:s,isArray:d,disable:c}=e,u=(0,a.y)(i),p=n;u&&!c&&(p=d?u.split(",").map(e=>"number"===s?parseInt(e):e):"number"===s?parseInt(u):u);let[h,m]=(0,r.useState)(p),g=h&&(h!==n||t)?l()(h).join(","):"";return(0,r.useEffect)(()=>{if(!c)if(g)window.history.replaceState({},"",(0,o.oRR)({[i]:g}));else{let e=new URL(document.location.href);e.searchParams.delete(i),window.history.replaceState({},"",e.toString())}},[c,i,g]),[h,m]}},72569:function(e,t,n){n.d(t,{c:()=>a});var i=n(4006),l=n(82853),r=n(68349),o=n(36372);function a(){let e=(0,o.d)();return function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"link";(0,r.lW)(t),e.popToast(()=>(0,i.Y)(o.y,{text:"Copied ".concat(n," to clipboard"),Icon:l.A}))}}},73331:function(e,t,n){n.d(t,{A:()=>F});var i=n(99851),l=n(4006),r=n(17402),o=n(15734),a=n.n(o),s=n(9266),d=n(6212),c=n(58398),u=n(58997),p=n(36233),h=n(56778),m=n(85478),g=n(86500),v=n(13022),Y=n(68349),f=n(24782),b=n(76977),y=n(47639),_=n(27747);let w=e=>{var t;let{post:n,pub:i,user:o,freeSignup:a}=e,s=n.section_id&&i.sections&&null!=(t=i.sections.find(e=>e.id===n.section_id))?t:null,c=(0,r.useRef)(null);return(0,l.FD)(b.I1,{className:"post",paddingY:32,children:[(0,l.Y)(d.I0,{allowEdit:!0,hideAudience:"page"===n.type,hideDate:"page"===n.type,isOnPostPage:!0,post:n,pub:i,showCommentRestack:!i.hide_post_restacks,showLabel:!0,showPhoto:!0,showShare:!0,showSubtitle:!0,user:o}),n.videoUpload&&(0,l.Y)(y.U,{contentType:"post",disableAutoPlay:!0,entityKey:String(n.id),entityType:"post",isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),mediaUpload:n.videoUpload,post:n,pub:i,surface:"publication",variant:"inbox",videoPlayerRef:c,videoType:"post"}),n.podcastUpload&&!n.videoUpload&&(0,l.Y)(_.KQ,{isFreeSubscribed:!!((null==o?void 0:o.is_free_subscribed)||a),isSubscribed:!!(null==o?void 0:o.is_subscribed),post:n,pub:i,section:s,trackingProps:{surface:"media_feed",entityKey:n.id,entityType:"post",contentType:"post"},variant:"notes-full"})]})};var C=n(56262),I=n(39318),k=n(41086),S=n(9036),D=n(57324);class F extends r.Component{async componentDidMount(){this.triggerShareOnLoad(),await this.loadMore()}getBatchSize(){return 5}async loadMore(){!this.state.hasMore||await (0,Y.vL)(this,"loading",async e=>{let{hasMore:t,posts:n}=e;if(t){n=n||[];try{let e=(await a().get("/api/v1/posts").query({limit:this.getBatchSize(),offset:n.length})).body;n=n.concat(e),t=e.length>=this.getBatchSize(),this.makeSureIosCookiesArentBroken(e),this.setState({posts:n,hasMore:t})}catch(e){console.error(e)}return t}})&&this.loader&&this.loader.checkVisibility()}triggerShareOnLoad(){"share"===(0,k.y)("action")&&(window.history.replaceState({},document.title,(0,I.oRR)({action:null})),this.setState({share_on_load:!0,shareModalOpen:!0}))}makeSureIosCookiesArentBroken(e){if(!/iPad|iPhone|iPod/.test(navigator.userAgent)||this.props.user&&this.props.user.is_subscribed||!e||0===e.filter(e=>(0,C.isPaidAudience)(e.audience)&&!e.hidden).length)return;let t="__cookie_checked",n=(0,S.m)(window.location.search);n[t]||(n[t]="true",window.location.search="?".concat((0,I.BpC)(n)))}onChange(e){let{post:t}=e||{};if(t){var n;let e=(this.state.posts||[]).map(e=>e.id).indexOf(t&&t.id);-1!==e&&(null==(n=this.state.posts)?void 0:n[e])&&(this.state.posts[e]=t,this.setState({posts:this.state.posts}))}}render(){var e;let{user:t,pub:n,freeSignup:i,freeSignupEmail:r,preloadedPosts:o,hide_intro_popup:a,children:d,blurbs:u,launchWelcomePage:p,skipIntroPopupRender:m,activeLiveStream:g}=this.props,{posts:v,hasMore:Y,share_on_load:b}=null!=(e=this.state)?e:{},y=[];for(let e of v||o||[]){let t=y[y.length-1];e.hidden?Array.isArray(t)?t.push(e):y.push([e]):y.push(e)}return(0,l.FD)("div",{className:"classic-home-page",children:[!!(null==g?void 0:g.liveStream.id)&&(0,l.Y)(f.A,{activeLiveStream:g}),(0,l.Y)(c.Z,{isOpen:!!this.state.shareModalOpen,onClose:()=>this.setState({shareModalOpen:!1}),user:t,pub:n,medium:"web"}),m?null:(0,l.Y)(s.Ay,{freeSignup:i,freeSignupEmail:r,user:t,post:null,publication:n,hidden:a||b,blurbs:u,launchWelcomePage:p}),(0,l.FD)("div",{className:"post-list",children:[0===y.length&&!Y&&(0,l.Y)("div",{className:"container-border coming-soon",children:(0,l.Y)("div",{className:"container",children:(0,l.Y)("p",{children:"Coming soon"})})}),y.map((e,t)=>Array.isArray(e)?this.renderHiddenPosts(e,t):this.renderPost(e)),Y?(0,l.Y)("div",{className:"post-loader",children:(0,l.Y)("div",{className:"container",children:(0,l.Y)(h.A,{ref:this.assignLoader,noDedupe:!0,threshold:1280,onVisible:()=>this.loadMore(),children:(0,l.Y)("p",{children:"Loading more posts"})})})}):n.has_posts&&v&&v.length>0&&(0,l.Y)("div",{className:"container",children:(0,l.Y)("a",{className:"archive-link button invis",href:(0,I.Xt9)(n),children:"View archive"})})]}),d]})}renderPost(e){return(0,l.Y)("div",{className:"container-border post-list-post",children:(0,l.Y)("div",{className:"container",children:"thread"===e.type?(0,l.Y)(u.X,{post:e,user:this.props.user,pub:this.props.pub,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,invisible:!this.props.hide_intro_popup,showCta:!0,showReactions:!!this.likesEnabled}):"podcast"===e.type||"video"===e.type?(0,l.Y)(w,{post:e,pub:this.props.pub,user:this.props.user,freeSignup:this.props.freeSignup}):(0,l.Y)(d.L4,{post:e,user:this.props.user,freeSignup:this.props.freeSignup,freeSignupEmail:this.props.freeSignupEmail,pub:this.props.pub,invisible:!this.props.hide_intro_popup,truncateAt:1e4,truncateTo:8e3,onChange:e=>this.onChange(e),noTitleLink:!!this.props.disableInteractive,disableSubscribePrompt:!0})})})}renderHiddenPosts(e,t){let n,i;return 0===t?(n=e.slice(0,1),i=e.slice(1)):e.length<=3?(n=e,i=[]):(n=e.slice(0,2),i=e.slice(2)),(0,l.Y)(P,{user:this.props.user,pub:this.props.pub,posts:n,collapsedPosts:i,onChange:e=>this.onChange(e)})}constructor(e,t){super(e,t),(0,i._)(this,"loader",void 0),(0,i._)(this,"assignLoader",e=>{this.loader=e}),(0,i._)(this,"likesEnabled",(0,v.Ay)("like_posts_enabled")),this.state={posts:null,hasMore:!0,loading:!1,shareModalOpen:!1},this.props.notify_user&&"undefined"!=typeof window&&(0,p.Ay)(this.props.notify_user)}}(0,i._)(F,"contextType",m.W8);class P extends r.Component{toggle(){this.state.showing?this.setState({showing:!1}):(this.state.toggled||(0,g.u4)(g.qY.COLLAPSED_POSTS_SHOWN,{num_visible_posts:this.props.posts.length,num_collapsed_posts:this.props.collapsedPosts.length}),this.setState({showing:!0,toggled:!0}))}render(){var e;let{user:t,pub:n,posts:i,collapsedPosts:r,onChange:o}=this.props,{showing:a}=null!=(e=this.state)?e:{};return(0,l.Y)("div",{className:"container-border post-list-hidden-posts ".concat(a?"showing":""),children:(0,l.FD)("div",{className:"container",children:[i.map(e=>(0,l.Y)(d.I0,{user:t,pub:n,post:e,onChange:o})),r.length>0&&(0,l.Y)("div",{className:"collapse-toggle",onClick:()=>this.toggle(),children:a?"hide":"+".concat(r.length," more")}),r.map(e=>(0,l.Y)(d.I0,{className:"collapsed",user:t,pub:n,post:e,utm_source:D.VU.home,onChange:o}))]})})}}},2058:function(e,t,n){n.d(t,{M:()=>H});var i=n(69277),l=n(70408),r=n(4006),o=n(48697),a=n(98445),s=n(99851),d=n(79785),c=n(32485),u=n.n(c),p=n(17402),h=n(15734),m=n.n(h),g=n(97731);let v=e=>(0,r.Y)(g.A,(0,l._)((0,i._)({},e),{name:"RightArrowIcon",svgParams:{height:20,width:20},children:(0,r.Y)("path",{d:"M7.5 15L12.5 10L7.5 5",strokeWidth:"1.5",strokeLinecap:"round","stroke-linejoin":"round"})}));var Y=n(56778),f=n(84605),b=n(99145),y=n(85478),_=n(86500),w=n(68349),C=n(16291),I=n(39318),k=n(49807),S=n(82776);function D(){let e=(0,d._)(["Search ",""]);return D=function(){return e},e}class F extends p.Component{componentDidMount(){this.loadTab(this.state.tab.id)}componentWillUnmount(){"search"===this.state.tab.id&&this.searchInput&&this.searchInput.blur()}componentDidUpdate(e){(e.hideTop!==this.props.hideTop||e.newPosts!==this.props.newPosts)&&this.setState(this.getTabs())}getTabs(){var e,t,n;let i=[],{iString:l}=this.props,r={id:"new",title:l("Latest"),posts:this.props.newPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.newPosts)};i.push(r),(!this.props.newPosts||this.props.newPosts.length>=this.getFetchLimit())&&(this.props.hideTop||i.push({id:"top",title:l("Top"),posts:this.props.topPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.topPosts)}),(null==(e=this.props.pub)?void 0:e.community_enabled)&&(null==(t=this.props.pub)?void 0:t.has_community_content)&&!this.props.hideCommunity&&i.push({id:"community",title:l("Discussions"),posts:this.props.communityPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.communityPosts)})),this.props.postId&&i.push({id:"related",title:l("Related"),posts:this.props.relatedPosts,fullyLoaded:!!this.props.relatedPosts}),i=this.props.sortTabs&&this.props.sortTabs(i)||i,"search"!==this.props.sort&&this.props.newPosts&&this.props.newPosts.length<this.getFetchLimit()||i.push({id:"search",title:l("Search"),posts:this.props.searchPosts,fullyLoaded:!!(this.props.maxPosts&&this.props.searchPosts),query:this.props.search||"",hidden:!0});let o=null!=(n=i.find(e=>e.id===this.props.sort)||this.props.search&&i.find(e=>"search"===e.id)||i[0])?n:r;return{tabs:i,tab:o}}getFetchLimit(){return this.props.maxPosts||12}render(){var e,t,n;let{className:i,filterPostsPredicate:l,hideSearchTab:o,isPodcast:a,maxPosts:s,pinnedPosts:d,pub:c,renderLoading:p,renderPosts:h,renderTabs:m,renderSeeAll:g,sectionId:f,showMonthDividers:_,user:w,iString:C,iTemplate:F}=this.props,{emptyMessage:P}=this.props,{tabs:T,tab:A}=null!=(e=this.state)?e:{};P=P||C("No posts");let E=_&&(null==A?void 0:A.id)==="new",N=T.find(e=>"search"===e.id),B=T.find(e=>"community"===e.id),M=Array.isArray(A.posts)?A.posts.filter(e=>!(c&&"top"===A.id&&e.top_exclusions.includes(c.id))).filter(e=>null==c||!c.section||null==d||!d.length||!d.find(t=>t.id===e.id)).filter(e=>!S.hidePaidPostsFor.includes(null==c?void 0:c.subdomain)||"everyone"===e.audience||(null==w?void 0:w.is_subscribed)).filter(l||(()=>!0)):[];(null==c?void 0:c.section)&&(null==d?void 0:d.length)&&["new","top"].includes(null!=(t=A.id)?t:"")&&(M=[...d,...M]);let R=0===M.length,L=!M&&!A.loadingError,O=s?M.slice(0,s):M,z=h?h({posts:O,linkToComments:A===B,onClickPost:e=>{let{event:t,post:n,index:i,source:l}=e;return this.onPostClicked(t,n.id,i,l)},postGroups:E?x(O,c.language):null}):[],U=f&&null!=(n=null==c?void 0:c.sections.find(e=>e.id===f))?n:null,q=a?(0,k.erJ)({pub:c,section:U,params:{sort:A.id,search:A.query}}):(0,I.qy7)(c,{section:U,params:{sort:A.id,search:A.query}}),H=g?g({url:q}):(0,r.FD)("a",{className:"portable-archive-all",href:q,native:!0,children:[C("See all")," ",(0,r.Y)(v,{height:12,width:12})]}),W=p?p():null;return(0,r.Y)(y.W8.Consumer,{children:e=>{let{getConfigFor:t}=e;return(0,r.Y)(b.bf.Consumer,{children:e=>{let{open:n}=e;return(0,r.FD)("div",{className:u()("portable-archive",i,{"empty-list":R}),children:[m&&m({activeTabId:A.id,isSearching:A===N,showSearch:!!(N&&!o),searchInputProps:{value:null==N?void 0:N.query,onKeyDown:this.onSearchKeyDown,onChange:e=>{"search"===this.state.tab.id&&this.loadTab("search",e)},onBlur:this.onSearchBlur},searchRef:e=>{this.searchInput=e},tabs:T.filter(e=>!e.hidden),onClick:e=>{this.loadTab(e)},onClickSearch:()=>{t("fallback_to_archive_search_on_section_pages")&&f?this.loadTab("search"):n()},onClickSearchClose:()=>{var e;this.loadTab(null==(e=T[0])?void 0:e.id)}}),(0,r.FD)("div",{className:"portable-archive-list",children:[A.loadingError?(0,r.Y)("p",{className:"portable-archive-empty",children:C("Failed to load posts")}):0!==M.length||A.loading?(0,r.FD)(r.FK,{children:[z,!s&&!L&&!A.loading&&!A.fullyLoaded&&(0,r.Y)(Y.A,{threshold:640,onVisible:()=>this.loadTab(A.id,A.query)})]}):(0,r.Y)("p",{className:"portable-archive-empty",children:"search"!==A.id?P:A.query?C("No results"):F(D(),U?U.name:c?c.name:"")}),A.loading||L?W:s&&M.length>=s&&H]})]})}})}})}constructor(e,t){if(super(e,t),(0,s._)(this,"searchInput",void 0),(0,s._)(this,"onTabClick",e=>t=>{t.preventDefault(),this.loadTab(e)}),(0,s._)(this,"onSearchInput",e=>{"search"===this.state.tab.id&&this.loadTab("search",e.currentTarget.value)}),(0,s._)(this,"onSearchKeyDown",e=>{if("search"===this.state.tab.id&&"Escape"===e.key){var t,n,i;null==(n=e.target)||null==(t=n.blur)||t.call(n),this.loadTab(null==(i=this.state.tabs[0])?void 0:i.id)}}),(0,s._)(this,"onPostClicked",(e,t,n,i)=>{(0,_.u4)(_.qY.ARCHIVE_PAGE_POST_CLICKED,{post_id:t,tab:this.state.tab.id,rank_in_feed:n,source:null!=i?i:this.props.source})}),(0,s._)(this,"onSearchBlur",e=>{if("search"===this.state.tab.id&&!e.target.value){var t;if(!this.state.tab.fullyLoaded)return void setTimeout(()=>{var e;null==(e=this.searchInput)||e.focus()},0);this.loadTab(null==(t=this.state.tabs[0])?void 0:t.id,"")}}),(0,s._)(this,"loadTab",async(e,t)=>{let n=this.state.tabs.find(t=>t.id===e);if(!n)return void console.error("couldnot find tab with id [".concat(e,"]"));let l=!1;if("search"===n.id&&"string"==typeof t&&n.query!==t&&(l=!0,n.query=t,n.posts=null,n.fullyLoaded=!1,n.loading=!1,n.loadingError=null),n.id!==this.state.tab.id?(this.setState({tab:n},()=>{"search"===n.id&&this.searchInput&&(this.searchInput.focus(),this.searchInput.select())}),this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,I.oRR)({sort:n.id,search:n.query||null}))):l&&this.props.stateInUrl&&"undefined"!=typeof window&&window.history.replaceState&&window.history.replaceState({},document.title,(0,I.oRR)({search:n.query||null})),n.loading)return;if(n.fullyLoaded){this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:n.posts});return}if("search"===n.id&&!n.query){n.posts=[],n.fullyLoaded=!0,this.setState({tabs:this.state.tabs});return}let r=(0,S.randomString)();if(n.loading=r,n.loadingError=null,this.setState({tabs:this.state.tabs}),"search"===n.id&&n.query&&(await new Promise(e=>setTimeout(e,300)),n.loading!==r))return;!this.state.tabs.find(e=>e.posts||e.fullyLoaded||e.loading||e.loadingError)&&this.props.delayFirstLoad&&await new Promise(e=>setTimeout(e,this.props.delayFirstLoad));let o=this.props.pub?"/api/v1/archive":this.props.profile?"/api/v1/profile-archive":"";try{let e,t,l=this.props.maxPosts?2*this.props.maxPosts:this.getFetchLimit();if("related"===n.id)e=(await m().get("/api/v1/posts/".concat(this.props.postId,"/related")).query({limit:l,offset:(n.posts||[]).length})).body;else{let r=(0,i._)({type:this.props.isPodcast?"podcast":void 0,rss_episodes_only:!!this.props.isPodcast&&!this.props.sectionId||void 0},this.props.authorId&&{author_id:this.props.authorId},this.props.postTagId&&{post_tag_id:this.props.postTagId},this.props.sectionId&&{section_id:this.props.sectionId},this.props.profile&&{profile_user_id:this.props.profile.id});"new"===n.id&&this.props.includePins&&!n.posts&&(t=(await m().get(o).query((0,i._)({sort:"pinned",offset:0,limit:1},r))).body),e=(await m().get(o).query((0,i._)({sort:"search"===n.id?"new":n.id,search:"search"===n.id?n.query:"",offset:(n.posts||[]).length,limit:l},r))).body,e=[...t||[],...e.filter(e=>!(null==t?void 0:t.find(t=>t.id===e.id)))]}if(this.props.onPostsLoaded&&this.props.onPostsLoaded({posts:e}),n.loading!==r)return;n.posts=n.posts?n.posts.concat(e):e,n.fullyLoaded=e.length<l||!!(this.props.maxPosts&&n.posts&&n.posts.length>=this.props.maxPosts)}catch(e){console.error("Failed to load tab:",e),n.loadingError=e}n.loading=!1,this.setState({tabs:this.state.tabs.map(e=>e.id===n.id?n:e),tab:n})}),(0,s._)(this,"onChange",e=>{let{post:t}=e;t&&((0,w.qr)(this,e=>{let n=!1;for(let i of e.tabs.map(e=>e.posts).filter(e=>Array.isArray(e))){let e=null==i?void 0:i.findIndex(e=>e.id===t.id);-1!==e&&i&&(i[null!=e?e:""]=t,n=!0)}n&&this.setState({tabs:e.tabs})}),this.props.onChange&&this.props.onChange(t))}),!(this.props.pub||this.props.profile))throw Error("Archive must be loaded for a publication or a profile");this.loadTab=this.loadTab.bind(this),this.state=this.getTabs()}}let P=(0,f.wr)(F),x=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",i=[];return e.forEach((e,l)=>{let r=(0,C.A)(e.post_date).locale(n).format("MMMM YYYY");if(r!==t)0===l?i.push({label:"",posts:[e]}):i.push({label:r,posts:[e]}),t=r;else{let t=i[i.length-1];t&&t.posts.push(e)}}),i};var T=n(53989),A=n(10939),E=n(68410),N=n(28528),B=n(24634),M=n(72692),R=n(35369),L=n(76977),O=n(40837),z=n(21356),U=n(63136),q=n(4016);let H=e=>{var t;let{authorId:n,children:s,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:Y,newPosts:b,pinnedPosts:_,postTagId:w,pub:C,renderLoading:I,renderTabs:k,search:D,searchPosts:F,postId:x,sectionId:H,showMonthDividers:W,sort:G,sortTabs:K,source:V,topPosts:j,user:X,utm:J,variant:Z="list",onPostsLoaded:Q}=e,{iString:$}=(0,f.GO)(),{isMobile:ee}=(0,E.sM)(),{getSettingFor:et}=(0,T.Pu)(),en=(0,y.mJ)(),ei=(0,S.ensureInList)(et("post_preview_crop_gravity"),["center","auto"]),el=(0,q.lu)({pub:C}),er=null!=(t=en.getConfigFor("related_posts_enabled"))&&t;return(0,r.Y)(N.XL,{authorPagesEnabled:!!en.getConfigFor("enable_author_pages"),cropGravity:ei,highlightByline:!!en.getConfigFor("post_preview_highlight_byline"),pub:C,user:X,utm:J,children:(0,r.Y)(P,{authorId:n,communityPosts:d,delayFirstLoad:c,filterPostsPredicate:u,hideCommunity:p,hideTop:h,includePins:m,isBelowTheFold:g,isPodcast:v,maxPosts:Y,newPosts:b,pinnedPosts:_,postId:er?x:void 0,postTagId:w,pub:C,renderLoading:null!=I?I:()=>(0,r.Y)(B.t,{postCount:null!=Y?Y:7,variant:Z}),renderPosts:e=>{let{posts:t,linkToComments:n,onClickPost:i,postGroups:l}=e;return l?l.map(e=>{let{label:t,posts:l}=e;return(0,r.FD)(r.FK,{children:[t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(A.r,{paddingBottom:8,paddingTop:8}),(0,r.Y)(U.EY.Meta,{as:"h3",className:"monthHeader-nt8KgE",color:"accent",paddingBottom:24,children:t})]}),s({posts:l,linkToComments:n,onClickPost:i})]})}):s({posts:t,linkToComments:n,onClickPost:i})},renderSeeAll:e=>{let{url:t}=e;return"grid-groups"===Z||el?null:(0,r.Y)(M.k,{url:t})},renderTabs:null!=k?k:e=>{let{activeTabId:t,isSearching:n,tabs:s,searchInputProps:d,searchRef:c,showSearch:u,onClick:p,onClickSearch:h,onClickSearchClose:m}=e;if("grid-groups"===Z||el)return null;if(n)return(0,r.FD)(L.Ye,{alignItems:"center",gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,children:[(0,r.Y)(O.D,(0,l._)((0,i._)({},d),{ref:c,autoFocus:!0,flex:"grow",placeholder:$("Search..."),showClear:!1})),(0,r.Y)(R.K0,{priority:"tertiary",onClick:m,children:(0,r.Y)(o.A,{size:20})})]});if(u||s.length>1){var g,v;return(0,r.FD)(L.Ye,{alignItems:"center","aria-label":$("Archive sort tabs"),gap:12,justifyContent:"space-between",paddingBottom:16,paddingX:8*!ee,role:"navigation",children:[(0,r.Y)(z.T,{tabs:s.map(e=>({value:e.id,label:e.title})),value:null!=(v=null!=t?t:null==(g=s[0])?void 0:g.id)?v:"",onChange:e=>p(e||void 0)}),u&&(0,r.Y)(R.K0,{priority:"tertiary",onClick:h,children:(0,r.Y)(a.A,{size:20})})]})}return null},search:D,searchPosts:F,sectionId:H,showMonthDividers:W,sort:G,sortTabs:K,source:V,stateInUrl:!0,topPosts:j,user:X,onPostsLoaded:Q})})}},10939:function(e,t,n){n.d(t,{r:()=>o});var i=n(4006),l=n(80098),r=n(76977);let o=e=>{let{numColumns:t=4,paddingBottom:n=24,paddingTop:o=24}=e;return(0,i.Y)(l.P,{variant:4===t?"full-width":3===t?"three-column-width":"two-column-width",children:(0,i.Y)(r.I1,{paddingBottom:n,paddingTop:o,paddingX:8,children:(0,i.Y)(r.pT,{borderBottom:"detail-themed"})})})}},39293:function(e,t,n){n.d(t,{Z:()=>lo});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(90883),s=n(83673),d=n.n(s),c=n(90179),u=n.n(c),p=n(17402),h=n(36233),m=n(85478),g=n(77043);let v=e=>{let{children:t}=e;return(0,o.Y)("div",{className:"contentContainer-S5kWYp",children:(0,o.Y)("div",{className:"contentContainerInner-aojz59",children:t})})};var Y=n(60745),f=n(49031),b=n(84713),y=n(34581),_=n(65217),w=n(65590),C=n(13950),I=n(79391),k=n(84605);let S=(0,p.createContext)({activeLiveStream:void 0,latestPostByContributorId:void 0,latestPodcastPosts:void 0,latestPostFromSections:void 0,contributors:void 0,freeSignup:void 0,freeSignupEmail:void 0,homepageLinks:void 0,numRecommendations:void 0,recommendations:void 0,topPosts:void 0});var D=n(68410),F=n(89490),P=n(76977),x=n(63136),T=n(72682),A=n(71783),E=n(8312),N=n(39318),B=n(49807);let M=e=>{let{customFooterTheme:t,isPreview:n,pub:l,socialMediaLinks:r,user:s}=e,{isMobile:d,isTablet:c}=(0,D.sM)(),u=(0,a.md)(A.vB),p=u?(0,i._)({},t,u):t,{showPublicationName:h,publicationNamePosition:m}=p,g=64;c?g=48:d&&(g=24);let v={customFooterTheme:p,paddingY:g,pub:l},Y={customFooterTheme:p,isPreview:n,paddingY:g,pub:l,socialMediaLinks:r,user:s},f=h&&"default"!==p.layout?(0,o.Y)(L,(0,i._)({},v)):null;return(0,o.FD)(P.VP,{style:{marginTop:24},children:["top"===m&&f,(0,o.Y)(R,(0,i._)({},Y)),"bottom"===m&&f]})},R=e=>{let{customFooterTheme:t,isPreview:n,paddingY:i,pub:l,socialMediaLinks:r,user:a}=e,{iString:s}=(0,k.GO)(),{isMobile:d}=(0,D.sM)(),{layout:c}=t,u=(0,o.Y)(U,{isPreview:n,socialMediaLinks:r}),p=t.showPublicationName,h=null;return"centered"===c&&(h=(0,o.FD)(P.VP,{alignItems:"center",gap:20,children:[(0,o.FD)(P.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",children:p?s("Subscribe"):l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",maxWidth:540,textAlign:"center",children:l.hero_text})]}),(0,o.Y)(O,{pub:l,user:a}),(0,o.Y)(z,{pub:l}),u]})),"two-column"===c&&(h=(0,o.FD)("div",{className:"twoColumnGrid-NSUThY",children:[(0,o.FD)(P.VP,{gap:16,children:[(0,o.FD)(P.VP,{gap:4,children:[(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",children:l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",children:l.hero_text})]}),(0,o.Y)(z,{pub:l})]}),(0,o.FD)(P.VP,{alignItems:d?"center":"end",gap:24,children:[(0,o.Y)(O,{align:"left",pub:l,user:a}),u]})]})),"three-column"===c&&(h=(0,o.FD)("div",{className:"threeColumnGrid-nUueeH",children:[(0,o.Y)(P.VP,{alignItems:d?"center":"start",justifyContent:"center",style:d?{order:3}:void 0,children:u}),(0,o.FD)(P.VP,{alignItems:"center",gap:16,justifyContent:"center",children:[(0,o.FD)(P.VP,{alignItems:"center",gap:8,children:[(0,o.Y)(x.EY.H3,{color:"primary",font:"pub-headings",children:p?s("Subscribe"):l.name}),(0,o.Y)(x.EY.B2,{color:"primary",font:"text",children:l.hero_text})]}),(0,o.Y)(O,{pub:l,user:a})]}),(0,o.Y)(P.VP,{alignItems:d?"center":"end",justifyContent:"center",children:(0,o.Y)(z,{pub:l})})]})),(0,o.Y)(C.DH,{prefix:"footer",children:(0,o.Y)(F.az,{borderTop:"detail",paddingY:i,children:(0,o.Y)(v,{children:h})})})},L=e=>{var t,n,l,r,s,d;let{customFooterTheme:c,paddingY:u,pub:p}=e,h=(0,a.md)(A.MS),{publicationNameStyle:m,publicationNameSize:v}=c,Y="wordmark"===m&&p.logo_url_wide,f=null!=h?h:null==(n=p.theme)||null==(t=n.font_options)?void 0:t.wordmark,b=null!=(d=null==(r=p.theme)||null==(l=r.font_options)?void 0:l.heading)?d:null==(s=p.theme)?void 0:s.font_preset_heading,y=p.logo_url_wide?b:null!=f?f:b,_=y?(0,E.OK)(y):null,w=Y?20:g.Rc,I=Y?120:60,k=20+v,S=Y?k:50===v?g.YR:Math.min(Math.max(k,w),I);return(0,o.Y)(C.DH,{prefix:"footer_secondary",children:(0,o.Y)(P.fI,{borderTop:"detail",justifyContent:"center",paddingY:u,children:(0,o.Y)(T.c,{anchor:"center",max:I,min:w,property:"footerPublicationNameSize",value:S,children:e=>{if(Y)return(0,o.Y)("img",{alt:p.name,src:(0,B.dJ9)(p.logo_url_wide,null,{height:Math.round(2*e),crop:"limit",leadingSegments:["e_trim:10:white","e_trim:10:transparent"]}),style:{display:"block",height:e,objectFit:"contain",width:"100%"}});let t=(0,g.$L)(e,w,I);return(0,o.Y)(x.EY.H2,{color:"primary",font:"pub-headings",style:(0,i._)({fontSize:"".concat(t,"rem"),lineHeight:1},_),children:p.name})}})})})},O=e=>{let{align:t="center",pub:n,user:i}=e,{freeSignup:l,freeSignupEmail:r}=(0,p.useContext)(S);return(0,o.Y)(I.A,{align:t,freeSignup:l,freeSignupEmail:r,noMargin:!0,pub:n,source:"custom-footer",user:i})},z=e=>{let{pub:t}=e,{iString:n}=(0,k.GO)();return(0,o.FD)(P.fI,{gap:12,children:[(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.DNs)(t),children:n("About")}),(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.Xt9)(t),children:n("Archive")}),t.has_recommendations&&(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.nUM)(t),native:!0,children:n("Recommendations")}),t.can_have_sitemap&&(0,o.Y)(x.EY.B4,{as:"a",color:"primary",decoration:"underline",href:(0,N.bGb)(t),native:!0,children:n("Sitemap")})]})},U=e=>{let{isPreview:t,socialMediaLinks:n}=e,i=t&&(!n||Object.values(n).every(e=>!e)),l=[{platform:"instagram",icon:b.A,value:i?"#":null==n?void 0:n.instagram},{platform:"tiktok",icon:_.A,value:i?"#":null==n?void 0:n.tiktok},{platform:"youtube",icon:w.A,value:i?"#":null==n?void 0:n.youtube},{platform:"facebook",icon:f.A,value:i?"#":null==n?void 0:n.facebook},{platform:"linkedin",icon:y.A,value:i?"#":null==n?void 0:n.linkedin},{platform:"bluesky",icon:Y.A,value:i?"#":null==n?void 0:n.bluesky}].filter(e=>e.value);return 0===l.length?null:(0,o.Y)(P.fI,{alignItems:"center",gap:16,children:l.map(e=>{let{platform:t,icon:n,value:l}=e;if(!l)return null;let r=((e,t)=>{if(t.startsWith("http://")||t.startsWith("https://"))return t;let n=t.startsWith("@")?t.slice(1):t;switch(e){case"instagram":if(n.startsWith("instagram.com"))return"https://".concat(n);return"https://instagram.com/".concat(n);case"tiktok":if(n.startsWith("tiktok.com"))return"https://".concat(n);return"https://tiktok.com/@".concat(n);case"youtube":if(n.startsWith("youtube.com"))return"https://".concat(n);return"https://youtube.com/@".concat(n);case"facebook":if(n.startsWith("facebook.com"))return"https://".concat(n);return"https://facebook.com/".concat(n);case"linkedin":return"https://".concat(n);case"bluesky":if(n.startsWith("bsky.app/profile"))return"https://".concat(n);return"https://bsky.app/profile/".concat(n);default:return"https://".concat(t)}})(t,l);return(0,o.Y)("a",{href:r,rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",color:"inherit",opacity:i?.2:1},target:"_blank",children:(0,o.Y)(n,{"aria-label":t,size:20})},t)})})};var q=n(80098),H=n(32485),W=n.n(H),G=n(97432),K=n(82776),V=n(57324);function j(e){let{className:t="",pub:n,user:r}=e,{iString:a,language:s}=(0,k.GO)(),{freeSignup:d,freeSignupEmail:c}=(0,p.useContext)(S);return(0,o.FD)("div",{className:W()("home-sitemap",t),children:[(0,o.Y)("h4",{className:"home-sitemap-title",children:n.name}),d||r&&r.is_free_subscribed?!(r&&r.is_subscribed)&&n.plans?(0,o.Y)("a",{className:"button primary home-sitemap-subscribe subscribe-btn",href:(0,N.eV6)(n,{utm_source:V.VU.homeSitemap}),native:!0,children:(0,K.getSubscribeText)(n,{language:s})}):null:(0,o.Y)(F.az,{paddingTop:20,children:(0,o.Y)(G.A,{className:"home-sitemap-signup-form",freeSignup:d,freeSignupEmail:c,pub:n,source:"home-sitemap",user:r,onSuccess:e=>{e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,N.yRP)("/account/login",{redirect:document.location.href,email:e.body.email})},30):n.plans?document.location.href=(0,N.yRP)("/subscribe",(0,l._)((0,i._)({next:document.location.href,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":""})):document.location.reload()},onConfirmationRequired:(null==n?void 0:n.payments_state)==="enabled"?()=>null:void 0})}),(0,o.FD)("div",{className:"home-sitemap-links",children:[(0,o.Y)("a",{href:(0,N.DNs)(n),native:!1,children:a("About")}),(0,o.Y)("a",{href:(0,N.Xt9)(n),children:a("Archive")}),n.has_recommendations&&(0,o.Y)("a",{href:(0,N.nUM)(n),native:!0,children:a("Recommendations")}),n.can_have_sitemap&&(0,o.Y)("a",{href:(0,N.bGb)(n),native:!0,children:a("Sitemap")})]})]})}let X=()=>{let{iString:e}=(0,k.GO)();return(0,o.Y)("div",{className:"emptyState-G3KBxq",children:(0,o.Y)(x.EY.B3,{color:"secondary",children:e("Click to add footer")})})},J="container-LSZllu",Z="container--empty-D_rgwk",Q={grid:"full-width","grid-groups":"full-width",list:"three-column-width"},$={newspaper:"three-column-width",magaziney:"full-width","magazine-5":"full-width",feature:"full-width","feature-media":"full-width",podcast:"full-width"},ee=e=>{var t,n,i,l;let{activeBodyLayout:r,hasBodyPosts:s,heroLayout:d,homepageData:c,isPreview:u,pub:p,isCustomFooterEnabled:h,user:m}=e,g=!!((null==c?void 0:c.newPosts)&&c.newPosts.length>0),{isMobile:v}=(0,D.sM)(),Y=(0,a.md)(A.vB),f=null==(t=p.theme)?void 0:t.custom_footer,b=null!=(i=null!=(n=null==Y?void 0:Y.layout)?n:null==f?void 0:f.layout)?i:"default";if(h&&f&&"default"!==b)return(0,o.Y)(M,{customFooterTheme:f,isPreview:u,pub:p,socialMediaLinks:null==(l=p.theme)?void 0:l.social_media_links,user:m});if("custom"===r&&u)return(0,o.Y)(X,{});if("custom"!==r&&g){let e=s?Q[r]:$[d];return(0,o.Y)("div",{className:J,style:{width:"100%"},children:(0,o.Y)(q.P,{variant:e,children:(0,o.Y)(P.I1,{paddingX:8*!v,width:"100%",children:(0,o.Y)(j,{pub:p,user:m})})})})}return null};var et=n(79785),en=n(48697),ei=n(47963),el=n(23725),er=n(85048),eo=n(46271),ea=n(86500),es=n(94729),ed=n(68349),ec=n(24078),eu=n(35369),ep=n(16993),eh=n(81203),em=n(11510),eg=n(41086);let ev="giftBackground-I9xH3b";var eY=n(27569);function ef(){let e=(0,et._)(["All of ","'s gifts have been claimed."]);return ef=function(){return e},e}function eb(){let e=(0,et._)(["Get your free guest pass to ",""]);return eb=function(){return e},e}function ey(){let e=(0,et._)([""," gifted you "," free days of ","."]);return ey=function(){return e},e}function e_(){let e=(0,et._)(["Gift from ",""]);return e_=function(){return e},e}function ew(){let e=(0,et._)(["Gift from someone"]);return ew=function(){return e},e}function eC(){let e=(0,et._)(["","-Day Guest Pass ("," value)"]);return eC=function(){return e},e}function eI(){let e=(0,et._)(["","-Day Guest Pass"]);return eI=function(){return e},e}function ek(){let e=(0,et._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return ek=function(){return e},e}function eS(){let e=(0,et._)(["Accept your gift to get "," days of free access to exclusive posts, chats, videos, and more."]);return eS=function(){return e},e}function eD(){let e=(0,et._)(["Accept ","'s gift"]);return eD=function(){return e},e}function eF(){let e=(0,et._)(["Accept gift"]);return eF=function(){return e},e}function eP(){let e=(0,et._)(["Accept ","'s gift"]);return eP=function(){return e},e}let ex=e=>{var t,n,l;let{isOpen:r,onClose:a,pub:s,giftCard:d,abTestingId:c}=e,{iString:u,iTemplate:h}=(0,k.GO)(),m=(0,em.Iu)(),g=(0,eo.Jd)(),{freeSignup:v,freeSignupEmail:Y}=(0,p.useContext)(S),[f,b]=(0,p.useState)((null==g?void 0:g.email)||Y||""),[y,_]=(0,p.useState)(!1),[w,D]=(0,p.useState)(!1),[F,T]=(0,p.useState)(null),[A,E]=(0,p.useState)(null),N=(null==g?void 0:g.is_free_subscribed)||v,M=s.author_photo_url||s.logo_url;if(null==d?void 0:d.expired)return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!N,paddingBottom:24*!N,children:[(0,o.Y)(eu.K0,{rounded:!0,onClick:a,"aria-label":u("Close"),priority:"tertiary",tabIndex:-1,style:{position:"absolute",top:"12px",right:"12px"},children:(0,o.Y)(en.A,{size:20})}),(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.Y)(P.I1,{alignItems:"center",gap:2,children:(0,o.Y)(x.EY.B2,{textAlign:"center",translated:!0,children:"Sorry, this gift has already expired."})})]}),(0,o.FD)(P.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(I.A,{pub:s,user:g,freeSignup:v,freeSignupEmail:Y,isStatic:!1,source:"viral-gift-fallback"}),!N&&(0,o.Y)(er.qd,{publication:s})]})]})});if(null==g?void 0:g.is_subscribed){let e=(0,B.eV6)(s,{params:{utm_source:V.VU.viralGiftModal,gift:!0}});return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.Y)(P.I1,{alignItems:"center",padding:24,gap:24,children:(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.FD)(P.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(x.EY.H4,{textAlign:"center",translated:!0,children:["Give a gift to ",I18N.p(s.name)]}),(0,o.FD)(x.EY.B3,{textAlign:"center",translated:!0,children:["You currently have an active paid subscription to ",I18N.p(s.name),", so you're not able to accept a gift. Would you like to give a gift instead?"]})]}),(0,o.Y)(eu.$n,{href:e,localNavigation:!1,children:u("Give a gift")})]})})})}if(!d||!(null==d?void 0:d.days)){if(null==d?void 0:d.gifter){let e=d.gifter.name||d.gifter.handle&&"@".concat(d.gifter.handle);return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"center",paddingTop:24,paddingX:24,gap:24*!N,paddingBottom:24*!N,children:[(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[M&&(0,o.Y)(ec.eu,{size:80,photoUrl:M}),(0,o.FD)(P.I1,{alignItems:"center",gap:2,children:[(0,o.FD)(x.EY.H4,{textAlign:"center",translated:!0,children:["Subscribe to ",I18N.p(s.name)]}),(0,o.Y)(x.EY.B3,{textAlign:"center",children:e?h(ef(),e):u("All of your friend's gifts have been claimed.")})]})]}),(0,o.FD)(P.I1,{textAlign:"center",alignItems:"center",paddingX:24,children:[(0,o.Y)(I.A,{pub:s,user:g,freeSignup:v,freeSignupEmail:Y,isStatic:!1,source:"viral-gift-fallback"}),!N&&(0,o.Y)(er.qd,{publication:s})]})]})})}return null}let R=d.gifter&&d.gifter.id!==s.author_id,L=(null==(t=d.gifter)?void 0:t.name)||(null==(n=d.gifter)?void 0:n.handle)&&"@".concat(null==(l=d.gifter)?void 0:l.handle),O=async()=>{if(!f)return void T("Please enter your email");D(!0);try{var e,t;(0,ea.u4)(ea.qY.ACCEPT_GIFT_MODAL_CTA_CLICKED,{gifter_user_id:null==(e=d.gifter)?void 0:e.id,has_sender_token:!!(0,eg.y)(window._preloads.original_url,"senderToken")});let n=await (0,es.x6)("/api/v1/viral_gifts/create_for_email",{method:"POST",json:(0,i._)({email:f},R&&(0,eg.y)(window._preloads.original_url,"senderToken")&&{senderToken:(0,eg.y)(window._preloads.original_url,"senderToken")})}),l=null==n||null==(t=n.gift)?void 0:t.id;if(l)E(l),_(!0),T(null),m&&setTimeout(()=>{window.location.href=(0,B.xdH)({giftId:l}),a()},1e3);else throw Error()}catch(e){(0,ed.uX)(e)?T((0,ed.uX)(e)):T("Something went wrong. Please try again.")}D(!1)},z=y?u("Finish activating your guest pass in the Substack app"):R?h(eb(),s.name):h(ey(),s.author_name,d.days,s.name),U=(0,o.FD)(o.FK,{children:[R?(0,o.Y)(ec.eu,{user:d.gifter,size:80}):(0,o.Y)(eh.Nq,{logoUrl:s.logo_url,size:64,radius:"sm"}),(0,o.Y)(x.EY.H3,{textAlign:"center",fontWeight:"heavy",color:"white",paddingTop:12,children:R?L?h(e_(),L):h(ew()):s.name}),(0,o.Y)(x.EY.B3,{className:"guestPassText-_ibww7",children:d.value?h(eC(),d.days,d.value):h(eI(),d.days)})]});return(0,o.Y)(ep.aF,{isOpen:r,onClose:a,width:500,children:(0,o.FD)(P.I1,{alignItems:"stretch",paddingBottom:48*!m,children:[!m&&(0,o.Y)(P.I1,{className:W()(ev,"giftBackgroundHeader-tb4ks8"),children:(0,o.FD)(P.I1,{justifyContent:"center",alignItems:"center",gap:4,children:[U,(0,o.Y)(eu.K0,{rounded:!0,onClick:a,"aria-label":u("Close"),priority:"tertiary",className:"headerCloseButton-m0sKZi",children:(0,o.Y)(en.A,{size:20})})]})}),(0,o.Y)(P.I1,{alignItems:"stretch",maxWidth:m?void 0:400,style:{margin:"auto"},children:(0,o.FD)(P.I1,{paddingTop:24,paddingX:{mobile:24,desktop:0},paddingBottom:{mobile:24,desktop:0},gap:8,children:[m&&(0,o.Y)(P.I1,{className:ev,justifyContent:"center",alignItems:"center",gap:4,children:U}),(0,o.Y)(x.EY.H4,{weight:"semibold",fontStyle:"normal",textAlign:"center",children:z}),(0,o.Y)(x.EY.B3,{color:"secondary",align:"center",paddingBottom:16,children:m?N?u("Download the Substack app to claim your guest pass"):R?h(ek(),d.days):u("Subscribe and download the Substack app to claim your guest pass"):y?u("Available for iOS and Android"):R?h(eS(),d.days):u("Subscribe free to claim your guest pass")}),N||y?!m&&y&&A?(0,o.Y)(P.I1,{alignItems:"center",gap:16,children:(0,o.Y)(P.pT,{className:"qrCode-MxgyfH",padding:20,children:(0,o.Y)(ei.hj,{size:142,utm_campaign:"accept_gift",utm_source:"accept_gift_modal",abTestingId:c,openUrl:(0,B.xdH)({giftId:A})})})}):y?(0,o.FD)(P.Ye,{gap:8,alignItems:"center",justifyContent:"center",children:[(0,o.Y)(el.A,{isStatic:!0,height:24,fill:"#187F22",stroke:"#187F22"}),(0,o.Y)(x.EY.B3,{color:"secondary",align:"center",translated:!0,children:"Subscribed"})]}):(0,o.Y)(C.DH,{children:(0,o.Y)(eu.$n,{priority:"primary",onClick:O,disabled:w,children:R?L?h(eD(),L):h(eF()):h(eP(),s.author_name)})}):(0,o.FD)(P.I1,{gap:24,className:"emailInputWrapper-SzmWNd",children:[(0,o.FD)(P.Ye,{justifyContent:"center",alignItems:"center",gap:0,style:{borderRadius:8},children:[(0,o.Y)("input",{className:W()("pencraft",eY.A.emailInput,"emailInput-JqukPr"),style:{border:"1px solid var(--color-utility-detail)"},type:"text",value:f,onInput:e=>b(e.currentTarget.value),placeholder:u("Your email"),tabIndex:-1}),(0,o.Y)(eu.$n,{disabled:w,className:"acceptButton-TrYdu7",priority:"primary",onClick:O,children:u("Accept gift")})]}),(0,o.Y)(er.qd,{className:"tos-RHY2Hj",publication:s})]}),F&&(0,o.Y)(x.EY.B4,{align:"center",style:{color:"red"},children:F})]})})]})})};var eT=n(64843),eA=n(56195),eE=n(65892),eN=n(75107),eB=n(15734),eM=n.n(eB),eR=n(63446),eL=n(6641),eO=n(15894),ez=n(25006),eU=n(17306),eq=n(12501),eH=n(67211),eW=n(60141);let eG=e=>{var t;let{isOpen:n,onClose:i,onSave:l,currentValues:r}=e,[a,s]=(0,p.useState)(r.hedDesktop),[d,c]=(0,p.useState)(r.dekDesktop),[u,h]=(0,p.useState)(r.collapsedHedDesktop),[m,g]=(0,p.useState)(r.collapsedHedMobile),[v,Y]=(0,p.useState)(r.hedMobile),[f,b]=(0,p.useState)(r.dekMobile),[y,_]=(0,p.useState)(r.isBlueTheme),[w,C]=(0,p.useState)(r.ctaCopy),[I,k]=(0,p.useState)(r.ctaLink),[S,D]=(0,p.useState)(null==(t=r.enabledForNonPaid)||t),[F,x]=(0,p.useState)(!1),T=(0,p.useRef)(null),A=async e=>{e.preventDefault(),x(!0);try{await eM().put("/api/v1/islands/client/config?key=toaster_data").send({value:{hedDesktop:a,hedMobile:v,dekDesktop:d,dekMobile:f,collapsedHedDesktop:u,collapsedHedMobile:m,ctaCopy:w,ctaLink:I,isBlueTheme:y,enabledForNonPaid:S}}),l(),i()}catch(e){console.error("Failed to save toaster config:",e),alert("Failed to save changes. Please try again.")}finally{x(!1)}};return(0,p.useEffect)(()=>{var e;s(r.hedDesktop),c(r.dekDesktop),h(r.collapsedHedDesktop),g(r.collapsedHedMobile),Y(r.hedMobile),b(r.dekMobile),_(r.isBlueTheme),C(r.ctaCopy),k(r.ctaLink),D(null==(e=r.enabledForNonPaid)||e)},[r]),(0,o.Y)(eL.S,{initialFocus:T,isOpen:n,width:500,onClose:i,children:(0,o.FD)(P.I1,{gap:24,padding:32,children:[(0,o.Y)(P.Ye,{alignItems:"center",justifyContent:"space-between",children:(0,o.Y)(eO.T,{preset:"h4-serif",children:"Edit Footer Banner"})}),(0,o.Y)("form",{onSubmit:A,children:(0,o.FD)(P.I1,{gap:20,children:[(0,o.Y)(eW.A,{inputRef:T,label:"Heading",placeHolder:"Support independent journalism",value:a,onChange:s}),(0,o.Y)(eW.A,{label:"Heading (collapsed)",placeHolder:"Support independent journalism",value:u,onChange:h}),(0,o.Y)(eW.A,{label:"Description",placeHolder:"Join *The Free Press* today for unlimited access",value:d,onChange:c}),(0,o.Y)(eW.A,{label:"Heading (mobile)",placeHolder:"Support independent journalism",value:v,onChange:Y}),(0,o.Y)(eW.A,{label:"Heading (collapsed mobile)",placeHolder:"Support independent journalism",value:m,onChange:g}),(0,o.Y)(eW.A,{label:"Description (mobile)",placeHolder:"Join *The Free Press* today for unlimited access",value:f,onChange:b}),(0,o.Y)(eW.A,{label:"Button Text",placeHolder:"Subscribe now",value:w,onChange:C}),(0,o.Y)(eW.A,{label:"Button Link",placeHolder:"/subscribe",value:I,onChange:k}),(0,o.Y)(eH.Y,{label:"Blue Theme",value:y,onChange:_}),(0,o.Y)(eH.Y,{label:"Enable for non-paid users",value:S,onChange:D}),(0,o.FD)(P.Ye,{gap:12,justifyContent:"end",children:[(0,o.Y)(eu.$n,{disabled:F,priority:"secondary",onClick:i,children:"Cancel"}),(0,o.Y)(eu.$n,{disabled:F,priority:"primary",type:"submit",children:F?"Saving...":"Save Changes"})]})]})})]})})},eK=()=>{let[e,t]=(0,p.useState)(!0),[n,l]=(0,p.useState)(!1),[r,a]=(0,p.useState)(!1),{hedDesktop:s,dekDesktop:d,isBlueTheme:c,collapsedHedMobile:u,collapsedHedDesktop:h,hedMobile:g,dekMobile:v,ctaCopy:Y,ctaLink:f,enabledForNonPaid:b,refetch:y,isLoading:_}=(()=>{let[e,t]=(0,p.useState)({hedDesktop:"Support independent journalism",hedMobile:"Support independent journalism",collapsedHedMobile:"Support independent journalism",collapsedHedDesktop:"Support independent journalism",dekDesktop:"Join *The Free Press* today for unlimited access",dekMobile:"Join *The Free Press* today for unlimited access",ctaCopy:"Subscribe now",ctaLink:"/subscribe",isBlueTheme:!1,enabledForNonPaid:!0}),[n,i]=(0,p.useState)(!0),{result:l,refetch:r}=(0,eq.st)({pathname:"/api/v1/islands/client/config",query:{key:"toaster_data"},auto:!0});return(0,p.useEffect)(()=>{var e;(null==l||null==(e=l.config)?void 0:e.value)&&(t(l.config.value),i(!1))},[l]),{hedDesktop:e.hedDesktop,hedMobile:e.hedMobile,collapsedHedMobile:e.collapsedHedMobile,collapsedHedDesktop:e.collapsedHedDesktop,dekDesktop:e.dekDesktop,dekMobile:e.dekMobile,ctaCopy:e.ctaCopy,ctaLink:e.ctaLink,isBlueTheme:e.isBlueTheme,enabledForNonPaid:e.enabledForNonPaid,refetch:r,isLoading:n}})(),w=(0,eo.Jd)(),C=(0,ez.df)(),{isMobile:I}=(0,D.sM)(),{getConfigFor:k}=(0,m.mJ)(),S=k("thefp_enable_dynamic_toaster"),F=I?g:s,x=I?u:h,{markdownProps:T}=(0,eU.$)(I?v:d),A=(null==w?void 0:w.is_admin)&&!r,E=!(null==w?void 0:w.is_subscribed),B=null==w?void 0:w.is_admin;if(!(b&&E&&(!_||B))&&!(null==w?void 0:w.is_admin)||!S)return null;let M=()=>(0,o.Y)(eu.K0,{priority:"tertiary",size:"sm",style:{position:"fixed",left:16,bottom:16,zIndex:10,backgroundColor:"var(--color-bg-primary)",border:"1px solid var(--color-border-light)"},title:"Preview toaster",onClick:()=>a(!r),children:(0,o.Y)(eA.A,{size:20})});if(A)return(0,o.Y)(M,{});let R=!e,L="h5-sans";e||(L="lg-preview-byline");let O=C&&"undefined"!=typeof window?(0,N.eV6)(C,{addBase:!0,next:(0,N.yRP)(window.location.href,{follow:!0}),utm_source:V.VU.fixedFooterPaywall,utm_medium:V.Jn.web}):"/subscribe";return(0,o.FD)(o.FK,{children:[(null==w?void 0:w.is_admin)&&(0,o.Y)(M,{}),(0,o.FD)("div",{className:"".concat("container-liQ2Od"," ").concat(e?"open-NsIljP":""),style:{backgroundColor:c?"var(--color-blue)":"white"},children:[(0,o.FD)(P.pT,{alignItems:"center",direction:I?"column":"row",gap:I?8:24,justifyContent:"center",style:{width:I?"100%":"auto"},children:[(0,o.Y)(P.Ye,{alignItems:"center",gap:0,children:(0,o.FD)(P.I1,{gap:8*!!I,children:[(0,o.Y)(eO.T,{align:I?"center":"left",color:c?"white":"primary",preset:L,children:e?F:x}),e&&(0,o.Y)(eO.T,(0,i._)({align:I?"center":"left",color:c?"white":"primary",preset:"d3-serif"},T))]})}),(0,o.Y)(eR.v,{className:"subscribeButton-KC1zy_",href:"/subscribe"===f?O:f,native:!0,size:"md",style:{width:I?"100%":"auto",textDecoration:R?"underline":"none",color:R?c?"white":"var(--color-accent-themed)":void 0,padding:R?"0":void 0},variant:R?"tertiary":"primary-accent",children:Y})]}),(null==w?void 0:w.is_admin)&&(0,o.Y)(eu.K0,{priority:"tertiary",size:"sm",style:{position:"absolute",right:0,bottom:0},title:"Edit footer banner",onClick:()=>l(!0),children:(0,o.Y)(eE.A,{size:20,style:{color:c?"white":"var(--color-primary)"}})}),(0,o.Y)(eu.Nm,{className:"chevronButton-xCmt1F",onClick:()=>t(!e),children:(0,o.Y)(eN.A,{style:{transform:e?"rotate(0deg)":"rotate(180deg)",color:c?"white":"var(--color-primary)"}})})]}),(null==w?void 0:w.is_admin)&&(0,o.Y)(eG,{currentValues:{hedDesktop:s,dekDesktop:d,hedMobile:g,dekMobile:v,collapsedHedMobile:u,collapsedHedDesktop:h,ctaCopy:Y,ctaLink:f,isBlueTheme:c,enabledForNonPaid:b},isOpen:n,onClose:()=>l(!1),onSave:()=>{y()}})]})};var eV=n(53989),ej=n(40075),eX=n(60355),eJ=n(92636),eZ=n(39891);let eQ=e=>{let{posts:t}=e,{isMobile:n,isTablet:r}=(0,D.sM)();return(0,o.FD)("div",{className:W()("container-d4zBPi",{"containerTablet-tpTBc6":r,"containerMobile-VpmHH6":n}),children:[(0,o.FD)(P.Ye,{paddingLeft:20,position:"relative",children:[(0,o.Y)("div",{className:"latestArrowEndContainer-gx613b",children:(0,o.Y)("img",{className:"latestArrowEnd-kWO5qL",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/more-arrow-end-3.svg"),430)})}),(0,o.Y)("img",{className:"latestArrow-Z7Zn2b",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/more-arrow.svg"),430)})]}),t.map((e,t)=>(0,o.Y)(P.Ye,(0,l._)((0,i._)({},n?{borderTop:0===t?void 0:"detail-themed"}:{borderLeft:"detail-themed"}),{paddingX:20,paddingY:n?16:24,children:(0,o.Y)(eX.R,{hideUfi:!0,post:e,variant:"mini"})})))]})};var e$=n(70103),e0=n(78956),e1=n(84565),e2=n(28528),e4=n(21398);let e6="fullWidthRow-lUGCvS",e7=e=>{let{posts:t,showIntroModule:i=!1,isPortraitLayout:l=!1}=e,{isMobile:r,isTablet:a}=(0,D.sM)(),[s,d]=(0,p.useState)(!1),{pub:c,user:u}=(0,e2.np)(),h=t.slice(6,6+(a?3:5)),m="top-layout-container";return r?(0,o.Y)(e9,{isPortraitLayout:l,posts:t,showIntroModule:i}):(0,o.FD)(P.I1,{className:"container-8llGPE",gap:64,paddingBottom:a?40:64,children:[(null==u?void 0:u.is_admin)&&(0,o.Y)("div",{className:"editButtonContainer-PKbNaQ",children:(0,o.Y)(eu.K0,{priority:"primary-mono",size:"sm",onClick:()=>{d(!0)},children:(0,o.Y)(eE.A,{size:16})})}),(0,o.Y)("div",{id:m,children:(0,o.Y)(e3,{isPortraitLayout:l,posts:t,showIntroModule:i})}),(0,o.Y)(eQ,{posts:h}),s&&(0,o.Y)(e4.Ic,{module:"@/frontend/components/thefp/EditPinsModal",posts:t.slice(0,6),pub:c,renderPreview:e=>{let{posts:t,showIntroModule:n,isPortraitLayout:i}=e;return(0,o.Y)(e3,{isPortraitLayout:i,posts:t,showIntroModule:n})},resolve:e=>e.EditPinsForHomepageHeroModal,topLayoutContainerId:m,whileLoading:(0,o.Y)("div",{}),onClose:()=>{d(!1)},onRequest:()=>n.e("937").then(n.bind(n,93936))})]})},e8=()=>(0,o.FD)("a",{className:"introModule-WDoR9y",href:"/intro-to-tfp",native:!0,children:[(0,o.Y)("img",{alt:"The Free Press",className:"introModuleImage-b5tjpb",src:(0,N.dJ9)("".concat((0,eJ.Ew)(),"/img/thefp/fp-flag-red.png"))}),(0,o.Y)(eO.T,{align:"center",className:"introModuleText-tL6vMV",preset:"h7-serif",children:"An\xa0Introduction\xa0to The\xa0Free\xa0Press"})]}),e3=e=>{let{isPortraitLayout:t=!1,posts:n,showIntroModule:r=!1}=e,{isTablet:a,isDesktop:s}=(0,D.sM)(),d=(0,e1.NQ)(),c={align:"center"},u=d.getConfigFor("thefp_homepage_portrait_layout");return t&&s&&u?(0,o.FD)(q.P,{variant:"three-column-one-column-one-column",children:[(0,o.Y)(e0.A,{children:[n[0]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"left",post:n[0],variant:"portrait"}))]}),(0,o.Y)(e0.A,{paddingTop:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[2],variant:"square"})),r?(0,o.Y)(e8,{}):n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]}),(0,o.Y)(e0.A,{paddingTop:40,children:[n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[5],variant:"square"}))]})]}):t&&a&&u?(0,o.FD)("div",{className:"tabletPortraitLayout-eMAKhD",children:[n[0]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"left",post:n[0],variant:"portrait"})),(0,o.Y)("hr",{}),(0,o.FD)(P.Ye,{alignItems:"center",className:e6,justifyContent:"space-between",children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[2],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[3],variant:"square"}))]}),(0,o.Y)("hr",{}),(0,o.FD)(P.Ye,{className:e6,justifyContent:"space-between",children:[(0,o.Y)("div",{className:"wideContent-tdvs4B",children:n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[4],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}))}),(0,o.Y)("div",{className:"narrowContent-CJLDbf",children:n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[5],variant:"square"}))})]})]}):(0,o.FD)(q.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[n[0]&&(0,o.FD)(e0.A,{children:[(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{align:"center",post:n[0],showImageLast:!!u,variant:"large"})),a&&(0,o.FD)(P.Ye,{gap:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[1],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]})]}),a&&(0,o.FD)(e0.A,{children:[r?(0,o.Y)(e8,{}):n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[2],variant:"square"})),n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[5],variant:"square"}))]}),s&&(0,o.FD)(e0.A,{paddingTop:40,children:[n[1]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,hideImage:!0,post:n[1],variant:"square"})),r?(0,o.Y)(e8,{}):n[2]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideDescription:!0,post:n[2],variant:"square"})),n[3]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{hideImage:!0,post:n[3],variant:"square"}))]}),s&&(0,o.FD)(e0.A,{paddingTop:40,children:[n[4]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[4],variant:"square"})),n[5]&&(0,o.Y)(eX.R,(0,l._)((0,i._)({},c),{post:n[5],variant:"square"}))]})]})},e9=e=>{let{posts:t,showIntroModule:n=!1,isPortraitLayout:i=!1}=e,l=t.slice(6,11);return(0,o.FD)(P.I1,{gap:32,paddingBottom:64,children:[i?t[0]&&(0,o.Y)(eX.R,{align:"left",imageAspectRatio:"portrait",post:t[0],variant:"large"}):t[0]&&(0,o.Y)(eX.R,{align:"left",post:t[0],variant:"large"}),n?(0,o.Y)(e8,{}):t[2]&&(0,o.Y)(eX.R,{post:t[2],variant:"square"}),(0,o.FD)(e$.Z,{children:[t[1]&&(0,o.Y)(eX.R,{hideDescription:!0,post:t[1],variant:"square"}),t[3]&&(0,o.Y)(eX.R,{hideDescription:!0,post:t[3],variant:"square"}),t[4]&&(0,o.Y)(eX.R,{post:t[4],variant:"mini"}),t[5]&&(0,o.Y)(eX.R,{post:t[5],variant:"mini"})]}),(0,o.Y)(eQ,{posts:l})]})},e5="column-HNiwn6",te=e=>{let{leftContent:t,rightContent:n,mobileContent:i}=e,{isMobile:l}=(0,D.sM)();return l&&i?i:(0,o.FD)("div",{className:"container-dOq2Em",children:[(0,o.Y)("div",{className:W()(e5,"left-jXwsmK"),children:t}),(0,o.Y)(P.Ye,{borderRight:"detail",style:{margin:"8px 0"}}),(0,o.Y)("div",{className:W()(e5,"right-koj6uE"),children:n})]})};var tt=n(98002),tn=n(93800),ti=n(86898);let tl=ti.O.feature.postCount.desktop,tr=ti.O["magazine-5"].postCount.desktop,to=e=>{let{noFirstImage:t,posts:n}=e,i=Array.from({length:t?7:tr},(e,t)=>{var i;return null!=(i=n[t])?i:null});return(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:i,variant:t?"two-three-two":"five-up"})},ta=e=>(0,o.Y)(to,(0,l._)((0,i._)({},e),{noFirstImage:!0})),ts=e=>{let{children:t,href:n,testid:i,onClick:l}=e;return(0,o.Y)(x.EY.Meta,{as:"a",className:"link-dTkJzr",color:"pub-primary-text","data-testid":i,href:n,native:!0,onClick:l?e=>{e.preventDefault(),l()}:void 0,children:t})};var td=n(67190),tc=n(88218),tu=n(4016);let tp=e=>{let{hideViewAll:t,isLatestPosts:n,pub:i,showPlaceholderTitle:l}=e,{iString:r}=(0,k.GO)(),a=(0,tu.S2)({pub:i}),s=r(n?"Latest":"Most Popular");return(0,o.FD)(P.Ye,{alignItems:"baseline",justifyContent:"space-between",paddingX:8,children:[l?(0,o.Y)(P.Ye,{paddingY:4,children:(0,o.Y)(td.x,{size:"md",width:100})}):a?(0,o.Y)("div",{className:"pillarTitle-JAEuZo",children:s}):(0,o.Y)(tc.F,{children:s}),!n&&!t&&(0,o.Y)(ts,{href:(0,N.qy7)(i,n?void 0:{params:{sort:"top"}}),children:r("View all")})]})};var th=n(7761);let tm=ti.O.magaziney.postCount.desktop,tg=e=>{var t;let{noFirstImage:n,posts:i,replaceTopPostsWithLatest:l,topPosts:r}=e,{isTablet:a,isMobile:s}=(0,D.sM)(),{pub:d}=(0,e2.np)();if(s)return null;let c=n?5:tm,u=l?i.slice(0,c):i,p=l?i.slice(c):r,h=Array.from({length:c},(e,t)=>{var n;return null!=(n=u[t])?n:null}),m=(null!=(t=null==p?void 0:p.length)?t:0)===0,g=a?3:6,v=p?Array.from({length:g},(e,t)=>{var n;return null!=(n=p[t])?n:null}):null;return(0,o.FD)(q.P,{showContentBelowOnMobile:!0,variant:"full-width-with-border-and-sidebar",children:[(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:h,variant:n?"two-small-three-medium":"two-small-one-large"}),v&&(0,o.Y)(th.WO,{pub:d,showPubPins:!1,showSectionPins:!1,children:(0,o.FD)(P.I1,{gap:12,paddingTop:8,children:[m?(0,o.Y)(F.az,{paddingX:8,paddingY:4,children:(0,o.Y)(td.x,{size:"md",width:"30%"})}):(0,o.Y)(tp,{isLatestPosts:l,pub:d}),(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:v.slice(0,g),variant:a?"mini-row":(0,tu.S2)({pub:d})?"one-column-list-flex":"one-column-list"})]})})]})},tv=e=>(0,o.Y)(tg,(0,l._)((0,i._)({},e),{noFirstImage:!0}));var tY=n(16074);let tf=e=>{let{posts:t}=e;return t.length?(0,o.FD)(P.I1,{gap:12,children:[t[0]&&(0,o.Y)(tt.z,{post:t[0],variant:"mobile-hero"}),t.length>1&&(0,o.FD)(P.I1,{paddingX:16,children:[(0,o.Y)(tY.c,{paddingY:4}),(0,o.Y)(tn.m,{posts:t.slice(1),variant:"two-column-list"})]})]}):null},tb=e=>{let{isSmall:t,posts:n}=e;return n.length&&n[0]?(0,o.Y)(q.P,{variant:t?"three-column-width":"full-width",children:(0,o.Y)(tt.z,{post:n[0],variant:t?"jumbo-small":"jumbo"})}):null},ty=e=>(0,o.Y)(tb,(0,l._)((0,i._)({},e),{isSmall:!0}));var t_=n(64648),tw=n(64232),tC=n(13790);let tI={magaziney:tg,"magazine-5":to,newspaper:tb,feature:e=>{var t;let{posts:n}=e,{isTablet:i}=(0,D.sM)(),l=null!=(t=n[0])?t:null,r=Array.from({length:tl-1},(e,t)=>{var i;return null!=(i=n[t+1])?i:null});return(0,o.Y)(te,{leftContent:(0,o.Y)(tt.z,{imageAspectRatio:"wide",post:l,variant:"large"}),mobileContent:(0,o.Y)(tn.m,{posts:n.slice(0,tl),variant:"two-column-list"}),rightContent:(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:r,variant:i?"one-column-list":"two-column-list"})})},podcast:e=>{var t,n,i;let{columns:l,hasMiniPostsRowUnderneath:r,heroAlignment:a,posts:s,showPodcastLinks:d,user:c}=e,{isMobile:u}=(0,D.sM)(),{pub:p}=(0,e2.np)(),h=p.podcast_description,m=p.podcast_art_url,g=p.podcast_title,v=24*!!r;return u?(0,o.Y)(P.I1,{paddingBottom:24,children:(0,o.Y)(tC._,{description:h,imageUrl:m,name:g,post:null!=(t=s[0])?t:null,pub:p,section:null,showPodcastLinks:d,user:c})}):"center"===a?(0,o.Y)(P.I1,{paddingBottom:v,children:(0,o.Y)(tw.i,{description:h,imageUrl:m,name:g,post:null!=(n=s[0])?n:null,pub:p,section:null,showPodcastLinks:d,user:c})}):(0,o.Y)(P.I1,{paddingBottom:v,children:(0,o.Y)(t_.S,{columns:l,description:h,imageUrl:m,name:g,post:null!=(i=s[0])?i:null,pub:p,section:null,showPodcastLinks:d,user:c})})}},tk=e=>{var{firstPostMissingImage:t,bodyVariant:n,isMobile:l,variant:a}=e,s=(0,r._)(e,["firstPostMissingImage","bodyVariant","isMobile","variant"]);let d=tI[a],c={};return(l&&"podcast"!==a?d=tf:"newspaper"===a&&"list"===n?d=ty:"magaziney"===a&&t?d=tv:"magazine-5"===a&&t?d=ta:"podcast"===a&&(c.columns="list"===n?3:4),d)?(0,o.Y)(d,(0,i._)({},s,c)):(console.error("Component not found, add one to HomeHero"),null)};var tS=n(79531),tD=n(10939),tF=n(70557),tP=n(56458);let tx=e=>{let{posts:t,pub:n,user:i,utm:l}=e,{isMobile:r}=(0,D.sM)();if(!t.length||!t[0])return null;let a=t[0],s=a.section_id?n.sections.find(e=>e.id===a.section_id):void 0,d=(0,tP.rI)({post:a,section:null!=s?s:null,pub:n});return(0,o.Y)(P.I1,{cursor:"pointer",paddingX:16*!!r,onClick:()=>{let e=a.canonical_url;"video"===a.type?e=(0,N.oRR)(a.canonical_url,{autoPlay:!0}):l&&(e=(0,N.yRP)(a.canonical_url,{utm:l})),(0,ed.V2)(e)},children:(0,o.Y)(tF.X,{columns:4,highlightPost:!0,isPodcast:!d,post:t[0],pub:n,section:s,user:null!=i?i:null})})},tT=e=>{let{columns:t=4,posts:n,pub:i}=e,{isMobile:l}=(0,D.sM)(),r=Array.from({length:t},(e,t)=>{var i;return null!=(i=n[t])?i:null}),a=n.length>=t;return l?null:(0,o.Y)(q.P,{variant:3===t?"three-column-width":"full-width",children:(0,o.FD)(P.I1,{gap:12,children:[(0,o.Y)(tp,{hideViewAll:!a,pub:i,showPlaceholderTitle:0===n.length}),(0,o.Y)(tn.m,{posts:r,variant:3===t?"three-column-mini-row":"mini-row"})]})})};var tA=n(90839);let tE=(0,p.memo)(e=>{var t,n,i;let{bodyVariant:l,breakpoint:r,heroAlignment:s,heroVariant:d,isMobile:c,isPortraitLayout:u,posts:p,pub:h,replaceTopPostsWithLatest:m,showIntroModule:g,showPodcastLinks:v,showTopPosts:Y,topPosts:f,user:b,utm:y}=e,_=(0,a.md)(A.Nu),w=null!=(n=null==_?void 0:_.heroId)?n:d,C=null!=(i=null==_?void 0:_.alignment)?i:s,I=(0,tu.lu)({pub:h}),k=!(null==(t=p[0])?void 0:t.cover_image),{effectiveHero:S,postsForHero:D}=(0,tS.z)({breakpoint:r,firstPostMissingImage:k,heroVariant:w,posts:p,pub:h}),F=["newspaper","podcast"].includes(S)&&"list"===l,x=!!(Y&&f&&"magaziney"!==S&&!c);return I?(0,o.Y)(tA.k,{previewBlockId:{type:"home-hero"},children:(0,o.Y)(th.WO,{pub:h,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(e7,{isPortraitLayout:u,posts:D,showIntroModule:g})})}):"feature-media"===S?(0,o.Y)(tA.k,{disabled:!(x&&f),previewBlockId:{type:"home-hero"},children:(0,o.FD)(P.I1,{gap:24,paddingBottom:c||x?24:40,paddingTop:c?16:8,children:[(0,o.Y)(tA.k,{disabled:!!(x&&f),previewBlockId:{type:"home-hero"},children:(0,o.Y)(tx,{posts:p,pub:h,user:b,utm:y})}),x&&f&&(0,o.Y)(tT,{columns:F?3:4,posts:f,pub:h})]})}):(0,o.FD)(tA.k,{layoutVariant:F?"three-column":void 0,previewBlockId:{type:"home-hero"},children:[(0,o.Y)(th.WO,{pub:h,showPubPins:!0,showSectionPins:!1,children:(0,o.Y)(tk,{bodyVariant:l,firstPostMissingImage:k,hasMiniPostsRowUnderneath:x,heroAlignment:C,isMobile:c,posts:D,replaceTopPostsWithLatest:m,showPodcastLinks:v,topPosts:f,variant:S})}),x&&f&&(0,o.FD)(o.FK,{children:[!["feature-media","podcast"].includes(S)&&(0,o.Y)(tD.r,{numColumns:F?3:4,paddingBottom:16,paddingTop:16}),(0,o.Y)(tT,{columns:F?3:4,posts:f,pub:h})]})]})});var tN=n(7292),tB=n(19945),tM=n(2058),tR=n(94394),tL=n.n(tR),tO=n(33031),tz=n.n(tO),tU=n(98188);let tq=e=>{let{homepageLinks:t,pub:n,renderGroup:i,renderLink:l}=e,r=tL()(t,"group"),a=tz()(Object.keys(r),e=>r[e][0].rank);return(0,o.Y)(o.FK,{children:a.map(e=>(0,o.Y)(tH,{group:e,items:r[e],newTab:!0,pub:n,renderGroup:i,renderLink:l}))})},tH=e=>{let{group:t,items:n,newTab:r,pub:a,renderGroup:s,renderLink:d}=e,c=[],u=null;r&&(u="_blank",c.push("noopener")),(!a||(null==a?void 0:a.no_follow))&&c.push("ugc nofollow");let p={rel:c.join(" "),target:u},h=(0,o.Y)(o.FK,{children:n.map(e=>{let{title:t,url:n,subtitle:r,subtitleUrl:a,edit:s,className:c}=e;return d?d({title:t,url:n,subtitle:r,linkProps:p}):(0,o.FD)("div",{className:W()("home-right-col",c),children:[s?(0,o.FD)("div",{className:"home-right-col-editable",children:[(0,o.Y)("a",{className:"home-right-col-title",href:n,native:!0,children:t}),(0,o.Y)(eu.K0,{href:s,priority:"quaternary",size:"sm",title:"edit",children:(0,o.Y)(tU.A,{size:20})})]}):(0,o.Y)("a",(0,l._)((0,i._)({className:"home-right-col-title",href:n,native:!0},p),{children:t})),r&&(0,o.Y)("a",(0,l._)((0,i._)({className:"home-right-col-sub",href:a||n,native:!0},p),{children:r}))]})})});return s?s({title:t,links:h}):(0,o.FD)("div",{className:"home-right-group",children:[(0,o.Y)("div",{className:"home-right-group-title",children:t}),h]})};var tW=n(91704),tG=n(14085);let tK=e=>{var{body:t,clampTitle:n,image:a,linkProps:s,pub:d,subtitle:c,title:u,url:p}=e,h=(0,r._)(e,["body","clampTitle","image","linkProps","pub","subtitle","title","url"]);let{size:m,lineHeight:g}=(0,tW.i)({preset:"sm",pub:d}),v="undefined"==typeof window,Y=(0,o.Y)(tG.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,(0,l._)((0,i._)({},h),{gap:16,children:[a&&(0,o.Y)(F.az,{alignSelf:"start",children:a}),(0,o.FD)(P.I1,{alignSelf:"stretch",gap:8,justifyContent:"center",children:[(0,o.FD)(P.I1,{gap:2,style:{wordBreak:"break-word"},children:[(0,o.Y)(x.EY,{clamp:n,color:"pub-primary-text",font:"pub-headings",style:{fontSize:m,lineHeight:"".concat(g,"px")},children:v?(0,o.Y)("a",(0,l._)((0,i._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:u})):u}),c&&(0,o.Y)(x.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:c})]}),t&&(0,o.Y)("div",{children:t})]})]}))});return v?Y:(0,o.Y)("a",(0,l._)((0,i._)({},s),{href:p,style:{textDecoration:"none",display:"block"},children:Y}))},tV=e=>{let{linkProps:t,pub:n,subtitle:r,title:a,url:s}=e,{isMobile:d}=(0,D.sM)(),{size:c,lineHeight:u}=(0,tW.i)({preset:"sm",pub:n});return(0,o.Y)("a",(0,l._)((0,i._)({className:"homepageLink-cE_DZ1",href:s},t),{children:(0,o.Y)(P.I1,{gap:8,paddingX:8*!d,children:(0,o.FD)(P.I1,{style:{wordBreak:"break-word"},children:[(0,o.Y)(x.EY,{className:"title-QddVTB",color:"pub-primary-text",font:"pub-body",style:{fontSize:c,lineHeight:"".concat(u,"px")},children:a}),r&&(0,o.Y)(x.EY.B4,{clamp:3,color:"pub-secondary-text",size:12,children:r})]})})}))},tj=e=>{let{hideHeaderBorder:t}=e,{homepageLinks:n}=(0,p.useContext)(S),{pub:i}=(0,e2.np)(),{isMobile:l}=(0,D.sM)();return n&&0!==n.length?(0,o.Y)(P.I1,{"data-testid":"homepage-links",gap:24,children:(0,o.Y)(tq,{homepageLinks:n,pub:i,renderGroup:e=>{let{title:n,links:i}=e;return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{alignItems:"center",paddingX:8*!l,children:(0,o.Y)(P.Ye,{borderBottom:t?void 0:"detail-themed",flex:"grow",paddingBottom:t?void 0:8,children:(0,o.Y)(tc.F,{children:n})})}),(0,o.Y)(P.I1,{gap:12,children:i})]})},renderLink:e=>{let{linkProps:t,subtitle:n,title:l,url:r}=e;return(0,o.Y)(tV,{linkProps:t,pub:i,subtitle:n,title:l,url:r})}})}):null};var tX=n(31856);let tJ=e=>{let{type:t}=e;return"recommendation"===t?(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{gap:16,children:[(0,o.Y)(tX.z,{aspectRatio:1,width:40}),(0,o.FD)(P.I1,{flex:"grow",gap:8,justifyContent:"center",children:[(0,o.Y)(td.x,{width:"60%"}),(0,o.Y)(td.x,{size:"sm",width:"40%"})]})]})}):"contributor"===t?(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[(0,o.FD)(P.I1,{flex:"grow",gap:8,children:[(0,o.Y)(td.x,{size:"sm",width:"30%"}),(0,o.Y)(td.x,{width:"70%"})]}),(0,o.Y)(tX.z,{aspectRatio:1,radius:"full",width:48})]})}):(0,o.Y)(F.az,{padding:8,children:(0,o.FD)(P.Ye,{gap:16,children:[(0,o.Y)(tX.z,{aspectRatio:1,width:64}),(0,o.FD)(P.I1,{flex:"grow",gap:8,children:[(0,o.Y)(td.x,{width:"40%"}),(0,o.Y)(td.x,{size:"sm",width:"60%"}),(0,o.Y)(td.x,{size:"sm",width:"50%"})]})]})})};var tZ=n(41167);function tQ(){let e=(0,et._)(["View all ",""]);return tQ=function(){return e},e}let t$=e=>{let{showEmptyState:t,hideHeaderBorder:n}=e,{iString:r,iTemplate:a}=(0,k.GO)(),{numRecommendations:s,recommendations:d}=(0,p.useContext)(S),{pub:c,user:u}=(0,e2.np)(),{isMobile:h}=(0,D.sM)();return d&&(0!==d.length||t)?(0,o.Y)(tZ.A,{numRecommendations:s,pub:c,recommendations:d,render:e=>{let{recommendations:t,canManage:i,manageUrl:l,hasMore:d,hasMoreUrl:c,recommendationsCount:u}=e;return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8*!h,children:(0,o.FD)(P.Ye,{alignItems:"baseline",borderBottom:n?void 0:"detail-themed",flex:"grow",justifyContent:"space-between",paddingBottom:n?void 0:8,children:[(0,o.Y)(tc.F,{children:r("Recommendations")}),i?(0,o.Y)(ts,{href:l,children:r("Manage")}):d?(0,o.Y)(ts,{href:c,testid:"homepage-recommendations-view-all",children:a(tQ(),null!=u?u:0)}):null]})}),(0,o.Y)(P.I1,{"data-testid":"homepage-recommendations",gap:4,children:0===s?(0,o.Y)(tJ,{type:"recommendation"}):t})]})},renderRecommendation:e=>{let{url:t,onClick:n,pubAvatarProps:r,pubName:a,pubAuthor:s}=e;return(0,o.Y)(tK,{"data-testid":"homepage-recommendation",image:(0,o.Y)(eh.wg,(0,l._)((0,i._)({},r),{size:40})),linkProps:{onClick:n,target:"_blank",rel:"noopener"},pub:c,subtitle:s,title:a,url:t})},user:u}):null},t0=()=>{let{freeSignup:e,freeSignupEmail:t}=(0,p.useContext)(S),{pub:n,user:i}=(0,e2.np)(),{isMobile:l}=(0,D.sM)();return(0,o.FD)(P.I1,{className:"container-rEYFE5",gap:24,paddingX:8*!l,children:[(0,o.FD)(P.I1,{gap:8,children:[n.logo_url&&(0,o.Y)("img",{alt:n.name,className:"pubLogo-DpnXOb","data-testid":"homepage-sidebar-pub-logo",src:(0,N.dJ9)(n.logo_url,88)}),(0,o.FD)(P.I1,{gap:2,children:[(0,o.Y)(tc.F,{children:n.name}),n.hero_text&&(0,o.Y)(x.EY,{color:"pub-secondary-text",font:"text",lineHeight:20,size:12,children:n.hero_text})]})]}),(0,o.Y)(I.A,{align:"left",expectTruncation:!0,freeSignup:e,freeSignupEmail:t,isStatic:!1,pub:n,source:"magaziney-home-page",user:i})]})},t1=()=>{let{pub:e}=(0,e2.np)(),{isMobile:t}=(0,D.sM)();return(0,o.FD)(P.I1,{gap:40,children:[!t&&(0,o.Y)(t0,{}),e.show_recs_on_homepage&&(0,o.Y)(t$,{}),(0,o.Y)(tj,{})]})};var t2=n(2404),t4=n.n(t2),t6=n(83128),t7=n(29098),t8=n(24634);let t3="homePageGroupsGrid-dfyTM6",t9=e=>"email_from_name"in e,t5=e=>{var t;let[n,a]=(0,p.useState)(null!=(t=e.postsByGroupId)?t:{}),[s,d]=(0,p.useState)(!1),{posts:c,bodyPostGroups:u,hasEmptyGroupOptions:h,setHasInvalidGroupSelection:m}=e,g=(0,r._)(e,["posts","bodyPostGroups","hasEmptyGroupOptions","setHasInvalidGroupSelection"]);(0,p.useEffect)(()=>{let e=async e=>{let t=(0,i._)({},n);for(let n of e){let e={limit:6};if(t9(n)?e.section_id=n.id:e.post_tag_id=n.id,!t[n.id]){let{body:i}=await eM().get("/api/v1/archive").query(e);t[n.id]=i}}t4()(t,n)||(a(t),d(!1))};0===Object.keys(n).length&&u&&(null==u?void 0:u.length)>0&&(d(!0),e(u))},[u,a,n]);let v=(0,p.useCallback)(e=>{var t;let r=null!=(t=e.post_tag_id)?t:e.section_id;if(!r)throw Error("Must supply section_id or post_tag_id");n&&n[r]||eM().get("/api/v1/archive").query((0,i._)({limit:3},e)).then(e=>{let{body:t}=e;a((0,l._)((0,i._)({},n),{[r]:t}))})},[n,a]),Y=(0,p.useCallback)(e=>{var t;return n&&(!n||0!==Object.keys(n).length)&&n[e]?null==(t=n[e])?void 0:t.slice(0,3):null},[n]);return h||!u||(null==u?void 0:u.length)===0?m?(m(!0),(0,o.Y)(ne,{message:"No groups selected"})):(0,o.FD)(P.I1,{children:[(0,o.Y)(nt,{pub:e.pub}),(0,o.Y)(tn.m,(0,l._)((0,i._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):(0,o.FD)("div",{className:t3,children:[u.map(t=>{let n=Y(t.id);return(0,o.FD)(P.I1,{paddingBottom:24,children:[(0,o.Y)(nt,{pub:e.pub,row:t}),(0,o.Y)(nn,(0,l._)((0,i._)({},g),{groupModel:t,loadingSync:s,posts:c,postsForId:n,setHasInvalidGroupSelection:m,onIntersectCallback:()=>{v(t9(t)?{section_id:t.id}:{post_tag_id:t.id})}}))]})}),u.length<3?(0,o.FD)(P.I1,{children:[(0,o.Y)(nt,{pub:e.pub}),(0,o.Y)(tn.m,(0,l._)((0,i._)({},g),{posts:c.slice(0,3),variant:"three-column-grid"}))]}):null]})},ne=e=>{let{groupModel:t,message:n}=e;return(0,o.Y)(F.az,{paddingBottom:40,paddingTop:8,children:(0,o.FD)(P.I1,{alignItems:"center",className:W()(t3,t?"emptyGroupView-kLS4e3":"emptyRowsView-Yo2IhI"),justifyContent:"center",children:[(0,o.Y)(t6.A,{className:"emptyContentIcon-mKbS2t"}),n&&(0,o.Y)(x.EY.B4,{color:"pub-secondary-text",paddingTop:20,weight:"semibold",children:n}),t&&(0,o.FD)(x.EY.B4,{color:"pub-secondary-text",paddingTop:4,children:["Add posts to this ",t9(t)?"section":"tag"," to include it on your homepage."]})]})})},nt=e=>{var t;let{row:n,pub:i}=e,{isMobile:l}=(0,D.sM)(),r="/archive";return n&&(r=t9(n)?(0,B.Dor)(i,{section:n}):(0,B.ii9)(i,n)),(0,o.Y)(P.I1,{paddingBottom:12,paddingX:8*!l,children:(0,o.FD)(P.Ye,{alignItems:"center",justifyContent:"space-between",children:[(0,o.Y)(x.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:null!=(t=null==n?void 0:n.name)?t:"Recent posts"}),(0,o.Y)(ts,{href:r,children:"See all"})]})})},nn=e=>{let{onIntersectCallback:t,groupModel:n,loadingSync:a,postsForId:s,setHasInvalidGroupSelection:d}=e,c=(0,r._)(e,["onIntersectCallback","groupModel","loadingSync","postsForId","setHasInvalidGroupSelection"]),[u,h]=(0,t7.A)();return((0,p.useEffect)(()=>{(null==h?void 0:h.isIntersecting)&&!a&&t()},[null==h?void 0:h.isIntersecting,t,a]),s)?0===s.length?d?(d(!0),(0,o.Y)(ne,{groupModel:n})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},c),{posts:c.posts.slice(0,3),variant:"three-column-grid"})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},c),{posts:s,variant:"three-column-grid"})):(0,o.Y)(t8.t,{ref:u,postCount:3,variant:"grid-groups"})},ni={grid:"full-width-with-sidebar","grid-groups":"full-width-with-sidebar",list:"three-column-width-with-sidebar"},nl={grid:"three-column-grid",list:"two-column-list"},nr=e=>{let t;var{hasCustomFooter:n,hideImagesFromList:a,posts:s,pub:d,source:c,user:u,variant:p,bodyPostGroups:h,postsByGroupId:m}=e,g=(0,r._)(e,["hasCustomFooter","hideImagesFromList","posts","pub","source","user","variant","bodyPostGroups","postsByGroupId"]);let{isMobile:v,isTablet:Y,breakpoint:f}=(0,D.sM)(),b=(t=(0,tN.t)(),tB.pQ.reduce((e,n)=>(0,l._)((0,i._)({},e),{[n]:t[n].postCount}),{}))[p][f],y="list"===p&&(a||s.slice(0,b).every(e=>!e.cover_image));return(0,o.Y)(th.WO,{pub:d,showPubPins:!0,showSectionPins:!1,children:s.length>0&&(0,o.Y)(tA.k,{layoutVariant:"list"===p?"three-column":void 0,previewBlockId:{type:"home-body"},children:(0,o.FD)(q.P,{showContentBelowOnMobile:!0,variant:ni[p],children:[(0,o.Y)(tM.M,(0,l._)((0,i._)({},g),{maxPosts:b,newPosts:s,pub:d,user:u,variant:p,children:e=>{let{posts:t,linkToComments:n,onClickPost:r}=e,a={hideImages:y,linkToComments:n,posts:t,pub:d,source:c,user:u,onClickPost:r};return"grid-groups"===p?(0,o.Y)(t5,(0,l._)((0,i._)({},a),{bodyPostGroups:h,hasEmptyGroupOptions:g.hasEmptyGroupOptions,postsByGroupId:m,setHasInvalidGroupSelection:g.setHasInvalidGroupSelection})):(0,o.Y)(tn.m,(0,l._)((0,i._)({},a),{variant:nl[p]}))}})),(!v&&!Y||!n)&&(0,o.Y)(t1,{})]})})})};var no=n(73869);let na=()=>(0,o.Y)(F.az,{className:"container-eQ3i2p",paddingX:16,paddingY:48,radius:"sm",children:(0,o.Y)(x.EY.B4,{align:"center",color:"pub-secondary-text",children:"No posts found"})});var ns=n(98445),nd=n(99145);let nc=e=>{let{pub:t,showSearch:n,title:i,viewAllUrl:l}=e,r=(0,tu.S2)({pub:t}),{isMobile:a}=(0,D.sM)(),{iString:s}=(0,k.GO)(),{open:d}=(0,nd.v9)();return(0,o.FD)(P.Ye,{alignItems:"baseline",borderBottom:r?"detail-themed":void 0,className:W()({"pillarHeader-EpU7EL":r}),justifyContent:"space-between",paddingBottom:a?12:16,paddingX:8*!a,children:[r?(0,o.Y)("div",{className:"pillarTitle-Eyi3Nu",children:i}):a?(0,o.Y)(tc.F,{children:i}):(0,o.Y)(x.EY.H3,{color:"pub-primary-text",font:"pub-headings",children:i}),l&&(0,o.FD)(P.Ye,{alignItems:"center",gap:16,style:{whiteSpace:"nowrap"},children:[n&&(0,o.Y)(C.DH,{children:(0,o.Y)(eu.K0,{priority:"tertiary",onClick:e=>{e.preventDefault(),d()},children:(0,o.Y)(ns.A,{size:20})})}),(0,o.Y)(ts,{href:l,children:s("View all")})]})]})},nu=ti.O.feature.postCount.desktop,np=e=>{let{posts:t,pub:n,showEmptyState:i,showSearch:l,title:r,viewAllUrl:a,variant:s="focus-left-list"}=e;return 0===t.length?i?(0,o.Y)(na,{}):null:(0,o.FD)(o.FK,{children:[r&&(0,o.Y)(nc,{pub:n,showSearch:l,title:r,viewAllUrl:a}),(0,o.Y)(nh,{posts:t,variant:s})]})},nh=e=>{let{posts:t,variant:n}=e,{isMobile:i,isTablet:l}=(0,D.sM)(),r=t[0],a=t.slice(1,nu);if(!r)return null;if(i)return(0,o.Y)(tn.m,{posts:t.slice(0,nu),variant:"two-column-list"});if(l)return(0,o.FD)(q.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(tt.z,{post:r,variant:"large"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:a,variant:"one-column-list"})]});if(n.startsWith("focus-left")){let e="focus-left-list"===n?(0,o.Y)(tn.m,{posts:a,variant:"two-column-list"}):(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:a,variant:"two-column-grid"});return(0,o.Y)(te,{leftContent:(0,o.Y)(tt.z,{post:r,variant:"large"}),rightContent:e})}if(n.startsWith("focus-center")){let e=a.slice(0,Math.ceil(a.length/2)),t=a.slice(Math.ceil(a.length/2));return(0,o.FD)(q.P,{variant:"one-column-two-column-one-column",children:[(0,o.Y)(tt.z,{post:r,variant:"large"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:e,variant:"square-square-column"}),(0,o.Y)(tn.m,{flex:"grow",hideHorizontalDividers:!0,posts:t,variant:"square-square-column"})]})}if(n.startsWith("focus-right")){let e="focus-right-list"===n?(0,o.Y)(tn.m,{posts:a,variant:"two-column-list"}):(0,o.Y)(tn.m,{hideHorizontalDividers:!0,posts:a,variant:"two-column-grid"});return(0,o.Y)(te,{leftContent:e,rightContent:(0,o.Y)(tt.z,{post:r,variant:"large"})})}return null};var nm=n(49869),ng=n(15871),nv=n(63950),nY=n.n(nv),nf=n(10238);let nb=e=>{let{collisionRect:t}=e;return t?(0,ng.Qo)(e).filter(e=>e.id.startsWith("column-")):[]},ny=e=>e?e.replace(/^(left|right)-/,""):null;function n_(e){let{items:t,draggedId:n,getElement:i}=e,l=[],r=0;for(let e of t){let t=i(e);if(t){let n=t.getBoundingClientRect();0===r&&(r=n.top+window.scrollY),l.push({itemId:e,height:n.height})}}let o=[],a=r;for(let{itemId:e,height:t}of l)e!==n&&(o.push({itemId:e,centerY:a+t/2}),a+=t);return o}function nw(e){let t=(0,p.useRef)(null);(0,p.useEffect)(()=>{if(!e){t.current=null;return}let n=document.documentElement;t.current=n.scrollLeft;let i=()=>{null!==t.current&&n.scrollLeft!==t.current&&(n.scrollLeft=t.current)};return window.addEventListener("scroll",i,{passive:!1,capture:!0}),()=>{window.removeEventListener("scroll",i,{capture:!0})}},[e])}var nC=n(95436);let nI=(0,p.createContext)({activeBlockId:null,attrs:void 0,contentBlockId:"",draggedHeight:null,getColumnItems:()=>[],hoveredColumn:null,isActive:!1,isDragging:!1,setHoveredColumn:nY()}),nk=()=>(0,p.useContext)(nI),nS=e=>{let{attrs:t,children:n,contentBlockId:i,leftItems:l,renderModule:r,rightItems:a}=e,{isDesktop:s}=(0,D.sM)(),{activePreviewBlockId:d,activeContentBlockId:c,isMobileEditor:u,sendPreviewBlockUpdate:h}=(0,nC.T)(),m=s&&c===i,g=m&&(null==d?void 0:d.type)!=="sidebar-module"&&!u,[v,Y]=(0,p.useState)(null),[f,b]=(0,p.useState)(null),[y,_]=(0,p.useState)(null),[w,C]=(0,p.useState)([]),[I,k]=(0,p.useState)([]),S=(0,p.useRef)([]),F=(0,p.useRef)([]),P=(0,p.useRef)(!1);nw(null!==v),(0,p.useEffect)(()=>{P.current&&(P.current=!1,Y(null),b(null),_(null),C([]),k([]))},[l,a]);let x=(0,ng.FR)((0,ng.MS)(ng.AN,{activationConstraint:{distance:5}})),T=(0,p.useCallback)(e=>{let t=function(e){var t,n,i,l,r;let{event:o,leftThresholds:a,rightThresholds:s}=e,d=o.active.id;if(!d)return null;let c=o.active.rect.current.translated;if(!c)return null;let u=null!=(n=null==(t=o.over)?void 0:t.id)?n:null,p=(l=d).startsWith("left-")?"left":l.startsWith("right-")?"right":null;if(!p)return null;let h=ny(d);if(!h)return null;let m=null!=(i=u?"drop-zone-left"===(r=u)||"column-left"===r?"left":"drop-zone-right"===r||"column-right"===r?"right":null:null)?i:p,g=function(e,t,n){let i=n.filter(t=>t.itemId!==e);for(let e=0;e<i.length;e++){let n=i[e];if(n&&t<n.centerY)return e}return i.length}(h,c.top+window.scrollY,"left"===m?a:s);return{draggedItemId:h,targetColumn:m,targetSlotIndex:g}}({event:e,leftThresholds:S.current,rightThresholds:F.current});if(!t)return;let{newLeftItems:n,newRightItems:i}=function(e){let{dragResult:t,leftItems:n,rightItems:i}=e,{draggedItemId:l,targetColumn:r,targetSlotIndex:o}=t,a=n.filter(e=>e!==l),s=i.filter(e=>e!==l);return"left"===r?a.splice(o,0,l):s.splice(o,0,l),{newLeftItems:a,newRightItems:s}}({dragResult:t,leftItems:l,rightItems:a});C(e=>t4()(e,n)?e:n),k(e=>t4()(e,i)?e:i)},[l,a]),A=(0,p.useCallback)(e=>{let t="left"===e?l:a,n="left"===e?w:I;return v?n:t},[v,l,a,w,I]),E=(0,p.useMemo)(()=>{var e;return{activeBlockId:m?i:null,attrs:t,contentBlockId:i,draggedHeight:null!=(e=null==f?void 0:f.height)?e:null,getColumnItems:A,hoveredColumn:y,isActive:g,isDragging:!!v,setHoveredColumn:_}},[g,v,t,i,null==f?void 0:f.height,A,y,m]);return(0,o.Y)(ng.Mp,{autoScroll:!0,collisionDetection:nb,sensors:x,onDragEnd:()=>{document.documentElement.classList.remove("theme-editor-dragging");let e=w.length!==l.length||w.some((e,t)=>e!==l[t]),t=I.length!==a.length||I.some((e,t)=>e!==a[t]);S.current=[],F.current=[],e||t?(P.current=!0,h({previewBlockId:{type:"content-block",contentBlockId:i},updates:{secondary_sidebar_modules:w,primary_sidebar_modules:I}})):(Y(null),b(null),_(null),C([]),k([]))},onDragMove:T,onDragStart:e=>{let t=e.active.id,n=ny(t);if(!n)return;S.current=n_({items:l,draggedId:n,getElement:e=>document.querySelector('[data-draggable-id="left-'.concat(e,'"]'))}),F.current=n_({items:a,draggedId:n,getElement:e=>document.querySelector('[data-draggable-id="right-'.concat(e,'"]'))}),document.documentElement.classList.add("theme-editor-dragging");let{width:i,height:r}=nD(t);Y(t),b({moduleId:n,width:i,height:r}),C(l),k(a)},children:(0,o.FD)(nI.Provider,{value:E,children:[n,(0,o.Y)(ng.Hd,{dropAnimation:null,zIndex:nf.Up+10,children:v&&f?(0,o.Y)("div",{className:"dragOverlay-Slsz_M",style:{width:f.width-8},children:r(f.moduleId)}):null})]})})},nD=e=>{var t,n;let i=document.querySelector('[data-draggable-id="'.concat(e,'"]'));return{width:null!=(t=null==i?void 0:i.offsetWidth)?t:0,height:null!=(n=null==i?void 0:i.offsetHeight)?n:0}};var nF=n(80697),nP=n(17028);let nx=e=>{let{children:t,column:n}=e,{isActive:i,isDragging:l,setHoveredColumn:r}=nk(),{isOver:a,setNodeRef:s}=(0,ng.zM)({id:"column-".concat(n),disabled:!i});(0,p.useEffect)(()=>{l&&a?r(n):l&&!a&&r(e=>e===n?null:e)},[n,l,a,r]);let d="function"==typeof t?t({isOver:a}):t;return i?(0,o.Y)(P.I1,{ref:s,className:"dropZone-e4cHxw",children:d}):d},nT=e=>{let{column:t}=e,{iString:n}=(0,k.GO)(),{contentBlockId:i,draggedHeight:l,isActive:r,isDragging:a}=nk(),{getBehavior:s,requestModulePicker:d}=(0,nC.T)(),{clickAction:c}=s((0,p.useMemo)(()=>({type:"module-picker",parentContentBlockId:i,column:t,insertAtIndex:0}),[i,t])),u=a||"activate"!==c,h=(0,p.useCallback)(e=>{e.stopPropagation(),d({parentContentBlockId:i,column:t,insertAtIndex:0})},[i,t,d]);return(0,o.Y)(nx,{column:t,children:e=>{let{isOver:t}=e;return(0,o.Y)(nP.I1,{alignItems:"center",className:W()("emptyState-MF3YDQ",{[String("active-llAkyd")]:r&&!u,[String("dropTarget-g9F8QT")]:a}),cursor:u?void 0:"pointer",gap:8,justifyContent:a?"start":"center",minHeight:a?200:120,paddingX:8,radius:"sm",role:"button",tabIndex:0,textAlign:"center",width:"100%",onClick:u?void 0:h,children:a?t&&(0,o.Y)("div",{className:"placeholder-tcxm_U",style:{height:null!=l?l:void 0}}):(0,o.FD)("div",{className:W()("ctaContent-poF8iJ",{[String("ctaContentVisible-BZYXLS")]:r}),children:[(0,o.Y)(nF.A,{className:"icon-X2nAHP",size:16}),(0,o.Y)(x.EY.B3,{color:"secondary",children:n("Add module")})]})})}})},nA="emptyColumn-wbqk2v",nE="emptyColumnActive-mTDRtK",nN="emptyColumnExpanded-g4LiNt",nB="emptyColumnContent-oiyCuv",nM=e=>{let{children:t,emptyLeft:n,emptyRight:i}=e,{isDesktop:l}=(0,D.sM)(),{hoveredColumn:r,isActive:a,isDragging:s}=nk(),{isMobileEditor:d,isPreviewMode:c}=(0,nC.T)(),u=(0,p.useRef)(null),{width:h}=(0,nm.w)({containerRef:u}),m=(0,p.useMemo)(()=>h<=0?{one:1,two:1}:{one:(h-100)/h,two:(h-200)/h},[h]),g=n&&i,v=s&&"left"===r&&n,Y=s&&"right"===r&&i,f=v||Y;if(!c||!l||d)return t;let b=n||i,y={"--content-scale-one":m.one,"--content-scale-two":m.two};return(0,o.FD)("div",{ref:u,className:W()("wrapper-iARQWw",{[String("dragging-wqUrPl")]:s}),style:y,children:[b&&n&&(0,o.Y)("div",{className:W()(nA,"emptyColumnLeft-muN01M",{[String(nE)]:a,[String(nN)]:v}),children:(0,o.Y)("div",{className:nB,children:(0,o.Y)(nT,{column:"left"})})}),(0,o.Y)("div",{className:W()("content-OehGzR",{[String("contentOriginLeft-Kso11C")]:b&&i&&!n,[String("contentOriginRight-iAt4QB")]:b&&n&&!i,[String("contentOriginCenter-Cp9SmS")]:b&&g,[String("contentScaleOne-SI8mOq")]:b&&a&&!g&&!f,[String("contentScaleTwo-IthkKa")]:b&&a&&g&&!f,[String("contentScaleFull-riG7qC")]:b&&f}),children:t}),b&&i&&(0,o.Y)("div",{className:W()(nA,"emptyColumnRight-k7Rev2",{[String(nE)]:a,[String(nN)]:Y}),children:(0,o.Y)("div",{className:nB,children:(0,o.Y)(nT,{column:"right"})})})]})};var nR=n(9757),nL=n(72692),nO=n(85965),nz=n(32708),nU=n(48052),nq=n(44074);let nH=e=>{let{children:t,column:n,contentBlockId:r,disabled:s,dragId:d,moduleId:c}=e,{iString:u}=(0,k.GO)(),{activePreviewBlockId:h,activatePreviewBlock:m,deactivatePreviewBlock:g,getBehavior:v,isActive:Y,isMobileEditor:f,isPreviewMode:b,sendSidebarModuleRemove:y}=(0,nC.T)(),_=(0,a.md)(A.nJ),w=Y({type:"sidebar-module",parentContentBlockId:r,moduleId:c}),C=(null==h?void 0:h.type)==="module-picker"&&(null==_?void 0:_.moduleId)===c&&(null==_?void 0:_.contentBlockId)===r,{attributes:I,listeners:S,setNodeRef:D}=(0,ng.PM)({id:null!=d?d:"disabled",disabled:!d||w||f}),{active:F}=(0,ng.fF)(),P=(0,p.useMemo)(()=>n?{type:"sidebar-module",parentContentBlockId:r,moduleId:c}:null,[n,r,c]),{clickAction:x,showOverlay:T}=P?v(P):{clickAction:"none",showOverlay:!1},E="activate"===x,N=(0,p.useCallback)(e=>{e.stopPropagation(),P&&"none"!==x&&("activate"===x?m(P):g())},[P,x,m,g]),B=(0,p.useCallback)(e=>{e.stopPropagation(),y({contentBlockId:r,moduleId:c})},[r,c,y]);if(!P||!b||s||f)return t;let M=ny(null==F?void 0:F.id),R=void 0!==d&&M===c,L=void 0!==d&&!R&&!w&&!f,O=w||C,z=null===F&&(T||O)&&!f,U=E&&!C;return(0,o.FD)("div",(0,l._)((0,i._)({ref:d?D:void 0,className:W()("draggableModule-Bf288k",{[String("draggableModuleDragging-LZeAjH")]:R,[String("defaultCursor-mUq6Y6")]:!U||O,[String("pointerCursor-IZ99JQ")]:U&&!z}),"data-draggable-id":d,onClick:C?void 0:N},L?I:{},L?S:{}),{children:[(0,o.Y)("div",{className:"draggableModuleContent-tYdch3","data-draggable-content":!0,children:t}),z&&(0,o.Y)(nq.O,{isActive:O,variant:"sidebar-module",onClick:C?void 0:N,children:!O&&(0,o.FD)(o.FK,{children:[(0,o.Y)(nU.m,{children:u("Click to edit / Drag to move")}),(0,o.Y)(eu.K0,{className:"removeButton-X4c5WX",priority:"tertiary-accent",size:"xs",onClick:B,children:(0,o.Y)(nz.A,{size:16})})]})})]}))};var nW=n(81929);let nG=e=>{let{disabled:t,isInsertionIndicator:n,label:i,onClick:l,showShadow:r=!0,variant:a="default"}=e,s="none"===a?null:"space"===a?(0,o.Y)(P.Ye,{paddingBottom:32}):(0,o.Y)(tD.r,{});return t?s:(0,o.FD)("div",{className:W()("container-UZDvpD",{[String("active-Xwi0XX")]:n}),children:[s&&(0,o.Y)("div",{className:"content-w5CYL3",children:s}),n&&r&&(0,o.Y)("div",{className:"shadowOverlay-rk0CoQ",style:{zIndex:nf.AG}}),(0,o.Y)("div",{className:"overlay-TizwXu",style:{zIndex:nf.AG},onClick:l,children:i&&!n&&(0,o.Y)(nW.vw,{className:"tag-FgJVof",priority:"primary",theme:"accent",children:i})})]})},nK=e=>{let{column:t,insertAtIndex:n,variant:i="default"}=e,{iString:l}=(0,k.GO)(),{activeBlockId:r,isDragging:a}=nk(),{deactivatePreviewBlock:s,getBehavior:d,isActive:c,isPreviewingSidebarModuleInsertion:u,isPreviewMode:h,requestModulePicker:m}=(0,nC.T)(),g=(0,p.useMemo)(()=>t&&r?{type:"module-picker",parentContentBlockId:r,column:t,insertAtIndex:n}:null,[r,t,n]),{clickAction:v}=g?d(g):{clickAction:"none"},Y=!!g&&c(g);return(0,o.Y)(nG,{disabled:!r||!t||!h||a||"activate"!==v&&!Y,isInsertionIndicator:Y&&!u,label:l("Click to add module"),variant:i,onClick:e=>{e.stopPropagation(),t&&r&&(Y?s():m({parentContentBlockId:r,column:t,insertAtIndex:n}))}})};var nV=n(71834);let nj=e=>{var t;let{contributor:n,latestPost:i}=e;if(!i)return null;let l="undefined"==typeof window,r=(0,o.Y)(tG.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[(0,o.FD)(P.I1,{flex:"grow",children:[(0,o.Y)(x.EY.Meta,{color:"accent",children:n.name}),(0,o.Y)(nV.Z,{post:i,preset:"sm"})]}),(0,o.Y)(P.pT,{flex:"auto",children:(0,o.Y)(ec.eu,{photoUrl:null!=(t=n.photo_url)?t:void 0,size:48})})]})});return l?r:(0,o.Y)("a",{href:i.canonical_url,style:{textDecoration:"none",display:"block"},children:r})};function nX(e){let{items:t,excludedIds:n=[],order:i,fallbackSort:l}=e,r=new Set(n),o=t.filter(e=>!r.has(e.id));if(null==i?void 0:i.length){let e=new Map(i.map((e,t)=>[e,t]));return[...o].sort((t,n)=>{var i,l;return(null!=(i=e.get(t.id))?i:Number.MAX_SAFE_INTEGER)-(null!=(l=e.get(n.id))?l:Number.MAX_SAFE_INTEGER)})}return l?[...o].sort((e,t)=>l(e)-l(t)):o}let nJ=e=>{let{contributors:t,latestPostByContributorId:n}=(0,p.useContext)(S),i=(0,p.useMemo)(()=>(null!=t?t:[]).filter(e=>e.name&&(null==n?void 0:n[e.id])),[t,n]);return{contributors:(0,p.useMemo)(()=>nX({items:i,excludedIds:null==e?void 0:e.excluded_user_ids,order:null==e?void 0:e.contributor_order}).slice(0,10),[i,e]),latestPostByContributorId:n}},nZ=e=>{let{contributorSettings:t}=e,{iString:n}=(0,k.GO)(),{contributors:i,latestPostByContributorId:l}=nJ(t);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(tc.F,{children:n("The latest from")})}),(0,o.Y)(P.I1,{gap:4,children:i.length?i.map(e=>(0,o.Y)(nj,{contributor:e,latestPost:null==l?void 0:l[e.id]},e.id)):(0,o.Y)(tJ,{type:"contributor"})})]})},nQ="logo-ulupBr",n$="logo-64-VEaVRL",n0="logo-72-fFbpYn",n1="logo-auto-l6jK_D",n2=e=>{let{altText:t="Section logo",size:n=64,url:i,showPlaceholder:l}=e;return i?(0,o.Y)("img",{alt:t,className:W()(nQ,{[n$]:64===n,[n0]:72===n,[n1]:"auto"===n}),src:(0,N.dJ9)(i,"auto"===n?200:2*n)}):l?(0,o.Y)("div",{className:W()(nQ,"logoPlaceholder-RbJEuS",{[n$]:64===n,[n0]:72===n,[n1]:"auto"===n})}):null},n4=e=>{let{pub:t}=(0,e2.np)(),n=(0,p.useMemo)(()=>t.sections.filter(e=>(0,K.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:t})||!e.is_podcast),[t]),i=(0,p.useMemo)(()=>nX({items:n,excludedIds:null==e?void 0:e.excluded_section_ids,order:null==e?void 0:e.section_order}),[n,e]),l=(0,p.useMemo)(()=>i.some(e=>e.logo_url),[i]);return{newsletters:i,allNewsletters:n,someNewslettersHaveLogos:l,pub:t}},n6=e=>{let{newsletterSettings:t}=e,{iString:n}=(0,k.GO)(),{newsletters:i,someNewslettersHaveLogos:l,pub:r}=n4(t);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(tc.F,{children:n("Newsletters")})}),(0,o.Y)(P.I1,{gap:4,children:i.length?i.map(e=>(0,o.Y)(tK,{image:e.logo_url||l?(0,o.Y)(n2,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:r,subtitle:e.description,title:e.name,url:(0,B.Dor)(r,{section:e,addBase:!0})},e.id)):(0,o.Y)(tJ,{type:"newsletter"})})]})};function n7(){let e=(0,et._)(["Logo for ",""]);return n7=function(){return e},e}let n8=e=>{let{latestPost:t,podcastArtUrl:n,podcastTitle:i,podcastUrl:l,showPlaceholder:r}=e,{iString:a,iTemplate:s}=(0,k.GO)(),d="undefined"==typeof window,c=t?t.canonical_url:l,u=(0,o.Y)(tG.u,{hoverBackground:"light",padding:8,radius:"sm",children:(0,o.FD)(P.Ye,{alignItems:"start",gap:16,children:[(n||r)&&(0,o.Y)(P.pT,{flex:"auto",children:(0,o.Y)(n2,{altText:s(n7(),i),showPlaceholder:!0,size:64,url:n})}),(0,o.FD)(P.I1,{flex:"grow",children:[(0,o.Y)(x.EY.Meta,{color:"accent",children:i}),t?(0,o.Y)(nV.Z,{noIcons:!0,post:t,preset:"sm"}):(0,o.Y)(x.EY.B4,{color:"pub-secondary-text",paddingTop:8,style:{fontStyle:"italic"},children:a("Coming soon")})]})]})});return d?u:(0,o.Y)("a",{href:c,style:{textDecoration:"none",display:"block"},children:u})};var n3=n(24713),n9=n.n(n3);let n5=e=>{let{contentBlock:t,pub:n}=e,i=t.attrs.podcasts,l=(0,p.useMemo)(()=>{let e=[];return n.podcast_enabled&&e.push({id:-1,name:n.podcast_title||n.name,description:n.podcast_description||"",logo_url:n.podcast_art_url,isPubPodcast:!0}),e.push(...n.sections.filter(e=>e.is_podcast).map(e=>({id:e.id,name:e.name,description:e.description||"",logo_url:e.logo_url,isPubPodcast:!1}))),e},[n]);return{podcasts:(0,p.useMemo)(()=>nX({items:l,excludedIds:null==i?void 0:i.excluded_section_ids,order:null==i?void 0:i.section_order,fallbackSort:e=>{var t;return e.isPubPodcast?-1:null!=(t=n9()(n.navigationBarItems,t=>t.section_id===e.id))?t:999}}),[l,n.navigationBarItems,i]),pub:n}},ie=e=>{let{contentBlock:t}=e,{iString:n}=(0,k.GO)(),{pub:i}=(0,e2.np)(),{podcasts:l}=n5({contentBlock:t,pub:i}),{latestPodcastPosts:r}=(0,p.useContext)(S);return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(tc.F,{children:n("Podcasts")})}),(0,o.Y)(P.I1,{gap:4,children:l.length?l.map(e=>{var t,n;let l=e.isPubPodcast?null!=(t=null==r?void 0:r.pubPodcast)?t:null:null!=(n=null==r?void 0:r.sectionPodcasts[e.id])?n:null,a=e.isPubPodcast?null:i.sections.find(t=>t.id===e.id),s=e.isPubPodcast?(0,N.t6y)({pub:i,section:null}):a?(0,B.Dor)(i,{section:a,addBase:!0}):"#";return(0,o.Y)(n8,{latestPost:l,podcastArtUrl:e.logo_url,podcastSubtitle:e.description,podcastTitle:e.name,podcastUrl:s,showPlaceholder:!0},e.id)}):(0,o.Y)(tJ,{type:"podcast"})})]})},it=e=>{var t;let{topPostsSettings:n}=e,{iString:i}=(0,k.GO)(),{topPosts:l}=(0,p.useContext)(S),{isMobile:r}=(0,D.sM)(),a=null!=(t=null==n?void 0:n.num_posts)?t:5;return l?(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(F.az,{paddingX:8*!r,children:(0,o.Y)(tc.F,{children:i("Top posts")})}),(0,o.Y)(tn.m,{posts:l.slice(0,a),variant:"one-column-list-flex"})]}):null},ii=e=>{let{children:t,dragOverlayId:n,id:r,onRemove:a}=e,{iString:s}=(0,k.GO)(),{isMobileEditor:d}=(0,nC.T)(),{attributes:c,listeners:u,setNodeRef:h}=(0,ng.PM)({id:r,disabled:d}),m=n===r,g=(0,p.useCallback)(e=>{e.stopPropagation(),null==a||a(r)},[r,a]);return d?t:(0,o.FD)("div",(0,l._)((0,i._)({ref:h,className:W()("draggableItem-SJ4YDF",{[String("isDragging-jRLhA9")]:m}),"data-reorderable-id":r},c,u),{children:[(0,o.Y)("div",{className:"itemContent-boSI7u",children:t}),null===n&&(0,o.FD)(nq.O,{variant:"sidebar-module",onClick:nY(),children:[(0,o.Y)(nU.m,{children:s("Drag to reorder")}),a&&(0,o.Y)(eu.K0,{className:"removeButton-PWC5tI",priority:"tertiary-accent",size:"xs",onClick:g,children:(0,o.Y)(nz.A,{size:16})})]})]}))};function il(e){let{items:t,title:n,onReorder:i,onRemove:l,renderItem:r,emptyStateType:a}=e,{iString:s}=(0,k.GO)(),{dragOverlayId:c,handleDragEnd:u,handleDragMove:h,handleDragStart:m,orderedItems:g,sensors:v}=function(e){let{items:t,getElement:n,onReorder:i}=e,[l,r]=(0,p.useState)(null),[o,a]=(0,p.useState)(null),[s,d]=(0,p.useState)([]),c=(0,p.useRef)([]),u=(0,p.useRef)(!1);nw(null!==l),(0,p.useEffect)(()=>{u.current&&(u.current=!1,r(null),a(null),d([]))},[t]);let h=(0,ng.FR)((0,ng.MS)(ng.AN,{activationConstraint:{distance:5}})),m=(0,p.useCallback)(e=>{let i=e.active.id;r(i),a(i),d(t),c.current=n_({items:t,draggedId:i,getElement:n})},[t,n]),g=(0,p.useCallback)(e=>{if(!l)return;let n=e.active.rect.current.translated;if(!n)return;let i=function(e){let{items:t,draggedId:n,targetIndex:i}=e,l=t.filter(e=>e!==n);return[...l.slice(0,i),n,...l.slice(i)]}({items:t,draggedId:l,targetIndex:function(e){let{draggedY:t,thresholds:n}=e;for(let e=0;e<n.length;e++){let i=n[e];if(i&&t<i.centerY)return e}return n.length}({draggedY:n.top+window.scrollY,thresholds:c.current})});d(e=>t4()(e,i)?e:i)},[l,t]),v=(0,p.useCallback)(()=>{if(c.current=[],l&&s.length>0&&s.some((e,n)=>e!==t[n])){u.current=!0,i(s);return}r(null),a(null),d([])},[l,t,i,s]),Y=l&&s.length>0?s:t;return{activeDragId:l,dragOverlayId:o,handleDragEnd:v,handleDragMove:g,handleDragStart:m,orderedItems:Y,sensors:h}}({items:t.map(e=>e.id),getElement:e=>document.querySelector('[data-reorderable-id="'.concat(e,'"]')),onReorder:i}),Y=null!=c?t.find(e=>e.id===c):null,f=d()(g.map(e=>t.find(t=>t.id===e)));return(0,o.FD)(P.I1,{gap:16,children:[(0,o.Y)(P.Ye,{paddingX:8,children:(0,o.Y)(tc.F,{children:s(n)})}),(0,o.FD)(ng.Mp,{sensors:v,onDragEnd:u,onDragMove:h,onDragStart:m,children:[(0,o.Y)(P.I1,{gap:4,children:f.length?f.map(e=>(0,o.Y)(ii,{dragOverlayId:c,id:e.id,onRemove:l,children:r(e)},e.id)):(0,o.Y)(tJ,{type:a})}),(0,o.Y)(ng.Hd,{dropAnimation:null,children:Y&&(0,o.Y)("div",{className:"dragOverlay-wQ1KF4",children:r(Y)})})]})]})}let ir=e=>{let{contributorSettings:t,onReorder:n,onRemove:i}=e,{iString:l}=(0,k.GO)(),{contributors:r,latestPostByContributorId:a}=nJ(t);return(0,o.Y)(il,{emptyStateType:"contributor",items:r,renderItem:e=>(0,o.Y)(nj,{contributor:e,latestPost:null==a?void 0:a[e.id]}),title:l("The latest from"),onRemove:i,onReorder:n})},io=e=>{let{newsletterSettings:t,onReorder:n,onRemove:i}=e,{iString:l}=(0,k.GO)(),{newsletters:r,someNewslettersHaveLogos:a,pub:s}=n4(t);return(0,o.Y)(il,{emptyStateType:"newsletter",items:r,renderItem:e=>(0,o.Y)(tK,{image:e.logo_url||a?(0,o.Y)(n2,{altText:"Logo for ".concat(e.name),showPlaceholder:!0,size:64,url:e.logo_url}):null,pub:s,subtitle:e.description,title:e.name,url:(0,B.Dor)(s,{section:e,addBase:!0})}),title:l("Newsletters"),onRemove:i,onReorder:n})},ia=e=>{let{contentBlock:t,onReorder:n,onRemove:i}=e,{iString:l}=(0,k.GO)(),{pub:r}=(0,e2.np)(),{podcasts:a}=n5({contentBlock:t,pub:r}),{latestPodcastPosts:s}=(0,p.useContext)(S);return(0,o.Y)(il,{emptyStateType:"podcast",items:a,renderItem:e=>{var t,n;return(0,o.Y)(n8,{latestPost:e.isPubPodcast?null!=(t=null==s?void 0:s.pubPodcast)?t:null:null!=(n=null==s?void 0:s.sectionPodcasts[e.id])?n:null,podcastArtUrl:e.logo_url,podcastSubtitle:e.description,podcastTitle:e.name,podcastUrl:(e=>{if(e.isPubPodcast)return(0,N.t6y)({pub:r,section:null});let t=r.sections.find(t=>t.id===e.id);return t?(0,B.Dor)(r,{section:t,addBase:!0}):"#"})(e),showPlaceholder:!0})},title:l("Podcasts"),onRemove:i,onReorder:n})},is=e=>{let{contentBlock:t,moduleId:n}=e,{isActive:i,sendPreviewBlockUpdate:l}=(0,nC.T)(),r=i({type:"sidebar-module",parentContentBlockId:t.id,moduleId:"contributors"}),a=i({type:"sidebar-module",parentContentBlockId:t.id,moduleId:"newsletters"}),s=i({type:"sidebar-module",parentContentBlockId:t.id,moduleId:"podcasts"}),d=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"newsletters"},updates:{section_order:e}})},[t.id,l]),c=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"podcasts"},updates:{section_order:e}})},[t.id,l]),u=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"contributors"},updates:{contributor_order:e}})},[t.id,l]),h=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"contributors"},updates:{_add_excluded_user_id:e}})},[t.id,l]),m=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"newsletters"},updates:{_add_excluded_section_id:e}})},[t.id,l]),g=(0,p.useCallback)(e=>{l({previewBlockId:{type:"sidebar-module",contentBlockId:t.id,moduleId:"podcasts"},updates:{_add_excluded_section_id:e}})},[t.id,l]);switch(n){case"subscribe":return(0,o.Y)(t0,{});case"recommendations":return(0,o.Y)(t$,{hideHeaderBorder:!0,showEmptyState:!0});case"links":return(0,o.Y)(tj,{hideHeaderBorder:!0});case"contributors":return r?(0,o.Y)(ir,{contributorSettings:t.attrs.contributors,onRemove:h,onReorder:u}):(0,o.Y)(nZ,{contributorSettings:t.attrs.contributors});case"podcasts":return s?(0,o.Y)(ia,{contentBlock:t,onRemove:g,onReorder:c}):(0,o.Y)(ie,{contentBlock:t});case"newsletters":return a?(0,o.Y)(io,{newsletterSettings:t.attrs.newsletters,onRemove:m,onReorder:d}):(0,o.Y)(n6,{newsletterSettings:t.attrs.newsletters});case"top-posts":return(0,o.Y)(it,{topPostsSettings:t.attrs.top_posts});default:return null}},id=e=>{let{ids:t,column:n,contentBlock:i}=e,{getColumnItems:l,isActive:r}=nk(),{activeContentBlockId:s,activePreviewBlockId:d}=(0,nC.T)(),c=(0,a.md)(A.nJ),u=(null==c?void 0:c.contentBlockId)===i.id&&(null==c?void 0:c.column)===n,h=(null==d?void 0:d.type)==="module-picker"&&d.parentContentBlockId===i.id&&d.column===n,m=(0,p.useMemo)(()=>{if(!c)return t;let{contentBlockId:e,column:l,insertAtIndex:r,moduleId:o}=c;if(e!==i.id||l!==n)return t;let a=[...t];return a.splice(null!=r?r:a.length,0,o),a},[t,c,i.id,n]),g=u?m:r?l(n):m;return 0===t.length&&r&&!u?h?(0,o.Y)(nx,{column:n,children:(0,o.Y)(nK,{column:n,insertAtIndex:0})}):(0,o.Y)("div",{style:{pointerEvents:"auto",minHeight:100,height:"100%"},children:(0,o.Y)(nT,{column:n})}):0===g.length?null:(0,o.Y)(nx,{column:n,children:(0,o.FD)(P.I1,{children:[g.map((e,t)=>(0,o.FD)(p.Fragment,{children:[(0,o.Y)(nH,{column:n,contentBlockId:i.id,disabled:s!==i.id,dragId:r?(e=>{let{column:t,moduleId:n}=e;return"".concat(t,"-").concat(n)})({column:n,moduleId:e}):void 0,moduleId:e,children:(0,o.Y)(is,{contentBlock:i,moduleId:e})}),t<g.length-1&&(0,o.Y)(nK,{column:n,insertAtIndex:t+1})]},e)),(0,o.Y)(nK,{column:n,insertAtIndex:g.length,variant:"space"})]})})},ic=e=>{var{contentBlock:t,showEmptyState:n,posts:l,postsBySource:a,sourcePosts:s}=e,d=(0,r._)(e,["contentBlock","showEmptyState","posts","postsBySource","sourcePosts"]);if(!n&&0===l.length)return null;let c=t.secondary_sidebar_modules,u=t.primary_sidebar_modules;return(0,o.Y)(nS,{attrs:t.attrs,contentBlockId:t.id,leftItems:null!=c?c:[],renderModule:e=>(0,o.Y)(is,{contentBlock:t,moduleId:e}),rightItems:null!=u?u:[],children:(0,o.Y)(iu,(0,i._)({contentBlock:t,posts:l,postsBySource:a,sourcePosts:s},d))})},iu=e=>{var t;let n,i,l,{contentBlock:r,posts:s,postsBySource:d,pub:c,showSearch:u,showSeeAllLink:h,sourcePosts:m,title:g,viewAllUrl:v}=e,{isDesktop:Y,isTablet:f,isMobile:b}=(0,D.sM)(),{isDragging:y}=nk(),_=(0,a.md)(A.nJ),w=(0,a.md)(A.y2),{activePreviewBlockId:C}=(0,nC.T)(),I=r.secondary_sidebar_modules,k=r.primary_sidebar_modules,S=I&&I.length>0,F=k&&k.length>0,x=(null==_?void 0:_.contentBlockId)===r.id&&(null==_?void 0:_.column)==="left",T=(null==_?void 0:_.contentBlockId)===r.id&&(null==_?void 0:_.column)==="right",E=(null==C?void 0:C.type)==="module-picker"&&C.parentContentBlockId===r.id&&"left"===C.column,N=(null==C?void 0:C.type)==="module-picker"&&C.parentContentBlockId===r.id&&"right"===C.column,M=S||y||x||E,R=F||y||T||N,L=(null==w?void 0:w.contentBlockId)===r.id?null==w?void 0:w.updates.num_rows:null,O=null!=(t=null!=L?L:r.num_rows)?t:ti.AD.rows.default,z=null!=L&&m?m:s;Y?(n=M?(0,o.Y)(id,{column:"left",contentBlock:r,ids:null!=I?I:[]}):void 0,i=R?(0,o.Y)(id,{column:"right",contentBlock:r,ids:null!=k?k:[]}):void 0,l=4-!!R-!!M):f?F?(i=(0,o.Y)(id,{column:"right",contentBlock:r,ids:[...k,...null!=I?I:[]]}),l=2):S?(n=(0,o.Y)(id,{column:"left",contentBlock:r,ids:I}),l=2):l=3:l=1;let U=d&&d.length>0,q="multiple"===r.post_source&&!U,H=l,W=U?(0,o.Y)(P.I1,{gap:b?24:32,children:d.map((e,t)=>{var n,i;let r=e.source.title_override||(null==(n=e.source.section)?void 0:n.name)||(null==(i=e.source.post_tag)?void 0:i.name)||"",a=e.source.section?(0,B.Dor)(c,{section:e.source.section}):e.source.post_tag?(0,B.ii9)(c,e.source.post_tag):void 0,s=e.posts.length>=H;return(0,o.Y)(p.Fragment,{children:(0,o.FD)(P.I1,{children:[r&&(0,o.Y)(nc,{pub:c,showSearch:0===t&&u,title:r,viewAllUrl:s?a:void 0}),(0,o.Y)(nO.C,{numColumns:l,posts:Array.from({length:H},(t,n)=>{var i;return null!=(i=e.posts[n])?i:null})})]})},"".concat(e.source.section_id||e.source.tag_id,"-").concat(t))})}):q?(0,o.FD)(o.FK,{children:[(0,o.Y)(P.I1,{paddingBottom:16,paddingTop:4,paddingX:8,children:(0,o.Y)(td.x,{size:"lg",width:"20%"})}),(0,o.Y)(nO.C,{numColumns:l,posts:Array.from({length:l},()=>null)})]}):(0,o.FD)(o.FK,{children:[g&&(0,o.Y)(nc,{pub:c,showSearch:u,title:g,viewAllUrl:v}),(0,o.Y)(nO.C,{numColumns:l,posts:Array.from({length:l*O},(e,t)=>{var n;return null!=(n=z[t])?n:null})}),h&&v&&z.length>0&&(0,o.Y)(nL.k,{url:v})]});return(0,o.Y)(nM,{emptyLeft:!M,emptyRight:!R,children:(0,o.Y)(nR.I,{leftContent:n,mainContent:W,rightContent:i,stretchToFullWidth:!0})})},ip=e=>{var{contentBlock:t,showEmptyState:n,posts:l,sourcePosts:a}=e,s=(0,r._)(e,["contentBlock","showEmptyState","posts","sourcePosts"]);if(!n&&0===l.length)return null;let d=t.secondary_sidebar_modules,c=t.primary_sidebar_modules;return(0,o.Y)(nS,{attrs:t.attrs,contentBlockId:t.id,leftItems:null!=d?d:[],renderModule:e=>(0,o.Y)(is,{contentBlock:t,moduleId:e}),rightItems:null!=c?c:[],children:(0,o.Y)(ih,(0,i._)({contentBlock:t,posts:l,sourcePosts:a},s))})},ih=e=>{var t;let n,i,{contentBlock:l,posts:r,pub:s,showSearch:d,showSeeAllLink:c,sourcePosts:u,title:p,viewAllUrl:h}=e,{isTablet:m,isDesktop:g}=(0,D.sM)(),{activeBlockId:v}=nk(),{isPreviewMode:Y}=(0,nC.T)(),f=(0,a.md)(A.nJ),b=(0,a.md)(A.y2),y=l.secondary_sidebar_modules,_=l.primary_sidebar_modules,w=(null==b?void 0:b.contentBlockId)===l.id?null==b?void 0:b.updates.num_posts:null,C=null!=(t=null!=w?w:l.num_posts)?t:ti.AD.posts.default,I=null!=w&&u?u:r,k=I.slice(0,C),S=k.length>0&&k.every(e=>!e.cover_image),F=y&&y.length>0,P=_&&_.length>0,x=(null==f?void 0:f.contentBlockId)===l.id&&(null==f?void 0:f.column)==="left",T=(null==f?void 0:f.contentBlockId)===l.id&&(null==f?void 0:f.column)==="right",E=(0,o.FD)(o.FK,{children:[p&&(0,o.Y)(nc,{pub:s,showSearch:d,title:p,viewAllUrl:h}),I.length?(0,o.FD)(o.FK,{children:[(0,o.Y)(tn.m,{hideImages:S,posts:k,variant:"two-column-list"}),c&&h&&(0,o.Y)(nL.k,{url:h})]}):(0,o.Y)(na,{})]});return g?(n=F||v||x?(0,o.Y)(id,{column:"left",contentBlock:l,ids:null!=y?y:[]}):void 0,i=P||v||T?(0,o.Y)(id,{column:"right",contentBlock:l,ids:null!=_?_:[]}):void 0):m&&(P?i=(0,o.Y)(id,{column:"right",contentBlock:l,ids:[..._,...null!=y?y:[]]}):F&&(n=(0,o.Y)(id,{column:"left",contentBlock:l,ids:y}))),(0,o.Y)(nR.I,{animateColumns:Y,leftContent:n,mainContent:E,rightContent:i})},im=e=>{let{contentBlock:t}=e,{iString:n}=(0,k.GO)(),{freeSignup:i}=(0,p.useContext)(S),{pub:l,user:r}=(0,e2.np)(),a=(0,m.mJ)(),s=(0,eV.Pu)(),{isMobile:d}=(0,D.sM)(),c=(0,tu.s7)({pub:l,includeTheRampart:!0}),u=i||(null==r?void 0:r.is_free_subscribed),h=null==r?void 0:r.is_pledged,g=!a.getConfigFor("pledges_disabled")&&!!s.getSettingFor("payment_pledges_enabled"),{cta:v,message:Y}=ig({contentBlock:t,freeSignup:i,pub:l,pubSettings:s,siteConfigs:a,user:r}),f=(0,B.eV6)(l,{params:{utm_source:V.VU.subscribeContentBlock,gift:!0,next:document.location.href}}),b=(0,B.eV6)(l,{addBase:!0,user:r,params:{utm_source:V.VU.subscribeContentBlock,simple:!0,next:document.location.href,referring_pub_ids:(0,eg.y)("referring_pub_ids")}}),y=(0,B.RKl)({pub:l,user:r,params:{utm_source:V.VU.subscribeContentBlock,next:document.location.href}}),_=(0,B.LG3)({pub:l});return(0,o.Y)("div",{className:W()("outerContainer-cCKm5T",{"thebulwark-dw_07J":c}),children:(0,o.Y)(F.az,{className:"innerContainer-hMBAPa",paddingY:c||d?40:48,children:(0,o.FD)(P.Ye,{alignItems:"center",direction:d?"column":"row",gap:d?c?16:24:40,justifyContent:c?"space-between":"center",paddingX:8,children:[c&&(0,o.FD)(P.Ye,{alignItems:"center",className:"logoContainer-iUK1Lv",gap:4,children:[(0,o.Y)(eh.wg,{pub:l,size:c||d?56:80}),c&&!d&&(0,o.Y)(x.EY,{color:"pub-primary-text",font:"pub-headings",nowrap:!0,size:20,children:"The Bulwark +"})]}),Y&&(0,o.Y)(P.Ye,{alignItems:"center",direction:d?"column":"row",gap:8,children:(0,o.Y)(x.EY,{align:d||c?"center":"left",className:"message-IKztq4",color:"pub-primary-text",font:"pub-headings",lineHeight:30,size:c?20:24,children:(0,K.preventOrphans)(Y)})}),v&&(0,o.Y)(F.az,{className:"ctaContainer-WOl42W",flex:"auto",children:"subscribe"===v||"upgrade"===v?(0,o.Y)(eu.$n,{href:b,localNavigation:!1,priority:"primary",children:c?"Join Bulwark +":(0,K.getSubscribeText)(l,{isFreeSubscribed:u,isPledged:h,pledgesEnabled:g})}):"upgrade_founding"===v?(0,o.Y)(eu.$n,{href:y,localNavigation:!1,priority:"primary",children:n("Upgrade to founding")}):"pledge"===v?(0,o.Y)(eu.$n,{href:b,localNavigation:!1,priority:"primary",children:n("Pledge your support")}):"gift"===v?c?(0,o.Y)(eu.$n,{href:_,localNavigation:!1,priority:"primary",children:n("Gift a subscription")}):(0,o.Y)(eu.$n,{href:f,localNavigation:!1,priority:"primary",children:n("Gift a subscription")}):null})]})})})},ig=e=>{let{contentBlock:t,freeSignup:n,pub:i,pubSettings:l,siteConfigs:r,user:o}=e,a=n||(null==o?void 0:o.is_free_subscribed),s="enabled"===i.payments_state,d=!r.getConfigFor("pledges_disabled")&&!!l.getSettingFor("payment_pledges_enabled"),c=null==o?void 0:o.is_subscribed,u=null==o?void 0:o.is_founding,p=(0,tP.QN)(i);return{cta:a?s?c?!u&&p?"upgrade_founding":"gift":"upgrade":d?"pledge":null:"subscribe",message:u&&p?t.attrs.founding_member_message:c&&s?t.attrs.paid_subscriber_message:a?t.attrs.free_subscriber_message:t.attrs.non_subscriber_message}};var iv=n(11574),iY=n(77433);let ib=e=>{let{posts:t,title:n,viewAllUrl:i}=e,{isMobile:l,isTablet:r}=(0,D.sM)();return l?(0,o.Y)(iy,{posts:t,title:n,viewAllUrl:i}):(0,o.FD)(P.I1,{gap:40,children:[(0,o.Y)(iY.M,{title:n,titlePreset:"st2"}),(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],titlePreset:"h4-sans-condensed",variant:"content-block-listing"}),(0,o.Y)(P.Ye,{gap:40,children:t.slice(1,r?3:4).map(e=>(0,o.Y)(P.I1,{borderTop:"detail-themed",flex:"grow",paddingTop:32,children:(0,o.Y)(eX.R,{post:e,variant:"mini"})}))})]})]})},iy=e=>{let{posts:t,title:n,viewAllUrl:i}=e;return(0,o.FD)(P.I1,{gap:20,children:[(0,o.Y)(iY.M,{title:n,titlePreset:"st2",viewAllUrl:i}),(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,o.Y)(P.I1,{children:t.slice(1,4).map(e=>(0,o.Y)(P.I1,{borderTop:"detail-themed",paddingY:16,children:(0,o.Y)(eX.R,{post:e,variant:"mini"})}))})]})]})};var i_=n(60250),iw=n(87677),iC=n(33764),iI=n(77124),ik=n(95691),iS=n(57753),iD=n(74894),iF=n(95294);let iP="panel-K8JY99",ix="navButton-hcrBJt",iT="primaryButton-AbjjpI",iA="secondaryButton-GUipKK",iE="podcastArt-U81yKg",iN=e=>{var t,n,i,l,r,a,s,d,c,u,h,m;let{contentBlock:g}=e,{isMobile:v}=(0,D.sM)(),{pub:Y}=(0,e2.np)(),{sections:f,metadata:b}=(0,ik.P)({pub:Y}),{ids:y,metadata:_}=(0,iI.q)({pub:Y}),{latestPodcastPosts:w}=(0,p.useContext)(S),[C,I]=(0,p.useState)(2),[k,F]=(0,p.useState)(!1),[x,T]=(0,p.useState)(0),A=(0,p.useRef)(null),E=(0,p.useRef)(null),N=(0,p.useRef)(null),B=(0,p.useRef)(null),M=(null==(n=g.attrs)||null==(t=n.media_carousel)?void 0:t.variant)==="videos"?"videos":"podcasts",R=(0,iD.Zu)(Y).filter(e=>!!e.sectionId),L=tz()(R,e=>{var t;return y.indexOf(null!=(t=e.sectionId)?t:-1)}),O="podcasts"===M?L.length:f.length,z=[...L.slice(-2),...L,...L.slice(0,2)],U=[...f.slice(-2),...f,...f.slice(0,2)],q=()=>{I(e=>e+1)},H=()=>{I(e=>e-1)};return((0,p.useEffect)(()=>{1===C?setTimeout(()=>{F(!0),I(O+1),setTimeout(()=>{F(!1)},100)},300):C===O+2&&setTimeout(()=>{F(!0),I(2),setTimeout(()=>{F(!1)},100)},300)},[C,O]),0===O)?null:1===O?"podcasts"===M&&L[0]?(0,o.Y)(iM,{colorString:null!=(a=null==(i=_[null!=(r=L[0].sectionId)?r:"pub"])?void 0:i.carouselColor)?a:"black",podcast:L[0],post:L[0].sectionId?null!=(s=null==w||null==(l=w.sectionPodcasts)?void 0:l[L[0].sectionId])?s:null:null!=(d=null==w?void 0:w.pubPodcast)?d:null}):"videos"===M&&f[0]?(0,o.Y)(iB,{colorString:null!=(h=null==(c=b[f[0].id])?void 0:c.carouselColor)?h:"black",post:null!=(m=null==w||null==(u=w.sectionPodcasts)?void 0:u[f[0].id])?m:null,section:f[0]}):null:(0,o.FD)(P.I1,{gap:16,children:[v&&(0,o.Y)(eO.T,{align:"center",preset:"st2",children:"podcasts"===M?"Listen to Our Latest":"Scroll Through Our Shows"}),(0,o.FD)(P.I1,{className:"container-opjHc4",children:[!v&&(0,o.Y)("div",{className:ix,role:"button",onClick:H,children:(0,o.Y)(i_.A,{size:32,strokeWidth:1.5})}),(0,o.Y)(P.Ye,{className:"track-bJrNCJ",style:{transform:"translateX(calc(".concat(v?32+64*C:80+160*C,"px - ").concat(100*C,"% + ").concat(x,"px))"),transition:k||0!==x?"none":v?"transform 0.15s ease-out":"transform 0.3s ease-in-out"},onTouchEnd:v?()=>{if(null===A.current||null===N.current||null===E.current||null===B.current)return void T(0);let e=N.current-A.current;Math.abs(e)>Math.abs(B.current-E.current)&&Math.abs(e)>50&&(e>0?H():q()),T(0)}:void 0,onTouchMove:v?e=>{var t,n,i,l;if(N.current=null!=(i=null==(t=e.touches[0])?void 0:t.clientX)?i:null,B.current=null!=(l=null==(n=e.touches[0])?void 0:n.clientY)?l:null,null!==A.current&&null!==E.current&&null!==N.current&&null!==B.current){let t=N.current-A.current;Math.abs(t)>Math.abs(B.current-E.current)&&(e.preventDefault(),T(t))}}:void 0,onTouchStart:v?e=>{var t,n,i,l;A.current=null!=(i=null==(t=e.touches[0])?void 0:t.clientX)?i:null,E.current=null!=(l=null==(n=e.touches[0])?void 0:n.clientY)?l:null,N.current=null,B.current=null,T(0)}:void 0,children:"podcasts"===M?z.map(e=>{var t,n,i,l,r,a;return(0,o.Y)("div",{className:iP,children:(0,o.Y)(iM,{colorString:null!=(l=null==(t=_[null!=(i=e.sectionId)?i:-1])?void 0:t.carouselColor)?l:"black",podcast:e,post:e.sectionId?null!=(r=null==w||null==(n=w.sectionPodcasts)?void 0:n[e.sectionId])?r:null:null!=(a=null==w?void 0:w.pubPodcast)?a:null})})}):U.map(e=>{var t,n,i,l;return(0,o.Y)("div",{className:iP,children:(0,o.Y)(iB,{colorString:null!=(i=null==(t=b[e.id])?void 0:t.carouselColor)?i:"black",post:null!=(l=null==w||null==(n=w.sectionPodcasts)?void 0:n[e.id])?l:null,section:e})})})}),!v&&(0,o.Y)("div",{className:ix,role:"button",onClick:q,children:(0,o.Y)(iw.A,{size:32,strokeWidth:1.5})})]})]})},iB=e=>{var t;let{colorString:n,post:i,section:l}=e,{pub:r}=(0,e2.np)(),{isMobile:a}=(0,D.sM)(),s=(0,B.Dor)(r,{section:l}),d=null!=(t=iS.Q3[n])?t:iS.Q3.black,c=d.hex;return(0,o.Y)(P.I1,{style:{backgroundColor:c,height:"100%"},children:a?(0,o.Y)(P.I1,{alignItems:"center",className:"videoPanelContentMobile-r5D1RZ",paddingX:16,paddingY:24,children:(0,o.Y)(iL,{image:i&&(0,o.Y)(iF.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:i}),isInverted:d.invertTextColors,post:i,sectionName:l.name,sectionOrPodcastUrl:s})}):(0,o.FD)(P.Ye,{alignItems:"center",className:"videoPanelContentDesktop-ecA07Z",paddingX:64,paddingY:32,children:[(0,o.Y)(iR,{isInverted:d.invertTextColors,isVideo:!0,post:i,sectionTitle:l.name,sectionUrl:s}),(0,o.Y)(P.I1,{flex:"grow",paddingRight:8,children:i&&(0,o.Y)(iF.D,{imageAspectRatio:16/9,imageWidth:1080,isBelowTheFold:!0,post:i})})]})})},iM=e=>{var t,n,i;let{colorString:l,podcast:r,post:a}=e,{isMobile:s}=(0,D.sM)(),{pub:d}=(0,e2.np)(),c=(0,N.t6y)({pub:d,section:r.sectionId&&null!=(i=d.sections.find(e=>e.id===r.sectionId))?i:null}),u=null==(t=iS.Q3[l])?void 0:t.hex,p=null==(n=iS.Q3[l])?void 0:n.invertTextColors;return(0,o.Y)(P.I1,{style:{backgroundColor:u,height:"100%"},children:s?(0,o.Y)(P.I1,{alignItems:"center",className:"podcastPanelContentMobile-En_Ak9",paddingX:16,paddingY:24,children:(0,o.Y)(iL,{image:r.artUrl?(0,o.Y)(iC.o,{className:iE,maxWidth:360,src:r.artUrl}):null,isInverted:p,post:a,sectionName:r.podcastTitle,sectionOrPodcastUrl:c})}):(0,o.FD)(P.Ye,{alignItems:"center",className:"podcastPanelContentDesktop-NIL93C",gap:40,justifyContent:"center",paddingX:64,paddingY:32,children:[r.artUrl&&(0,o.Y)(iC.o,{className:iE,maxWidth:300,src:r.artUrl}),(0,o.Y)(iR,{isInverted:p,isVideo:!1,post:a,sectionTitle:r.podcastTitle,sectionUrl:c})]})})},iR=e=>{let{isInverted:t,isVideo:n,post:i,sectionTitle:l,sectionUrl:r}=e,a=t?"white":"primary";return(0,o.FD)(P.I1,{gap:24,paddingLeft:8,style:{width:426},children:[(0,o.Y)(P.I1,{paddingBottom:8,style:{borderBottom:"1px solid ".concat(t?"white":"var(--color-fg-primary-themed)")},children:(0,o.Y)(eO.T,{color:a,preset:"h6-serif",children:l})}),(0,o.FD)(P.I1,{gap:24,children:[i&&(0,o.FD)(P.I1,{gap:12,children:[(0,o.Y)(eO.T,{clamp:2,color:a,preset:"h6-sans",children:i.title}),(0,o.Y)(eO.T,{clamp:3,color:a,preset:"d3-serif",children:i.description})]}),(0,o.FD)(P.Ye,{alignItems:"center",gap:16,children:[i&&(0,o.Y)(eO.T,{as:"a",href:i.canonical_url,preset:"detail-large",children:(0,o.Y)(P.Ye,{className:iT,padding:16,children:n?"Watch now":"Listen now"})}),(0,o.Y)(eO.T,{as:"a",className:iA,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},iL=e=>{let{image:t,isInverted:n,post:i,sectionName:l,sectionOrPodcastUrl:r}=e,a=n?"white":"primary";return(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[(0,o.Y)(eO.T,{color:a,preset:"h6-serif",children:l}),(0,o.FD)(P.I1,{gap:32,children:[i&&(0,o.FD)(P.I1,{alignItems:"center",gap:28,children:[t,(0,o.FD)(P.I1,{gap:8,children:[(0,o.Y)(eO.T,{align:"center",clamp:2,color:a,preset:"h4-sans-condensed",children:i.title}),(0,o.Y)(eO.T,{align:"center",clamp:3,color:a,preset:"d3-serif",children:i.description})]})]}),(0,o.FD)(P.I1,{alignItems:"center",gap:16,children:[i&&(0,o.Y)(eO.T,{as:"a",href:i.canonical_url,preset:"detail-large",children:(0,o.Y)(P.Ye,{className:iT,padding:16,children:"Watch now"})}),(0,o.Y)(eO.T,{as:"a",className:iA,color:a,href:r,preset:"detail-large",children:"View all episodes"})]})]})]})},iO="miniPost-O80hP6",iz=e=>{let{posts:t}=e,{latestPostFromSections:n}=(0,p.useContext)(S),{isMobile:i}=(0,D.sM)(),{pub:l}=(0,e2.np)(),r=(0,tu.JQ)({pub:l}),a=d()(r.map(e=>null==n?void 0:n[e]));return i?(0,o.Y)(iU,{posts:t,sectionPosts:a}):(0,o.FD)("div",{className:"container-YOdLMp",children:[(0,o.FD)(P.Ye,{className:"podcastEpisodeContainer-nd115M",gap:20,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(P.I1,{children:(0,o.Y)(e0.A,{gap:24,children:a.map(e=>(0,o.Y)(eX.R,{hideUfi:!0,post:e,showStar:!0,variant:"mini"}))})})]}),(0,o.FD)("div",{className:"plusThreeContainer-VOEUMx",children:[t[1]&&(0,o.Y)(eX.R,{post:t[1],titlePreset:"h6-sans",variant:"content-block-listing"}),(0,o.FD)(P.Ye,{gap:40,children:[t[2]&&(0,o.Y)("div",{className:iO,children:(0,o.Y)(eX.R,{post:t[2],showDescription:!0,variant:"mini"})}),t[3]&&(0,o.Y)("div",{className:iO,children:(0,o.Y)(eX.R,{post:t[3],showDescription:!0,variant:"mini"})})]})]})]})},iU=e=>{let{posts:t,sectionPosts:n}=e;return(0,o.FD)(P.I1,{gap:32,children:[t[0]&&(0,o.Y)(eX.R,{post:t[0],variant:"content-block-episode"}),(0,o.Y)(e0.A,{gap:24,includeBottomDivider:!0,includeTopDivider:!0,children:n.map(e=>(0,o.Y)(eX.R,{post:e,showStar:!0,variant:"mini"}))}),t[1]&&(0,o.Y)(eX.R,{post:t[1],variant:"content-block-listing"}),(0,o.FD)(P.Ye,{gap:24,children:[t[2]&&(0,o.Y)(P.Ye,{flex:"grow",children:(0,o.Y)(eX.R,{post:t[2],variant:"mini"})}),t[3]&&(0,o.Y)(P.Ye,{flex:"grow",children:(0,o.Y)(eX.R,{post:t[3],variant:"mini"})})]})]})},iq=e=>{let{posts:t}=e;return t[0]?(0,o.Y)(P.I1,{className:"container-nYRgUV",children:(0,o.Y)(eX.R,{post:t[0],variant:"content-block-single-large"})}):null};var iH=n(53971);let iW=()=>{let{isMobile:e,isTablet:t}=(0,D.sM)(),{freeSignup:n,freeSignupEmail:i}=(0,p.useContext)(S),{pub:l,user:r}=(0,e2.np)();return(0,o.FD)(P.I1,{alignItems:"center",className:"container-liQ2Vy",gap:24,justifyContent:"center",paddingX:t?16:40,style:{backgroundImage:"url(".concat((0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/fp-subscribe-block-bg.jpg"),304),")"),backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundBlendMode:"multiply"},children:[(0,o.Y)(eO.T,{align:"center",color:"white",preset:e?"lg-preview-byline":"h6-sans",children:(null==r?void 0:r.is_subscribed)?(0,o.FD)(o.FK,{children:["Share ",(0,o.Y)("em",{children:"The Free Press"})," with other free thinkers."]}):(null==r?void 0:r.is_free_subscribed)?"Become a Paid Subscriber to access our comments section, special columns, and more.":(0,o.FD)(o.FK,{children:["Sign up for your daily window into the world of ",(0,o.Y)("em",{children:"The Free Press"}),"and our take on the world at large"]})}),(0,o.Y)("div",{children:(null==r?void 0:r.is_subscribed)?(0,o.Y)(eR.v,{href:(0,N.eV6)(l,{utm_source:V.VU.subscribeContentBlock,gift:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Send Gift"}):(null==r?void 0:r.is_free_subscribed)?(0,o.Y)(eR.v,{href:(0,N.eV6)(l,{utm_source:V.VU.freePressPromoBox,simple:!0,next:document.location.href,addBase:!0}),native:!0,variant:"primary-accent",children:"Upgrade"}):(0,o.Y)(I.A,{align:"left",expectTruncation:!0,freeSignup:n,freeSignupEmail:i,isStatic:!1,pub:l,source:"the-fp-subscribe-block",user:r})})]})};var iG=n(7755);let iK=()=>{let{isMobile:e}=(0,D.sM)();return(0,o.FD)("div",{className:W()("container-Q2UekY",{"containerMobile-op5rRO":e}),children:[(0,o.Y)(iV,{}),(0,o.Y)(ij,{}),(0,o.Y)(iW,{})]})},iV=()=>(0,o.Y)("a",{className:W()("promoContainer-M2SbsD","merchContainer-rvwMsY"),href:"https://shop.thefp.com/",rel:"noopener noreferrer",target:"_blank",children:(0,o.FD)(P.I1,{justifyContent:"space-between",padding:32,children:[(0,o.FD)(eO.T,{color:"white",preset:"h5-serif",children:["Get (or give!) a",(0,o.Y)("br",{}),"Free Press hat,",(0,o.Y)("br",{}),"tote, or TGIF socks."]}),(0,o.FD)(P.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(eO.T,{color:"white",preset:"detail-large",children:"Shop Merch"}),(0,o.Y)(iH.A,{size:16,stroke:"white"})]}),(0,o.Y)("img",{alt:"Socks",className:"merchSocks-lut01J",src:(0,eZ.dJ)("".concat((0,eJ.Ew)(),"/img/thefp/thefp-socks.png"))})]})}),ij=()=>{var e,t,n;let{isMobile:i,isDesktop:l}=(0,D.sM)(),{latestPodcastPosts:r}=(0,p.useContext)(S),{pub:a}=(0,e2.np)(),s=null!=(e=a.sections.find(e=>"honestly"===e.slug))?e:null,{artUrl:d}=(0,iG.ed)({pub:a,section:s}),c=(0,N.t6y)({pub:a,section:s}),u=null!=(n=null==r?void 0:r.sectionPodcasts[null!=(t=null==s?void 0:s.id)?t:""])?n:null,h=(0,N.wu9)(a,u,{noBase:!0});return(0,o.FD)(P.Ye,{children:[d&&(0,o.Y)("a",{href:c,children:(0,o.Y)(iC.o,{className:"podcastImage-tqEnIM",loading:"lazy",maxWidth:440,src:d})}),(0,o.FD)(P.I1,{as:"a",flex:"grow",gap:l?40:16,href:null!=h?h:c,justifyContent:"center",paddingX:16,style:{backgroundColor:"#fa3409",borderLeft:"1px solid var(--web_bg_color)",textDecoration:"none"},children:[u&&(0,o.Y)(eO.T,{clamp:i?4:5,color:"white",preset:"h6-serif",children:u.title}),(0,o.FD)(P.Ye,{alignItems:"center",gap:8,children:[(0,o.Y)(eO.T,{color:"white",preset:"detail-large",children:l?"Listen now":"Listen"}),(0,o.Y)(iH.A,{size:16,stroke:"white"})]})]})]})},iX=(0,p.memo)(e=>{var t,n,i,l;let{contentBlock:r,posts:a,postsBySource:s,pub:d,showEmptyState:c,showSearch:u=!1,showSeeAllLink:p,sourcePosts:h,title:m,viewAllUrl:g}=e,v=(0,tu.lu)({pub:d}),Y=null==(t=null!=(i=r.attrs.titleOverride)?i:null==(n=r.attrs.feature)?void 0:n.title)?void 0:t.trim();if("list"===r.block_type)return(0,o.Y)(ip,{contentBlock:r,posts:a,pub:d,showEmptyState:c,showSearch:u,showSeeAllLink:p,sourcePosts:h,title:Y||m,viewAllUrl:g});if("grid"===r.block_type)return(0,o.Y)(ic,{contentBlock:r,posts:a,postsBySource:s,pub:d,showEmptyState:c,showSearch:u,showSeeAllLink:p,sourcePosts:h,title:Y||m,viewAllUrl:g});if("feature"===r.block_type){let e=Y||m,t=null==(l=r.attrs.feature)?void 0:l.variant;return v?(0,o.Y)(iv.$,{posts:a,title:e,variant:t,viewAllUrl:g}):(0,o.Y)(np,{posts:a,pub:d,showEmptyState:c,showSearch:u,title:e,variant:t,viewAllUrl:g})}return"subscribe"===r.block_type?(0,o.Y)(im,{contentBlock:r}):"podcast_plus_three"===r.block_type?(0,o.Y)(iz,{posts:a}):"subscribe_plus_five"===r.block_type?(0,o.Y)(iK,{}):"single_post"===r.block_type?(0,o.Y)(iq,{posts:a}):"half_feature"===r.block_type?(0,o.Y)(ib,{posts:a,title:m,viewAllUrl:g}):"media_carousel"===r.block_type?(0,o.Y)(iN,{contentBlock:r}):null}),iJ=()=>(0,o.Y)(F.az,{paddingBottom:120,children:(0,o.Y)(nR.I,{leftContent:(0,o.Y)("div",{children:"\xa0"}),mainContent:(0,o.Y)(t8.t,{postCount:4,variant:"list"}),rightContent:(0,o.Y)("div",{children:"\xa0"})})});var iZ=n(55364),iQ=n.n(iZ),i$=n(25112);let i0=e=>{let{insertAfterIndex:t,isBlockPickerInsertionPoint:n,variant:i="default"}=e,{iString:l}=(0,k.GO)(),{deactivatePreviewBlock:r,getBehavior:a,isActive:s,isPreviewMode:d,requestBlockPicker:c,hasReceivedInitialPreviewUIState:u}=(0,nC.T)(),h=(0,p.useMemo)(()=>({type:"block-picker",insertAfterIndex:t}),[t]),{clickAction:m}=a(h),g=s(h);return(0,o.Y)(nG,{disabled:n||!d||!u||"activate"!==m&&!g,isInsertionIndicator:g&&!n,label:l("Click to add block"),variant:i,onClick:e=>{e.stopPropagation(),g?r():c({insertAfterIndex:t})}})},i1="contentBlockEditButton-g_2FSh",i2=["media_carousel","subscribe","subscribe_plus_five"],i4=e=>{var t,i,l;let{contentBlocks:r,firstDividerVariant:s,postsBySectionId:d,postsByTagId:c,postsByContentBlockId:u,postsForContentBlockPins:h,recentPosts:g,showEmptyStates:v}=e,{isMobile:Y}=(0,D.sM)(),{pub:f,user:b}=(0,e2.np)(),{isPreviewMode:y}=(0,nC.T)(),_=(0,tu.S2)({pub:f}),w=(0,tu.lu)({pub:f}),[C,I]=(0,p.useState)(null),{groups:k,contentBlocks:F,hasMultipleLatest:x,isEmpty:T}=function(e){let{allContentBlocks:t,postsBySectionId:n,postsByTagId:i,postsByContentBlockId:l,postsForContentBlockPins:r,recentPosts:o}=e,{breakpoint:s}=(0,D.sM)(),{pub:d,user:c}=(0,e2.np)(),{canRender:u}=(e=>{let{pub:t,user:n}=e,{freeSignup:i}=(0,p.useContext)(S),l=(0,eV.Pu)(),r=(0,m.mJ)();return{canRender:(0,p.useCallback)(e=>{let{contentBlock:o}=e,{cta:a,message:s}=ig({contentBlock:o,freeSignup:i,pub:t,pubSettings:l,siteConfigs:r,user:n});return!!(a||s)},[i,t,l,r,n])}})({pub:d,user:c}),h=(0,a.md)(A.y2),g=(0,a.md)(A.lw),v=(0,tu.lu)({pub:d}),Y=(0,p.useMemo)(()=>t.filter(e=>"subscribe"!==e.block_type||u({contentBlock:e})),[t,u]),f=(0,p.useMemo)(()=>{if(!h)return Y;let{contentBlockId:e,updates:t}=h;return Y.map(n=>n.id===e?iQ()({},n,t):n)},[Y,h]),b=(0,p.useMemo)(()=>(0,ti.cD)({contentBlocks:Y,breakpoint:s,isTheFP:v,recentPosts:o,postsBySectionId:n,postsByTagId:i,postsByContentBlockId:l,postsForContentBlockPins:r}),[Y,s,v,o,n,i,l,r]),y=(0,p.useMemo)(()=>{if(!g)return null;let{blockType:e,insertAfterIndex:t}=g,n={attrs:{},block_type:e,id:i$.vK,order:t+1,post_source:"subscribe"===e?"none":"latest",post_tag_id:null,primary_sidebar_modules:[],publication_id:d.id,secondary_sidebar_modules:[],section_id:null},i=0;for(let e=0;e<=t&&e<Y.length;e++){let t=Y[e];if(t&&"latest"===t.post_source){var l,r;i+=null!=(r=null==(l=b[t.id])?void 0:l.posts.length)?r:0}}let a=(0,ti.VK)({contentBlock:n,breakpoint:s,isTheFP:v});return{block:n,posts:o.slice(i,i+a),insertAfterIndex:t}},[g,Y,b,d.id,s,v,o]),_=(0,p.useMemo)(()=>{if(!y)return f;let{block:e,insertAfterIndex:t}=y,n=[...f];return n.splice(t+1,0,e),n},[f,y]),w=(0,p.useMemo)(()=>t.filter(e=>"latest"===e.post_source).length>1,[t]);return{groups:(0,p.useMemo)(()=>{let e=[],t=[],l="full-width",r=0;for(let m of _){var a,s,d,c,u,p,h;let g,v="half_feature"===m.block_type?"half-width":"full-width",Y=m.id===i$.vK?null!=(s=null==y?void 0:y.posts)?s:[]:null!=(d=null==(a=b[m.id])?void 0:a.posts)?d:[],f=[];"latest"===m.post_source?(f=o.slice(r),r+=Y.length):"section"===m.post_source&&m.section_id?f=null!=(c=n[m.section_id])?c:[]:"tag"===m.post_source&&m.post_tag_id?f=null!=(u=i[m.post_tag_id])?u:[]:"multiple"===m.post_source&&(f=null!=(h=null==(g=null==(p=b[m.id])?void 0:p.postsBySource)?void 0:g.flatMap(e=>e.posts))?h:[]),v!==l&&(t.length&&(e.push({groupType:l,items:t}),t=[]),l=v),t.push({contentBlock:m,posts:Y,sourcePosts:f,postsBySource:g})}return t.length&&e.push({groupType:l,items:t}),e},[_,b,y,o,n,i,l]),contentBlocks:_,hasMultipleLatest:w,isEmpty:0===_.length}}({allContentBlocks:r,postsBySectionId:d,postsByTagId:c,postsByContentBlockId:u,postsForContentBlockPins:h,recentPosts:g}),E=null!=(i=F.find(e=>e.id===C))?i:null;if(T&&v)return(0,o.Y)(iJ,{});let N=w||_,B=e=>{if(N)return"none";if(-1===e&&s)return s;let t=F[e],n=F[e+1];return(null==t?void 0:t.block_type)==="subscribe"||(null==n?void 0:n.block_type)==="subscribe"?"space":"default"},M=e=>(null==e?void 0:e.id)===i$.vK,R=!1;return(0,o.FD)(P.I1,{paddingBottom:40,children:[F.length>0&&(0,o.Y)(i0,{insertAfterIndex:-1,isBlockPickerInsertionPoint:M(F[0]),variant:B(-1)}),k.map(e=>{let{groupType:t,items:n}=e;return(0,o.Y)("div",{className:W()({"halfWidthContainer-OZxoCR":"half-width"===t&&!Y,"pillarContentBlocks-pkmgrG":_}),children:n.map(e=>{var n;let{contentBlock:i,posts:l,postsBySource:r,sourcePosts:a}=e,{title:s,viewAllUrl:d}=i6({contentBlock:i,hideRecentPostsTitle:x&&!w,pub:f}),c=!1,u=F.findIndex(e=>e.id===i.id),h=F.slice(u+1),m="latest"===i.post_source&&h.every(e=>"latest"!==e.post_source);return"latest"!==i.post_source||R||(c=!0,R=!0),(0,o.FD)(p.Fragment,{children:[(0,o.Y)(th.WO,{pub:f,showPubPins:"latest"===i.post_source,showSectionPins:!1,children:(0,o.FD)(P.I1,{className:"contentBlockContainer-BNIIae",id:"block-".concat(i.id),paddingBottom:w?Y?64:80:0,style:{scrollMarginTop:48},children:[!i2.includes(i.block_type)&&w&&(null==b?void 0:b.is_admin)&&(0,o.Y)("div",{className:i1,children:(0,o.Y)(eu.K0,{priority:"primary-mono",size:"sm",onClick:()=>{I(i.id)},children:(0,o.Y)(eE.A,{size:16})})}),"media_carousel"===i.block_type&&(null==b?void 0:b.is_admin)&&(0,o.Y)("div",{className:i1,children:(0,o.Y)(no.m,{pub:f,sectionType:(null==(n=i.attrs.media_carousel)?void 0:n.variant)==="videos"?"video":"podcast",user:b})}),(0,o.Y)(tA.k,{previewBlockId:{type:"content-block",contentBlockId:i.id},children:(0,o.Y)(iX,{contentBlock:i,posts:l,postsBySource:r,pub:f,showEmptyState:v,showSearch:c,showSeeAllLink:m,sourcePosts:a,title:s,viewAllUrl:d})})]})}),u<F.length-1&&"full-width"===t&&(0,o.Y)(i0,{insertAfterIndex:u,isBlockPickerInsertionPoint:M(F[u+1]),variant:B(u)})]},i.id)})})}),F.length>0&&y&&(0,o.Y)(i0,{insertAfterIndex:F.length-1,variant:"space"}),E&&w&&(0,o.Y)(e4.Ic,{containerId:"block-".concat(E.id),contentBlock:E,module:"@/frontend/components/thefp/EditPinsModal",pinnedPosts:h,posts:null!=(l=null==(t=k.flatMap(e=>e.items).find(e=>e.contentBlock.id===E.id))?void 0:t.posts)?l:[],renderPreview:e=>{let{posts:t}=e,{title:n}=i6({contentBlock:E,hideRecentPostsTitle:!1,pub:f});return(0,o.Y)(iX,{contentBlock:E,posts:t,pub:f,showEmptyState:v,showSearch:!1,showSeeAllLink:!1,title:n})},resolve:e=>e.EditContentBlockPinsModal,whileLoading:(0,o.Y)("div",{}),onClose:()=>{I(null)},onRequest:()=>n.e("937").then(n.bind(n,93936))})]})},i6=e=>{let t,{contentBlock:n,hideRecentPostsTitle:i,pub:l}=e,r="";if("latest"===n.post_source)r=i?"":"Recent posts",t=(0,N.Xt9)(l);else if("section"===n.post_source&&n.section){let e=n.section;r=(null==e?void 0:e.name)||"",t=e?(0,B.Dor)(l,{section:e}):null}else if("tag"===n.post_source&&n.postTag){let e=n.postTag;r=(null==e?void 0:e.name)||"",t=e?(0,B.ii9)(l,e):null}else"multiple"===n.post_source&&(r="Selected posts");return{title:r,viewAllUrl:t}};var i7=n(24782),i8=n(21919),i3=n(73443),i9=n(92019);let i5=e=>{let{pub:t,user:n}=e,[i,l]=(0,p.useState)(!0),{isMobile:r}=(0,D.sM)(),{changeSetting:a}=(0,eo.ur)(),{refetch:s}=(0,eq.st)({pathname:"/api/v1/subscription/sections/email?utm_source=newsletters-modal",auto:!1,method:"PATCH"}),d=async()=>{await a("hasSeenOnboardingNewslettersScreen",!0),l(!1)},c=async(e,t)=>{try{let n=Object.fromEntries([...e.map(e=>[e,{setting:"individual"}]),...t.map(e=>[e,{setting:"disabled"}])]);await s({json:n}),await d()}catch(e){console.error("Failed to update newsletter preferences:",e)}};return(0,o.Y)(o.FK,{children:(0,o.FD)(eL.S,{isOpen:i,width:894,onClose:d,stretchModal:r,fullscreenMobile:!0,children:[r&&(0,o.FD)(P.Ye,{style:{width:"100%"},children:[(0,o.Y)("div",{className:i9.A.topBorder}),(0,o.Y)(i8.G,{logoOnly:!0,pub:t,user:n,activeLiveStream:null,freeSignup:!1,showCustomerSupportModeModal:!1}),(0,o.Y)(eu.Nm,{className:i9.A.closeButton,onClick:d,children:(0,o.Y)(en.A,{size:24})})]}),(0,o.Y)(i3.k,{isNewSubscriber:!1,pub:t,fullScreen:!1,onSkip:d,onSubmit:c})]})})};var le=n(26392),lt=n(16291);let ln=(0,p.memo)(e=>{var t,n,s,c,u,h,g;let{activeLiveStream:v,bodyPostGroups:Y,freeSignup:f,freeSignupEmail:b,homepageData:y,isPreview:_,pub:w,theme:I,user:k,utm:x,giftCard:T,abTestingId:E}=e,N=(0,r._)(e,["activeLiveStream","bodyPostGroups","freeSignup","freeSignupEmail","homepageData","isPreview","pub","theme","user","utm","giftCard","abTestingId"]),{getConfigFor:B}=(0,m.mJ)(),M=null!=(c=B("use_theme_editor_v2"))&&c,R=null!=(u=B("use_theme_editor_v3"))&&u,L=(0,p.useMemo)(()=>(0,tu.lu)({pub:w})&&y?d()(Object.values(y.contentBlockData.latestPostFromSections).map(e=>null==e?void 0:e.id)):[],[y,w]),O=(0,p.useMemo)(()=>{var e,t,n;let i=new Set([...(null!=(e=null==y?void 0:y.pinnedPosts)?e:[]).map(e=>e.id),...L]);return(null!=(t=null==y?void 0:y.pinnedPosts)?t:[]).concat((null!=(n=null==y?void 0:y.newPosts)?n:[]).filter(e=>!i.has(e.id)))},[null==y?void 0:y.newPosts,null==y?void 0:y.pinnedPosts,L]),{activeLiveStream:z}=(0,ej.Y)({pub:w,user:k,preloadedActiveLiveStream:v,disabled:_}),{breakpoint:U,isMobile:q,isDesktop:H}=(0,D.sM)(),{getSettingFor:G}=(0,eV.Pu)(),j=(0,K.ensureInList)(G("post_preview_crop_gravity"),["center","auto"]),X=(0,m.mJ)(),{open:Q,modal:$}=(0,ei.El)({utm_campaign:(null==T||null==(t=T.gifter)?void 0:t.id)===w.author_id?V._9.viralGiftAppIncentiveFromPub:V._9.viralGiftAppIncentive,utm_source:V.VU.substack,giftCard:T,pub:w,abTestingId:E}),{open:ee,modal:et}=function(e){let{pub:t,abTestingId:n,startingOpen:i,giftCard:l}=e,[r,a]=(0,p.useState)(null!=i&&i),[s,d]=(0,p.useState)(l),c=(0,p.useCallback)(e=>{d(e),a(!0),(0,ea.u4)(ea.qY.ACCEPT_GIFT_MODAL_OPENED,{has_sender_token:!!(0,eg.y)(window._preloads.original_url,"senderToken"),starting_open:i})},[]),u=(0,p.useCallback)(()=>{a(!1)},[]);return{open:c,modal:(0,o.Y)(ex,{isOpen:r,onClose:u,pub:t,giftCard:s,abTestingId:n})}}({pub:w,abTestingId:E,startingOpen:!!(0,eg.y)("accepting_gift"),giftCard:T}),en=(0,tu.lu)({pub:w}),el=(0,tu.S2)({pub:w}),er=el&&"magaziney"===I.home_hero,es=(0,a.md)(A.jd),ec=null!=es?es:I.home_posts,{userSettings:eu}=(0,eo.ur)(),ep=en&&k&&(null==eu?void 0:eu.hasSeenOnboardingNewslettersScreen)!==!0;(0,p.useEffect)(()=>{(0,eg.y)("accepting_gift")?((0,ed.qm)("accepting_gift"),(0,ed.qm)("senderToken"),ee(T)):T&&w&&(T.expired?ee(T):Q())},[]);let eh=O[0],em=(0,p.useMemo)(()=>{var e;return null==y||null==(e=y.topPosts)?void 0:e.filter(e=>!eh||e.id!==eh.id)},[eh,null==y?void 0:y.topPosts]);if(!y)return(0,o.Y)(P.I1,{alignItems:"center",className:W()(J,Z),justifyContent:"center",children:(0,o.Y)("div",{className:"more-loader"})});if(0===O.length)return(0,o.Y)(li,{});let ev=!(null==(n=O[0])?void 0:n.cover_image),{effectiveHero:eY,numPostsInHero:ef}=(0,tS.z)({breakpoint:U,firstPostMissingImage:ev,heroVariant:I.home_hero,posts:O,pub:w}),eb="podcast"===eY,ey=["newspaper","podcast"].includes(eY)&&"list"===ec,e_=O.slice(ef),ew=!!(I.home_show_top_posts&&em&&"magaziney"!==eY&&!q),eC=e_.length>0&&"custom"!==ec;["feature-media","podcast"].includes(eY)&&!ew&&(eC=!1),(en||el)&&(eC=!1);let eI=!1,ek=!1;en&&(eI=null!=(h=w.showIntroModule)&&h,ek=null!=(g=w.isPortraitLayout)&&g);let eS=!!((M||R)&&(null==(s=w.theme)?void 0:s.custom_footer)&&"default"!==w.theme.custom_footer.layout);return(0,o.Y)(e2.XL,{authorPagesEnabled:!!X.getConfigFor("enable_author_pages"),cropGravity:j,highlightByline:!!X.getConfigFor("post_preview_highlight_byline"),pub:w,showSectionOrTag:(0,tu.S2)({pub:w}),user:k,utm:x,children:(0,o.Y)(S.Provider,{value:{contributors:y.contentBlockData.contributors,freeSignup:f,freeSignupEmail:b,homepageLinks:y.homepageLinks,latestPodcastPosts:y.contentBlockData.latestPodcastPosts,latestPostByContributorId:y.contentBlockData.latestPostByContributorId,latestPostFromSections:y.contentBlockData.latestPostFromSections,numRecommendations:y.numRecommendations,recommendations:y.recommendations,topPosts:y.topPosts},children:(0,o.FD)(C.DH,{children:[!en&&(null==z?void 0:z.liveStream.id)&&(0,lt.A)(z.liveStream.started_streaming_at).isBefore((0,lt.A)().subtract(1,"minute"))?z.liveStreamInformation.desktopPlaybackUrl&&"autoPlay"===G("live_stream_homepage_style")?(0,o.Y)(P.I1,{alignItems:"center",paddingTop:24,children:(0,o.Y)(F.az,{className:"liveStreamContainer-t0i18u",position:"relative",children:(0,o.Y)(eT.q,{activeLiveStream:z,fromPub:!0})})}):(0,o.Y)(i7.A,{activeLiveStream:z}):null,ep&&(0,o.Y)(i5,{pub:w,user:k}),et,$,(0,o.Y)(le.o,{children:(0,o.FD)(P.I1,{className:J,paddingTop:eb||en?0:16,children:[(0,o.Y)(P.I1,{paddingTop:en?H?56:28:0,children:(0,o.Y)(tE,{bodyVariant:I.home_posts,breakpoint:U,heroAlignment:I.home_hero_alignment,heroVariant:I.home_hero,isMobile:q,isPortraitLayout:ek,posts:O,pub:w,replaceTopPostsWithLatest:er,showIntroModule:eI,showPodcastLinks:I.home_hero_show_podcast_links,showTopPosts:I.home_show_top_posts,topPosts:em,user:k,utm:x})}),(0,o.FD)(P.I1,{className:"bodyContainer-GD8kK4",id:"modular-home-posts",paddingTop:eb&&!ew&&"custom"!==ec?40:void 0,children:[eC&&(0,o.Y)(tD.r,{numColumns:ey?3:4}),(0,o.FD)("div",{id:"home-body",style:{scrollMarginTop:48,paddingTop:el?q?40:64:void 0},children:["custom"!==ec&&(0,o.Y)(nr,(0,l._)((0,i._)({},N),{bodyPostGroups:Y,hasCustomFooter:eS,hasEmptyGroupOptions:e.hasEmptyGroupOptions,hideImagesFromList:(0,tP.$P)({pub:w}),posts:e_,postsByGroupId:y.postsByGroupId,pub:w,source:"".concat(I.home_hero,"-").concat(ec,"-home"),user:k,variant:ec})),"custom"===ec&&(0,o.Y)(i4,{contentBlocks:y.contentBlockData.contentBlocks,firstDividerVariant:eb&&!ew?"space":void 0,postsByContentBlockId:y.contentBlockData.postsByContentBlockId,postsBySectionId:y.contentBlockData.postsBySectionId,postsByTagId:y.contentBlockData.postsByTagId,postsForContentBlockPins:y.contentBlockData.postsForContentBlockPins,recentPosts:e_,showEmptyStates:_})]})]})]})}),en&&(0,o.Y)(eK,{})]})})})}),li=()=>{let{iString:e}=(0,k.GO)();return(0,o.Y)(P.I1,{alignItems:"center",className:W()(J,Z),justifyContent:"center",children:e("Coming Soon")})};var ll=n(91089),lr=n(57961);let lo=e=>{var t,n,s,c,g,v,Y,{blurbs:f,freeSignup:b,freeSignupEmail:y,hasEmptyGroupOptions:_,hide_intro_popup:w,homepageData:C,isPreview:I,notify_user:k,pub:S,referralCode:F,showWelcome:P,user:x,postTags:T,launchWelcomePage:E,skipIntroPopupRender:N}=e,B=(0,r._)(e,["blurbs","freeSignup","freeSignupEmail","hasEmptyGroupOptions","hide_intro_popup","homepageData","isPreview","notify_user","pub","referralCode","showWelcome","user","postTags","launchWelcomePage","skipIntroPopupRender"]);let{data:M}=(0,D.bH)({preloadedHomepageData:C}),{getConfigFor:R}=(0,m.mJ)(),L=null!=(c=R("use_theme_editor_v2"))&&c,O=null!=(g=R("use_theme_editor_v3"))&&g,z=(0,a.md)(A.jd),U=null!=(v=null!=z?z:null==(t=S.theme)?void 0:t.home_posts)?v:"grid",q=null!=(Y=null==(n=S.theme)?void 0:n.home_hero)?Y:"newspaper",{hasBodyPosts:H}=(0,D.oA)({homepageData:null!=M?M:null,heroVariant:q,pub:S});(0,p.useEffect)(()=>{k&&"undefined"!=typeof window&&(0,h.Ay)(k)},[k]);let W=(0,p.useMemo)(()=>{var e,t;return d()(null==(t=S.theme)||null==(e=t.body_post_groups)?void 0:e.map(e=>{var t,n,i,l,r;return e.tag_id?null!=(n=null!=(t=e.post_tag)?t:null==T?void 0:T.find(t=>t.id===e.tag_id))?n:null:e.section_id&&null!=(r=null!=(l=e.section)?l:null==(i=S.sections)?void 0:i.find(t=>t.id===e.section_id))?r:null}))},[T,S.sections,null==(s=S.theme)?void 0:s.body_post_groups]);return S.theme?(0,o.FD)("div",{className:"home-page home-page--modular",children:[(0,o.Y)(ll.PageMetaData,{isHomepage:!0,pub:S}),(0,o.Y)("div",{style:{flex:1},children:(0,o.Y)(ln,(0,l._)((0,i._)({},u()(B,"matches")),{bodyPostGroups:W,freeSignup:b,freeSignupEmail:y,hasEmptyGroupOptions:_,homepageData:M,isPreview:I,pub:S,theme:S.theme,user:x}))}),(0,o.Y)(tA.k,{flushBottom:!0,previewBlockId:{type:"footer"},children:(0,o.Y)(ee,{activeBodyLayout:U,hasBodyPosts:H,heroLayout:q,homepageData:null!=M?M:null,isCustomFooterEnabled:L||O,isPreview:I,pub:S,user:x})}),N?null:(0,o.Y)(lr.l,{blurbs:f,freeSignup:b,freeSignupEmail:y,hide_intro_popup:w,launchWelcomePage:E,pub:S,referralCode:F,showWelcome:P,user:x})]}):null}},80098:function(e,t,n){n.d(t,{P:()=>s});var i=n(4006),l=n(32485),r=n.n(l),o=n(76977);let a={container:"container-k4OAt1","full-width":"full-width-zjiPxJ",fullWidth:"full-width-zjiPxJ","full-width-with-sidebar":"full-width-with-sidebar-epMpKX",fullWidthWithSidebar:"full-width-with-sidebar-epMpKX","show-below":"show-below-NE36A8",showBelow:"show-below-NE36A8","full-width-with-border-and-sidebar":"full-width-with-border-and-sidebar-aSAAEB",fullWidthWithBorderAndSidebar:"full-width-with-border-and-sidebar-aSAAEB","vertical-divider":"vertical-divider-Z42nad",verticalDivider:"vertical-divider-Z42nad","three-column-width":"three-column-width-gNtKSr",threeColumnWidth:"three-column-width-gNtKSr","three-column-width-with-sidebar":"three-column-width-with-sidebar-cRFEVE",threeColumnWidthWithSidebar:"three-column-width-with-sidebar-cRFEVE","two-column-width":"two-column-width-f6IAWT",twoColumnWidth:"two-column-width-f6IAWT","one-column-two-column":"one-column-two-column-dAuMkN",oneColumnTwoColumn:"one-column-two-column-dAuMkN","two-column-one-column-one-column":"two-column-one-column-one-column-GnEn49",twoColumnOneColumnOneColumn:"two-column-one-column-one-column-GnEn49","one-column-two-column-one-column":"one-column-two-column-one-column-g_nrA3",oneColumnTwoColumnOneColumn:"one-column-two-column-one-column-g_nrA3","one-column-one-column-two-column":"one-column-one-column-two-column-e79cH1",oneColumnOneColumnTwoColumn:"one-column-one-column-two-column-e79cH1","one-column-three-columns":"one-column-three-columns-lf36oo",oneColumnThreeColumns:"one-column-three-columns-lf36oo","three-column-one-column-one-column":"three-column-one-column-one-column-MC1z4c",threeColumnOneColumnOneColumn:"three-column-one-column-one-column-MC1z4c"},s=e=>{let{children:t,hideVerticalDividers:n,showContentBelowOnMobile:l,stretchVertically:s,variant:d}=e,c=n?void 0:"detail-themed";return"none"===d?(0,i.Y)("div",{children:t}):(0,i.Y)("div",{style:s?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,i.FD)("div",{className:r()(a.container,a[d],{[a["show-below"]]:l}),style:s?{width:"100%"}:void 0,children:[t,"full-width-with-border-and-sidebar"===d&&(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),["two-column-one-column-one-column","one-column-two-column-one-column","one-column-one-column-two-column","three-column-one-column-one-column"].includes(d)&&(0,i.FD)(i.FK,{children:[(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]}),(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]}),"one-column-two-column"===d&&(0,i.Y)(o.pT,{borderRight:c,className:a["vertical-divider"]})]})})}},9757:function(e,t,n){n.d(t,{I:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(68410),a=n(89490);let s="column-O67nhJ",d="column1-pd0Ws0",c="columnCollapsed-hX4lgc",u=e=>{let{animateColumns:t,leftContent:n,mainContent:l,rightContent:u,stretchToFullWidth:p}=e,{isMobile:h,isTablet:m,isDesktop:g}=(0,o.sM)(),v=2;p&&(g?v=4-!!n-!!u:m&&(v=3-(n||u?1:0))),h&&(v=1);let Y=n||t,f=u||t;return(0,i.Y)("div",{className:"outerContainer-p1amnX",children:(0,i.FD)("div",{className:"container-uYF5Qm",children:[Y&&(0,i.Y)(a.az,{className:r()(s,d,{[String(c)]:t&&!n}),paddingTop:8,position:"relative",children:n}),(0,i.Y)(a.az,{className:r()(s,{"column2-jVKqxY":2===v,"column3-Brgr2S":3===v,"column4-Z0B2N_":4===v}),children:l}),f&&(0,i.Y)(a.az,{className:r()(s,d,{[String(c)]:t&&!u}),paddingTop:8,position:"relative",children:u})]})})}},24782:function(e,t,n){n.d(t,{A:()=>s});var i=n(4006),l=n(76977),r=n(63136),o=n(49807),a=n(57324);let s=e=>{let{activeLiveStream:t}=e;return(0,i.Y)(l.Ye,{className:"liveStreamBanner-Petbnm",justifyContent:"center",children:(0,i.Y)("a",{href:(0,o.Xrv)({liveStreamId:t.liveStream.id,utm_source:a.VU.web,utm_campaign:a._9.liveStreamPubBanner}),style:{textDecoration:"none"},children:(0,i.FD)(l.Ye,{alignItems:"center",gap:8,padding:12,paddingTop:{desktop:12,mobile:16},children:[(0,i.Y)("div",{className:"liveBadge-f3ITqf",children:(0,i.Y)(r.EY.B5,{color:"white",translated:!0,weight:"semibold",children:"Live"})}),(0,i.FD)(r.EY.B3,{color:"white",translated:!0,weight:"semibold",children:[(0,i.Y)("span",{style:{textTransform:"uppercase"},children:"Live Video"}),": ",I18N.p(t.liveStream.title)]})]})})})}},68265:function(e,t,n){n.d(t,{v:()=>a});var i=n(4006),l=n(76977);let r=e=>{let{children:t,paddingTop:n,paddingBottom:r}=e;return(0,i.Y)("div",{className:"container-FJSDzM",children:(0,i.Y)(l.I1,{paddingBottom:r,paddingTop:n,paddingX:16,children:t})})};var o=n(68410);let a=e=>{let{children:t}=e,{isMobile:n}=(0,o.sM)();return(0,i.Y)(l.I1,{bg:"secondary",className:"container-_aNEvf",paddingY:n?32:64,children:(0,i.Y)(r,{children:t})})}},64648:function(e,t,n){n.d(t,{S:()=>p});var i=n(4006),l=n(33764),r=n(84236),o=n(80098),a=n(68265),s=n(38501),d=n(89490),c=n(76977),u=n(63136);let p=e=>{let{columns:t,description:n,imageUrl:p,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,b=(0,d.iF)({radius:"lg",shadow:"xl"});return(0,i.Y)(a.v,{children:(0,i.Y)(o.P,{variant:4===t?"full-width-with-sidebar":"three-column-width",children:(0,i.FD)(c.Ye,{alignItems:"center",gap:40,paddingX:8,children:[p&&(0,i.Y)(l.o,{className:b,imageIsFixedWidth:!0,maxWidth:250,src:p,useRetinaSizing:!0}),(0,i.FD)(c.I1,{gap:16,children:[(0,i.FD)(c.I1,{gap:8,children:[(0,i.Y)(u.EY.H2,{color:"pub-primary-text",font:"pub-headings",children:h}),(0,i.Y)(u.EY.B2,{color:"pub-secondary-text",children:n}),(0,i.Y)(r.pJ,{align:"right",post:m,pub:g,section:v})]}),Y&&(0,i.Y)(s.D,{post:m,pub:g,section:v,user:f})]})]})})})}},64232:function(e,t,n){n.d(t,{i:()=>h});var i=n(4006),l=n(33764),r=n(84236),o=n(68410),a=n(80098),s=n(68265),d=n(38501),c=n(89490),u=n(76977),p=n(63136);let h=e=>{let{description:t,imageUrl:n,name:h,post:m,pub:g,section:v,showPodcastLinks:Y,user:f}=e,{isMobile:b}=(0,o.sM)(),y=(0,c.iF)({radius:"sm",shadow:"lg"});return(0,i.Y)(s.v,{children:(0,i.Y)(a.P,{variant:"two-column-width",children:(0,i.FD)(u.I1,{alignItems:"center",gap:24,paddingX:8*!b,children:[n&&(0,i.Y)(l.o,{className:y,imageIsFixedWidth:!0,maxWidth:100,src:n,useRetinaSizing:!0}),(0,i.FD)(u.I1,{gap:8,children:[(0,i.Y)(p.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:h}),(0,i.Y)(p.EY.B2,{align:"center",color:"pub-secondary-text",children:t})]}),(0,i.Y)(r.pJ,{align:"center",paddingX:8,post:m,pub:g,section:v}),Y&&(0,i.Y)(d.D,{align:"center",post:m,pub:g,section:v,user:f})]})})})}},13790:function(e,t,n){n.d(t,{_:()=>u});var i=n(4006),l=n(33764),r=n(84236),o=n(68265),a=n(38501),s=n(89490),d=n(76977),c=n(63136);let u=e=>{let{description:t,imageUrl:n,name:u,post:p,pub:h,section:m,showPodcastLinks:g,user:v}=e,Y=(0,s.iF)({radius:"lg",shadow:"xl",width:160});return(0,i.Y)(o.v,{children:(0,i.FD)(d.I1,{alignItems:"center",gap:24,children:[n&&(0,i.Y)("div",{children:(0,i.Y)(l.o,{className:Y,imageIsFixedWidth:!0,maxWidth:160,src:n,useRetinaSizing:!0})}),(0,i.FD)(d.I1,{gap:16,children:[(0,i.FD)(d.I1,{gap:8,children:[(0,i.Y)(c.EY.H2,{align:"center",color:"pub-primary-text",font:"pub-headings",children:u}),(0,i.Y)(c.EY.B2,{align:"center",color:"pub-secondary-text",children:t}),(0,i.Y)(r.pJ,{align:"center",paddingY:8,post:p,pub:h,section:m})]}),g&&(0,i.Y)(a.D,{limit:2,post:p,pub:h,section:m,stretch:!0,user:v})]})]})})}},38501:function(e,t,n){n.d(t,{D:()=>w});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(17402),s=n(82519),d=n(13950),c=n(36233),u=n(84605),p=n(86500),h=n(74894),m=n(68349),g=n(35369),v=n(76977),Y=n(88774),f=n(59294),b=n(60816),y=n(7755),_=n(39318);let w=e=>{let{align:t="left",limit:n=4,post:i,pub:l,section:r,stretch:g,user:w}=e,{iString:I}=(0,u.GO)(),{feedUrl:k,isLoaded:S}=(0,f.Zq)({pub:l,section:r,user:w}),[D,F]=(0,a.useState)(!1),P=i?n-1:n,x=(0,y.Em)({pub:l,section:r,spotifySettings:(0,h.Om)({pub:l,section:null!=r?r:null})}),T=(0,y.dV)({feedUrl:k,isApple:(0,m.cX)()||(0,m.gI)(),isMobile:!1,showLinks:x,userIsSubscribed:!!(null==w?void 0:w.is_subscribed)}),A=T.length+ +!!k>P;(0,a.useEffect)(()=>{S&&F(!0)},[S]);let E=()=>{(0,p.u4)(p.qY.PODCAST_FEED_URL_COPIED,{feedUrl:k}),(0,c.Ay)("RSS feed URL copied"),(0,m.lW)(k)},N=e=>{let{label:t,url:n}=e;return()=>{(0,p.u4)(p.qY.PODCAST_APP_LINK_CLICK,{appName:t,feedUrl:k,url:n}),window.open(n,"_blank")}};return(0,o.Y)(d.DH,{children:(0,o.FD)(v.Ye,{gap:8,justifyContent:"center"===t?"center":void 0,opacity:100*!!D,wrap:"wrap",children:[i&&(0,o.FD)(C,{stretch:g,onClick:N({label:"Substack",url:(0,_.XV8)(l.subdomain,i.slug,{redirect:"app-marketing",source:"podcast-player-link"})}),children:[(0,o.Y)(b.l,{platformKey:"substack"}),"Substack"]}),T.slice(0,P).map(e=>{let{label:t,platform:n,url:i}=e;return(0,o.FD)(C,{stretch:g,onClick:N({label:t,url:i}),children:[(0,o.Y)(b.l,{platformKey:n}),t]})}),k&&!A&&(0,o.FD)(C,{stretch:g,onClick:E,children:[(0,o.Y)(b.l,{platformKey:"rss"}),I("RSS feed")]}),A&&(0,o.FD)(Y.W1,{trigger:(0,o.FD)(C,{children:[I("More"),(0,o.Y)(s.A,{})]}),children:[T.slice(P).map(e=>{let{label:t,platform:n,url:i}=e;return(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:n}),onClick:N({label:t,url:i}),children:t})}),(0,o.Y)(Y.Dr,{leading:(0,o.Y)(b.l,{platformKey:"rss"}),onClick:E,children:I("RSS feed")})]})]})})},C=(0,a.forwardRef)((e,t)=>{var{children:n,stretch:a,onClick:s}=e,d=(0,r._)(e,["children","stretch","onClick"]);return(0,o.Y)(g.$n,(0,l._)((0,i._)({ref:t},d,a?{flex:"grow",justifyContent:"center"}:null),{className:"podcast-player-button",priority:"secondary",onClick:s,children:n}))})},16831:function(e,t,n){n.d(t,{b:()=>c});var i=n(4006),l=n(49802),r=n(50802),o=n(76977),a=n(63136);let s={audio:l.A,video:r.A},d={audio:"Audio",video:"Video"},c=e=>{let{medium:t}=e,n=s[t];return(0,i.FD)(o.Ye,{alignItems:"center",bg:"secondary",color:"pub-secondary-text",gap:4,paddingX:6,radius:"sm",children:[(0,i.Y)(n,{size:12}),(0,i.Y)(a.EY,{font:"text",lineHeight:20,size:12,weight:"semibold",children:d[t]})]})}},24634:function(e,t,n){n.d(t,{t:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(88553),s=n(76977),d=n(22602);let c=(0,o.forwardRef)((e,t)=>{let{variant:n}=e;return["grid","grid-groups"].includes(n)?(0,i.FD)(s.I1,{ref:t,gap:12,children:[(0,i.Y)("div",{style:{aspectRatio:a.fg},children:(0,i.Y)(d.O,{height:"100%"})}),(0,i.FD)(s.I1,{gap:8,children:[(0,i.Y)(d.O,{height:24,width:"70%"}),(0,i.Y)(d.O,{height:20,width:"90%"}),(0,i.Y)(d.O,{height:20,width:"50%"})]})]}):"list"===n?(0,i.FD)(s.I1,{ref:t,gap:8,children:[(0,i.Y)(d.O,{height:28,width:"60%"}),(0,i.Y)(d.O,{height:24,width:"80%"}),(0,i.Y)(d.O,{height:20,width:"20%"})]}):null}),u=(0,o.forwardRef)((e,t)=>{let{postCount:n,variant:l}=e;return(0,i.Y)("div",{ref:t,className:r()({"loadingContainerGrid-ydRZVl":["grid","grid-groups"].includes(l),"loadingContainerList-gZ_Mu2":"list"===l}),children:Array.from(Array(n)).map(()=>(0,i.Y)(c,{variant:l}))})})},72692:function(e,t,n){n.d(t,{k:()=>d});var i=n(4006),l=n(87677),r=n(84605),o=n(68410),a=n(35369),s=n(76977);let d=e=>{let{url:t}=e,{isMobile:n}=(0,o.sM)(),{iString:d}=(0,r.GO)();return(0,i.Y)(s.Ye,{paddingTop:16,paddingX:8*!n,children:(0,i.Y)(a.$n,{"data-testid":"archive-view-all",href:t,priority:"secondary",trailing:(0,i.Y)(l.A,{size:20}),children:d("See all")})})}},85965:function(e,t,n){n.d(t,{C:()=>u});var i=n(4006),l=n(32485),r=n.n(l),o=n(21013),a=n.n(o),s=n(68410),d=n(98002),c=n(76977);let u=e=>{let{hideDescriptions:t,posts:n,numColumns:l,onClickPost:o}=e,{isMobile:u}=(0,s.sM)(),p=n.filter(e=>null!==e),h=p.length>0&&p.every(e=>!e.cover_image),m=a()(n,l);return(0,i.Y)(c.I1,{gap:u?28:4,children:m.map(e=>(0,i.Y)(c.Ye,{className:"postRow-schahZ",children:e.map(e=>(0,i.Y)("div",{className:r()("postContainer-okMiTM",{"postContainerTwoColumn-OPvMmL":2===l,"postContainerThreeColumn-W6tLrW":3===l,"postContainerFourColumn-WylYbU":4===l}),children:(0,i.Y)(d.z,{hideDescription:t,hideImage:h,post:e,variant:"square",onClick:e?o:void 0})}))}))})}},93800:function(e,t,n){n.d(t,{m:()=>h});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(80098),c=n(98002),u=n(76977);let p={container:"container-O1YsI6",divider:"divider-QOeHtM",dividerVertical:"dividerVertical-pPOkXS","long-divider":"long-divider-CDn5cl",longDivider:"long-divider-CDn5cl","two-small-one-large":"two-small-one-large-QUGVE5",twoSmallOneLarge:"two-small-one-large-QUGVE5","two-column-grid":"two-column-grid-h3GUav",twoColumnGrid:"two-column-grid-h3GUav","three-column-grid":"three-column-grid-tc6QOt",threeColumnGrid:"three-column-grid-tc6QOt","four-column-grid":"four-column-grid-IPXx88",fourColumnGrid:"four-column-grid-IPXx88","one-column-list":"one-column-list-YqnT5h",oneColumnList:"one-column-list-YqnT5h","one-column-list-flex":"one-column-list-flex-kqNmJm",oneColumnListFlex:"one-column-list-flex-kqNmJm","large-listing-listing-column":"large-listing-listing-column-feCdFL",largeListingListingColumn:"large-listing-listing-column-feCdFL","square-square-column":"square-square-column-b5mOve",squareSquareColumn:"square-square-column-b5mOve","two-column-list":"two-column-list-BLHtzo",twoColumnList:"two-column-list-BLHtzo","two-column-list--with-dividers":"two-column-list--with-dividers-cHfR0M",twoColumnListWithDividers:"two-column-list--with-dividers-cHfR0M","five-up":"five-up-H_hegz",fiveUp:"five-up-H_hegz","vertical-divider":"vertical-divider-GcHWq8",verticalDivider:"vertical-divider-GcHWq8","mini-row":"mini-row-KFztmA",miniRow:"mini-row-KFztmA","three-column-mini-row":"three-column-mini-row-ep3LFs",threeColumnMiniRow:"three-column-mini-row-ep3LFs"},h=e=>{var t;let{flex:n,hideImages:l,hideHorizontalDividers:r,hideVerticalDividers:a,linkToComments:d,posts:h,source:f,variant:b,onClickPost:y}=e;if("two-three-two"===b)return(0,o.Y)(g,(0,i._)({},e));if("two-small-three-medium"===b)return(0,o.Y)(m,(0,i._)({},e));if(["mini-row","three-column-mini-row"].includes(b))return(0,o.Y)(v,(0,i._)({},e));let _=a?void 0:"detail-themed",w=r?void 0:"detail-themed";return(0,o.Y)("div",{style:"grow"===n?{flexGrow:1,display:"flex",alignItems:"stretch"}:void 0,children:(0,o.Y)("div",{className:s()(p.container,p[b],{[null!=(t=p["two-column-list--with-dividers"])?t:""]:"two-column-list"===b&&!r}),children:h.map((e,t)=>(0,o.FD)(o.FK,{children:[t>0&&["one-column-list","two-column-list","two-column-grid","three-column-grid","four-column-grid","large-listing-listing-column"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),t%2==0&&t>0&&["two-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),t%4==0&&t>0&&["four-column-grid"].includes(b)&&(0,o.Y)(u.Ye,{borderBottom:w,className:p["long-divider"]}),(0,o.Y)(c.z,{hideImage:l,linkToComments:d,post:e,testid:["large-listing-listing-column","two-small-one-large"].includes(b)?"magazine-spot-".concat(t+1):void 0,variant:Y(b,t),onClick:y&&f&&e?n=>{let{event:i}=n;y({event:i,post:e,index:t,source:f})}:void 0}),"five-up"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"two-small-one-large"===b&&t===h.length-1&&(0,o.FD)(o.FK,{children:[(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider}),(0,o.Y)(u.Ye,{borderRight:_,className:p["vertical-divider"]})]}),"square-square-column"===b&&1===t&&(0,o.Y)(u.Ye,{borderBottom:w,className:p.divider})]}))})})},m=e=>{let{posts:t,hideVerticalDividers:n}=e,a=(0,r._)(e,["posts","hideVerticalDividers"]),s=t.slice(0,3),c=t.slice(3);return(0,o.FD)(d.P,{hideVerticalDividers:n,stretchVertically:!0,variant:"one-column-two-column",children:[(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"}))]})},g=e=>{let{hideVerticalDividers:t,posts:n}=e,a=(0,r._)(e,["hideVerticalDividers","posts"]),s=n.slice(0,3),c=n.slice(3,5),u=n.slice(5);return(0,o.FD)(d.P,{hideVerticalDividers:t,variant:"one-column-two-column-one-column",children:[(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!0,posts:s,variant:"large-listing-listing-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:c,variant:"square-square-column"})),(0,o.Y)(h,(0,l._)((0,i._)({},a),{flex:"grow",hideImages:!1,posts:u,variant:"square-square-column"}))]})},v=e=>{let{linkToComments:t,posts:n,source:i,variant:l,onClickPost:r}=e;return(0,o.Y)("div",{children:(0,o.Y)("div",{className:s()(p.container,p[l]),children:n.slice(0,"mini-row"===l?4:3).map((e,n)=>(0,o.FD)(o.FK,{children:[n>0&&(0,o.Y)(u.Ye,{alignItems:"center",className:s()(p.divider,p.dividerVertical),paddingY:8,children:(0,o.Y)(u.Ye,{borderLeft:"detail-themed"})}),(0,o.Y)(c.z,{linkToComments:t,post:e,variant:Y(l,n),onClick:r&&i&&e?t=>{let{event:l}=t;r({event:l,post:e,index:n,source:i})}:void 0})]}))})})},Y=(e,t)=>"square-square-column"===e?"square":"large-listing-listing-column"===e?0===t?"large":"listing":"two-small-one-large"===e?0===t?"large":"square":"two-column-list"===e?"listing":"five-up"===e?0===t?"large":"square":["mini-row","three-column-mini-row","one-column-list","one-column-list-flex"].includes(e)?"mini":"square"},72750:function(e,t,n){n.d(t,{h:()=>Q});var i=n(69277),l=n(70408),r=n(4006),o=n(90883),a=n(17402),s=n(13950),d=n(72987),c=n(36233),u=n(2058),p=n(33764),h=n(20562),m=n(68410),g=n(16831),v=n(76977),Y=n(63136),f=n(4016),b=n(57324);let y=e=>{let{description:t,logoUrl:n,name:i,pub:l,section:o,user:a}=e,{isMobile:s}=(0,m.sM)(),d=(0,f.s7)({pub:l,includeTheRampart:!0});return(0,r.FD)(v.Ye,{alignItems:"center",direction:s?"column":"row",gap:32,paddingBottom:24,paddingTop:16,paddingX:8*!s,children:[n&&(0,r.Y)(p.o,{alt:i,className:"logo-vqxCjr",imageIsFixedWidth:!0,maxWidth:300,src:n,useRetinaSizing:!0}),(0,r.FD)(v.I1,{gap:16,children:[(0,r.FD)(v.I1,{children:[d&&(null==a?void 0:a.is_subscribed)&&(0,f.rD)({sectionId:null==o?void 0:o.id})&&(0,r.Y)(Y.EY.Meta,{color:"accent",paddingBottom:8,children:"+ Member-Only"}),(0,r.Y)(Y.EY.H1,{color:"pub-primary-text",font:"pub-headings",children:i}),d&&(0,r.Y)(v.Ye,{alignItems:"center",gap:8,paddingBottom:12,paddingTop:8,children:(0,f.ot)({sectionId:null==o?void 0:o.id}).map(e=>(0,r.Y)(g.b,{medium:e}))}),t&&(0,r.Y)(v.I1,{gap:8,children:t.split("\n").map(e=>(0,r.Y)(Y.EY.B3,{color:"pub-secondary-text",children:e}))})]}),d&&(0,r.Y)(h.t,{pub:l,section:o,trackingSource:b.VU.sectionPage,variant:(null==a?void 0:a.is_subscribed)?"default":"member-only"})]})]})};var _=n(84605),w=n(74894),C=n(59294),I=n(66728),k=n(7755);let S=e=>{let{firstPodcastPost:t,pub:n,user:i,section:l=null}=e,{iString:o}=(0,_.GO)(),{isMobile:a}=(0,m.sM)(),{feedUrl:s}=(0,C.Zq)({pub:n,user:i,section:l}),d=(0,k.Em)({pub:n,section:l,spotifySettings:(0,w.Om)({pub:n,section:null!=l?l:null})});return(0,r.Y)(v.pT,{paddingX:8*!a,children:(0,r.Y)(I.b,{description:o("Add this podcast to your player of choice:"),feedUrl:s,post:null!=t?t:null,pub:n,section:l,showLinks:d,user:i})})};var D=n(10939),F=n(91089),P=n(93800),x=n(12592),T=n(56458),A=n(82776);let E=e=>{var t,n,i,l;let{newPosts:o,pinnedPosts:a,podcastSettings:d,pub:c,search:p,section:h,sort:g,user:v,utm:Y,welcomeAndShareElement:f}=e,{isMobile:b}=(0,m.sM)(),_=(0,A.sectionIsSpecificallyMarkedAsNewsletter)({pub:c,section:h});return(0,r.Y)(s.DH,{children:(0,r.FD)(x.c,{columns:3,children:[(0,r.Y)(F.PageMetaData,{isPodcast:!0,pub:c,section:h}),(0,r.Y)(y,{description:null!=(t=d.description)?t:"",logoUrl:(null==v?void 0:v.is_subscribed)&&null!=(n=d.paidEpisodeArtUrl)?n:d.artUrl,name:null!=(i=d.title)?i:"",pub:c,section:h,user:v}),!b&&(0,r.Y)(D.r,{numColumns:4}),(0,r.FD)("div",{className:"bodyContainer-P2vZHh",children:[(0,r.Y)(u.M,{isPodcast:!_,maxPosts:7,newPosts:o,pinnedPosts:a,pub:c,search:p,sectionId:null==h?void 0:h.id,sort:g,user:v,utm:Y,variant:"list",children:e=>{let{posts:t,linkToComments:n,onClickPost:i}=e;return(0,r.Y)(P.m,{hideImages:(0,T.$P)({pub:c}),linkToComments:n,posts:t,variant:"two-column-list",onClickPost:i})}}),(0,r.Y)(S,{firstPodcastPost:null!=(l=null==o?void 0:o.filter(e=>"podcast"===e.type)[0])?l:null,pub:c,section:h,user:v})]}),f]})})};var N=n(32485),B=n.n(N),M=n(80098),R=n(9757),L=n(89490);let O=e=>{let{align:t,columns:n,description:i,imageUrl:l,name:o,pub:a}=e,{isMobile:s}=(0,m.sM)(),d=(0,L.iF)({radius:"md",width:80}),c=(0,r.FD)(v.I1,{paddingTop:16,children:[(0,r.FD)(v.I1,{alignItems:"center"===t?"center":void 0,gap:12,paddingX:8*!s,children:[l&&(0,r.Y)(p.o,{className:d,imageIsFixedWidth:!0,maxWidth:80,src:l,useRetinaSizing:!0}),(0,r.Y)(Y.EY.H1,{className:B()({"pillarHeader-Bn88EX":(0,f.S2)({pub:a})}),color:"pub-primary-text",font:"pub-headings",children:o}),(0,r.Y)(Y.EY.B2,{align:t,color:"pub-secondary-text",children:i})]}),(0,r.Y)(D.r,{paddingBottom:0,paddingTop:32})]});return 2===n?(0,r.Y)(R.I,{mainContent:c}):(0,r.Y)(M.P,{variant:"three-column-width",children:c})};var z=n(64648),U=n(64232),q=n(13790),H=n(70557),W=n(49807);let G=e=>{var t;let{columns:n,podcastSettings:i,firstPost:l,heroAlignment:o,pub:a,section:s,showPodcastLinks:d,user:c,utm:u,variant:p}=e,{isMobile:h}=(0,m.sM)(),g=null!=(t=i?i.description:null==s?void 0:s.description)?t:"",f=i?i.artUrl:null==s?void 0:s.logo_url,b=i?i.title:null==s?void 0:s.name,y=(0,W.ScI)(f);if("feature-media"===p&&2!==n){let e=l?(0,r.Y)(H.X,{columns:n,hideLogo:!f||y,isPodcast:!!i,post:l,pub:a,section:s,showPodcastLinks:d,user:null!=c?c:null,utm:u}):(0,r.Y)(v.I1,{alignItems:"center",justifyContent:"center",paddingTop:32,children:(0,r.Y)(Y.EY.MarketingHeading2,{font:"pub-headings",translated:!0,children:"Coming Soon"})});return(0,r.Y)(v.I1,{paddingTop:h?16:24,children:e})}return"podcast"===p&&h?(0,r.Y)(q._,{description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&"center"===o?(0,r.Y)(U.i,{description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):"podcast"===p&&i?(0,r.Y)(z.S,{columns:Math.max(n,3),description:g,imageUrl:f,name:b,post:l,pub:a,section:null!=s?s:null,showPodcastLinks:d,user:c}):(0,r.Y)(O,{align:o,columns:Math.min(n,3),description:g,imageUrl:y?null:f,name:b,pub:a})};var K=n(28528),V=n(7761);let j=e=>{let{columns:t,isPodcast:n,newPosts:i,pinnedPosts:l,pub:o,search:a,section:s,sort:d,user:c,utm:p,variant:h,onChangeFirstPost:m}=e,g=7;"grid"===h&&(4===t&&(g=8),3===t&&(g=9));let v=(0,r.Y)(u.M,{includePins:!(n&&!s),isPodcast:n,maxPosts:g,newPosts:i,pinnedPosts:l,pub:o,search:a,sectionId:null==s?void 0:s.id,sort:d,user:c,utm:p,variant:h,onPostsLoaded:e=>{var t;let{posts:n}=e;m({post:null!=(t=n[0])?t:null})},children:e=>{let{posts:n,linkToComments:i,onClickPost:l}=e;return(0,r.Y)(V.WO,{pub:o,showPubPins:!1,showSectionPins:!0,children:(0,r.Y)(P.m,{hideHorizontalDividers:"grid"===h,hideImages:(0,T.$P)({pub:o}),linkToComments:i,posts:n,variant:function(e){let{columns:t,variant:n}=e;return"list"===n?"two-column-list":4===t?"four-column-grid":"three-column-grid"}({columns:t,variant:h}),onClickPost:l})})}});return"list"===h?(0,r.Y)(R.I,{mainContent:v}):(0,r.Y)(M.P,{variant:function(e){let{columns:t}=e;return 4===t?"full-width":"three-column-width"}({columns:t}),children:v})};var X=n(57961),J=n(71783),Z=n(46009);let Q=e=>{var t,n,u,p,h,g,Y,b,y,_,w,C,I,k;let{blurbs:S,freeSignup:D,freeSignupEmail:P,hide_intro_popup:T,isPodcast:A,newPostsForPubPodcast:N,notify_user:B,pageTheme:M,pub:R,referralCode:L,search:O,slug:z,sort:U,showWelcome:q,user:H,utm:W,launchWelcomePage:V,sectionPageData:Q,skipIntroPopupRender:ee}=e,{isMobile:et,isTablet:en}=(0,m.sM)(),ei=(0,o.md)(J.cd),el=(0,o.md)(J.qG),er=(0,o.md)(J.$G),eo=(0,o.md)(J.n6),ea=(0,i._)({},ei,el),es=(0,i._)({},er,eo),ed=z?R.sections.find(e=>e.slug===z):void 0,ec=A&&!ed,eu=null!=(g=null!=(h=null!=M?M:ec?null==(t=R.pageThemes)?void 0:t.podcast:null==ed?void 0:ed.pageTheme)?h:null==(n=R.theme)?void 0:n.section_template)?g:null,ep=A&&!ed?N:null==Q||null==(u=Q[null!=(Y=null==ed?void 0:ed.id)?Y:0])?void 0:u.newPosts,eh=null==Q||null==(p=Q[null!=(b=null==ed?void 0:ed.id)?b:0])?void 0:p.pinnedPosts,em=null!=(y=[...null!=eh?eh:[],...null!=ep?ep:[]][0])?y:null,[eg,ev]=(0,a.useState)(em?{[ed?ed.id:"pubPodcast"]:em}:{}),[eY,ef]=(0,a.useState)(!1),eb=null!=(_=eg[ed?ed.id:"pubPodcast"])?_:null,ey=(0,a.useCallback)(e=>{let{post:t}=e;eb||(t?(ev(e=>(0,l._)((0,i._)({},e),{[ed?ed.id:"pubPodcast"]:t})),ef(!1)):ef(!0))},[eb,ed]);if((0,a.useEffect)(()=>{B&&"undefined"!=typeof window&&(0,c.Ay)(B)},[B]),!ed&&!A)return console.warn("Should be either a section or podcast or both"),null;let e_=null;if((A||(null==ed?void 0:ed.is_podcast))&&(e_=ed?(0,Z.lL)({pub:R,section:ed}):(0,Z.j_)({pub:R})),(0,f.lu)({pub:R})&&(A||ed))return(0,r.Y)(d.N,{freeSignup:D,freeSignupEmail:P,isPodcast:!!A,newPosts:ep,pub:R,scheduledLiveStreams:null==Q||null==(w=Q[null!=(C=null==ed?void 0:ed.id)?C:0])?void 0:w.scheduledLiveStreams,section:null!=ed?ed:null,user:H,utm:W},null!=(I=null==ed?void 0:ed.id)?I:-1);let ew=(0,f.s7)({pub:R,includeTheRampart:!0})&&e_,eC=(0,r.Y)(X.l,{blurbs:S,freeSignup:D,freeSignupEmail:P,hide_intro_popup:T,isPodcast:A,launchWelcomePage:V,pub:R,referralCode:L,showWelcome:q,user:H});if(ew&&e_&&ed)return(0,r.Y)(E,{newPosts:ep,pinnedPosts:eh,podcastSettings:e_,pub:R,search:O,section:ed,sort:U,user:H,utm:W,welcomeAndShareElement:ee?null:eC});let eI=eu;eI||(eI=((null==ed?void 0:ed.is_podcast)||A)&&!eY?{hero_alignment:"left",page_hero:"feature-media",page_posts:"grid",show_podcast_links:!1}:{hero_alignment:"left",page_hero:"default",page_posts:"list",show_podcast_links:!1}),eI.page_hero=$(eI.page_hero);let ek=2,eS="grid"===(eI=(0,i._)({},eI,A?ea:es)).page_posts?3:2;return"feature-media"===eI.page_hero?"grid"===eI.page_posts?ek=eS=en?3:4:"list"===eI.page_posts&&(ek=3,eS=2):ek=eS,(0,r.Y)(K.XL,{pub:R,children:(0,r.Y)(s.DH,{children:(0,r.FD)(x.c,{columns:4,paddingTop:"podcast"===eI.page_hero||"feature-media"===eI.page_hero?0:void 0,children:[(0,r.Y)(F.PageMetaData,{isPodcast:A,pub:R,section:ed}),(0,r.Y)(G,{columns:ek,firstPost:eb,heroAlignment:eI.hero_alignment,podcastSettings:e_,pub:R,section:ed,showPodcastLinks:eI.show_podcast_links,user:H,utm:W,variant:eI.page_hero}),(0,r.Y)(v.I1,{opacity:"feature-media"!==eI.page_hero||eb?100:0,paddingBottom:32,paddingTop:et?24:32,children:(0,r.Y)(j,{columns:eS,isPodcast:!!A,newPosts:ep,pinnedPosts:eh,pub:R,search:O,section:ed,sort:U,user:H,utm:W,variant:eI.page_posts,onChangeFirstPost:ey},null!=(k=null==ed?void 0:ed.id)?k:-1)}),!ee&&eC]})})})},$=e=>null!=e?e:"default"},57961:function(e,t,n){n.d(t,{l:()=>h});var i=n(4006),l=n(17402),r=n(9266),o=n(58398),a=n(12215);let s=["astralcodexten","thecoddlingmovie","bariweiss","theprepress"];var d=n(41086),c=n(82776),u=n(68349),p=n(39318);let h=e=>{let{blurbs:t,freeSignup:n,freeSignupEmail:h,hide_intro_popup:m,pub:g,referralCode:v,showWelcome:Y,user:f,launchWelcomePage:b}=e,[y,_]=(0,l.useState)(!1),w=(e=>{let{pub:t,user:n,freeSignup:i}=e,l=new Date(Date.now()-864e5);if((0,d.y)("no_cover")||(0,d.y)("hide_intro_popup"))return!0;if((0,d.y)("showWelcome"))return!1;if("share"===(0,d.y)("action")||(0,d.y)("accepting_gift")||!t||s.includes(t.subdomain)||i||n&&(n.is_free_subscribed||n.is_subscribed||n.is_contributor))return!0;let r=a.get("intro_popup_last_hidden_at");return!!(r&&new Date(r)>=l||"undefined"!=typeof navigator&&(0,c.isSearchEngineCrawlerQuick)(navigator.userAgent))})({pub:g,user:f,freeSignup:n});return(0,l.useEffect)(()=>{"share"===(0,d.y)("action")&&(window.history.replaceState({},document.title,(0,p.oRR)({action:null})),_(!0)),"undefined"!=typeof window&&Y&&(0,u.qm)("showWelcome")},[Y]),(0,i.FD)(i.FK,{children:[(0,i.Y)(o.Z,{isOpen:y,medium:"web",pub:g,user:f,onClose:()=>_(!1)}),(0,i.Y)(r.Ay,{blurbs:t,freeSignup:n,freeSignupEmail:h,hidden:m||y||w,launchWelcomePage:b,publication:g,referralCode:v,showOnMount:Y,user:f})]})}},91704:function(e,t,n){n.d(t,{i:()=>o});var i=n(69277);let l={sm:{size:15,lineHeight:20},md:{size:19,lineHeight:26},lg:{size:30,lineHeight:38},mobileMd:{size:17,lineHeight:24},mobileLg:{size:30,lineHeight:38}},r={sinocism:{sm:{size:13,lineHeight:20},md:{size:16,lineHeight:24},lg:{size:27,lineHeight:36},mobileMd:{size:16,lineHeight:24},mobileLg:{size:27,lineHeight:36}},thepillar:{sm:{size:16,lineHeight:20,fontFamily:"Georgia, serif"},md:{size:22,lineHeight:28,fontFamily:"Georgia, serif"},lg:{size:36,lineHeight:42,fontFamily:"Georgia, serif"},mobileMd:{size:20,lineHeight:26,fontFamily:"Georgia, serif"},mobileLg:{size:28,lineHeight:36,fontFamily:"Georgia, serif"}}},o=e=>{let{preset:t,pub:n}=e;return(n?(0,i._)({},l,r[n.subdomain]):l)[t]}},11574:function(e,t,n){n.d(t,{$:()=>f});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(70103),d=n(78956),c=n(15894),u=n(77433),p=n(68410),h=n(80098),m=n(60355),g=n(76977),v=n(49807),Y=n(45663);let f=e=>{let{posts:t,title:n,variant:o,viewAllUrl:a,headerVariant:s="align-left-with-see-all"}=e,d={posts:t,title:n,viewAllUrl:a,headerVariant:s};switch(o){case"special-feature":return(0,r.Y)(b,(0,i._)({},d));case"large-in-middle":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"middle"}));case"large-on-left":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"left"}));case"large-on-right":return(0,r.Y)(w,(0,l._)((0,i._)({},d),{largeColumnPosition:"right"}));default:return null}},b=e=>{let{posts:t,title:n}=e,{isMobile:i,isTablet:l,isDesktop:o}=(0,p.sM)();return i?(0,r.Y)(y,{posts:t,title:n}):(0,r.FD)("div",{children:[(0,r.Y)(_,{title:n}),(0,r.FD)(h.P,{hideVerticalDividers:!0,variant:"one-column-two-column-one-column",children:[t[0]&&(0,r.Y)(m.R,{align:o?"center":"left",post:t[0],showImageLast:o,titlePreset:"h2-serif",variant:"large"}),(0,r.Y)(d.A,{paddingTop:64*!!o,children:t.slice(1,l?5:3).map(e=>(0,r.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),o&&(0,r.Y)(d.A,{paddingTop:64,children:t.slice(3,5).map(e=>(0,r.Y)(m.R,{align:"center",hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))})]}),(0,r.Y)("div",{className:Y.A.threeColumnContainer,children:t.slice(5,8).map(e=>(0,r.Y)(g.I1,{borderTop:"detail-themed",paddingTop:24,children:(0,r.Y)(m.R,{align:"center",hideDescription:!0,hideImage:!0,post:e,variant:"square"})}))})]})},y=e=>{let{title:t,posts:n}=e;return(0,r.FD)("div",{children:[(0,r.Y)(_,{title:t}),(0,r.FD)(g.I1,{gap:32,children:[n[0]&&(0,r.Y)(m.R,{align:"left",post:n[0],titlePreset:"h2-serif",variant:"large"}),(0,r.Y)(s.Z,{children:n.slice(1,5).map(e=>(0,r.Y)(m.R,{hideDescription:!0,post:e,titlePreset:"h5-sans",variant:"square"}))}),(0,r.Y)(d.A,{gap:16,includeTopDivider:!0,children:n.slice(5,8).map(e=>(0,r.Y)(m.R,{post:e,variant:"mini"}))})]})]})},_=e=>{let{title:t}=e,{isMobile:n}=(0,p.sM)(),i="America at 250"===t;return(0,r.FD)(g.Ye,{alignItems:"center",className:Y.A.specialFeatureHeaderContainer,gap:20,paddingBottom:n?28:56,children:[(0,r.Y)("div",{className:i?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule}),i?(0,r.Y)("a",{className:Y.A.america250HomepageHeader,href:"/america250",children:(0,r.Y)("img",{className:Y.A.a250Logo,src:(0,v.dJ9)("".concat((0,v.Ewe)(),"/img/thefp/a250_homepage.png"),500,{quality:"auto:good",crop:"limit"}),width:446})}):(0,r.Y)(c.T,{color:"accent",preset:"st3",children:t}),(0,r.Y)("div",{className:i?a()(Y.A.thickRule,Y.A.a250Rule):Y.A.thickRule})]})},w=e=>{let{largeColumnPosition:t,posts:n,title:i,viewAllUrl:l,headerVariant:o}=e,{isMobile:a,isTablet:s,isDesktop:c}=(0,p.sM)();return a?(0,r.Y)(C,{headerVariant:o,posts:n,title:i,viewAllUrl:l}):(0,r.FD)(g.I1,{gap:28,children:[(0,r.Y)(u.M,{title:i,titlePreset:"st2",variant:o,viewAllUrl:l}),(0,r.FD)(h.P,{hideVerticalDividers:!0,variant:{middle:"one-column-two-column-one-column",left:"two-column-one-column-one-column",right:"one-column-one-column-two-column"}[t],children:[n[0]&&(0,r.Y)(m.R,{align:"left",post:n[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.Y)(d.A,{paddingTop:40*!!c,children:n.slice(1,s?5:3).map(e=>(0,r.Y)(m.R,{hideDescription:s,post:e,variant:"square"}))}),c&&(0,r.Y)(d.A,{paddingTop:40,children:n.slice(3,5).map(e=>(0,r.Y)(m.R,{post:e,variant:"square"}))})]})]})},C=e=>{let{posts:t,title:n,viewAllUrl:i,headerVariant:l}=e;return(0,r.FD)(g.I1,{gap:20,children:[(0,r.Y)(u.M,{title:n,titlePreset:"st2",variant:l,viewAllUrl:i}),(0,r.FD)(g.I1,{gap:32,children:[t[0]&&(0,r.Y)(m.R,{align:"left",post:t[0],titlePreset:"h3-condensed",variant:"large"}),(0,r.Y)(s.Z,{children:t.slice(1,5).map(e=>(0,r.Y)(m.R,{hideDescription:!0,post:e,variant:"square"}))})]})]})}},77433:function(e,t,n){n.d(t,{M:()=>p});var i=n(69277),l=n(32641),r=n(4006),o=n(63446),a=n(15894),s=n(84605),d=n(68410),c=n(76977),u=n(45663);let p=e=>{var{variant:t="align-left-with-see-all"}=e,n=(0,l._)(e,["variant"]);return"align-left-with-see-all"===t?(0,r.Y)(h,(0,i._)({},n)):(0,r.Y)(m,(0,i._)({},n))},h=e=>{let{titlePreset:t,title:n,viewAllUrl:i}=e,{iString:l}=(0,s.GO)(),{isMobile:p}=(0,d.sM)();return(0,r.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.Y)(a.T,{preset:t,children:n}),(0,r.FD)(c.Ye,{alignItems:"end",flex:"grow",children:[(0,r.Y)("div",{className:u.A.mediumRule}),i&&(p?(0,r.Y)(c.Ye,{className:u.A.headerButtonMobile,position:"absolute",children:(0,r.Y)(o.v,{href:i,size:"md",trailingIcon:"chevron-right",variant:"tertiary",children:l("See all")})}):(0,r.Y)(o.v,{href:i,trailingIcon:"chevron-right",children:l("See all")}))]})]})},m=e=>{let{titlePreset:t,title:n}=e;return(0,r.FD)(c.Ye,{alignItems:"baseline",flex:"grow",gap:16,position:"relative",children:[(0,r.Y)("div",{className:u.A.mediumRule}),(0,r.Y)(a.T,{preset:t,children:n})]})}},28528:function(e,t,n){n.d(t,{XL:()=>c,np:()=>u,wZ:()=>d});var i=n(69277),l=n(70408),r=n(4006),o=n(69843),a=n.n(o),s=n(17402);let d=(0,s.createContext)({authorPagesEnabled:!1,cropGravity:"center",disableInteractive:!1,hideUfi:!1,highlightByline:!1,linkToComments:!1,pub:null,modifiedPosts:{},showPinForPostIds:new Set,user:null,onChangePost:()=>void 0,onUnpinPost:()=>void 0}),c=e=>{let{actionsClassName:t,authorPagesEnabled:n,children:o,cropGravity:c,disableInteractive:u,hideUfi:p,highlightByline:h,linkToComments:m,postPreviewUrl:g,pub:v,showPinForPostIds:Y,showSectionOrTag:f,user:b,utm:y,onClickPost:_,onToggleMenu:w,onUnpinPost:C}=e,I=(0,s.useContext)(d),[k,S]=(0,s.useState)({}),D=(0,s.useCallback)(e=>{let{post:t}=e;S(e=>(0,l._)((0,i._)({},e),{[t.id]:t}))},[]);return(0,r.Y)(d.Provider,{value:(0,l._)((0,i._)({},I,a()(t)?null:{actionsClassName:t},a()(n)?null:{authorPagesEnabled:n},a()(c)?null:{cropGravity:c},a()(u)?null:{disableInteractive:u},a()(p)?null:{hideUfi:p},a()(h)?null:{highlightByline:h},a()(m)?null:{linkToComments:m},a()(g)?null:{postPreviewUrl:g},a()(v)?null:{pub:v},a()(Y)?null:{showPinForPostIds:Y},a()(f)?null:{showSectionOrTag:f},a()(b)?null:{user:b},a()(y)?null:{utm:y},a()(_)?null:{onClickPost:_},a()(w)?null:{onToggleMenu:w},a()(C)?null:{onUnpinPost:C}),{modifiedPosts:k,onChangePost:D}),children:o})},u=()=>{let e=(0,s.useContext)(d);if(!e.pub)throw Error("No pub provided to PostPreviewContext");return e}},31856:function(e,t,n){n.d(t,{z:()=>a});var i=n(4006),l=n(88553),r=n(22602),o=n(22232);let a=e=>{let{aspectRatio:t=l.H9,radius:n="xs",width:a}=e,s=a?{width:a,height:a/t}:{width:"100%",paddingBottom:"".concat(100/t,"%"),position:"relative"};return(0,i.FD)("div",{className:o.A.noAnimation,style:s,children:[!a&&(0,i.Y)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:(0,i.Y)(r.O,{height:"100%",radius:n,width:"100%"})}),a&&(0,i.Y)(r.O,{height:"100%",radius:n,width:"100%"})]})}},67190:function(e,t,n){n.d(t,{x:()=>a});var i=n(4006),l=n(22602),r=n(22232);let o={sm:12,md:16,lg:24},a=e=>{let{size:t="md",width:n}=e;return(0,i.Y)("div",{className:r.A.noAnimation,children:(0,i.Y)(l.O,{height:o[t],radius:"xs",width:n})})}},98002:function(e,t,n){n.d(t,{z:()=>q});var i=n(69277),l=n(70408),r=n(32641),o=n(79785),a=n(4006),s=n(32485),d=n.n(s),c=n(17402),u=n(84605),p=n(68349),h=n(68410),m=n(28528),g=n(41935),v=n(76977),Y=n(82776);let f=e=>{let{justified:t,post:n}=e,{actionsClassName:i,pub:l,user:r,onChangePost:o,onToggleMenu:s}=(0,m.np)(),d="restack"===n.type;return d?null:(0,a.Y)(v.I1,{className:i,children:(0,a.Y)(g.xx,{allowEdit:!d,editButtonIsLast:!0,hideComments:!(0,Y.showCommentsOnPost)({publication:l,post:n}),hideReactions:!l.community_enabled,hideShare:d,isStatic:!1,justified:t,labelStyle:"counts-or-none",position:"pub-preview",post:n,pub:l,showRestackButton:!0,style:"compressed",user:r,onChange:o,onToggleMenu:s})})};var b=n(84032),y=n(74762),_=n(63136),w=n(65942),C=n(4016);let I=e=>{let{align:t,clamp:n,lineHeight:i=20,maxLength:l=152,paddingBottom:r,post:o,size:s=14,textWrap:d}=e,{postPreviewUrl:c,pub:u}=(0,m.np)();return(0,a.Y)(v.I1,{paddingBottom:r,children:(0,a.Y)(_.EY,{align:t,as:"a",clamp:n,color:"primary",font:"text",href:c,lineHeight:i,size:s,style:(0,C.S2)({pub:u})?{fontFamily:"Georgia, serif"}:void 0,tabIndex:-1,textWrap:d,children:(0,w.A)((0,Y.truncateWords)(o.description,l))})})};var k=n(38970),S=n.n(k),D=n(99862),F=n(49807);let P=e=>{var t,n;let{paddingBottom:i,post:l}=e,{pub:r,showSectionOrTag:o}=(0,m.np)();if(!o)return null;let s=null,d=null;if(l.section_id){let e=r.sections.find(e=>e.id===l.section_id);e&&(s=e.name,d=(0,F.Dor)(r,{section:e}))}else if(null==(t=l.postTags)?void 0:t.length){let e=S()(r.navigationBarItems.filter(e=>e.postTag).map(e=>e.postTag),"id"),t=null==(n=l.postTags)?void 0:n.find(t=>e[t.id]);t&&(s=t.name,d=(0,F.ii9)(r,t))}return s&&d?(0,a.Y)(v.pT,{paddingBottom:i,children:(0,a.Y)(_.EY.Meta,{as:"a",color:"primary",href:d,onClick:e=>{e.stopPropagation(),e.preventDefault(),(0,D.route)(d)},children:s})}):null};var x=n(71834),T=n(88553),A=n(56262);let E=e=>{let{isSmall:t,post:n}=e,{hideUfi:i}=(0,m.np)(),{isTablet:l}=(0,h.sM)(),r=!!(0,A.getCoverImageUrl)(n);return(0,a.FD)("div",{className:d()("container-m3tNBN",{"containerNoImage-bRvPTc":!r}),children:[r&&(0,a.Y)(y.t,{className:"image-e4U1t2",imageAspectRatio:t?T.fg:T.H9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:72,post:n,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center",className:"content-jHL69Q",justifyContent:"center",paddingBottom:64*!r,paddingTop:r?24:64,paddingX:r?32:64,children:[(0,a.Y)(P,{paddingBottom:4,post:n}),(0,a.Y)(x.Z,{align:"center",clamp:3,paddingBottom:8,post:n,preset:l?"mobileLg":"lg",preventOrphans:!0}),(0,a.Y)(I,{align:"center",clamp:3,lineHeight:24,paddingBottom:8,post:n,size:17}),(0,a.Y)(b.xx,{post:n}),!i&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:n})})]})]})};var N=n(31856),B=n(86500),M=n(82772),R=n(27437),L=n(67190);let O=e=>{let{variant:t}=e;switch(t){case"mini":case"mini-episode":case"mini-video":return(0,a.Y)(v.I1,{gap:4,padding:8,paddingBottom:36,children:(0,a.FD)(v.Ye,{gap:12,children:[(0,a.FD)(v.I1,{flex:"grow",gap:8,paddingTop:4,children:[(0,a.Y)(L.x,{size:"sm",width:"80%"}),(0,a.Y)(L.x,{size:"sm",width:"50%"})]}),(0,a.Y)(N.z,{aspectRatio:1,width:64})]})});case"listing":return(0,a.Y)(v.I1,{gap:8,padding:8,paddingBottom:56,children:(0,a.FD)(v.Ye,{gap:16,children:[(0,a.FD)(v.I1,{flex:"grow",gap:8,children:[(0,a.Y)(L.x,{width:"70%"}),(0,a.Y)(L.x,{width:"80%"}),(0,a.Y)(L.x,{width:"50%"})]}),(0,a.Y)(N.z,{aspectRatio:T.fg,width:160})]})});case"square":return(0,a.FD)(v.I1,{padding:8,style:{paddingBottom:90,gap:18},children:[(0,a.Y)(N.z,{aspectRatio:T.fg}),(0,a.FD)(v.I1,{flex:"grow",style:{gap:10},children:[(0,a.Y)(L.x,{width:"80%"}),(0,a.Y)(L.x,{width:"90%"}),(0,a.Y)(L.x,{width:"50%"})]})]});case"large":case"jumbo":case"jumbo-small":case"mobile-hero":return(0,a.FD)(v.I1,{gap:16,padding:8,children:[(0,a.Y)(N.z,{aspectRatio:T.H9}),(0,a.FD)(v.I1,{gap:8,children:[(0,a.Y)(L.x,{width:"20%"}),(0,a.Y)(L.x,{width:"90%"}),(0,a.Y)(L.x,{width:"75%"}),(0,a.Y)(L.x,{width:"35%"})]})]});default:return null}};function z(){let e=(0,o._)(["Post preview for ",""]);return z=function(){return e},e}let U={jumbo:E,"jumbo-small":e=>(0,a.Y)(E,(0,l._)((0,i._)({},e),{isSmall:!0})),large:e=>{let{align:t="center",hideImage:n,imageAspectRatio:i="standard",post:l}=e,{hideUfi:r,pub:o}=(0,m.np)();return(0,a.FD)(v.I1,{children:[!n&&(0,a.Y)(y.t,{className:"image-QTMr_S",imageAspectRatio:"wide"===i?T.H9:T.fg,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:l,squareImageSize:"large"}),(0,a.FD)(v.I1,{alignItems:"center"===t?"center":"start",flex:"grow",justifyContent:(0,C.S2)({pub:o})?"start":"center",paddingBottom:0,paddingTop:32,paddingX:16*("left"!==t),children:[(0,a.Y)(P,{paddingBottom:4,post:l}),(0,a.Y)(x.Z,{align:t,clamp:4,paddingBottom:8,post:l,preset:"lg",preventOrphans:!0,textWrap:"balance"}),(0,a.Y)(I,{align:t,clamp:2,lineHeight:(0,C.S2)({pub:o})?28:24,paddingBottom:8,post:l,size:(0,C.S2)({pub:o})?20:17,textWrap:"balance"}),(0,a.Y)(b.xx,{post:l}),!r&&(0,a.Y)(v.I1,{paddingTop:8,children:(0,a.Y)(f,{post:l})})]})]})},listing:e=>{let{hideImage:t,post:n}=e,{hideUfi:i,pub:l}=(0,m.np)(),{isMobile:r}=(0,h.sM)(),o=!!l.community_enabled;return t&&!r&&(o=!1),(0,a.FD)("div",{className:d()("container-Qnseki",{"container--no-image-zKZVLo":t}),children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,position:"relative",children:[(0,a.Y)(P,{post:n}),(0,a.Y)(x.Z,{clamp:3,post:n,preset:r?"mobileMd":"md"}),!(0,C.S2)({pub:l})&&(0,a.Y)(I,{clamp:2,lineHeight:t?24:20,post:n,size:15}),(0,a.Y)(b.xx,{post:n}),!i&&(0,a.Y)(f,{justified:o,post:n})]}),!t&&(0,a.Y)("div",{children:n.cover_image?(0,a.Y)(y.t,{className:"image-tkPTAj",imageAspectRatio:r?1:T.fg,imageWidth:r?150:320,isBelowTheFold:!0,playButtonSize:r?32:40,post:n,squareImageSize:"small"}):(0,a.Y)(N.z,{aspectRatio:r?1:T.fg,width:r?72:160})})]})},mini:e=>{let{post:t}=e,{hideUfi:n,pub:i}=(0,m.np)(),l=!!i.community_enabled;return(0,a.FD)(v.I1,{gap:4,children:[(0,a.FD)(v.Ye,{gap:12,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(P,{post:t}),(0,a.Y)(x.Z,{clamp:2,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]}),(0,a.Y)(y.t,{className:"image-tBOtsv",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t})]}),!n&&(0,a.Y)(f,{justified:l,post:t})]})},"mini-episode":e=>{let{post:t}=e,n=(0,c.useRef)(null);return(0,M.S8)(n,()=>{(0,B.u4)(B.qY.RECENT_EPISODE_ITEM_SEEN,{post_id:t.id})}),(0,a.FD)(v.Ye,{ref:n,gap:16,children:[(0,a.Y)(y.t,{className:"image-UySkN_",hidePlaceholder:!0,hideTimestamp:!0,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!1,playButtonSize:32,post:t}),(0,a.FD)(v.I1,{flex:"grow",children:[(0,a.Y)(x.Z,{clamp:2,paddingBottom:4,post:t,preset:"sm"}),(0,a.Y)(b.xx,{clamp:1,post:t})]})]})},"mini-video":e=>{let{post:t}=e;return(0,a.FD)(v.Ye,{gap:16,children:[(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[t.section_name?(0,a.Y)(_.EY.Meta,{color:"accent",children:t.section_name}):null,(0,a.Y)(_.EY.B3,{clamp:2,color:"primary",weight:"semibold",children:t.title}),(0,a.Y)(_.EY.Meta,{color:"secondary",children:t.publishedBylines.map((e,t)=>(0,a.FD)(a.FK,{children:[t>0?", ":null,(0,a.Y)(R.ProfileHoverCard,{disabled:!1,subject:e,trigger:(0,a.Y)(_.EY,{as:"a",decoration:"hover-underline",children:e.name}),utmSource:"byline"})]}))})]}),(0,a.Y)(y.t,{className:"image-XZMKsB",hidePlaceholder:!0,hideTimestampIcon:!0,imageAspectRatio:T.fg,imageWidth:120,isBelowTheFold:!1,playButtonSize:null,post:t})]})},"mobile-hero":e=>{let{hidePlaceholder:t,post:n}=e,{hideUfi:i,pub:l}=(0,m.np)(),r=!!l.community_enabled;return(0,a.FD)(v.I1,{children:[n.cover_image&&(0,a.Y)(y.t,{className:"image-vqosjM",hidePlaceholder:t,imageAspectRatio:T.H9,imageWidth:1250,isBelowTheFold:!1,playButtonSize:72,post:n,squareImageSize:"large"}),(0,a.FD)(v.I1,{flex:"grow",justifyContent:"center",paddingTop:16,paddingX:16,children:[(0,a.Y)(P,{paddingBottom:4,post:n}),(0,a.FD)(v.I1,{gap:8,paddingBottom:12,children:[(0,a.Y)(x.Z,{clamp:3,post:n,preset:"mobileLg",preventOrphans:!0}),(0,a.Y)(I,{clamp:3,lineHeight:20,post:n,size:15}),(0,a.Y)(b.xx,{post:n})]}),!i&&(0,a.Y)(f,{justified:r,post:n})]})]})},square:e=>{let{hideDescription:t,hideImage:n,post:i}=e,{hideUfi:l,pub:r}=(0,m.np)(),o=!!r.community_enabled,s=t||(0,C.S2)({pub:r});return(0,a.FD)(v.I1,{gap:12,children:[!n&&(0,a.Y)(y.t,{className:d()("image-Ac018u"),imageAspectRatio:T.fg,imageWidth:600,isBelowTheFold:!0,playButtonSize:56,post:i,squareImageSize:"medium"}),(0,a.FD)(v.I1,{flex:"grow",gap:4,children:[(0,a.Y)(P,{post:i}),(0,a.Y)(x.Z,{clamp:3,post:i,preset:"md"}),!s&&(0,a.Y)(I,{clamp:1,post:i}),(0,a.Y)(b.xx,{post:i}),!l&&(0,a.Y)(f,{justified:o,post:i})]})]})}},q=e=>{var t,{linkToComments:n,post:o,testid:s,variant:g,onClick:Y}=e,f=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{iTemplate:b}=(0,u.GO)(),{isMobile:y}=(0,h.sM)(),{disableInteractive:_,pub:w,modifiedPosts:I,utm:k}=(0,m.np)(),[S,D]=(0,c.useState)(!1),[F,P]=(0,c.useState)(!1),x=(0,c.useCallback)(e=>{let{active:t}=e;D(!!t)},[]);if(!o)return(0,a.Y)(v.I1,{style:{width:"100%"},children:(0,a.Y)(O,{variant:g})});let A=null!=(t=I[o.id])?t:o,E=U[g];if(!E)return console.warn("PostPreview: ".concat(g," not implemented")),null;let N=(0,T.Uv)({linkToComments:!!n,post:A,pub:w,utm:k});return(0,a.Y)(m.XL,{actionsClassName:d()("actions-YFg47u",{"actions--menu-open-bDkeVH":S||F}),hideUfi:(0,C.S2)({pub:w}),postPreviewUrl:N,onToggleMenu:x,children:(0,a.Y)(T.dn.Provider,{value:{setIsOnboarding:P},children:(0,a.Y)(v.I1,{"aria-label":b(z(),A.title),className:d()("container-H2dyKk",{"container--menu-open-RRT2Fw":S}),"data-testid":s,padding:8*!y,position:"relative",radius:"sm",role:"article",tabIndex:0,onClick:e=>{Y&&Y({event:e,post:A}),_||(0,p.V2)(N,{event:e})},children:(0,a.Y)(E,(0,l._)((0,i._)({},f),{post:A}))})})})}},84032:function(e,t,n){n.d(t,{xx:()=>D,aR:()=>P});var i=n(69277),l=n(70408),r=n(79785),o=n(4006),a=n(38970),s=n.n(a),d=n(27786),c=n(36066),u=n(27437),p=n(41935),h=n(84605),m=n(85478),g=n(28528),v=n(7761),Y=n(63136),f=n(16291),b=n(4016),y=n(56262),_=n(39318),w=n(82776);let C="icon-cvHqCn",I="link-HFGLqU",k="dividerChar-SbAJEi";function S(){let e=(0,r._)(["Published on ",""]);return S=function(){return e},e}let D=e=>{let{clamp:t,hideLock:n,post:i}=e,{iTemplate:l}=(0,h.GO)(),{getPubPinInfo:r,getSectionPinInfo:a}=(0,v.b$)(),{highlightByline:s,pub:u,user:p}=(0,g.np)(),{showPin:m}=r({post:i}),{showPin:f}=a({post:i}),_=(m||f)&&(!(0,b.S2)({pub:u})||!!(null==p?void 0:p.is_contributor)),I=!n&&(0,y.isPaidAudience)(i.audience)&&!(0,b.zM)({post:i})&&!(0,b.S2)({pub:u}),D=(0,w.getBylineUsers)(i);return(0,o.FD)(Y.EY.Meta,{clamp:t,color:"pub-secondary-text",display:"inline",children:[_&&(0,o.Y)("div",{className:C,children:(0,o.Y)(d.A,{size:12})}),I&&(0,o.Y)("div",{className:C,children:(0,o.Y)(c.A,{audience:i.audience,size:12})}),i.restacked_pub_name?(0,o.FD)(o.FK,{children:[(0,o.Y)("span",{children:l(S(),i.restacked_pub_name)}),"\xa0",(0,o.Y)("span",{className:k,children:""}),"\xa0"]}):null,(0,o.Y)(P,{post:i}),"restack"!==i.type&&D.length>0&&u.bylines_enabled&&(0,o.FD)(o.FK,{children:["\xa0",(0,o.Y)("span",{className:k,children:""}),"\xa0",(0,o.Y)(Y.EY,{as:"span",color:s?"accent":void 0,children:(0,o.Y)(F,{clamp:t,post:i,pub:u})})]})]})},F=e=>{let{post:t,clamp:n,pub:r}=e,a=(0,w.getBylineUsers)(t),{getConfigFor:d}=(0,m.mJ)(),c=!!d("enable_author_pages"),p=s()(r.contributors,"user_id"),h=e=>{let t=c?(0,_.cxh)({userId:e.id,pub:r}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:c?{href:void 0,onClick:void 0}:{href:(0,_.laT)(e,r),onClick:e=>e.stopPropagation()}},g=e=>{var t,n,i;return null!=(i=null!=(n=null==(t=p[e.id])?void 0:t.name)?n:e.name)?i:""};return(0,o.Y)(o.FK,{children:(0,w.oxfordComma)(a.map(e=>n?(0,o.Y)("a",(0,l._)((0,i._)({className:I},h(e)),{children:g(e)})):(0,o.Y)(u.ProfileHoverCard,{disabled:c,subject:e,trigger:h(e).href?(0,o.Y)("a",(0,l._)((0,i._)({className:I},h(e)),{children:g(e)})):(0,o.Y)("span",{className:"notLink-oAjaXn",children:g(e)}),utmSource:"byline"})),{noBreakSpace:!0})})},P=e=>{let{customFormat:t="MM.DD.YY",post:n}=e,{language:i}=(0,h.GO)(),{pub:l}=(0,g.np)();return(0,o.Y)("time",{className:"date-rtYe1v",dateTime:(0,f.A)(n.post_date).toISOString(),children:(0,b.lu)({pub:l})?(0,f.A)(n.post_date).format(t):(0,b.S2)({pub:l})?(0,f.A)(n.post_date).format("MMMM D, YYYY"):(0,p.sq)({post:n,showDatetime:!1,language:i})})}},74762:function(e,t,n){n.d(t,{t:()=>w});var i=n(4006),l=n(32485),r=n.n(l),o=n(49802),a=n(50802),s=n(17402),d=n(33764),c=n(85478),u=n(68410),p=n(28528),h=n(91694),m=n(73066),g=n(47885),v=n(76977),Y=n(13348),f=n(59294),b=n(56262),y=n(39318);let _={container:"container-XxSyR3",containerEmpty:"containerEmpty-GNvZRB",image:"image-nBNbRY","image-square-legacy":"image-square-legacy-jBVF2K",imageSquareLegacy:"image-square-legacy-jBVF2K",containerSquare:"containerSquare-M6P7XI","inner-wrapper":"inner-wrapper-ymo6T9",innerWrapper:"inner-wrapper-ymo6T9","inner-wrapper-small":"inner-wrapper-small-h1CnSS",innerWrapperSmall:"inner-wrapper-small-h1CnSS","inner-wrapper-medium":"inner-wrapper-medium-JvLb2H",innerWrapperMedium:"inner-wrapper-medium-JvLb2H","inner-wrapper-large":"inner-wrapper-large-ffUJx1",innerWrapperLarge:"inner-wrapper-large-ffUJx1","image-square":"image-square-b7oiFr",imageSquare:"image-square-b7oiFr","image-square-small":"image-square-small-v9eiR2",imageSquareSmall:"image-square-small-v9eiR2","image-square-medium":"image-square-medium-Z6HNx5",imageSquareMedium:"image-square-medium-Z6HNx5","image-square-large":"image-square-large-dp7_L9",imageSquareLarge:"image-square-large-dp7_L9"},w=e=>{var t,n,l,w,I;let{className:k,disableVideoHover:S,hidePlaceholder:D,hideTimestamp:F,hideTimestampIcon:P,imageAspectRatio:x,imageWidth:T,isBelowTheFold:A,playButtonSize:E,post:N,squareImageSize:B}=e,{cropGravity:M,pub:R}=(0,p.np)(),{getConfigFor:L}=(0,c.mJ)(),{isMobile:O}=(0,u.sM)(),z=L("show_entire_square_image"),U=(0,s.useRef)(null),[q]=(0,f.TR)(U),H=q&&!S,W=!!N.videoUpload,G=!!(!W&&"podcast"===N.type),K=(0,b.getCoverImageUrl)(N);!K&&((null==(w=N.videoUpload)?void 0:w.thumbnail_id)?K=(0,y.Pzx)(N.videoUpload):(null==(I=N.podcastUpload)?void 0:I.thumbnail_id)&&(K=(0,y.Pzx)(N.podcastUpload,{post:N})));let V=T<=640;if(!K&&D)return null;let j=T||x?x:1.32,X=T||336,J=!!K&&N.cover_image_is_square&&z,Z=J&&!!B&&(!O||"small"!==B),Q=A?"lazy":void 0,$=(0,b.getDurationForPostPreview)({post:N}),ee=!!(null==(t=N.videoUpload)?void 0:t.live_stream_id);return Z?(0,i.Y)(C,{aspectRatio:j,className:k,imageUrl:K,loading:Q,size:B,width:X}):(0,i.FD)("div",{ref:U,className:r()(k,_.container,{[String(_.containerEmpty)]:!K}),style:"aspect-ratio: ".concat(j),children:[(W||G)&&null!==E&&(0,i.Y)(v.Ye,{alignItems:"center",inset:0,justifyContent:"center",opacity:W&&H?0:100,position:"absolute",style:{transition:"opacity ".concat(V?"var(--animation-timing-fast)":"var(--animation-timing-slow)"," var(--animation-smooth)")},children:(0,i.Y)(Y.ro,{isPlaying:!1,size:E})}),W&&(V?(0,i.Y)(h.A,{aspectRatio:(null==(n=N.videoUpload)?void 0:n.width)&&(null==(l=N.videoUpload)?void 0:l.height)?N.videoUpload.width/N.videoUpload.height:j,containerRef:U,post:N,size:T>320?"large":"medium"}):(0,i.Y)(m.A,{isHovered:H,post:N,pub:R})),K?(0,i.Y)(d.o,{alt:"",className:r()(_.image,{[_["image-square-legacy"]]:J}),imageProps:j?{height:Math.round(X/j),smartCrop:!0,gravity:ee?"auto":M}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:Q,maxWidth:X,src:K,style:{aspectRatio:"".concat(j)}}):null,!!$&&!F&&(0,i.Y)(g.Y,{duration:$,icon:P?null:G?(0,i.Y)(o.A,{size:12,stroke:"white"}):(0,i.Y)(a.A,{size:14,stroke:"white"})})]})},C=e=>{let{aspectRatio:t,className:n,imageUrl:l,width:o,loading:a,size:s}=e;return(0,i.Y)("div",{className:r()(n,_.container,_.containerSquare),style:"aspect-ratio: ".concat(t),children:(0,i.Y)("div",{className:r()(_["inner-wrapper"],_["inner-wrapper-".concat(s)]),children:(0,i.Y)(d.o,{alt:"",className:r()(_.image,_["image-square"],_["image-square-".concat(s)]),imageProps:{height:o,smartCrop:!0,gravity:"center"},loading:a,maxWidth:o,src:l})})})}},70557:function(e,t,n){n.d(t,{X:()=>P});var i=n(4006),l=n(50802),r=n(49802),o=n(48635),a=n(17402),s=n(23623),d=n(41935),c=n(84236),u=n(84605),p=n(68349),h=n(68410),m=n(80098),g=n(38501),v=n(74762),Y=n(88553),f=n(89490),b=n(35369),y=n(76977),_=n(63136),w=n(13348),C=n(91496),I=n(7755),k=n(56262),S=n(82776);let D={container:"container-pFhu3n",containerNoImage:"containerNoImage-W5VZl3",videoLayer:"videoLayer-gwRrVN",contentLayer:"contentLayer-OGm4Y9",content:"content-iO1vNE",imageContainer:"imageContainer-ddA7f9",image:"image-deX_la",flippedImageContainer:"flippedImageContainer-rBB6TZ",flippedImage:"flippedImage-rChY0M",blurOverlay:"blurOverlay-xN2HYo",darkOverlay:"darkOverlay-jsLZzF",noImageBackground:"noImageBackground-gL1zkp",postTitleMobile:"postTitleMobile-ut7sIL"},F=(0,f.yw)({position:"absolute",inset:0,radius:"sm",pointerEvents:"none"}),P=e=>{let{columns:t,hideLogo:n,highlightPost:l=!1,isPodcast:r,post:o,pub:u,section:f,showPodcastLinks:b,user:w,utm:S}=e,P=(0,a.useRef)(null),{isMobile:A}=(0,h.sM)(),E=(0,k.getDurationForPostPreview)({post:o}),{title:N,description:B}=(0,I.ed)({pub:u,podcastUpload:o.podcastUpload,section:null!=f?f:null}),M=l?o.title:N,R=l?o.subtitle:B,L=!!o.cover_image,O=e=>{let t=(0,Y.Uv)({linkToComments:!1,post:o,pub:u,utm:S});(0,p.V2)(t,{event:e})};return A?(0,i.FD)(y.I1,{gap:12,children:[(0,i.Y)(y.I1,{onClick:O,children:(0,i.FD)(y.Ye,{ref:P,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,i.FD)(y.Ye,{className:D.videoLayer,direction:"column",position:"absolute",radius:"sm",children:[(0,i.Y)(y.Ye,{flex:"grow",position:"relative",style:{width:"100%"},children:(0,i.Y)(v.t,{className:D.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:P,squareImageSize:"large"})}),(0,i.Y)(y.Ye,{className:D.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,i.Y)(v.t,{className:D.flippedImage,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:P,squareImageSize:"large"})}),(0,i.Y)(F,{className:L?D.darkOverlay:D.noImageBackground}),L&&(0,i.Y)(y.Ye,{className:D.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,i.Y)(y.Ye,{className:D.contentLayer,pointerEvents:"none",position:"absolute",children:(0,i.Y)(s.a,{disable:!L,children:(0,i.Y)(y.Ye,{flex:"grow",children:(0,i.FD)(y.I1,{gap:16,padding:16,paddingBottom:24,children:[!n&&!l&&(0,i.Y)(C.M,{post:o,pub:u,section:null!=f?f:null,size:48,useSection:!r}),(0,i.FD)(y.I1,{gap:8,children:[(0,i.Y)(_.EY.H4,{color:"primary",font:"pub-headings",children:M}),(0,i.Y)(_.EY.B4,{clamp:2,className:D.descriptionMobile,color:"primary",children:R}),(0,i.Y)(y.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,i.Y)(x,{duration:E,hasImage:L,highlightPost:l,post:o}):(0,i.Y)(T,{hasImage:L,highlightPost:l,post:o})]})})})})]})}),(0,i.Y)(c.pJ,{align:"center",post:o,pub:u,section:f}),b&&r&&(0,i.Y)(g.D,{limit:2,post:o,pub:u,section:null!=f?f:null,stretch:!0,user:w})]}):(0,i.Y)(m.P,{variant:4===t?"full-width":"three-column-width",children:(0,i.FD)(y.I1,{gap:12,children:[(0,i.Y)(y.I1,{paddingX:8,onClick:O,children:(0,i.FD)(y.Ye,{ref:P,flex:"fill",position:"relative",style:{minHeight:400},children:[(0,i.Y)(y.Ye,{position:"absolute",style:{bottom:16,right:16,zIndex:1},children:(0,i.Y)(d.xx,{allowEdit:!0,hideComments:!0,hideFeedRestackButton:!0,hideReactions:!0,hideSavePost:!0,hideShare:!0,isStatic:!1,labelStyle:"counts-or-none",post:o,pub:u,style:"compressed",user:w,onChange:()=>void 0})}),(0,i.FD)(y.Ye,{position:"absolute",radius:"sm",style:{width:"100%",height:"100%"},children:[(0,i.Y)(y.Ye,{flex:"grow",position:"relative",children:(0,i.Y)(y.Ye,{className:D.flippedImageContainer,flex:"grow",overflow:"hidden",position:"relative",children:(0,i.Y)(v.t,{className:D.flippedImage,disableVideoHover:!0,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:P,squareImageSize:"large"})})}),(0,i.Y)(y.Ye,{className:D.imageContainer,position:"relative",children:(0,i.Y)(v.t,{className:D.image,hideTimestamp:!0,imageAspectRatio:16/9,imageWidth:1280,isBelowTheFold:!1,playButtonSize:null,post:o,presenceRef:P,squareImageSize:"large"})}),(0,i.Y)(F,{className:L?D.darkOverlay:D.noImageBackground}),L&&(0,i.Y)(y.Ye,{className:D.blurOverlay,inset:0,overflow:"hidden",pointerEvents:"none",position:"absolute",radius:"sm"})]}),(0,i.FD)(y.Ye,{pointerEvents:"none",position:"absolute",style:{width:"100%",height:"100%"},children:[(0,i.Y)(s.a,{disable:!L,children:(0,i.Y)(y.Ye,{flex:"grow",children:(0,i.Y)(y.I1,{justifyContent:n||l?"end":"center",padding:48,children:(0,i.FD)(y.I1,{gap:24,children:[!n&&!l&&(0,i.Y)(C.M,{post:o,pub:u,section:null!=f?f:null,size:72,useSection:!r}),(0,i.FD)(y.I1,{gap:8,children:[(0,i.Y)(_.EY.H2,{clamp:3,color:"primary",font:"pub-headings",children:M}),(0,i.Y)(_.EY.B4,{clamp:3,color:"primary",children:R}),(0,i.Y)(y.Ye,{flex:"grow"})]}),o.videoUpload||o.podcastUpload||o.podcast_url?(0,i.Y)(x,{duration:E,hasImage:L,highlightPost:l,post:o}):(0,i.Y)(T,{hasImage:L,highlightPost:l,post:o})]})})})}),(0,i.Y)(y.Ye,{flex:"grow",pointerEvents:"none"})]})]})}),(0,i.Y)(c.pJ,{align:"right",paddingX:8,post:o,pub:u,section:f}),b&&r&&(0,i.Y)(y.I1,{paddingX:8,children:(0,i.Y)(g.D,{post:o,pub:u,section:null!=f?f:null,stretch:!0,user:w})})]})})},x=e=>{let{duration:t,hasImage:n,highlightPost:o,post:s}=e,{iString:d}=(0,u.GO)(),{isMobile:c}=(0,h.sM)(),p=n?"white":"var(--color-text-primary)";return(0,i.FD)(y.Ye,{alignItems:"center",gap:c?16:24,pointerEvents:"auto",children:[(0,i.Y)(y.Ye,{flex:"auto",children:(0,i.Y)(w.ro,{isPlaying:!1,size:c?56:72})}),(0,i.Y)(y.Ye,{alignItems:"center",children:(0,i.FD)(y.I1,{children:[(0,i.FD)(y.Ye,{alignItems:"center",gap:4,children:[(0,i.Y)(y.Ye,{gap:4,width:16,children:s.videoUpload?(0,i.Y)(l.A,{size:14,stroke:p}):(0,i.Y)(r.A,{size:14,stroke:p})}),(0,i.Y)(_.EY.Meta,{color:"primary",children:d("LATEST")}),t>0&&(0,i.FD)(a.Fragment,{children:[(0,i.Y)(_.EY.Meta,{color:"primary",children:"\xb7"}),(0,i.Y)(_.EY.Meta,{color:"primary",children:(0,S.secondsToHHMMSS)(t)})]})]}),!o&&(0,i.Y)(_.EY.Meta,{color:"primary",children:s.title})]})})]})},T=e=>{let{hasImage:t,highlightPost:n,post:l}=e,{iString:r}=(0,u.GO)();return(0,i.FD)(y.Ye,{alignItems:"center",gap:16,pointerEvents:"auto",children:[(0,i.Y)(b.K0,{priority:t?"primary-mono":"primary",rounded:!0,size:"md",children:(0,i.Y)(o.A,{size:20})}),(0,i.FD)(y.I1,{children:[(0,i.Y)(_.EY.Meta,{color:"primary",children:r(n?"READ THE LATEST":"LATEST")}),!n&&(0,i.Y)(_.EY.B2,{clamp:1,color:"primary",weight:"semibold",children:l.title})]})]})}},98920:function(e,t,n){n.d(t,{Z:()=>d});var i=n(4006),l=n(17402),r=n(46271),o=n(88553),a=n(21398),s=n(62088);let d=e=>{let{displaySignInModal:t,onCloseSignInModal:d,isStatic:c,entry:u}=e,{setIsOnboarding:p}=(0,l.useContext)(o.dn),h=(0,l.useRef)(null),{user:m,setUser:g}=(0,r.ur)();return c?null:(0,i.FD)(i.FK,{children:[(0,i.Y)(s.M9,{isOpen:!!t,onCancel:d,onSignup:()=>{var e;d(),null==(e=h.current)||e.open()},onSuccess:()=>{document.location.reload()},onUserCreated:e=>{var t;d(),g(e),null==(t=h.current)||t.open()}}),(0,i.Y)(a.fG,{entry:u||"post-preview",innerRef:h,module:"@/frontend/reader/onboarding",noCloseButton:!!m,noExit:!!m,resolve:e=>e.ReaderOnboardingModal,skipRedirectOnExit:!0,user:m,onBeforeOpen:()=>{p&&p(!0)},onClose:()=>{m&&document.location.reload()},onRequest:()=>Promise.all([n.e("95611"),n.e("47222"),n.e("54020"),n.e("7047")]).then(n.bind(n,44502))})]})}},71834:function(e,t,n){n.d(t,{Z:()=>h});var i=n(69277),l=n(70408),r=n(4006),o=n(15052),a=n(91704),s=n(28528),d=n(76977),c=n(63136),u=n(4016),p=n(82776);let h=e=>{let{align:t,clamp:n,maxLength:h=140,noIcons:m,paddingBottom:g,post:v,preset:Y,preventOrphans:f,textWrap:b}=e,{linkToComments:y,postPreviewUrl:_,pub:w}=(0,s.np)(),{lineHeight:C,size:I,fontFamily:k}=(0,a.i)({preset:Y,pub:w}),S=(0,u.S2)({pub:w}),D=I>=28;return(0,r.Y)(d.I1,{paddingBottom:g,children:(0,r.FD)(c.EY,(0,l._)((0,i._)({},_?{as:"a",href:_,tabIndex:-1}:null),{align:t,clamp:S?void 0:n,color:"pub-primary-text","data-testid":"post-preview-title",font:"pub-headings",style:{fontSize:I,lineHeight:"".concat(C,"px"),fontFamily:k},textWrap:b,children:["thread"===v.type&&!m&&(0,r.Y)(o.A,{className:"icon-cUpv7d",height:D?26:17}),y&&"thread"!==v.type&&"Comments on: ",f?(0,p.preventOrphans)((0,p.truncateWords)(v.title,h)):(0,p.truncateWords)(v.title,h)]}))})}},73066:function(e,t,n){n.d(t,{A:()=>m});var i=n(4006),l=n(32485),r=n.n(l),o=n(63122),a=n(55584),s=n(17402),d=n(41873),c=n(25006),u=n(35369),p=n(76977),h=n(40345);let m=e=>{let{isHovered:t,post:n}=e,[l,m]=(0,s.useState)(!0),[g,v]=(0,s.useState)(!1),Y=(0,s.useRef)(null),f=(0,c.df)();return(0,s.useEffect)(()=>{var e,n,i,r,o,a,s,d,c,u;let p=()=>v(!0);return null==(n=Y.current)||null==(e=n.player)||e.addEventListener("loadedmetadata",p),t?(null==(o=Y.current)||null==(r=o.player)||null==(i=r.play)||i.call(r),(null==(a=Y.current)?void 0:a.player)&&(Y.current.player.volume=+!l)):(null==(c=Y.current)||null==(d=c.player)||null==(s=d.pause)||s.call(d),(null==(u=Y.current)?void 0:u.player)&&(Y.current.player.volume=0)),()=>{var e,t;null==(t=Y.current)||null==(e=t.player)||e.removeEventListener("loadedmetadata",p)}},[t]),f&&n.videoUpload&&t?(0,i.Y)("div",{className:r()(h.A.gifPreview,{[h.A.visible]:g}),children:(0,i.FD)(p.Ye,{alignItems:"center",justifyContent:"center",position:"relative",style:{width:"100%",height:"100%"},children:[(0,i.Y)(d.A,{ref:Y,autoPlay:!0,className:h.A.videoPlayerWrapper,contentType:"post",entityKey:n.id,entityType:"post",mediaUpload:n.videoUpload,noControls:!0,noPreview:!0,pub:f,surface:"publication",videoClassName:h.A.videoClassName,videoPlayerClassName:h.A.videoPlayerClassName,videoType:"post-preview"}),(0,i.Y)(p.Ye,{padding:12,position:"absolute",style:{top:0,right:0},children:(0,i.Y)(u.mZ,{onClick:e=>{var t;e.stopPropagation(),m(!l),(null==(t=Y.current)?void 0:t.player)&&(Y.current.player.volume=+!!l)},children:l?(0,i.Y)(o.A,{size:20}):(0,i.Y)(a.A,{size:20})})})]})}):null}},47173:function(e,t,n){n.d(t,{q:()=>h});var i=n(69277),l=n(70408),r=n(4006),o=n(32485),a=n.n(o),s=n(38970),d=n.n(s),c=n(85478),u=n(39318),p=n(82776);let h=e=>{let{post:t,clamp:n,pub:o}=e,s=(0,p.getBylineUsers)(t),{getConfigFor:h}=(0,c.mJ)(),m=!!h("enable_author_pages"),g=d()(o.contributors,"user_id"),v=e=>{let t=m?(0,u.cxh)({userId:e.id,pub:o}):null;return t?{href:t,onClick:e=>e.stopPropagation()}:m?{href:void 0,onClick:void 0}:{href:(0,u.laT)(e,o),onClick:e=>e.stopPropagation()}},Y=e=>{var t,n,i;return null!=(i=null!=(n=null==(t=g[e.id])?void 0:t.name)?n:e.name)?i:""};return(0,r.Y)("div",{className:a()("container-Mw45dL",{"containerSingleLine-xWghSN":1===n}),children:(0,p.oxfordComma)(s.map(e=>v(e).href?(0,r.Y)("a",(0,l._)((0,i._)({className:"link-iknc0_"},v(e)),{children:Y(e)})):(0,r.Y)("span",{className:"notLink-U0WbwD",children:Y(e)})),{noBreakSpace:!0})})}},60355:function(e,t,n){n.d(t,{R:()=>N});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(27786),c=n(61250),u=n(68349),p=n(28528),h=n(36027),m=n(68410),g=n(95294),v=n(15894),Y=n(76977),f=n(65942),b=n(82776);let y=e=>{let{align:t="left",clamp:n,color:i,paddingBottom:l,post:r,preset:a}=e,{postPreviewUrl:s}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:l,children:(0,o.Y)(v.T,{align:t,as:"a",clamp:n,color:i,href:s,preset:a,wrap:"center"===t?"balance":"pretty",children:(0,f.A)((0,b.truncateWords)(r.subtitle,152))})})},_=e=>{var{align:t="left",clamp:n,color:a,paddingBottom:d,post:c,preset:u,preventOrphans:h=!0}=e,m=(0,r._)(e,["align","clamp","color","paddingBottom","post","preset","preventOrphans"]);let{postPreviewUrl:g}=(0,p.np)(),f=(0,b.truncateWords)(c.title,140),y=h?(0,b.preventOrphans)(f):f;return(0,o.Y)(Y.I1,{paddingBottom:d,children:(0,o.Y)(v.T,(0,l._)((0,i._)({},m,g?{as:"a",href:g}:null),{align:t,clamp:n,className:s()("post-preview-title","title-vqpS7B",{"hoverColor-w9y2tS":"white"!==a}),color:a,preset:u,wrap:"center"===t?"balance":"pretty",children:y}))})};var w=n(61755);let C=e=>{let{post:t}=e,{pub:n,user:i,onChangePost:l}=(0,p.np)(),r=(0,b.showCommentsOnPost)({publication:n,post:t}),a=n.community_enabled,s=!!(null==i?void 0:i.is_contributor);return"restack"===t.type?null:(0,o.FD)(Y.Ye,{alignItems:"center",gap:6,children:[r&&(0,o.Y)(w.qS,{post:t,pub:n,size:"small"}),a&&(0,o.Y)(w.ct,{post:t,pub:n,size:"small",user:i,onChange:l}),s&&(0,o.Y)(w.xn,{context:"post-preview",post:t,pub:n,user:i})]})};var I=n(84032),k=n(47173);let S=e=>{let{align:t="left",color:n,paddingBottom:i,post:l,preset:r}=e,{pub:a}=(0,p.np)();return(0,o.Y)(Y.I1,{paddingBottom:i,children:(0,o.FD)(v.T,{align:t,color:null!=n?n:"sm-preview-byline"===r?"accent":void 0,preset:r,children:[(0,o.Y)(k.q,{post:l,pub:a}),"  ",(0,o.Y)(I.aR,{post:l})]})})};var D=n(88553);let F=e=>{let{align:t,hideDescription:n,hideImage:i,post:l,titlePreset:r}=e;return(0,o.FD)(Y.I1,{children:[!i&&(0,o.Y)(g.D,{className:"image-EaGmDd",imageAspectRatio:D.H9,imageWidth:600,isBelowTheFold:!0,post:l}),(0,o.FD)(Y.I1,{gap:4,paddingTop:8*!i,children:[(0,o.Y)(_,{align:t,post:l,preset:null!=r?r:i?"h5-serif":"h7-serif"}),!n&&(0,o.Y)(y,{align:t,clamp:3,post:l,preset:"d4-serif"}),(0,o.Y)(Y.I1,{alignItems:"center"===t?"center":"start",paddingY:4,children:(0,o.Y)(C,{post:l})}),(0,o.Y)(S,{align:t,post:l,preset:"sm-preview-byline"})]})]})};var P=n(13589);let x=e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{alignItems:"center",children:[(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:32,children:(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t})}),(0,o.Y)(_,{align:"center",color:"white",paddingBottom:32,post:t,preset:"h2-serif"}),(0,o.Y)(y,{align:"center",color:"white",paddingBottom:32,post:t,preset:"d1-sans-medium"}),(0,o.Y)(S,{color:"white",post:t,preset:"lg-preview-byline"})]})};var T=n(39318),A=n(92636);let E={archive:e=>{let{forceShowPlayButton:t,post:n}=e,{isMobile:i}=(0,m.sM)();return(0,o.FD)(Y.Ye,{gap:i?24:40,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:"image-YTYBVT",forceShowPlayButton:t,imageAspectRatio:1,imageWidth:150,isBelowTheFold:!0,post:n})}),(0,o.FD)(Y.I1,{gap:8*!i,overflow:"hidden",children:[(0,o.Y)(_,{post:n,preset:"h5-serif"}),(0,o.Y)(Y.I1,{flex:i?void 0:"grow",paddingBottom:16*!!i,children:(0,o.Y)(y,{clamp:3,post:n,preset:"d3-serif"})}),(0,o.Y)(h.E,{post:n})]})]})},"content-block-episode":e=>{let{post:t}=e,{isMobile:n}=(0,m.sM)();return n?(0,o.Y)(F,{align:"left",post:t,titlePreset:"h4-sans-condensed"}):(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(g.D,{className:"image-Vu2JCA",imageAspectRatio:22/31,imageWidth:440,isBelowTheFold:!0,post:t}),(0,o.FD)(Y.I1,{flex:"grow",gap:8,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-condensed"}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(C,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-listing":e=>{let{post:t,titlePreset:n="h6-sans"}=e,i="h4-sans-condensed"===n;return(0,o.FD)(Y.Ye,{gap:20,children:[(0,o.Y)(Y.I1,{flex:"auto",children:(0,o.Y)(g.D,{className:i?"image220-p05U5w":"image140-mQ92WN",imageAspectRatio:1,imageWidth:300,isBelowTheFold:!0,post:t})}),(0,o.FD)(Y.I1,{gap:i?8:4,children:[(0,o.Y)(_,{post:t,preset:n}),(0,o.FD)(Y.I1,{gap:8,children:[(0,o.Y)(y,{clamp:3,post:t,preset:"d4-serif"}),(0,o.Y)(C,{post:t}),(0,o.Y)(S,{post:t,preset:"sm-preview-byline"})]})]})]})},"content-block-single-large":e=>{let{post:t}=e,{isMobile:n}=(0,m.sM)(),[r,a]=(0,P.Mk)();return n?(0,o.Y)(x,{post:t}):(0,o.FD)(Y.Ye,{alignItems:"center",gap:40,children:[(0,o.FD)(Y.I1,{alignItems:"center",flex:"grow",children:[(0,o.Y)(S,{color:"white",paddingBottom:56,post:t,preset:"lg-preview-byline"}),(0,o.Y)(_,(0,l._)((0,i._)({},a),{align:"center",color:"white",paddingBottom:40,post:t,preset:"h2-serif"})),(0,o.Y)(Y.I1,{width:360,children:(0,o.Y)(y,{align:"center",color:"white",post:t,preset:"d1-sans-medium"})})]}),(0,o.Y)(Y.I1,{flex:"grow",children:(0,o.FD)(Y.I1,(0,l._)((0,i._)({},a),{className:"imageContainer-LhpEMl",position:"relative",children:[(0,o.Y)(g.D,{imageAspectRatio:4/3,imageWidth:700,isBelowTheFold:!0,post:t}),(0,o.Y)(Y.Ye,{className:"imageContainerOverlay-L73_9b",inset:0,position:"absolute",style:{opacity:+!!r}})]}))})]})},"event-page":e=>{let{post:t}=e;return(0,o.FD)(Y.I1,{gap:20,children:[(0,o.Y)(_,{post:t,preset:"h4-sans-regular"}),(0,o.Y)(g.D,{className:"image-J1_9gh",imageAspectRatio:16/9,imageWidth:660,isBelowTheFold:!0,post:t})]})},large:e=>{let{align:t="center",hideImage:n,imageAspectRatio:i="standard",post:l,showImageLast:r,titlePreset:a="h3-compressed"}=e,{isMobile:s}=(0,m.sM)(),d=!n&&(0,o.Y)(g.D,{className:"image-v6H72k",imageAspectRatio:"wide"===i?D.H9:"portrait"===i?3/4:D.fg,imageWidth:1250,isBelowTheFold:!1,post:l});return(0,o.FD)(Y.I1,{children:[!r&&d,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",justifyContent:"center",paddingBottom:8*!!r,paddingTop:r?0:s?16:32,paddingX:16*("left"!==t),children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:l,preset:a}),r&&(0,o.Y)(Y.I1,{alignSelf:"stretch",paddingBottom:8,children:d}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:s?8:12,children:[(0,o.Y)(y,{align:t,post:l,preset:"d2-serif"}),(0,o.FD)(Y.Ye,{alignItems:"center",gap:24,justifyContent:"center",children:[(0,o.Y)(S,{align:t,post:l,preset:"lg-preview-byline"}),(0,o.Y)(C,{post:l})]})]})]})]})},mini:e=>{let{clampTitle:t,hideUfi:n,post:i,showDescription:l,showStar:r}=e;return(0,o.FD)(Y.Ye,{alignItems:"start",gap:16,children:[r&&(0,o.Y)("img",{alt:"star",height:24,src:(0,T.dJ9)("".concat((0,A.Ew)(),"/img/thefp/thefp-star.svg")),width:24}),(0,o.FD)(Y.I1,{gap:4,children:[(0,o.Y)(_,{clamp:t,post:i,preset:"h6-serif"}),l&&(0,o.Y)(y,{clamp:3,post:i,preset:"d4-serif"}),!n&&(0,o.Y)(Y.I1,{paddingY:4,children:(0,o.Y)(C,{post:i})}),(0,o.Y)(S,{post:i,preset:"sm-preview-byline"})]})]})},portrait:e=>{let{align:t="center",hideImage:n,post:i,titlePreset:l="h3-compressed"}=e,{isMobile:r}=(0,m.sM)(),a=!n&&(0,o.Y)(g.D,{className:"image-UumsF2",imageAspectRatio:3/4,imageWidth:1250,isBelowTheFold:!1,post:i});return(0,o.FD)(Y.Ye,{className:"container-lZcN1f",gap:24,children:[a,(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",className:"text-WvW3re",justifyContent:"space-between",paddingBottom:0,paddingX:16*("left"!==t),children:[(0,o.FD)(Y.I1,{className:"contentWrapper-NnSZwz",justifyContent:"center",children:[(0,o.Y)(_,{align:t,paddingBottom:8,post:i,preset:l,preventOrphans:!1}),(0,o.Y)(y,{align:t,post:i,preset:"d2-serif"})]}),(0,o.FD)(Y.I1,{alignItems:"center"===t?"center":"start",gap:r?8:12,children:[(0,o.Y)(C,{post:i}),(0,o.Y)(S,{align:t,post:i,preset:"lg-preview-byline"})]})]})]})},square:F},N=e=>{var t,n,a,{linkToComments:h,post:m,testid:g,variant:v,onClick:f}=e,b=(0,r._)(e,["linkToComments","post","testid","variant","onClick"]);let{cropGravity:y,disableInteractive:_,pub:w,modifiedPosts:C,showPinForPostIds:I,utm:k,onClickPost:S,onUnpinPost:F}=(0,p.np)(),P=null!=(n=C[m.id])?n:m,x=!!(null==I?void 0:I.has(P.id)),T=null!=(a=null==(t=P.postTheme)?void 0:t.post_preview_crop_gravity)?a:y,A=E[v];if(!A)return console.warn("PostPreview: ".concat(v," not implemented")),null;let N=(0,D.Uv)({linkToComments:!!h,post:P,pub:w,utm:k});return(0,o.Y)(p.XL,{cropGravity:T,linkToComments:h,postPreviewUrl:N,children:(0,o.FD)(Y.I1,{className:s()("container-r9Uobv","post-preview-container"),"data-testid":g,position:"relative",radius:"sm",onClick:e=>{f&&f({event:e,post:P}),S&&S({event:e,post:P}),_||(0,u.V2)(N,{event:e})},children:[(0,o.Y)(A,(0,l._)((0,i._)({},b),{post:P})),x&&(0,o.FD)(Y.Ye,{bg:"white",className:"pinContainer-waOJ8r",padding:8,position:"absolute",radius:"xs",onClick:e=>{e.stopPropagation(),F({postId:P.id})},children:[(0,o.Y)(d.A,{className:"pinIcon-Ad2m5R",size:20}),(0,o.Y)(c.A,{className:"unpinIcon-vVpw5q",size:20})]})]})})}},95294:function(e,t,n){n.d(t,{D:()=>f});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(36534),s=n(59307),d=n(33764),c=n(68410),u=n(28528),p=n(91694),h=n(73066),m=n(76977),g=n(59294),v=n(56262),Y=n(39318);let f=e=>{var t,n,l,f,b;let{className:y,disableVideoHover:_,disableVideoHoverFade:w,forceShowPlayButton:C,hidePlaceholder:I,imageAspectRatio:k,imageWidth:S,isBelowTheFold:D,post:F,videoPlayIconVariant:P="default"}=e,{cropGravity:x,pub:T}=(0,u.np)(),{isMobile:A}=(0,c.sM)(),E=(0,o.useRef)(null),[N]=(0,g.TR)(E),B=!!F.videoUpload,M=!!(!B&&"podcast"===F.type),R=(0,v.getCoverImageUrl)(F);!R&&((null==(f=F.videoUpload)?void 0:f.thumbnail_id)?R=(0,Y.Pzx)(F.videoUpload):(null==(b=F.podcastUpload)?void 0:b.thumbnail_id)&&(R=(0,Y.Pzx)(F.podcastUpload,{post:F})));let L=S<=640;if(!R&&I)return null;let O=S||k?k:1.32,z=S||336,U=!!(null==(t=F.videoUpload)?void 0:t.live_stream_id);return(0,i.FD)("div",{ref:E,className:r()(y,"container-XQwt8c","post-preview-image",{[String("containerEmpty-v9lUvg")]:!R}),style:"aspect-ratio: ".concat(O),children:[(M||B||C)&&(0,i.Y)(m.Ye,{alignItems:"center",className:r()("fpPodcastOverlay-F_ObU8",{"fpPodcastOverlayHover-j8gEjt":!w}),inset:0,justifyContent:"center",position:"absolute",children:"default"===P?(0,i.Y)(a.A,{fill:"white",height:36,stroke:"none"}):(0,i.Y)("div",{className:"redPlayContainer-gIeqLa",children:(0,i.Y)(s.A,{fill:"white",height:A?12:20,stroke:"none"})})}),B&&(L?(0,i.Y)(p.A,{aspectRatio:(null==(n=F.videoUpload)?void 0:n.width)&&(null==(l=F.videoUpload)?void 0:l.height)?F.videoUpload.width/F.videoUpload.height:O,containerRef:E,post:F,size:S>320?"large":"medium"}):(0,i.Y)(h.A,{isHovered:N&&!_,post:F,pub:T})),R?(0,i.Y)(d.o,{alt:"",className:"image-wHmpR_",imageProps:O?{height:Math.round(z/O),smartCrop:!0,gravity:U?"auto":x}:{},imageSizingCss:"(min-width:768px) 50vw, 100vw",loading:D?"lazy":void 0,maxWidth:z,src:R,style:{aspectRatio:"".concat(O)}}):null]})}},88218:function(e,t,n){n.d(t,{F:()=>r});var i=n(4006),l=n(63136);let r=e=>{let{align:t,children:n}=e;return(0,i.Y)(l.EY.B2,{align:t,color:"pub-primary-text",font:"pub-headings",weight:"bold",children:n})}},15040:function(e,t,n){n.d(t,{$o:()=>k,Ex:()=>f,Ff:()=>T,Pk:()=>P,w4:()=>D});var i=n(69277),l=n(70408),r=n(32641),o=n(4006),a=n(32485),s=n.n(a),d=n(14701),c=n(14647),u=n(20713),p=n(76977),h=n(81203),m=n(63136),g=n(49095),v=n(6986),Y=n(62614);let f=e=>{let t;var{content:n,children:l}=e,a=(0,r._)(e,["content","children"]);return t=n?"number"==typeof n?(0,o.Y)(C,(0,i._)({number:n},a)):"string"==typeof n?(0,o.Y)(w,(0,i._)({text:n},a)):(0,o.Y)(I,(0,i._)({icon:n},a)):(0,o.Y)(_,(0,i._)({},a)),(0,o.Y)(b,{badge:t,children:l})},b=e=>{let{children:t,badge:n}=e;return(0,o.FD)(p.pT,{position:"relative",className:v.A.container,children:[t,n]})},y=e=>{let{priority:t="primary",theme:n="accent",placement:i="top-right",shape:l="circle",radius:r="full",className:a,children:d,style:c}=e;return(0,o.Y)(p.pT,{alignItems:"center",justifyContent:"center",position:"absolute",userSelect:"none",sizing:"border-box",radius:r,className:s()(v.A.badge,v.A["placement_".concat(i)],v.A["shape_".concat(l)],Y.A["theme_".concat(n)],Y.A["priority_".concat(t)],a),style:c,children:d})},_=e=>{var{className:t}=e,n=(0,r._)(e,["className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},n),{className:s()(v.A.dot,t)}))},w=e=>{var{text:t,className:n}=e,a=(0,r._)(e,["text","className"]);let d=1===t.length;return(0,o.Y)(y,(0,l._)((0,i._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,n),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},C=e=>{var{number:t,className:n}=e,a=(0,r._)(e,["number","className"]);let d=1===t.toString().length;return(0,o.Y)(y,(0,l._)((0,i._)({},a),{className:s()(v.A.text,d&&v.A.singleElement,n),children:(0,o.Y)(m.EY.Meta,{as:"span",color:"inherit",children:t})}))},I=e=>{var{icon:t,fillIcon:n,className:a,style:d}=e,c=(0,r._)(e,["icon","fillIcon","className","style"]);return(0,o.Y)(y,(0,l._)((0,i._)({},c),{className:s()(v.A.singleElement,n&&v.A.fillIcon,a),style:d,children:t}))},k=e=>{var{children:t,placement:n="bottom-right",tier:l}=e,a=(0,r._)(e,["children","placement","tier"]);let s=(0,o.Y)(S,(0,i._)({placement:n,tier:l},a));return l?(0,o.Y)(b,{badge:s,children:t}):(0,o.Y)(o.FK,{children:t})},S=e=>{var{userId:t,tier:n,className:a}=e,d=(0,r._)(e,["userId","tier","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},d),{className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserStatusSymbols,{tier:n,userId:t,size:"sm"})}))},D=e=>{var{children:t,placement:n="bottom-right"}=e,l=(0,r._)(e,["children","placement"]);let a=(0,o.Y)(F,(0,i._)({placement:n},l));return(0,o.Y)(b,{badge:a,children:t})},F=e=>{var{tier:t,fgOverride:n,bgOverride:l}=e,a=(0,r._)(e,["tier","fgOverride","bgOverride"]);return"author"===t?(0,o.Y)(I,(0,i._)({theme:"accent",fillIcon:!0,icon:(0,o.Y)(u.A,{size:12}),style:(0,i._)({},l&&{"--color-tag-bg":l}||{},n&&{"--color-tag-fg":n}||{})},a)):"founding"===t?(0,o.Y)(I,(0,i._)({theme:"default",priority:"secondary",icon:(0,o.Y)(d.A,{size:12})},a)):"paid"===t?(0,o.Y)(I,(0,i._)({theme:"default",priority:"secondary",icon:(0,o.Y)(c.A,{size:12})},a)):null},P=e=>{var{children:t}=e,n=(0,r._)(e,["children"]);return(0,o.Y)(b,{badge:(0,o.Y)(x,(0,i._)({},n)),children:t})},x=e=>{var{badge:t,placement:n="bottom-right",className:a}=e,d=(0,r._)(e,["badge","placement","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},d),{placement:n,className:s()(v.A.singleElement,v.A.empty,a),children:(0,o.Y)(g.UserBadge,{userBadge:t,size:"sm"})}))},T=e=>{var{pub:t,children:n,placement:l="bottom-right"}=e,a=(0,r._)(e,["pub","children","placement"]);let s=(0,o.Y)(A,(0,i._)({pub:t,placement:l},a));return t?(0,o.Y)(b,{badge:s,children:n}):(0,o.Y)(o.FK,{children:n})},A=e=>{var{pub:t,className:n}=e,a=(0,r._)(e,["pub","className"]);return(0,o.Y)(y,(0,l._)((0,i._)({},a),{radius:"xs",className:s()(v.A.singleElement,v.A.empty,n),children:(0,o.Y)(h.Nq,{pub:t,size:16,radius:"xs"})}))}},58326:function(e,t,n){n.d(t,{N:()=>h});var i=n(4006),l=n(32485),r=n.n(l),o=n(71464),a=n(17402),s=n(84605),d=n(35369),c=n(76977),u=n(63136),p=n(98949);let h=e=>{let{onFileSelected:t,dropCTA:n,pickCTA:l,pickCTAHandler:h,acceptableTypes:m,loading:g,className:v,multiple:Y=!1,addMode:f=!1,onDrop:b,onPick:y,info:_}=e,[w,C]=(0,a.useState)(!1),I=(0,a.useRef)(null),{iString:k}=(0,s.GO)();l||h||(l=(0,i.Y)(d.$n,{size:"sm",priority:"secondary-outline",children:Y?k("Choose files"):k("Choose file")})),n||(n=k("Drop file here"));let S=e=>{e.preventDefault(),C(!0)},D=async e=>{var n,i,l,r;let o,a;if(e.preventDefault(),C(!1),(null==(i=e.dataTransfer)||null==(n=i.items)?void 0:n.length)>0){let t=Array.from(e.dataTransfer.items);for(let e of t)if("file"!==e.kind)return void alert(k("Please only drag files!"));o=e.dataTransfer.items[0].getAsFile(),a=t.map(e=>e.getAsFile())}else{if(!((null==(r=e.dataTransfer)||null==(l=r.files)?void 0:l.length)>0))return void alert(k("Something went wrong!"));o=e.dataTransfer.files[0],a=e.dataTransfer.files}Y?await t(a):await t(o),null==b||b(Y?a:o)};return(0,i.FD)(i.FK,{children:[(0,i.FD)(c.VP,{alignItems:"center",justifyContent:"center",gap:12,radius:"md",className:r()("dragArea-sMT00C",v,{"dragActive-g1aWbC":w,"test-drag-active":w}),onDragEnter:S,onDragOver:S,onDragLeave:e=>{e.preventDefault(),C(!1)},onDrop:D,"aria-label":k("File Picker"),onClick:()=>{if(!h){var e;null==(e=I.current)||e.click()}},children:[!f&&(0,i.Y)(o.A,{size:32,strokeWidth:1.5}),!p.Fr&&(0,i.Y)("p",{className:"text-ehFyYa",children:g?k("Loading..."):w?k("Release to upload"):f?k("Add another image"):(0,i.FD)(i.FK,{children:[n," ",k("or")," "]})}),(0,i.FD)(c.VP,{gap:4,children:[(0,i.Y)(u.EY.B3,{color:"primary",weight:"medium",children:f?k("Add another file"):k("Drag files here to upload")}),_?"string"==typeof _?(0,i.Y)(u.EY.B4,{color:"secondary",children:_}):_:null]}),l||(h?h(()=>{var e;null==(e=I.current)||e.click()}):null)]}),(0,i.Y)("input",{className:r()("file-P3qftv","file-picker-input"),ref:I,type:"file",name:"file",accept:m,multiple:Y,onInput:async e=>{let n=e.target,i=n.files;i&&i[0]&&(Y?await t(i):await t(i[0]),null==y||y(Y?i:i[0])),n.value=""}})]})}},49045:function(e,t,n){n.d(t,{Z:()=>m});var i=n(4006),l=n(38314),r=n(37455),o=n(32485),a=n.n(o),s=n(24914),d=n(12815),c=n(17028),u=n(65842),p=n(97684),h=n(24311);function m(e){let{options:t,value:n,onChange:o,placeholder:m,disabled:g,onCreate:v,isCreateOptionValid:Y}=e,{trimmedInputValue:f,filteredOptions:b,handleInputChange:y,showCreateOption:_,noResults:w,processSelectionValue:C,getDisplayValue:I}=(0,d.B)({options:t,onCreate:v,isCreateOptionValid:Y}),{refs:k,floatingStyles:S}=(0,l.we)(s.Oo),D=async e=>{C(e,o)};return(0,i.Y)(r.G,{value:n,onChange:D,disabled:g,nullable:!0,children:e=>{let{open:t}=e;return(0,i.FD)(i.FK,{children:[(0,i.FD)(c.fI,{ref:k.setReference,flex:"grow",alignItems:"center",position:"relative",children:[(0,i.Y)(r.G.Input,{className:a()("pencraft",h.A.input,h.A.inputText,h.A.trailing,g&&h.A.disabled),onChange:y,placeholder:m,displayValue:I}),(0,i.Y)(u.uk,{position:"trailing",pointerEvents:"auto",children:(0,i.Y)(s.TO,{})})]}),t&&(0,i.FD)(r.G.Options,{ref:k.setFloating,style:S,static:!0,className:a()(p.A.options,w&&p.A.empty),children:[b.slice(0,s.DT).map(e=>{let t=e.value===n;return(0,i.Y)(s.jO,{option:e,isSelected:t},String(e.value))}),_&&(0,i.Y)(s.vS,{inputString:f})]})]})}})}},72879:function(e,t,n){n.d(t,{M:()=>d});var i=n(4006),l=n(17402),r=n(76977),o=n(20500),a=n(76171),s=n(65842);let d=e=>{let{className:t,children:n,detail:r,label:o,alignment:a="vertical",error:s=!1}=e;return(0,i.Y)("vertical"===a?c:u,{className:t,detail:r,error:s,label:o,children:l.Children.map(n,e=>(0,l.isValidElement)(e)?(0,l.cloneElement)(e,{error:s}):e)})},c=e=>{let{children:t,className:n,detail:l,error:r,label:d}=e;return(0,i.FD)(s.A0,{className:n,children:[(0,i.Y)(a.JU,{weight:"semibold",color:r?"error":"primary",children:d}),t,l?(0,i.Y)(o.EE,{children:l}):r?(0,i.Y)(o.yn,{children:r}):null]})},u=e=>{let{children:t,className:n,detail:l,error:d,label:c}=e;return(0,i.FD)(r.Ye,{className:n,justifyContent:"space-between",alignItems:"start",gap:12,children:[(0,i.FD)(s.A0,{children:[c&&(0,i.Y)(a.JU,{children:c}),l&&(0,i.Y)(o.EE,{children:l}),d&&(0,i.Y)(o.yn,{children:d})]}),t]})}},77103:function(e,t,n){n.d(t,{E:()=>r});var i=n(86500),l=n(39318);let r=e=>{let{feedUrl:t,pub:n,post:r}=e;(0,i.u4)(i.qY.PODCAST_APP_LINK_CLICK,{appName:"Substack App",feedUrl:t}),document.location.href=(0,l.XV8)(null==n?void 0:n.subdomain,null==r?void 0:r.slug,{redirect:"app-marketing",source:"podcast-dropdown"})}},25758:function(e,t,n){n.d(t,{r:()=>b});var i=n(4006),l=n(70511),r=n(78834),o=n(17402),a=n(84605),s=n(89490),d=n(35369),c=n(76977),u=n(16993),p=n(57820),h=n(75303),m=n(21356),g=n(92563),v=n(83447);let Y=[{value:"card",label:"Card"},{value:"poster",label:"Poster"},{value:"split",label:"Split"},{value:"overlay",label:"Overlay"},{value:"title",label:"Title"},{value:"app",label:"App"},{value:"solid",label:"Solid"}],f={card:["composed","sticker","background"],poster:["composed","sticker","background"],split:["composed"],overlay:["composed"],title:["composed","sticker","background"],app:["composed"],solid:["composed"]};function b(e){var t;let{isOpen:n,onClose:h,post:b}=e,{iString:_}=(0,a.GO)(),[I,k]=(0,o.useState)("card"),[S,D]=(0,o.useState)("composed"),[F,P]=(0,o.useState)("stories"),[x,T]=(0,o.useState)("light"),[A,E]=(0,o.useState)(!1);(0,o.useEffect)(()=>{E(!1)},[I,S,F]),(0,o.useEffect)(()=>{f[I].includes(S)||D("composed")},[I,S]);let{width:N,height:B}=(0,g.S8)(F),M="/api/v1/press_kit/asset/".concat(b.id,"/").concat(I,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(x,"&contentType=text/html"),R="/api/v1/press_kit/asset/".concat(b.id,"/").concat(I,"/").concat(S,"?aspectRatio=").concat(F,"&mode=").concat(x,"&contentType=image/png"),L="".concat(null==(t=b.title)?void 0:t.replace(/[^a-z0-9]/gi,"_").toLowerCase(),"_").concat(I,"_").concat(S,"_").concat(x,".png"),O="composed"===S?w:C,z=[{value:"stories",label:(0,i.Y)(m.s,{children:(0,i.Y)(l.A,{size:20})})},{value:"grid",label:(0,i.Y)(m.s,{children:(0,i.Y)(r.A,{size:20})})}],U=[{value:"light",label:(0,i.Y)(y,{backgroundColor:"var(--color-light-bg-primary)"})},{value:"dark",label:(0,i.Y)(y,{backgroundColor:"var(--color-dark-bg-primary)"})},{value:"accent",label:(0,i.Y)(y,{backgroundColor:"var(--color-accent)"})}];return(0,i.FD)(u.aF,{isOpen:n,onClose:h,width:500,children:[(0,i.Y)(u.rQ,{title:_("Social assets"),showClose:!0,onClose:h,showDivider:!0}),(0,i.Y)(u.cw,{children:(0,i.FD)(c.VP,{gap:20,children:[(0,i.FD)(c.fI,{justifyContent:"center",gap:12,children:[(0,i.Y)(m.T,{tabs:z,value:F,onChange:P}),"solid"===I&&(0,i.Y)(m.T,{tabs:U,value:x,onChange:T})]}),(0,i.Y)(c.ov,{children:(0,i.FD)(O,{style:{width:N,height:B},children:[!A&&(0,i.Y)(c.ov,{className:v.A.spinner,children:(0,i.Y)(p.y$,{})}),(0,i.Y)(s.az,{as:"iframe",src:M,onLoad:()=>{E(!0)},style:{width:N,height:B},border:"unset"})]})}),(0,i.Y)(c.ov,{children:(0,i.Y)(m.T,{tabs:Y,value:I,onChange:k})})]})}),(0,i.Y)(u.jl,{direction:"column",primaryButton:(0,i.Y)(d.vx,{priority:"primary",href:R,download:L,children:_("Download")})})]})}function y(e){let{backgroundColor:t}=e;return(0,i.Y)(_,{children:(0,i.Y)(s.az,{height:20,width:20,style:{backgroundColor:t}})})}let _=(0,h.I4)({height:20,width:20,radius:"xs",overflow:"hidden",border:"detail"}),w=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",bg:"secondary"}),C=(0,h.I4)({position:"relative",overflow:"hidden",radius:"md",outline:"detail",className:v.A.transparent})},89129:function(e,t,n){n.d(t,{a:()=>r});var i=n(16291),l=n(82776);let r=function(e){let{stripeSub:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,i.A)(e).subtract((!t||t.cancel_at_period_end||"trialing"===t.status?0:"send_invoice"===t.billing?l.MANUAL_BILLING_DAYS_UNTIL_DUE:l.GRACE_PERIOD_DAYS)*24,"hour")}},90839:function(e,t,n){n.d(t,{s:()=>m,k:()=>g});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(84605),s=n(25112),d=n(90800),c=n(48052),u=n(44074),p=n(95436);let h=(0,o.createContext)(null),m=()=>(0,o.useContext)(h),g=e=>{let{children:t,disabled:n,flushBottom:l,flushTop:m,layoutVariant:g,previewBlockId:v}=e,{iString:Y}=(0,a.GO)(),{activePreviewBlockId:f,isMobileEditor:b,isPreviewMode:y}=(0,p.T)(),_=(0,o.useRef)(null),{isClickable:w,handleClick:C,isSelf:I,shouldHideOverlay:k,showOverlay:S}=function(e){let{getBehavior:t,activatePreviewBlock:n,deactivatePreviewBlock:i,isActive:l}=(0,p.T)(),{clickAction:r,showOverlay:a}=t(e),s=l(e),d="activate"===r;return{isClickable:d,handleClick:(0,o.useCallback)(t=>{"none"===r||document.documentElement.classList.contains("theme-editor-dragging")||(t.stopPropagation(),"activate"===r?n(e):i())},[r,e,n,i]),isSelf:s,shouldHideOverlay:!d,showOverlay:a}}(v),D="content-block"===v.type&&v.contentBlockId===s.vK&&(null==f?void 0:f.type)==="block-picker";if(!y||n)return t;let F=I||D,P=w&&!D,x=(S||F)&&(0,i.Y)(u.O,{ref:_,flushBottom:l,flushTop:m,isActive:F,isClickable:P,isHidden:k&&!F||b,onClick:D?void 0:C,children:!F&&(0,i.Y)(c.m,{children:Y("Click to edit")})});return(0,i.Y)(h.Provider,{value:v,children:(0,i.FD)("div",{className:r()("container-QjkLOY",{[String("containerClickable-y3Lkil")]:P,[String("containerActive-XKHnNW")]:F,[String("threeColumn-Bky0HP")]:"three-column"===g}),style:{cursor:P?"pointer":void 0},[s.Ro]:(0,d.xm)(v),onClick:D?void 0:C,children:[(0,i.Y)("div",{className:"content-SqAaA1",children:t}),"three-column"===g?(0,i.Y)("div",{className:"overlayWrapper-m1uuha",children:x}):x]})})}},48052:function(e,t,n){n.d(t,{m:()=>a});var i=n(4006),l=n(32485),r=n.n(l),o=n(81929);let a=e=>{let{children:t,className:n}=e;return(0,i.Y)(o.vw,{className:r()("label-XuJdtO",n),priority:"primary",theme:"accent",children:t})}},44074:function(e,t,n){n.d(t,{O:()=>s});var i=n(4006),l=n(32485),r=n.n(l),o=n(17402),a=n(10238);let s=(0,o.forwardRef)((e,t)=>{let{children:n,flushBottom:l,flushTop:s,isActive:d,isClickable:c=!0,isHidden:u,variant:p="block",onClick:h}=e,m=(0,o.useMemo)(()=>({zIndex:"sidebar-module"===p?a.AG+1:a.AG,cursor:c?"pointer":"default"}),[c,p]);return(0,i.Y)("div",{ref:t,className:r()("overlay-eiZ8aN",{[String("flushBottom-kP5XHz")]:l,[String("flushTop-OmnylT")]:s,[String("hoverDisabled-gnX9_W")]:!c,[String("hidden-_Hnwjn")]:u&&!d,[String("active-GDa56u")]:d,[String("sidebarModule-EK8DQl")]:"sidebar-module"===p}),style:m,onClick:h,children:n})})},26392:function(e,t,n){n.d(t,{o:()=>s});var i=n(4006),l=n(32485),r=n.n(l),o=n(95436);let a="fullHeight-adKNT4",s=e=>{let{children:t,fullHeight:n}=e,{isPreviewMode:l}=(0,o.T)();return l?(0,i.Y)("div",{className:r()("container-EyuCoW",{[String(a)]:n}),children:(0,i.Y)("div",{className:r()("content-ybzYkV",{[String(a)]:n}),children:t})}):t}},80303:function(e,t,n){n.d(t,{z:()=>h});var i=n(4006),l=n(46271),r=n(13074),o=n(24078),a=n(35369),s=n(76977),d=n(16993),c=n(63136),u=n(49807),p=n(3074);let h=e=>{let{isOpen:t,utmSource:n,onClose:h,setShared:m}=e,{user:g}=(0,l.ur)();if(!g)return(0,i.Y)(i.FK,{});let v=(0,u.gYq)(g,{utm_source:n}),Y="/img/profile_cards/card-bg-".concat(Math.ceil((null==g?void 0:g.id)?g.id%9+1:8*Math.random()),".png");return(0,i.FD)(d.aF,{isOpen:t,onClose:h,width:480,children:[(0,i.Y)(d.rQ,{showClose:!0,onClose:h}),(0,i.FD)(s.I1,{paddingX:32,paddingTop:16,paddingBottom:24,gap:20,children:[(0,i.FD)(s.I1,{alignItems:"center",gap:8,children:[(0,i.Y)(c.EY.H2,{weight:"semibold",children:"Invite your friends"}),(0,i.Y)(c.EY.B3,{align:"center",color:"secondary",children:"Share your profile to help your friends and followers find you on Substack."})]}),(0,i.FD)(s.I1,{justifyContent:"center",alignItems:"center",border:"detail",radius:"md",shadow:"lg",className:p.A.card,children:[(0,i.Y)(s.I1,{flex:"grow",className:p.A.cardTop,children:(0,i.Y)("img",{className:p.A.cardOverlay,src:(0,u.dJ9)(Y,800)})}),(0,i.FD)(s.I1,{flex:"grow",alignSelf:"stretch",className:p.A.cardBottom,gap:16,paddingX:20,paddingBottom:20,paddingTop:0,children:[(0,i.FD)(s.pT,{justifyContent:"space-between",alignItems:"end",children:[(0,i.Y)(o.eu,{user:g,size:112,className:p.A.cardAvatar}),(0,i.Y)(a.$n,{priority:"secondary",rounded:!0,className:p.A.fakeButton,children:"Subscribe"})]}),(0,i.FD)(s.I1,{flex:"grow",gap:8,children:[(0,i.Y)(c.EY.H2,{children:g.name}),(0,i.Y)(c.EY.Meta,{className:p.A.cardUrl,size:12,color:"substack",children:v.replace(/^(http|https):\/\//,"").replace(/\?.*$/,"")}),g.bio&&(0,i.Y)(c.EY.B4,{color:"secondary",children:g.bio})]})]})]}),(0,i.Y)(c.EY.Meta,{align:"center",children:"Share via"}),(0,i.Y)(r.lE,{shareUrl:v,shareEventType:"profile",shareText:"Subscribe to me on Substack",itemKey:g.id,onShare:()=>{m&&m()}})]})]})}},504:function(e,t,n){n.d(t,{KY:()=>C,Q$:()=>d,Qb:()=>u,Si:()=>b,aK:()=>y,fP:()=>p,n5:()=>g,qx:()=>w,rX:()=>f,tR:()=>c});var i=n(69277),l=n(70408),r=n(62193),o=n.n(r),a=n(27749),s=n(86500);function d(e,t){var n;let{extraEventProps:i={},tabId:l,primaryItem:r,isLoggedIn:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="trackingParameters"in e&&"item_entity_key"in e.trackingParameters?null==(n=e.trackingParameters)?void 0:n.item_entity_key:null;a&&o&&fetch("/api/v1/reader/feed/".concat(a,"/seen"),{method:"POST"}),Y("seen",e,t,{extraEventProps:i,tabId:l,primaryItem:r})}function c(e,t,n){let{extraEventProps:r={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("seen_for_duration",e,t,{extraEventProps:(0,l._)((0,i._)({},r),{timeVisible:n}),tabId:o,primaryItem:a})}function u(e,t,n){let{extraEventProps:r={},tabId:o,primaryItem:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Y("clicked",e,t,{extraEventProps:(0,l._)((0,i._)({clicked_element:n},r),{tabId:o,primaryItem:a})})}function p(e,t){let{extraEventProps:n={},tabId:r,primaryItem:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Y("swiped",e,t,{extraEventProps:(0,l._)((0,i._)({},n),{tabId:r,primaryItem:o})})}function h(e){var t,n,i,l,r,o,a,s,d,c,u,p,h,m,g;let v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,{primaryItem:Y}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{item_primary_entity_key:Y&&"entity_key"in Y?Y.entity_key:"entity_key"in e?e.entity_key:"",item_entity_key:"entity_key"in e?e.entity_key:"",item_type:e.type,item_content_user_id:"comment"in e?e.comment&&e.comment.user_id?e.comment.user_id:0:"post"in e?null!=(h=null==(n=e.post.publishedBylines)||null==(t=n[0])?void 0:t.id)?h:e.publication.author_id:0,item_content_timestamp:"comment"in e&&(null==(i=e.comment)?void 0:i.date)?new Date(e.comment.date).toISOString():"post"in e&&(null==(l=e.post)?void 0:l.post_date)?new Date(e.post.post_date).toISOString():"community_post"in e&&(null==(r=e.community_post)?void 0:r.created_at)?new Date(e.community_post.created_at).toISOString():null,item_context_type:"context"in e?e.context.type:"",item_context_type_bucket:"context"in e&&null!=(m=e.context.typeBucket)?m:"",item_context_timestamp:new Date("context"in e?e.context.timestamp:new Date).toISOString(),item_context_user_id:"context"in e?null==(o=e.context.users[0])?void 0:o.id:void 0,item_context_user_ids:"context"in e&&(null!=(g=null==(a=e.context.users)?void 0:a.length)?g:0)>0?e.context.users.map(e=>{let{id:t}=e;return t}):[],item_publication_id:"publication"in e?null==(s=e.publication)?void 0:s.id:void 0,item_post_id:null==(d=e.post)?void 0:d.id,item_comment_id:null==(c=e.comment)?void 0:c.id,item_can_reply:!("canReply"in e)||e.canReply,item_source:"frontend",item_model_rank:null,item_model_score:null,tab_id:null!=v?v:void 0,item_module_id:"id"in e?e.id:void 0,followed_user_count:0,subscribed_publication_count:0,is_following:!1,is_explicitly_subscribed:!1,trending_topic_id:"trendingTopic"in e?null==(u=e.trendingTopic)?void 0:u.id:void 0,trending_topic_query:"trendingTopic"in e?null==(p=e.trendingTopic)?void 0:p.query:void 0}}function m(e,t){let{primaryItem:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return"comment"===e.type||"post"===e.type||"featuredCollection"===e.type||"featuredPublication"===e.type?o()(e.trackingParameters)?h(e,t,{primaryItem:n}):e.trackingParameters:h(e,t,{primaryItem:n})}function g(e){let{primaryItem:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l._)((0,i._)({},e),{trackingParameters:h(e,null,{primaryItem:t})})}n(40659),n(82776);let v=new Map([["featuredCollection","featured_collection"],["featuredPublication","featured_publication"]]);function Y(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=r?r:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_ITEM_SEEN:"seen_for_duration"===e?s.qY.FEED_ITEM_SEEN_FOR_DURATION:"swiped"===e?s.qY.FEED_ITEM_SWIPED:s.qY.FEED_ITEM_CLICKED,(0,i._)({surface:n,tabId:r,module:d},a,l))}function f(e,t,n){let{extraEventProps:l={},tabId:r,primaryItem:o}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=m(t,null!=r?r:null,{primaryItem:o}),d=v.get(t.type);(0,s.u4)("seen"===e?s.qY.FEED_MODULE_ITEM_SEEN:s.qY.FEED_MODULE_ITEM_CLICKED,(0,i._)({surface:n,tabId:r,module:d},a,l))}function b(e,t){let{extraEventProps:n={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_("seen",e,t,{extraEventProps:n})}function y(e,t,n){let{extraEventProps:l={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_("clicked",e,t,{extraEventProps:(0,i._)({clicked_element:n},l)})}function _(e,t,n){var l,r,o;let{extraEventProps:a={}}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(0,s.u4)("seen"===e?s.qY.FEED_USER_SUGGESTION_SEEN:s.qY.FEED_USER_SUGGESTION_CLICKED,(0,i._)({suggested_user_id:t.user.id,suggested_publication_id:null!=(r=null==(l=t.publication)?void 0:l.id)?r:null,suggestion_source:null!=(o=t.source)?o:null,surface:n},t.trackingParameters,a))}function w(e,t){let{tabId:n,noteId:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(0,s.u4)(s.qY.FEED_HIDDEN_ATTACHMENT_SHOWN,{attachmentId:e,reason:t,tabId:n,noteId:i})}function C(e){let{props:t,isModuleItem:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=(0,a.PK)(),r=n?f:Y;return n=>{r("clicked",e,l,{extraEventProps:(0,i._)({clicked_element:n},t)})}}},9761:function(e,t,n){n.d(t,{QH:()=>k});var i=n(69277),l=n(70408),r=n(4006),o=n(17402),a=n(45773),s=n(80697),d=n(46271),c=n(82772),u=n(24078),p=n(35369),h=n(76977);n(22602);var m=n(81203),g=n(63136),v=n(2548),Y=n(85050),f=n(32848),b=n(49095),y=n(73030),_=n(96301),w=n(39318),C=n(49807),I=n(57324);function k(e){let{items:t,surface:n,page_num:a=0,focusedPubId:s,onClickItem:d,onItemFirstVisible:c}=e,u=(0,f.n7)(),p=a*y.Ew,h=new Map(t.map(e=>{var t,n;let{publication:i}=e;return[i.id,null==(n=u.result)||null==(t=n.subscriptions)?void 0:t.some(e=>e.publication_id===i.id&&e.membership_state&&(0,_.KB)(e.membership_state))]}));return(0,r.Y)(v.I1,{gap:8,children:t.map((e,t)=>{var r;return(0,o.createElement)(S,(0,l._)((0,i._)({},e),{key:e.publication.id,isSubscribed:null!=(r=h.get(e.publication.id))&&r,rank:t+p+1,surface:n,isFocused:s===e.publication.id,onClick:d,onFirstVisible:c}))})})}function S(e){let{user:t,publication:n,rank:i,isSubscribed:l,surface:a,isFocused:s,onClick:p,onFirstVisible:Y,trackingParameters:f}=e,y=(0,d.Jd)(),_=(0,o.useRef)(null),I=!!y&&y.id===(null==t?void 0:t.id);return(0,c.S8)(_,()=>{null==Y||Y({publication:n,rank:i,trackingParameters:f})}),(0,r.Y)(v.Qe,{id:n.id.toString(),bg:I||s?"accent-orange":void 0,href:t?(0,C.gYq)(t):(0,w.$_T)(n),onClick:()=>p({publication:n,rank:i,trackingParameters:f}),children:(0,r.FD)(h.pT,{justifyContent:"space-between",flex:"grow",alignItems:"center",paddingX:12,ref:_,children:[(0,r.FD)(h.pT,{gap:16,alignItems:"center",children:[(0,r.Y)(g.EY.Digit,{minWidth:16,children:i}),t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(u.eu,{user:t,size:40}),(0,r.FD)(v.I1,{children:[(0,r.FD)(h.pT,{alignItems:"center",gap:4,children:[(0,r.Y)(g.EY.B3,{weight:"semibold",children:t.name}),(0,r.Y)(b.UserStatusSymbols,{tier:t.bestseller_tier,status:t.status,userId:t.id,size:"sm"})]}),(0,r.Y)(g.EY.B4,{color:"secondary",children:n.name})]})]}),!t&&(0,r.FD)(r.FK,{children:[(0,r.Y)(m.Nq,{radius:"full",pub:n,size:32}),(0,r.Y)(v.I1,{children:(0,r.Y)(g.EY.B3,{weight:"bold",children:n.name})})]})]}),!I&&(0,r.Y)(D,{pub:n,user:t,surface:a,isSubscribed:l,currentUser:y})]})})}function D(e){let{pub:t,user:n,surface:i,isSubscribed:l,currentUser:o}=e,d=(0,f.n7)(),c=(0,Y.s)({surface:i})(t);return l?(0,r.Y)(h.pT,{alignItems:"center",justifyContent:"center",padding:8,children:(0,r.Y)(a.A,{size:16,stroke:"var(--color-fg-tertiary)"})}):(0,r.Y)(p.K0,{priority:"secondary",size:"sm",newTab:!0,href:(0,w.eV6)(t,{addBase:!0,user:o,utm_source:I.VU.substack,utm_medium:I.Jn.web,utm_campaign:I._9.reader2}),onClick:e=>{if(e.stopPropagation(),n){let e="visibilitychange",n=()=>{"visible"===document.visibilityState&&(document.removeEventListener(e,n),d.refetchPublication(t.id))};document.addEventListener(e,n)}c(e)},children:(0,r.Y)(s.A,{size:20})})}},28916:function(e,t,n){n.d(t,{I:()=>k,w:()=>S});var i=n(69277),l=n(4006),r=n(15977),o=n(50180),a=n(17402),s=n(71941),d=n(84605),c=n(46271),u=n(12501),p=n(68349),h=n(35369),m=n(76977),g=n(88774),v=n(16993),Y=n(63136),f=n(36372),b=n(5180),y=n(2481),_=n(90554),w=n(70189),C=n(18947),I=n(49807);function k(e){var t,n;let{pub:h,post:m,comment:v,feedItem:Y,onRestack:k,tabId:D,surface:F,renderWithoutUser:P=!1}=e,x=(0,c.Jd)(),T=(0,f.d)(),A=(!!x||P)&&!(null==h?void 0:h.hide_post_restacks)&&!(null==h?void 0:h.invite_only),E=!!(null==(t=v||m)?void 0:t.restacked),N=(null==(n=v||m)?void 0:n.restacks)||0,B=(0,b.wA)(),M=(0,y.NP)(),[R,L]=(0,a.useState)(!1),O=(0,u.st)({pathname:"/api/v1/restack/feed"}),{iString:z}=(0,d.GO)(),{nuxModal:U,showRestackNux:q}=S(v&&!v.post_id?"note":v?"comment":"post"),H=async()=>{var e,t;if(!x)return void L(!0);null==k||k(!0);let n=await O.refetch({method:"POST",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D,surface:F}});if(n instanceof Error){null==k||k(!1),alert((0,p.uX)(n));return}if(T.popToast(()=>(0,l.Y)(f.y,{text:n.comment?z("Note restacked"):z("Post restacked"),Icon:r.A,cta:z("View now"),href:(0,w.oT)()})),n.comment)B({type:"comment_restack",payload:{commentId:n.comment.id,isRestacked:!0}});else{B({type:"post_restack",payload:{postId:n.post.id,isRestacked:!0}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:n.post.id,mediaClipId:e,isRestacked:!0}})}q()},W=async()=>{var e,t;null==k||k(!1);let n=await O.refetch({method:"DELETE",json:{postId:v?null:null==m?void 0:m.id,commentId:(null==v?void 0:v.id)||null,mediaClipId:(null==Y?void 0:Y.type)==="post"?null==(e=Y.mediaClip)?void 0:e.id:void 0,tabId:D}});if(n instanceof Error){null==k||k(!0),alert((0,p.uX)(n));return}if(T.popToast(()=>(0,l.Y)(f.y,{text:z("Restack undone"),Icon:o.A})),v)B({type:"comment_restack",payload:{commentId:v.id,isRestacked:!1}});else if(m){B({type:"post_restack",payload:{postId:m.id,isRestacked:!1}});let e=(null==Y?void 0:Y.type)==="post"?null==(t=Y.mediaClip)?void 0:t.id:void 0;e&&B({type:"post_restack",payload:{postId:m.id,mediaClipId:e,isRestacked:!1}})}},G=async()=>{if(!x)return void L(!0);try{var e;await M.open((0,i._)({feedItem:Y,restackUrl:v?(0,C.XB)(m,v,h):(0,I.wu9)(h,m),tabId:D,surface:F},(null==Y?void 0:Y.type)==="post"&&{mediaClipId:null==(e=Y.mediaClip)?void 0:e.id})),q()}catch(e){}};return(0,_.y)({name:"restack-comment",action:()=>{A&&G()}}),{canRestack:A,isRestacked:E,restacks:N,nuxModal:U,loggedOutRestackAttempt:R,menuItems:[E?(0,l.Y)(g.Dr,{leading:(0,l.Y)(o.A,{}),onClick:W,children:z("Undo restack")}):(0,l.Y)(g.Dr,{leading:(0,l.Y)(r.A,{}),onClick:H,children:z("Restack")}),(0,l.Y)(g.Dr,{leading:(0,l.Y)(s.A,{}),onClick:G,children:z("Restack with a note")})]}}function S(e){let t=function(e){let{entityType:t}=e,[n,i]=(0,a.useState)(!1),r=()=>{i(!1)};return{open:()=>{i(!0)},element:(0,l.Y)(v.aF,{isOpen:n,onClose:r,children:(0,l.Y)(D,{onClose:r,entityType:t})})}}({entityType:e}),n=(0,u.st)({pathname:"/api/v1/feed/has-restacked",auto:!1,cacheTtl:1/0}),i=async()=>{var e;let i=null!=(e=n.result)?e:await n.refetch();i instanceof Error||(null==i?void 0:i.hasRestacked)!==!1||(t.open(),n.setResult({hasRestacked:!0}))};return{nuxModal:t.element,showRestackNux:i}}function D(e){let{onClose:t,entityType:n}=e,{iString:i}=(0,d.GO)();return(0,l.FD)(m.I1,{paddingX:16,children:[(0,l.Y)(m.pT,{justifyContent:"center",paddingTop:32,paddingBottom:24,children:(0,l.Y)(r.A,{size:40,stroke:"var(--color-fg-primary)"})}),(0,l.FD)(m.I1,{gap:12,children:[(0,l.FD)(Y.EY.H3,{align:"center",children:["comment"===n&&i("You restacked a comment"),"note"===n&&i("You restacked a note"),"post"===n&&i("You restacked a post")]}),(0,l.FD)(Y.EY.B3,{color:"secondary",align:"center",children:["comment"===n&&i("Restack comments that inspire you to share them with more people."),"note"===n&&i("Restack notes that inspire you to share them with more people."),"post"===n&&i("Restack posts that inspire you to share them with more people.")," ",i("Subscribers can see your restacks in the Notes tab and on your profile.")]})]}),(0,l.FD)(m.I1,{paddingBottom:16,paddingTop:20,gap:8,children:[(0,l.Y)(h.$n,{priority:"primary",href:(0,w.oT)(),children:i("View now")}),(0,l.Y)(h.$n,{priority:"secondary-outline",onClick:t,children:i("OK")})]})]})}},90554:function(e,t,n){n.d(t,{y:()=>l});var i=n(17402);function l(e){let{name:t,action:n}=e;(0,i.useEffect)(()=>{if("undefined"==typeof window)return;let e=new URL(window.location.href);if(e.searchParams.get("action")===t){n();let t=e.searchParams;t.delete("action"),window.history.replaceState({},"","".concat(e.origin).concat(e.pathname,"?").concat(t))}},[])}},60816:function(e,t,n){n.d(t,{l:()=>a});var i=n(4006),l=n(43954),r=n(89490);let o={apple_podcasts:"/img/shows_app_icons/apple_podcasts.svg?v=1",overcast:"/img/shows_app_icons/overcast.svg?v=1",pocket_casts:"/img/shows_app_icons/pocket_casts.svg?v=1",rss:"/img/shows_app_icons/rss.svg?v=1",spotify:"/img/shows_app_icons/spotify.svg?v=1",spotify_for_paid_users:"/img/shows_app_icons/spotify.svg?v=1",spotify_open_access:"/img/shows_app_icons/spotify.svg?v=1",substack:"/img/shows_app_icons/substack.svg?v=1",youtube:"/img/shows_app_icons/youtube.svg?v=1",youtube_music:"/img/shows_app_icons/youtube_music.svg?v=1"},a=e=>{let{platformKey:t,size:n=20}=e;return"email"===t?(0,i.Y)(l.A,{size:n,stroke:"var(--color-fg-secondary)"}):(0,i.Y)(r.az,{width:n,height:n,className:"image-aVeTJg",style:{backgroundImage:"url(".concat(o[t],")")}})}},66728:function(e,t,n){n.d(t,{b:()=>b});var i=n(4006),l=n(45994),r=n(32485),o=n.n(r),a=n(15734),s=n.n(a),d=n(36233),c=n(84605),u=n(86500),p=n(68349),h=n(88218),m=n(76977),g=n(63136),v=n(77103),Y=n(60816),f=n(7755);let b=e=>{let{description:t,feedUrl:n,pub:l,post:r,section:o,showLinks:a,user:s}=e,{iString:d}=(0,c.GO)();return(0,i.FD)(m.I1,{gap:t?8:16,"data-testid":"shows-listen-on",role:"region","aria-label":d("Listen on"),"aria-hidden":!0,children:[(0,i.Y)(h.F,{children:d("Listen on")}),t&&(0,i.Y)(g.EY.B3,{color:"pub-secondary-text",paddingBottom:8,children:t}),(0,i.FD)(m.Ye,{gap:8,wrap:"wrap",children:[r&&(0,i.Y)(y,{platformKey:"substack",label:d("Substack App"),onClick:()=>{(0,v.E)({feedUrl:n,pub:l,post:r})}}),(0,f.RM)({feedUrl:n,isApple:(0,p.cX)(),isMobile:!1,showLinks:a,user:s,render:e=>{let{label:t,key:n,onClick:l}=e;return(0,i.Y)(y,{label:t,platformKey:n,onClick:l})}}),(null==s?void 0:s.is_subscribed)&&(0,i.Y)(_,{section:o})]})]})},y=e=>{let{disabled:t,label:n,platformKey:l,onClick:r}=e;return(0,i.FD)(m.Ye,{alignItems:"center",bg:"secondary",className:o()("listen-on-item-yiZDJR",{"listen-on-item--disabled-S4EzSi":t}),gap:8,paddingX:12,radius:"sm",onClick:t?void 0:r,children:[(0,i.Y)(m.pT,{opacity:t?40:100,children:(0,i.Y)(Y.l,{platformKey:l})}),(0,i.Y)(g.EY.B4,{weight:"semibold",color:"pub-secondary-text",opacity:t?80:100,nowrap:!0,children:n})]})},_=e=>{let{section:t}=e,{iString:n}=(0,c.GO)(),[r,o]=(0,l.J0)(!1),a=async()=>{try{(0,u.u4)(u.qY.PODCAST_EMAIL_LINK_CLICKED),await s().post("/api/v1/subscription/send_podcast_email").send({section_id:null==t?void 0:t.id}),(0,d.Ay)(n("Email sent")),o(!0)}catch(e){(null==e?void 0:e.status)===429?((0,d.Ay)(n("Email already sent")),o(!0)):(0,d.Ay)(n("Something went wrong sending email"))}};return(0,i.Y)(y,{disabled:r,label:r?n("Email sent"):n("Email mobile setup link"),platformKey:"email",onClick:()=>{a()}})}},79564:function(e,t,n){n.d(t,{H:()=>tL});var i=n(69277),l=n(70408),r=n(4006),o=n(17402),a=n(15734),s=n.n(a),d=n(69715),c=n(71328),u=n(6212),p=n(13918),h=n(41935),m=n(86227),g=n(46360),v=n(85478),Y=n(46271),f=n(95064),b=n(26289),y=n(86500),_=n(74894),w=n(68349),C=n(68410),I=n(76977),k=n(45994);let S=e=>{let{visible:t,className:n,style:i={}}=e,[l,o]=(0,k.J0)(!1),[a,s]=(0,k.J0)(t);return((0,k.vJ)(()=>{t?(s(!0),requestAnimationFrame(()=>{requestAnimationFrame(()=>{o(!0)})})):o(!1)},[t]),(0,k.vJ)(()=>{t&&s(!0)},[t]),a)?(0,r.Y)("div",{className:"".concat("backdrop-_YQndu"," ").concat(l?"backdropVisible-eL7zZp":"backdropHidden-pg_NJc"," ").concat(n),onTransitionEnd:function(){t||s(!1)},style:i}):null};var D=n(59294),F=n(32485),P=n.n(F),x=n(27747),T=n(4016);let A=e=>{let{audioPlayerRef:t,hasPaywall:n,feedUrl:i,isPrivateFeed:l,isServingFreePodcastUrl:o,post:a,pub:s,section:d,user:c,onChange:u,onCommentsClick:p,freeSignup:m,reaction_token:g}=e,{isMobile:v}=(0,C.sM)(),Y=(0,T.lu)({pub:s});return(0,r.Y)("div",{className:P()("player-wrapper-outer-eAOhcD",{"playerWrapperOuterFP-bKWoVB":Y}),children:(0,r.Y)("div",{className:P()("player-wrapper-inner-KUdif0",{"playerWrapperInnerFP-Cm0O_q":Y}),children:(0,r.Y)(x.Uz,{audioPlayerRef:t,explicitHeight:Y?340:void 0,feedUrl:i,hasPaywall:n,isPrivateFeed:l,isServingFreePodcastUrl:o,post:a,pub:s,radius:Y&&v?"none":void 0,section:d,user:c,freeSignup:m,ufiComponent:Y?null:(0,r.Y)(h.xx,{isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:a,pub:s,style:"large-on-dark",user:c,onChange:u,onCommentsClick:p}),reaction_token:g})})})};var E=n(20674),N=n(13950),B=n(84236),M=n(63446),R=n(82180),L=n(36027),O=n(7903),z=n(15894),U=n(37659),q=n(28528),H=n(16074),W=n(63136),G=n(69308),K=n(73164),V=n(84605),j=n(35369),X=n(16993),J=n(75303),Z=n(36372),Q=n(77103),$=n(60816),ee=n(7755),et=n(98949);let en=e=>{let{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:a,showLinks:s,user:d,onTranscriptClick:c}=e,{iString:u}=(0,V.GO)(),[p,h]=(0,o.useState)(!1);return(0,r.FD)(r.FK,{children:[(0,r.FD)(I.Ye,{gap:8,overflowX:"auto",className:"horizontalScrolling-CUpSMl",children:[(0,r.Y)(j.$n,{leading:(0,r.Y)(K.A,{height:18,style:{stroke:"none"}}),priority:"secondary",onClick:()=>(0,Q.E)({feedUrl:t,pub:a,post:l}),children:u("Open in app")}),c&&(0,r.Y)(j.$n,{leading:(0,r.Y)(G.A,{size:20}),priority:"secondary",onClick:c,children:u("Transcript")}),!n&&i&&(0,r.Y)(j.$n,{priority:"secondary",onClick:()=>{h(!0)},children:u("Listen via...")})]}),(0,r.Y)(ei,{isModalOpen:p,setIsModalOpen:h,feedUrl:t,showLinks:s,user:d})]})},ei=e=>{let{isModalOpen:t,setIsModalOpen:n,feedUrl:i,showLinks:l,user:o}=e,{iString:a}=(0,V.GO)(),s=(0,Z.d)();return(0,r.FD)(X.aF,{isOpen:t,onClose:()=>n(!1),children:[(0,r.Y)(X.rQ,{title:a("Listen via..."),description:a("Select your favorite podcast app from the list below."),showClose:!0,showDivider:!0,onClose:()=>n(!1)}),(0,r.Y)(X.cw,{children:(0,r.Y)(I.I1,{gap:20,children:l&&(0,ee.RM)({feedUrl:i,isApple:(0,et.aR)(),isMobile:!0,showLinks:l,user:o,render:e=>{let{key:t,label:n,url:i,onClick:l}=e;return(0,r.Y)(el,{platformKey:t,label:n,url:i,onClick:l})}})})}),(0,r.Y)(X.jl,{direction:"column",secondaryButton:(0,r.Y)(j.$n,{priority:"secondary",onClick:()=>{s.popToast(()=>(0,r.Y)(Z.y,{text:a("Copied link to clipboard")})),(0,w.lW)(i)},children:a("Copy RSS feed URL")})})]})},el=e=>{let{platformKey:t,label:n,url:i,onClick:l}=e;return(0,r.Y)(J.AE,{href:i,children:(0,r.FD)(I.Ye,{alignItems:"center",gap:12,onClick:l,children:[(0,r.Y)($.l,{platformKey:t,size:40}),(0,r.Y)(W.EY.B3,{weight:"bold",children:n})]})})};var er=n(39318),eo=n(49807),ea=n(96063);let es=e=>{let{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:o,magicToken:a,section:s,showLinks:d,user:c,onChange:u,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g}=e,{isMobile:v}=(0,C.sM)();return(0,T.lu)({pub:o})?(0,r.Y)(ed,{post:l,pub:o,section:s,user:c}):(0,r.Y)(N.DH,{children:(0,r.FD)(I.I1,{gap:16,children:[v&&(0,r.Y)(en,{feedUrl:t,isStandaloneVideo:n,eligibleForPodcast:i,post:l,pub:o,showLinks:d,user:c,onTranscriptClick:g}),v&&(0,r.Y)(B.pJ,{align:"center",direction:"column",gap:8,paddingY:8,post:l,pub:o,section:s,textField:"episode_short_text"}),(0,r.FD)(I.I1,{gap:8,children:[(0,r.Y)(W.EY.H2,{color:"pub-primary-text",font:"pub-headings",dir:"auto",className:ea.A.title,children:l.title}),l.subtitle&&(0,r.Y)(W.EY.B2,{color:"pub-secondary-text",font:"pub-headings",weight:"regular",dir:"auto",className:ea.A.subtitle,children:l.subtitle})]}),(0,r.Y)(E.D,{variant:"shows",post:l,pub:o}),!v&&(0,r.Y)(h.bW,{post:l,pub:o,user:c,onChange:u,postReactionToken:a,onCommentsClick:p,onToggleRestackModal:m,onTranscriptClick:g,position:"shows-episode-player"})]})})},ed=e=>{var t;let{post:n,pub:i,section:l,user:o}=e,{isMobile:a}=(0,C.sM)(),s=(0,er.t6y)({pub:i,section:l}),d=!!n.videoUpload,c=null!=(t=null==l?void 0:l.is_podcast)&&t,u=c||!d;return(0,r.Y)(q.XL,{pub:i,children:(0,r.Y)(N.DH,{children:(0,r.FD)(I.I1,{gap:24,children:[(0,r.FD)(I.I1,{gap:12,children:[(0,r.FD)(I.I1,{gap:8,children:[l&&(0,r.Y)(M.v,{alignSelf:"start",href:u?s:(0,eo.Dor)(i,{section:l}),variant:"tertiary",size:"md",leadingIcon:"chevron-left",children:"View all episodes"}),(0,r.Y)(z.T,{preset:"h4-serif",children:n.title}),(0,r.Y)(L.E,{post:n})]}),n.subtitle&&(0,r.Y)(z.T,{preset:"d3-serif",children:n.subtitle})]}),u&&(0,r.FD)(I.pT,{alignItems:a?"start":"center",direction:a?"column":"row",gap:24,justifyContent:"space-between",children:[(0,r.Y)(R.Z,{pub:i,section:l,user:o}),l&&(0,r.Y)(O.S,{pub:i,section:l,user:o,isPodcastOrVideo:!0})]}),d&&!c&&l&&(0,T.lu)({pub:i})&&(0,r.FD)(I.pT,{direction:a?"column":"row",justifyContent:"space-between",children:[(0,r.Y)(U.m,{pub:i,section:l}),(0,r.Y)(O.S,{pub:i,section:l,user:o,isPodcastOrVideo:!0})]}),(0,r.Y)(H.c,{})]})})})};var ec=n(88218),eu=n(24078),ep=n(15040);let eh=e=>{let{bylines:t,variant:n}=e;return(0,r.Y)(I.pT,(0,l._)((0,i._)({},"shows"===n?{direction:"row",gap:12,wrap:"wrap"}:{direction:"column",gap:24}),{children:t.map(e=>(0,r.FD)(I.Ye,{alignItems:"center",gap:8,children:[(0,r.Y)(ep.$o,{tier:e.bestseller_tier,children:(0,r.Y)(eu.tp,{user:e,utmSource:"author-byline-face-podcast",size:32})}),(0,r.FD)(I.I1,{children:[(0,r.Y)(W.EY.B4,{color:"pub-primary-text",children:e.name}),e.primaryPublicationName&&(e.primaryPublicationUrl?(0,r.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes"," ",(0,r.Y)("a",{style:{textDecoration:"none"},href:e.primaryPublicationUrl,children:I18N.p(e.primaryPublicationName)})," ",(0,r.Y)("a",{href:"".concat(e.primaryPublicationUrl,"/subscribe"),children:"Subscribe"})]}):(0,r.FD)(W.EY.B4,{color:"pub-secondary-text",translated:!0,children:["Writes ",I18N.p(e.primaryPublicationName)]}))]})]}))}))},em=e=>{let{bylines:t,isStandaloneVideo:n,eligibleForPodcast:i}=e,{iString:l}=(0,V.GO)();return(0,r.FD)(I.I1,{gap:16,"aria-label":"Appears in episode",role:"region",children:[(0,r.Y)(ec.F,{children:l(n||!i?"Authors":"Appears in episode")}),(0,r.Y)(eh,{bylines:t,variant:"shows"})]})};var eg=n(79391),ev=n(16831),eY=n(91496);let ef=e=>{let{post:t,pub:n,section:i,user:l,isStandaloneVideo:o}=e,{title:a,description:s,url:d}=(0,ee.ed)({pub:n,section:i,useSection:o});return(0,r.FD)(I.I1,{border:"detail-themed",className:"container-MuztBl",gap:24,paddingX:16,paddingY:24,radius:"md",shadow:"lg",onClick:()=>{window.location.href=d},children:[(0,r.FD)(I.I1,{gap:8,alignItems:"center",children:[(0,r.Y)(eY.M,{post:t,pub:n,section:i,useSection:o}),a&&(0,r.Y)(ec.F,{align:"center",children:a}),(0,T.s7)({pub:n,includeTheRampart:!0})&&(0,r.Y)(I.Ye,{alignItems:"center",gap:8,children:(0,T.ot)({sectionId:null==i?void 0:i.id}).map(e=>(0,r.Y)(ev.b,{medium:e}))}),s&&(0,r.FD)(I.I1,{gap:8,children:[s.split("\n").map(e=>(0,r.Y)(W.EY.B4,{className:"description-ij0plp",color:"pub-secondary-text",align:"center",children:e})),(0,r.Y)("span",{hidden:!0,"data-testid":"podcast-description",children:s})]})]}),!(null==l?void 0:l.is_subscribed)&&(0,r.Y)("div",{className:"subscribe-container-_pmqCv",onClick:e=>{e.stopPropagation()},children:(0,r.Y)(eg.A,{expectTruncation:!0,pub:n,source:"episode-page-sidebar",user:l})})]})};var eb=n(66728),ey=n(98002);let e_=e=>{let{isStandaloneVideo:t,pub:n,recentEpisodes:i,user:l}=e,{iString:o}=(0,V.GO)(),{isMobile:a}=(0,C.sM)();return(0,r.Y)(q.XL,{pub:n,user:l,children:(0,r.FD)(I.I1,{gap:a?12:8,"aria-label":o("Recent episodes"),role:"region",children:[(0,r.Y)(ec.F,{children:o(t?"Recent Posts":"Recent Episodes")}),(0,r.Y)(I.I1,{gap:12,style:{margin:a?void 0:"0 -8px"},"aria-label":o("Recent episodes"),role:"region",children:i.map(e=>(0,r.Y)(ey.z,{post:e,variant:"mini-episode",onClick:()=>{(0,y.u4)(y.qY.RECENT_EPISODE_ITEM_CLICKED,{post_id:e.id})}}))})]})})};var ew=n(82776);let eC=e=>{var t;let{feedUrl:n,isStandaloneVideo:l,eligibleForPodcast:o,post:a,pub:d,recentEpisodes:c,section:u,showLinks:p,user:h}=e,{iString:m}=(0,V.GO)(),{isMobile:g}=(0,C.sM)(),[v,Y]=(0,k.J0)(c),f=(0,k.Kr)(()=>{var e;return null!=(e=null==v?void 0:v.filter(e=>e.id!==a.id))?e:null},[v,a.id]),b=(0,B.Jq)(d,u),y=(0,ew.getBylineUsers)(a).sort((e,t)=>e.id===d.author_id?-1:t.id===d.author_id?1:e.is_guest&&!t.is_guest?-1:!e.is_guest&&t.is_guest?1:(e.name||"").localeCompare(t.name||""));return(0,k.vJ)(()=>{let e=async()=>{var e,t;Y(null!=(t=(await s().get("/api/v1/recent_posts").query((0,i._)({rss_episodes_only:!(null==(e=a.podcastFields)?void 0:e.hide_from_feed)},(null==u?void 0:u.id)?{section_id:u.id}:{}))).body)?t:[])};c||e()},[a.id,null==(t=a.podcastFields)?void 0:t.hide_from_feed,c,d.id,null==u?void 0:u.id]),(0,r.FD)(I.I1,{gap:b?24:32,"aria-label":m("Sidebar content"),role:"complementary",children:[!g&&(0,r.Y)(B.pJ,{align:"center",direction:"column",gap:8,post:a,pub:d,section:u,textField:"episode_short_text"}),!g&&(0,r.Y)(ef,{post:a,pub:d,section:u,user:h,isStandaloneVideo:l}),(0,r.FD)(I.I1,{gap:32,children:[!g&&!l&&o&&(0,r.Y)(eb.b,{feedUrl:n,showLinks:p,post:a,pub:d,section:u,user:h}),!g&&d.bylines_enabled&&y.length>0&&(0,r.Y)(em,{bylines:y,isStandaloneVideo:l,eligibleForPodcast:o}),f&&f.length>0&&(0,r.Y)(e_,{isStandaloneVideo:l,pub:d,recentEpisodes:f,user:h})]})]})};var eI=n(50172),ek=n(26747),eS=n(72536),eD=n(48697),eF=n(52077),eP=n(21003),ex=n(89490);let eT="transcriptionWords-u5CRAD",eA="transcription-timestamp-mDeQkH",eE="transcription-text-align-left-V7cht2",eN=e=>{let{activeRowIndex:t,isPlaying:n,postId:i,row:l,rowIndex:o,showSpeaker:a,speakerName:s,words:d,onPause:c,onPlay:u}=e,{searchTerm:p,focusedItemStart:h}=(0,f.IS)(),m=(0,k.li)(null),g=p&&l.text.toLowerCase().includes(p.toLowerCase());(0,k.vJ)(()=>{if(h&&m.current&&l.start===h){var e;null==(e=m.current)||e.scrollIntoView({behavior:"smooth",block:"center"})}},[h,l.start]);let v=()=>g?(0,r.Y)(eP.x,{isFocused:l.start===h,searchTerm:p,rowIndex:o,text:l.text.trim()}):(0,r.Y)(ex.az,{display:"inline",className:eT,lineHeight:20,radius:"sm","data-chunk-index":o,children:((null==d?void 0:d.length)?d.map(e=>e.word).join(" "):l.text).trim()});return(0,r.Y)("div",{ref:m,children:(0,r.Y)(eF.vo,{onPlay:u,onPause:c,postId:i,isActiveRow:t==o,isPlaying:n,row:l,rowIndex:o,className:"transcription-chunk-YeZNdv",activeClassName:"transcription-chunk--active-HnAU7N",children:s&&a?(0,r.FD)(I.I1,{paddingTop:2,children:[(0,r.FD)(I.Ye,{alignItems:"baseline",gap:12,children:[(0,r.Y)(W.EY.B4,{className:P()(eA,eE),color:"pub-secondary-text",children:s?(0,ew.secondsToHHMMSS)(l.start):""}),(0,r.Y)(W.EY.Meta,{padding:2,paddingTop:4,color:"accent",weight:"semibold",children:s})]}),(0,r.FD)(I.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":o,children:[(0,r.Y)(W.EY.B4,{className:P()(eA,eE),color:"pub-secondary-text",children:s?"":(0,ew.secondsToHHMMSS)(l.start)}),(0,r.Y)(ex.az,{display:"inline",className:eT,lineHeight:20,padding:2,radius:"sm","data-chunk-index":o,children:v()})]})]}):(0,r.FD)(I.Ye,{alignItems:"baseline",gap:12,"data-chunk-index":o,children:[(0,r.Y)(W.EY.B4,{className:P()(eA,eE),color:"pub-secondary-text",children:s?"":(0,ew.secondsToHHMMSS)(l.start)}),(0,r.Y)(ex.az,{display:"inline",className:eT,padding:2,radius:"sm","data-chunk-index":o,children:v()})]})})},o)},eB=e=>{let{post:t,playerRef:n,transcription:o,fullWidth:a,onClose:s,onExpand:d,onCollapse:c}=e,{isMobile:u}=(0,C.sM)(),[p,h]=(0,k.J0)(0),m=(0,k.li)(null),[g,v]=(0,k.J0)(!1),[Y,b]=(0,k.J0)(0),{searchTerm:y}=(0,f.IS)(),_=()=>{if(m.current){let e=m.current.getBoundingClientRect().top,t=window.scrollY||window.scrollY;t>Y&&e<=0?v(!0):t<=Y&&v(!1)}};return(0,k.vJ)(()=>{let e=m.current,t=()=>{e&&!g&&b(e.offsetTop)};t();let n=new ResizeObserver(t);return e&&n.observe(e),window.addEventListener("scroll",_),()=>{e&&n.unobserve(e),window.removeEventListener("scroll",_)}},[g]),(0,r.Y)(N.DH,{children:(0,r.FD)(I.I1,{gap:24,flex:"grow",children:[(0,r.FD)(I.Ye,{gap:8,alignItems:"center",children:[(0,r.Y)(I.Ye,{flex:"grow",ref:m,className:g?"sticky-zutBDd":"",display:!y&&g?"none":void 0,children:(0,r.Y)(I.Ye,{paddingLeft:u&&g?8:0,children:(0,r.Y)(f.Qj,{postId:t.id,closeAlwaysVisible:!1})})}),!u&&(0,r.FD)(eI.Fragment,{children:[!a&&(0,r.Y)(j.K0,{onClick:d,children:(0,r.Y)(ek.A,{})}),a&&(0,r.Y)(j.K0,{onClick:c,children:(0,r.Y)(eS.A,{})})]}),(0,r.Y)(j.K0,{onClick:s,children:(0,r.Y)(eD.A,{})})]}),(0,r.Y)("div",{className:"transcription-full-body-container-LXFSNv",children:(0,r.Y)(eF.Ay,{player:n,postId:t.id,renderTranscriptionChunk:e=>(0,r.Y)(eN,(0,l._)((0,i._)({},e),{activeRowIndex:p,postId:t.id})),transcription:o,onUpdateActiveRowIndex:h})})]})})};var eM=n(99851),eR=n(32641),eL=n(77849),eO=n(41873),ez=n(16784),eU=n(83137),eq=n(70107),eH=n(60285),eW=n(49869),eG=n(13348),eK=n(99070),eV=n(33764),ej=n(28734),eX=n(8734),eJ=n(4246),eZ=n(46009);let eQ=e=>{var t,n,i,l;let{alternateAudioSource:o,audioPlayerRef:a,hideControls:s,isIdle:d,post:c,pub:u,showPaywall:p,onFinishAudio:h,onSetAudioIsPlaying:m}=e,{iString:g}=(0,V.GO)(),{isMobile:v}=(0,C.sM)(),Y=(0,b.By)(a),f=c.section_id&&null!=(t=u.sections.find(e=>e.id===c.section_id))?t:null,{artUrl:y}=f?(0,eZ.lL)({pub:u,section:f}):(0,eZ.j_)({pub:u}),_=f?null!=(n=f.podcastPalette)?n:null:null!=(i=u.podcastPalette)?i:null,w=["extra_audio_preview","alternate_audio_preview"].includes(o.type);return(0,k.vJ)(()=>{m(Y)},[Y,m]),(0,r.Y)(eK.A,{ref:a,src:o.url,updateOnEveryFrame:(null!=(l=c.podcast_duration)?l:0)<300,onFinishAudio:h,trackingProps:{contentType:"post",entityKey:c.id,entityType:"post",surface:"post"},render:e=>{let{duration:t,isPlaying:n,togglePlayback:i}=e,l=e=>e.stopPropagation();return(0,r.FD)(I.I1,{alignItems:"center",bg:"primary",flex:"grow",justifyContent:"center",position:"relative",overflow:v?"auto":"hidden",onClick:()=>{i()},children:[(0,r.Y)(ej._,{backgroundUrl:y,blurAmount:40,isBlurred:!0,palette:_,radius:"none"}),(0,r.Y)(I.Ye,{className:"darkenBottom-zaTJyO",position:"absolute",inset:0}),(0,r.FD)(I.Ye,{position:"relative",children:[y&&!p&&(0,r.Y)(eV.o,{imageIsFixedWidth:!0,maxWidth:v?160:340,radius:"md",src:y,useRetinaSizing:!0}),(0,r.Y)(I.Ye,{alignItems:"center",inset:0,justifyContent:"center",position:"absolute",children:(0,r.Y)(I.Ye,{onClick:l,opacity:100*!s,children:(0,r.Y)(eG.ro,{isPlaying:null!=n&&n,size:v?56:72,onTogglePlayback:i})})})]}),(0,r.Y)(I.Ye,{onClick:l,children:(0,r.Y)(eJ.Jf,{disableShortcuts:!0,disableTooltips:!0,duration:t,handle:null,isActive:(!n||!d)&&!p,isAudio:!0,isFocused:!1,post:c,pub:u,mediaUpload:null,mediaRef:a,showPaywall:!1})}),w&&(0,r.Y)(I.Ye,{position:"absolute",style:{top:12,left:12},children:(0,r.Y)(eX.d,{avoidBackgroundBlur:!0,children:g("Preview")})})]})}})};var e$=n(31790),e0=n(50802),e1=n(49802),e2=n(66511);let e4={unselectedButton:"unselectedButton-LnSrSa"},e6="switcher-audio-button",e7=e=>{let{selected:t,sourceType:n,onSelect:i}=e,{iString:l}=(0,V.GO)(),{isMobile:o}=(0,C.sM)(),a={alternate_audio_preview:l("Switch to audio"),alternate_full_audio:l("Switch to audio"),extra_audio_preview:l("Switch to the audio preview"),free_podcast_url:l("Switch to the full ad-supported audio")}[n];return(0,r.FD)(I.I1,{bg:"glass-inverted-medium",gap:4*!o,padding:4,pointerEvents:o?"none":"auto",radius:"full",children:[(0,r.Y)(e2.m_,{disabled:o,side:"right",text:l("Switch to video"),children:(0,r.Y)(j.mZ,{className:P()({[e4.unselectedButton]:"video"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==i||i("video")},children:(0,r.Y)(e0.A,{size:o?18:20})})}),(0,r.Y)(I.Ye,{position:"relative",className:e4.audioButtonContainer,children:(0,r.Y)(e2.m_,{disabled:o,side:"right",text:a,children:(0,r.Y)(j.mZ,{id:e6,className:P()({[e4.unselectedButton]:"audio"!==t}),rounded:!0,size:o?"sm":"md",onClick:()=>{null==i||i("audio")},children:(0,r.Y)(e1.A,{size:o?16:18})})})})]})},e8=(0,eI.createContext)({containerRef:{current:null},clearSelection:()=>void 0,finishedSelection:null,isSelecting:!1,selectionBegin:null,selectionFinish:null,selectionRef:{current:null}}),e3=e=>{let{children:t}=e,n=(0,k.li)(null),i=(0,k.li)(null),[l,o]=(0,k.J0)(!1),[a,s]=(0,k.J0)(!1),[d,c]=(0,k.J0)(null),[u,p]=(0,k.J0)(null),h=d&&u&&(u.rowIndex<d.rowIndex||u.rowIndex===d.rowIndex&&u.wordIndex<d.wordIndex),m=h?u:d,g=h?d:u,v=(0,k.Kr)(()=>a&&m&&g?{begin:m,finish:g}:null,[m,g,a]);(0,k.vJ)(()=>{if(!n.current)return;let e=n.current,t=e=>{a&&(s(!1),o(!1),c(null),p(null));let t=Number(e.target.dataset.rowIndex),n=Number(e.target.dataset.wordIndex);isNaN(t)||isNaN(n)||c({rowIndex:t,wordIndex:n})},i=e=>{if(!d||a)return;l||o(!0);let t=e.target.dataset;if("true"===t.inBetween){let e=Number(t.prevRowIndex),n=Number(t.prevWordIndex),i=Number(t.nextRowIndex),l=Number(t.nextWordIndex);if(isNaN(e)||isNaN(n)||isNaN(i)||isNaN(l))return;d.rowIndex<e||d.rowIndex===e&&d.wordIndex<n?p({rowIndex:e,wordIndex:n}):p({rowIndex:i,wordIndex:l});return}let n=Number(t.rowIndex),i=Number(t.wordIndex);isNaN(n)||isNaN(i)||p({rowIndex:n,wordIndex:i})},r=()=>{s(!0)};return e.addEventListener("mousedown",t),e.addEventListener("mousemove",i),e.addEventListener("mouseup",r),()=>{e.removeEventListener("mousedown",t),e.removeEventListener("mousemove",i),e.removeEventListener("mouseup",r)}},[n,a,l,d]);let Y=(0,k.hb)(()=>{s(!1),o(!1),c(null),p(null);let e=window.getSelection();e&&(e.removeAllRanges?e.removeAllRanges():e.empty&&e.empty())},[]);return(0,r.Y)(e8.Provider,{value:{clearSelection:Y,finishedSelection:v,isSelecting:l,containerRef:n,selectionBegin:m,selectionFinish:g,selectionRef:i},children:t})},e9=()=>(0,k.NT)(e8);var e5=n(78659),te=n.n(e5),tt=n(69843),tn=n.n(tt),ti=n(7350),tl=n.n(ti),tr=n(6632),to=n(43241),ta=n(23623),ts=n(90250),td=n(98394),tc=n(6579),tu=n(90128),tp=n.n(tu),th=n(16858),tm=n(92967);let tg="hideSelectionBackground-vjEoVj",tv=(0,o.memo)(e=>{var t;let{clipWordEnd:n,clipWordStart:o,isFinishedSelecting:a,focusedItemStart:s,isClipping:d,isFaded:c,isFirstInSelection:u,isMeasuring:p,isScrolling:h,isSelecting:m,listContainerRef:g,postId:v,rowIndex:Y,rows:f,searchTerm:b,selectedWordEnd:_,selectionRef:w,selectedWordStart:C,speakerMap:S,onClickRow:D,onCreateClip:F}=e,x=(0,k.li)(null),T=f[Y];T||console.error("Transcript row at index ".concat(Y," is missing"));let A=0===Y?null:f[Y-1],E=Y===f.length-1?null:f[Y+1],N=0===Y?null:f[Y-1],B=(!N||N.speaker!==T.speaker)&&T.speaker?null!=(t=S[T.speaker])?t:function(e){if(!e)return"Unknown Speaker";let t=e.split("_"),n=parseInt(t[1]);return"".concat(tp()(t[0])," ").concat(n+1)}(T.speaker):null,M=b&&T.text.toLowerCase().includes(b.toLowerCase()),R=A?{"data-in-between":!0,"data-prev-row-index":Y-1,"data-prev-word-index":A.words.length-1,"data-next-row-index":Y,"data-next-word-index":0}:{},L=E?{"data-in-between":!0,"data-prev-row-index":Y,"data-prev-word-index":T.words.length-1,"data-next-row-index":Y+1,"data-next-word-index":0}:{};return(0,r.FD)(I.Ye,{alignItems:"start",gap:12,paddingX:16,"data-transcript-row-index":Y,onClick:()=>{var e;(null==(e=window.getSelection())||!e.toString())&&D&&v&&((0,y.u4)(y.qY.TRANSCRIPTION_TIMESTAMP_CLICKED,{post_id:v,timestamp:(0,tm.kq)(T.start)}),D({rowIndex:Y}))},style:p?{overflowY:"scroll"}:void 0,children:[(0,r.Y)(I.Ye,{bg:"glass-inverted-medium",paddingX:4,radius:"sm",userSelect:"none",children:(0,r.Y)(W.EY.Meta,{color:"white",lineHeight:20,children:(0,ew.secondsToHHMMSS)(T.start)})}),(0,r.FD)(I.I1,{flex:"grow",gap:2,children:[B&&(0,r.Y)(W.EY.Meta,(0,l._)((0,i._)({color:"white",opacity:60,userSelect:"none",weight:"semibold"},R),{children:B})),(0,r.FD)(I.I1,{position:"relative",children:[M&&(0,r.Y)(tY,{isFocused:T.start===s,searchTerm:b,text:T.text.trim()}),(0,r.FD)(I.I1,{ref:x,position:"relative",children:[(0,r.Y)(W.EY.B3,(0,l._)((0,i._)({className:P()(tg,{"textContainerFadedShows-pHGywl":c}),cursor:"pointer",lineHeight:20,paddingBottom:12},L),{children:!T.words.length||h&&!d&&tn()(C)&&tn()(_)?T.text:T.words.map((e,t)=>{let i=!tn()(C)&&!tn()(_)&&t>=C&&t<=_,l=u&&t===C,a=d&&!m&&!tn()(n)&&!tn()(o)&&t>=o&&t<=n;return(0,r.FD)(r.FK,{children:[(0,r.Y)("span",{ref:l?w:null,className:P()("word-IefdhU",{"wordSelectedShows-Tf85j5":a||i}),"data-row-index":Y,"data-word-index":t,children:e.word})," "]})})})),u&&a&&F&&g&&!d&&(0,r.Y)(tb,{firstWordRef:w,listContainerRef:g,rowElemRef:x,children:(0,r.Y)(ty,{onClick:F})})]})]})]})]})}),tY=e=>{let{searchTerm:t,isFocused:n,text:i}=e,l=RegExp("(".concat(t,")"),"gi"),o=i.split(l);return(0,r.Y)(W.EY.B3,{className:"textHidden-zukLlK",position:"absolute",inset:0,children:o.map(e=>e.match(l)?(0,r.Y)("span",{className:P()("searchResult-cbPSuC",{"isFocused-wy1BKg":n}),children:e}):(0,r.Y)("span",{children:e}))})},tf=(0,o.memo)(e=>{let{style:t,index:n,data:i,isScrolling:l}=e,{activeRowIndex:o,listContainerRef:a,postId:s,rows:c,speakerMap:u,onClickRow:p,onCreateClip:h}=i,{finishedSelection:m,isSelecting:g,selectionBegin:v,selectionFinish:Y,selectionRef:b}=e9(),{searchTerm:y,focusedItemStart:_}=(0,f.IS)(),{clipTimes:w,isClipping:C}=(0,d.MC)(),I=c[n];I||console.error("Transcript row at index ".concat(n," is missing"));let k=!!(v&&v.rowIndex===n),S=null,D=null;if(v&&Y){let e=n===v.rowIndex&&n===Y.rowIndex,t=n===v.rowIndex,i=n===Y.rowIndex,l=n>v.rowIndex&&n<Y.rowIndex;e?(S=v.wordIndex,D=Y.wordIndex):t?(S=v.wordIndex,D=I.words.length-1):i?(S=0,D=Y.wordIndex):l&&(S=0,D=I.words.length-1)}let F=null,P=null;if(C&&w)for(let e=0;e<I.words.length;e++){let t=I.words[e];!tn()(t)&&t.end>w.start&&t.start<w.end&&(null===F&&(F=e),P=e)}return(0,r.Y)("div",{className:tg,style:t,children:(0,r.Y)(tv,{clipWordStart:F,clipWordEnd:P,focusedItemStart:_,isClipping:C,isFaded:!C&&"number"==typeof o&&o!==n,isFinishedSelecting:!!m,isFirstInSelection:k,isScrolling:l,isSelecting:g,listContainerRef:a,postId:s,rows:c,rowIndex:n,searchTerm:y,selectionRef:b,selectedWordStart:S,selectedWordEnd:D,speakerMap:u,onClickRow:p,onCreateClip:h})})},tc.t7),tb=e=>{let{children:t,firstWordRef:n,listContainerRef:i,rowElemRef:l}=e;if(!(null==n?void 0:n.current)||!l.current||!i.current)return null;let o=n.current.offsetTop,{top:a}=l.current.getBoundingClientRect(),{top:s,height:d}=i.current.getBoundingClientRect(),c=te()(o-8,s-a+8+32,s+d-a-8);return(0,r.Y)(I.I1,{position:"absolute",style:{top:c,left:"45%",transform:"translate(-50%, -100%)"},onClick:t_,onMouseDown:t_,onMouseMove:t_,onMouseUp:t_,userSelect:"none",zIndex:1,children:t})},ty=e=>{let{onClick:t}=e,{iString:n}=(0,V.GO)();return(0,r.Y)(j.$n,{leading:(0,r.Y)(th.A,{size:16}),priority:"secondary",onClick:t,children:n("Create clip")})},t_=e=>{e.stopPropagation()},tw=e=>{let{activeRowIndex:t,height:n,id:i,listContainerRef:l,listRef:o,postId:a,rows:s,speakerMap:d,width:c,onClickRow:u,onCreateClip:p,onScroll:h}=e,[m,g]=(0,k.J0)(null);(0,k.Nf)(()=>{if(m||!c)return;let e=document.createElement("div");e.style.position="absolute",e.style.top="0",e.style.width="".concat(c,"px"),e.style.pointerEvents="none",e.style.visibility="hidden",g(e),document.body.appendChild(e)},[m,c]);let v=(0,k.hb)(e=>m?(m.innerHTML=(0,td.F0)((0,r.Y)(tv,{isMeasuring:!0,isScrolling:!1,rows:s,rowIndex:e,selectedWordEnd:null,selectedWordStart:null,speakerMap:d})),m.clientHeight||0):0,[m,s,d]),Y=(0,k.Kr)(()=>({activeRowIndex:t,listContainerRef:l,postId:a,rows:s,speakerMap:d,onClickRow:u,onCreateClip:p}),[t,l,a,s,d,u,p]);return m?(0,r.Y)("div",{id:i,children:(0,r.Y)(tc._m,{ref:o,itemCount:s.length,itemSize:v,height:n,width:c,itemData:Y,outerElementType:tC,useIsScrolling:!0,onScroll:h,children:tf})}):null},tC=(0,o.forwardRef)((e,t)=>{var{style:n}=e,o=(0,eR._)(e,["style"]);return(0,r.Y)("div",(0,i._)({ref:t,style:(0,l._)((0,i._)({},n),{overflowY:"scroll"})},o))});var tI=n(50874);let tk="video-transcription",tS=e=>{let{isClipping:t,playerRef:n,postId:l,transcription:a,onClose:s,surface:c}=e,{iString:u}=(0,V.GO)(),{clipTimes:p,virtualizedListRef:h,onStartClipping:m}=(0,d.MC)(),g=(0,k.li)(null),{containerRef:v,finishedSelection:Y,clearSelection:_,isSelecting:w}=e9(),{rows:C,speakerMap:S}=(0,D.Fy)({transcription:a,processAlignedRows:tI.qD}),{isPlaying:F,currentTime:P}=(0,b.yr)(n),{setItems:x,focusedItemStart:T,searchTerm:A}=(0,f.IS)(),[E,N]=(0,k.J0)(null),[B,M]=(0,k.J0)(!1),{width:R,height:L}=(0,eW.w)({containerRef:g}),[O,z]=(0,k.J0)("in-view"),[U,q]=(0,k.J0)("in-view"),[H,G]=(0,k.J0)("in-view"),K=!!(null==A?void 0:A.trim()),X=F&&!K&&!t&&!Y,J=p&&tD(C,p.start),Z=p&&tD(C,p.end);(0,o.useEffect)(()=>{x(C)},[C,x]),(0,o.useEffect)(()=>{var e,t,i,l;!w||(null==(t=n.current)||null==(e=t.player)?void 0:e.paused)||null==(l=n.current)||null==(i=l.player)||i.pause()},[w,n]),(0,o.useEffect)(()=>{if(B)return;let e=C.findIndex(e=>e.start<=P&&e.end>P);-1!==e&&e!==E&&N(e)},[E,P,B,C]),(0,o.useEffect)(()=>{if(!K||!(null==h?void 0:h.current))return;let e=C.findIndex(e=>e.start===T);h.current.scrollToItem(e,"start")},[T,K,C,h]),(0,o.useEffect)(()=>{var e,t;if(!X||!(null==h?void 0:h.current))return;let n=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(E,'"]'));if(!n)return;let i=n.parentElement,l=document.querySelector("#".concat(tk," > div")),r=null!=(e=null==l?void 0:l.children[0])?e:null;if(!l||!i||!r)return;let o=r.offsetHeight-l.offsetHeight,a=parseInt(null!=(t=i.style.top.split("px")[0])?t:""),s=l.scrollTop,d=te()(a-32,0,o);(0,ts.eb)({virtualizedListRef:h,start:s,end:d,duration:300})},[E,X,h]);let Q=(0,k.hb)(tl()(()=>{if("number"!=typeof E)return;if(document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(E,'"]')))return void z("in-view");let e=document.querySelector("#".concat(tk," [data-transcript-row-index]"));e&&z(((null==e?void 0:e.dataset.transcriptRowIndex)?parseInt(e.dataset.transcriptRowIndex):-1)>E?"is-before":"is-after")},100),[E]),$=(0,k.hb)(tl()(()=>{if(tn()(J)||tn()(Z))return;let e=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(J,'"]')),t=document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(Z,'"]')),n=document.querySelector("#".concat(tk," [data-transcript-row-index]"));if(!n)return;let i=(null==n?void 0:n.dataset.transcriptRowIndex)?parseInt(n.dataset.transcriptRowIndex):-1;e||t||i>J&&i<Z?q("in-view"):q(i>J?"is-before":"is-after")},100),[Z,J]),ee=(0,k.hb)(tl()(()=>{if(!Y)return;let e=Y.begin.rowIndex;if(document.querySelector("#".concat(tk,' [data-transcript-row-index="').concat(e,'"]')))return void G("in-view");let t=document.querySelector("#".concat(tk," [data-transcript-row-index]"));t&&G(((null==t?void 0:t.dataset.transcriptRowIndex)?parseInt(t.dataset.transcriptRowIndex):-1)>e?"is-before":"is-after")}),[Y]),et=(0,k.hb)(e=>{let{scrollUpdateWasRequested:n}=e;n||(Y?ee():t?$():Q())},[Y,t,Q,$,ee]);(0,o.useEffect)(()=>{F&&Q()},[F,Q]),(0,o.useEffect)(()=>{if(!p||!(null==h?void 0:h.current))return;let e=tD(C,p.start);h.current.scrollToItem(Math.max(e,0),"smart"),q("in-view")},[p,C,$,h]);let en=(0,k.hb)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(E,"start"),z("in-view"))},[E,h]),ei=(0,k.hb)(()=>{(null==h?void 0:h.current)&&(h.current.scrollToItem(J,"start"),q("in-view"))},[J,h]),el=(0,k.hb)(()=>{if(!Y||!C)return;let{start:e,end:t}=(0,ts.ng)({finishedSelection:Y,transcriptionRows:C});_(),(0,y.u4)(y.qY.MEDIA_CLIP_BUTTON_CLICKED,{button:"create",source:"post transcript",surface:c}),m({start:e,end:t,source:"side-by-side-transcript",title:null})},[_,Y,m,C,c]);(0,o.useEffect)(()=>{Y&&(t?el():ee())},[Y,el,t,ee]);let er=(0,k.hb)(async e=>{var i;let{rowIndex:l}=e;if(null==(i=n.current)?void 0:i.player){if(t){let e=C[l];m({start:e.start,end:e.end,source:"side-by-side-transcript",title:null});return}if(F&&l===E)return void n.current.player.pause();n.current.player.currentTime=C[l].start,N(l),M(!0),await n.current.player.play(),M(!1)}},[E,t,F,m,n,C]);return(0,r.Y)(ta.a,{children:(0,r.FD)(I.I1,{inset:0,position:"absolute",style:{backgroundColor:"#161718"},children:[(0,r.FD)(I.Ye,{alignItems:"center",justifyContent:"space-between",padding:16,children:[(0,r.Y)(W.EY.B2,{color:"primary",weight:"semibold",children:u(t?"Create clip":"Transcript")}),s&&(0,r.Y)(j.K0,{priority:"secondary",size:"sm",onClick:s,children:(0,r.Y)(eD.A,{size:20})})]}),(0,r.Y)(I.Ye,{paddingX:16,paddingBottom:16,onKeyDown:e=>{e.stopPropagation()},children:(0,r.Y)(f.Qj,{postId:l,closeAlwaysVisible:!1})}),(0,r.FD)(I.I1,{ref:g,flex:"grow",position:"relative",children:[(0,r.Y)(I.I1,{ref:v,position:"absolute",inset:0,children:!!R&&(0,r.Y)(tw,{activeRowIndex:F?E:null,height:L,id:tk,listContainerRef:g,listRef:h,postId:l,rows:C,speakerMap:S,width:R,onClickRow:er,onCreateClip:el,onScroll:et})}),X&&"in-view"!==O&&(0,r.Y)(I.I1,{position:"absolute",style:(0,i._)({left:16,right:16},"is-before"===O?{top:0}:{bottom:16}),children:(0,r.Y)(j.$n,{leading:"is-before"===O?(0,r.Y)(tr.A,{size:16}):(0,r.Y)(to.A,{size:16}),priority:"secondary",onClick:en,children:u("Back to current time")})}),t&&!w&&"in-view"!==U&&(0,r.Y)(I.I1,{position:"absolute",style:(0,i._)({left:16,right:16},"is-before"===U?{top:0}:{bottom:16}),children:(0,r.Y)(j.$n,{leading:"is-before"===U?(0,r.Y)(tr.A,{size:16}):(0,r.Y)(to.A,{size:16}),priority:"secondary",onClick:ei,children:u("Back to clipped segment")})}),Y&&"in-view"!==H&&!t&&(0,r.Y)(I.Ye,{position:"absolute",justifyContent:"center",style:(0,i._)({left:0,right:0},"is-before"===H?{top:0}:{bottom:16}),children:(0,r.Y)(ty,{onClick:el})})]})]})})},tD=(e,t)=>{for(let n=0;n<e.length;n++){if(e[n].start<=t&&e[n].end>=t)return n;if(t<e[n].start)return n>0?n-1:0}return e.length-1},tF="video-wrapper-lforaE",tP="preview-label-container-RuWmAN",tx="sidebar-NzGH2W",tT="sidebar--hidden-xMFnhp";class tA extends eO.A{constructor(...e){super(...e),(0,eM._)(this,"playbackEnabled",()=>!!this.props.showPreview)}}let tE=e=>{var t,n,a,s,c,u,p,m,g,v,{alternateAudioSource:Y,audioIsPlaying:b,audioPlayerHasMounted:_,audioPlayerRef:w,containerRef:S,disableShortcuts:F,hasPaywall:x,isIdle:A,isPostPreview:E,mediaUpload:N,post:B,pub:M,selectedMedium:R,showAudioPaywall:L,showVideoPaywall:O,style:z,transcription:U,user:q,videoIsPlaying:H,videoPlayerRef:W,onChange:G,onCommentsClick:K,onFinishAudio:j,onSelectMedium:X,onSetAudioIsPlaying:J}=e,Z=(0,eR._)(e,["alternateAudioSource","audioIsPlaying","audioPlayerHasMounted","audioPlayerRef","containerRef","disableShortcuts","hasPaywall","isIdle","isPostPreview","mediaUpload","post","pub","selectedMedium","showAudioPaywall","showVideoPaywall","style","transcription","user","videoIsPlaying","videoPlayerRef","onChange","onCommentsClick","onFinishAudio","onSelectMedium","onSetAudioIsPlaying"]);let{iString:Q}=(0,V.GO)(),$=(0,T.lu)({pub:M}),{isClipping:ee,onCancelClipping:et}=(0,d.MC)(),[en,ei]=(0,k.J0)(!1),el=(0,eL.V)(),er=(0,k.li)(null),{width:eo}=(0,eW.w)({containerRef:er}),[ea,es]=(0,k.J0)(el.active&&"undefined"!=typeof window?window.innerWidth:null!=(u=null==(t=er.current)?void 0:t.offsetWidth)?u:1100),[ed,ec]=(0,eq.f)({key:"video_player:show_transcript",initialValue:!1}),eu=(ed||ee)&&!!U,{isMobile:ep}=(0,C.sM)(),eh=(0,D.AC)(S),em=(null!=(p=N.preview_duration)?p:0)>0,[eg,ev]=(0,k.J0)(!1),eY=eu?(ea-360-36)/ea:1,ef="post";return(0,o.useEffect)(()=>{ee&&(0,y.u4)(y.qY.MEDIA_CLIP_CREATE_MODAL_OPENED,{video_upload_id:N.id,post_id:null==B?void 0:B.id,is_post_editor:!1,source:"create",surface:ef})},[ee,N.id,null==B?void 0:B.id]),(0,o.useEffect)(()=>{el.active&&"undefined"!=typeof window?setTimeout(()=>{es(window.innerWidth)},10):es(null!=eo?eo:1100)},[el.active,eo]),(0,r.FD)("div",{ref:er,className:P()(tF,{"video-full-screen-K4tmIj":el.active}),style:z,children:[(0,r.FD)("div",{style:{visibility:"audio"===R?"hidden":void 0},children:[(0,r.Y)(eL.m,{handle:el,children:(0,r.FD)(I.Ye,{justifyContent:"center",position:"relative",overflow:ee?"visible":"hidden",style:{width:"100%",height:"100%",backgroundColor:"#000"},children:[(0,r.Y)(I.Ye,{flex:"grow",position:"relative",style:{transform:"scale(".concat(eY,")"),transformOrigin:"0 50%",transition:"transform 0.15s ease-in-out",zIndex:ee?1:void 0},children:(0,r.Y)(tA,(0,l._)((0,i._)({},Z),{ref:W,doNotResetOnEnd:!0,hidePlayButton:O,isClipping:ee,mediaUpload:N,podcastUpload:B.podcastUpload,showPreview:!x||em,noControls:!0,noKeyboardShortcuts:!0,stopPropagation:!0,post:B,pub:M,renderPlayButton:()=>(0,r.Y)(eG.ro,{isPlaying:!1,size:ep?56:72}),usePreview:x&&em,videoType:"post",onAutoplayMuted:()=>ev(!0)}))}),(0,r.Y)(I.Ye,{position:"absolute",style:{left:0,right:0,bottom:0,width:"".concat(100*eY,"%"),transition:"width 0.15s ease-in-out"},children:(0,r.Y)(eJ.Jf,{disableShortcuts:F,handle:el,hasPaywall:x,hasTranscript:!!U,hideNextVideoButton:E||$,isActive:null!=(m=en||!A||ee)&&m,isFocused:eh,mediaRef:W,mediaUpload:N,podcastUpload:null!=(g=null==(n=B.videoUpload)?void 0:n.extractedAudio)?g:B.podcastUpload,post:B,pub:M,showPaywall:O,showTranscript:eu,onShareMenuClose:()=>ei(!1),onShareMenuOpen:()=>ei(!0),onToggleShowTranscript:()=>{ec(!eu)},autoPlayMuted:eg})}),U&&(0,r.Y)(I.Ye,{color:"white",opacity:100*!!eu,overflow:"auto",pointerEvents:eu?"auto":"none",position:"absolute",style:{top:0,bottom:0,right:0,transform:eu?"translateX(0)":"translateX(20%)",transition:eu?"transform 0.1s ease-in-out 0.05s, opacity 0.1s ease-in-out 0.05s":"transform 0.15s ease-in-out, opacity 0.15s ease-in-out",width:360,zIndex:ee?1:void 0},children:(0,r.Y)(f.Of,{children:(0,r.Y)(e3,{children:(0,r.Y)(tS,{isClipping:null!=ee&&ee,playerRef:W,postId:B.id,transcription:U,onClose:()=>{if(ee){var e;(0,y.u4)(y.qY.VIDEO_CLIP_CREATE_MODAL_CLOSED,{post_id:B.id,surface:ef}),H&&(null==(e=W.current)?void 0:e.player)&&W.current.player.pause(),et()}else ec(!1)},surface:ef})})})})]})}),em&&x&&!O&&(0,r.Y)("div",{className:tP,children:(0,r.Y)(eX.d,{children:Q("Preview")})}),(null==(a=W.current)?void 0:a.player)&&(0,r.Y)(ez.p,{containerRef:S,post:B,pub:M,visible:ee,videoPlayerRef:W,videoUpload:N,surface:ef})]}),("audio"===R||_)&&Y&&(0,r.Y)(I.pT,{inset:0,position:"absolute",style:{visibility:"audio"!==R?"hidden":void 0},children:(0,r.Y)(eQ,{alternateAudioSource:Y,audioPlayerRef:w,isIdle:A,hideControls:(H||b)&&A,post:B,pub:M,showPaywall:L,onFinishAudio:j,onSetAudioIsPlaying:J})}),!ep&&!O&&!E&&!$&&(0,r.Y)("div",{className:P()(tx,"sidebar-right-ktL8if",{[tT]:(H||b)&&A}),children:(0,r.Y)(I.pT,{className:P()("sidebar-icons-YDR6ix"),bg:"glass-inverted-thick",paddingX:8,paddingY:16,children:(0,r.Y)(h.xx,{hideSavePost:!0,initialShareTimestamp:null!=(v=null==(c=W.current)||null==(s=c.player)?void 0:s.currentTime)?v:0,isStatic:!1,labelStyle:"counts-or-none",position:"shows-episode-player",post:B,pub:M,showClipping:!!B.videoUpload,style:"large-on-dark",user:q,onChange:G,onCommentsClick:K})})}),Y&&!$&&(0,r.Y)("div",{className:P()(tx,"sidebar-left-K3vrOP",{[tT]:(H||b)&&A}),style:{zIndex:O?1:void 0},children:(0,r.Y)(e7,{selected:R,sourceType:Y.type,onSelect:X})})]})},tN=e=>{var t;let{audioPlayerRef:n,hasPaywall:o,isPostPreview:a,mediaUpload:s,post:d,pub:c,user:u,videoIsPlaying:p,videoPlayerRef:h,onFinishVideo:m,freeSignup:g,reaction_token:v}=e,Y=(0,eR._)(e,["audioPlayerRef","hasPaywall","isPostPreview","mediaUpload","post","pub","user","videoIsPlaying","videoPlayerRef","onFinishVideo","freeSignup","reaction_token"]),{isMobile:f}=(0,C.sM)(),{iString:b}=(0,V.GO)(),_=(0,T.lu)({pub:c}),w=(0,ee.Ei)({post:d,pub:c,user:u}),[S,D]=(0,k.J0)(!1),[F,x]=(0,k.J0)(!1),[A,E]=(0,k.J0)(!1),N=(null!=(t=s.preview_duration)?t:0)>0,B=!!w&&!N&&o,[M,R]=(0,eH.k)({initialValue:B?"audio":"video",key:"initial_medium",type:"string",isArray:!1,disable:!w}),[L,O]=(0,k.J0)(B),z=(0,k.li)(null),{isIdle:U}=(0,eU.U)({idleAfter:2e3,element:z.current}),q="video"===M&&o&&(!N||F),H="audio"===M&&o&&S&&!!w&&"free_podcast_url"!==w.type,W=e=>{var t,i;if(e===M)return;let l=(e,t)=>5>Math.abs(e-t),r=null==(t=h.current)?void 0:t.player,o=null==(i=n.current)?void 0:i.player;"audio"===e&&(null==r?void 0:r.currentTime)&&o?r.currentTime>0&&l(o.duration,r.duration)&&(o.currentTime=r.currentTime,r.paused||o.play()):"video"===e&&(null==o?void 0:o.currentTime)&&r&&o.currentTime>0&&l(o.duration,r.duration)&&(r.currentTime=o.currentTime,o.paused||r.play()),p&&(null==r||r.pause()),"video"===e&&o&&o.pause(),F&&(x(!1),r&&(r.currentTime=0)),"audio"!==e||L||O(!0),(0,y.u4)(y.qY.AUDIO_VIDEO_SWITCHER_CLICKED,{post_id:d.id,selected:e}),R(e)},G=()=>{D(!0)};return(0,r.FD)("div",{className:P()("container-dlhqPD",{"postPreview-mgizmD":a}),ref:z,children:[f?(0,r.FD)("div",{className:P()(tF),children:[(0,r.Y)(tA,(0,l._)((0,i._)({},Y),{ref:h,doNotResetOnEnd:!0,hidePlayButton:q,mediaUpload:s,podcastUpload:d.podcastUpload,showPreview:!o||N,noControls:q&&!o,stopPropagation:!0,post:d,pub:c,renderPlayButton:()=>(0,r.Y)(eG.ro,{isPlaying:!1,size:f?56:72}),usePreview:o&&N,onFinishVideo:m,style:{visibility:"audio"===M?"hidden":void 0}})),N&&o&&!q&&"video"===M&&(0,r.Y)("div",{className:tP,children:(0,r.Y)(eX.d,{children:b("Preview")})}),("audio"===M||L)&&w&&(0,r.Y)(I.Ye,{position:"absolute",inset:0,style:{visibility:"audio"===M?"visible":"hidden"},children:(0,r.Y)(eQ,{alternateAudioSource:w,audioPlayerRef:n,hideControls:!1,isIdle:U,post:d,pub:c,showPaywall:H,onFinishAudio:G,onSetAudioIsPlaying:E})}),w&&!_&&(0,r.Y)(I.Ye,{position:"absolute",padding:12,onClick:()=>{W("audio"===M?"video":"audio")},style:{top:"50%",left:0,transform:"translateY(-50%)",visibility:"video"===M&&p&&U?"hidden":"visible"},children:(0,r.Y)(e7,{selected:M,sourceType:w.type,onSelect:null})})]}):(0,r.Y)(tE,(0,l._)((0,i._)({},e),{alternateAudioSource:w,audioIsPlaying:A,audioPlayerHasMounted:L,audioPlayerRef:n,containerRef:z,isIdle:U,selectedMedium:M,showAudioPaywall:H,showVideoPaywall:q,videoIsPlaying:p,onFinishAudio:G,onFinishVideo:()=>{if((null==w?void 0:w.type)==="free_podcast_url"){var e,t;null==(t=document.getElementById(e6))||null==(e=t.parentNode)||e.dispatchEvent(new Event("mouseenter"))}x(!0)},onSelectMedium:W,onSetAudioIsPlaying:E})),q&&(0,r.Y)(e$.v,{disableButtons:a,isFreeSubscribed:!!((null==u?void 0:u.is_free_subscribed)||g),medium:"video",post:d,pub:c,variant:"dialog",onRestart:N?()=>{var e;(null==(e=h.current)?void 0:e.player)&&(x(!1),h.current.player.currentTime=0,h.current.player.play())}:void 0,magicToken:v}),H&&(0,r.Y)(e$.v,{disableButtons:a,isFreeSubscribed:!!((null==u?void 0:u.is_free_subscribed)||g),medium:"audio",post:d,pub:c,variant:"dialog",onRestart:()=>{var e;(null==(e=n.current)?void 0:e.player)&&(D(!1),n.current.player.currentTime=0,n.current.player.play())},magicToken:v})]})};var tB=n(56458),tM=n(9036);let tR=(0,o.forwardRef)((e,t)=>{var n;let{isServingFreePodcastUrl:a,paywall:k,post:F,pub:P,reaction_token:x,recentEpisodes:E,showComments:N,user:B,videoPlayerRef:M,onChange:R,freeSignup:L}=e,{getConfigFor:O}=(0,v.mJ)(),z=(0,Y.Qg)().autoPlayVideo,{isMobile:U}=(0,C.sM)(),[q,H]=(0,o.useState)(null),[W,G]=(0,o.useState)(null),[K,V]=(0,o.useState)(!1),[j,X]=(0,o.useState)(!1),[J,Z]=(0,o.useState)(!1),Q=(0,o.useRef)(null),{isClipping:$,onStartClipping:et}=(0,d.MC)(),en=(0,tB.NJ)(F),ei=!k||(0,T.NO)({pub:P}),el=(null==en?void 0:en.approved_at)&&ei,{isPlaying:er}=(0,b.yr)(M),eo=(0,T.lu)({pub:P}),ea=e=>{(0,y.u4)(y.qY.TRANSCRIPTION_TOGGLED,{state:e?"expanded":"collapsed",post_id:F.id,transcript_as_content:!0}),V(e)};(0,o.useEffect)(()=>{("undefined"!=typeof window?(0,tM.m)(window.location.href):{}).clippingMode&&(setTimeout(()=>{et({source:"query-param",title:null})},10),(0,w.qm)("clippingMode"))},[et]);let ed=F.section_id&&null!=(n=P.sections.find(e=>e.id===F.section_id))?n:null,{feedUrl:ec,isPrivateFeed:eu}=(0,D.Zq)({pub:P,magicToken:x,user:null!=B?B:null,section:ed}),ep=(0,ee.Em)({pub:P,section:ed,spotifySettings:(0,_.Om)({pub:P,section:ed})}),eh=(0,tB.rI)({post:F,section:ed,pub:P}),em=(0,tB.Xk)({post:F,section:ed,pub:P}),eg=!!q&&q.length>0,ev=e=>{e.preventDefault(),(0,y.u4)(y.qY.COMMENTS_CLICKED,{post_id:F.id});let t=document.getElementById(ee.R4);t&&t.scrollIntoView({behavior:"smooth"})};(0,o.useEffect)(()=>{(async()=>{let e=await s().get("/api/v1/post/".concat(F.id,"/facepile"));H(e.body.reactors),G(e.body.restackers)})()},[F.id]);let eY=!1;return"undefined"!=typeof window&&(eY=new URLSearchParams(window.location.search).has("postPreview")),(0,r.Y)(u.L4,(0,l._)((0,i._)({},e),{ref:t,isShowsPost:!0,renderContent:e=>{let{comments:t,crossPostInfo:n,postContent:i}=e;return(0,r.FD)("div",{children:[(0,r.Y)(S,{visible:$,style:{zIndex:1}}),F.videoUpload?(0,r.Y)(tN,{audioPlayerRef:Q,autoPlay:z,disableShortcuts:J||$,duration:F.videoUpload.duration,hasPaywall:null!=k&&k,isClipping:$,isPostPreview:eY,mediaUpload:F.videoUpload,post:F,pub:P,freeSignup:L,reaction_token:x,restorePlaybackLocation:!eY,transcription:el?en:null,user:null!=B?B:null,videoIsPlaying:er,videoPlayerRef:M,onChange:R,onCommentsClick:ev,surface:"post",entityKey:F.id,entityType:"post",contentType:"post"}):(0,r.Y)(A,{audioPlayerRef:Q,feedUrl:ec,hasPaywall:null!=k&&k,isPrivateFeed:eu,isServingFreePodcastUrl:a,post:F,pub:P,section:ed,user:null!=B?B:null,freeSignup:L,onChange:R,onCommentsClick:ev,reaction_token:x}),(0,r.FD)("div",{className:eo?"mainContentFP-GnDHcW":"main-content-and-sidebar-fw1PHW",children:[(0,r.FD)("div",{className:eo?"":j?"main-content-full-width-eYkBTb":"main-content-qKkUCg",children:[!K&&(0,r.FD)(I.I1,{gap:16,children:[(0,r.Y)(es,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,magicToken:x,post:F,pub:P,section:ed,showLinks:ep,user:null!=B?B:null,onChange:R,onCommentsClick:ev,onToggleRestackModal:Z,onTranscriptClick:el?()=>{ea(!0)}:void 0}),eo&&(0,r.Y)(g.L,{post:F,pub:P,user:null!=B?B:null,variant:"shows-post"}),n&&(0,r.Y)(c.k,{crossPostInfo:n,postType:F.type}),(0,r.FD)("div",{className:"postContentWrapper-MYe7fH",children:[i,eo?(0,r.Y)(I.I1,{paddingTop:40,paddingBottom:20,children:(0,r.Y)(m.u,{post:F,pub:P,user:B})}):O("like_posts_enabled")&&P.community_enabled&&eg&&!k&&(0,r.Y)(I.pT,{borderTop:"detail-themed",paddingY:16,children:(0,r.Y)(p.d2,{post:F,pub:P,user:B,reactors:q,secondaryFaces:W})}),!k&&N&&t]})]}),K&&el&&(0,r.Y)(I.Ye,{paddingTop:j?32:void 0,children:(0,r.Y)(f.Of,{children:(0,r.Y)(eB,{fullWidth:j,playerRef:F.videoUpload?M:Q,post:F,transcription:en,onClose:()=>{ea(!1),X(!1)},onCollapse:()=>X(!1),onExpand:()=>X(!0)})})})]}),!j&&!eo&&(0,r.Y)(I.I1,{className:"sidebar-RUDMha",borderLeft:U?void 0:"detail-themed",children:(0,r.Y)(eC,{feedUrl:ec,isStandaloneVideo:eh,eligibleForPodcast:em,post:F,pub:P,recentEpisodes:null!=E?E:null,section:ed,showLinks:ep,user:null!=B?B:null})})]}),U&&!eo&&(0,r.Y)(h.I2,{allowEdit:null==B?void 0:B.is_contributor,hideComments:!N,isStatic:!1,post:F,postReactionToken:x,pub:P,user:B,onCommentsClick:ev,onChange:R})]})}}))}),tL=(0,o.forwardRef)((e,t)=>{let n=(0,o.useRef)(null),a=(0,o.useRef)(null);return(0,r.Y)(d.UQ,{postId:e.post.id,videoPlayerRef:n,virtualizedListRef:a,children:(0,r.Y)(tR,(0,l._)((0,i._)({},e),{ref:t,videoPlayerRef:n}))})})},19601:function(e,t,n){n.d(t,{A:()=>l});var i=n(56262);let l=(e,t,n,l,r)=>!(!r&&!(null==e?void 0:e.has_publication)||l.invite_only||(0,i.isPaidAudience)(n.audience))&&!!t.enable_restacking},22092:function(e,t,n){n.d(t,{E:()=>r,_:()=>o});var i=n(4016),l=n(39318);let r=e=>{let{pub:t,section:n}=e;return(0,i.lu)({pub:t})&&!!n&&"the-free-press-live"===n.slug},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,l.a7q)({for_pub:e.subdomain,justTrying:!0,redirect:(0,l.eV6)(e,t)})}}}]);