"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["83041"],{29528:function(e,t,i){i.d(t,{A:()=>F});var n=i(69277),a=i(70408),s=i(4006),r=i(12215),o=i(97213),c=i(17402),E=i(84605),d=i(25006),l=i(86500),S=i(94729),_=i(12501),p=i(35369),A=i(60322),T=i(76977),I=i(16993),u=i(57820),C=i(414),Y=i(63136),N=i(36372),U=i(66511),O=i(23380),y=i(91392);let R="cellPadding-f5tfb5",F=e=>{let{open:t,onSubdomain:i,close:n}=e,[a,o]=(0,c.useState)(i?y.pz.PUBLISHER:y.pz.SUBSTACK),[A,Y]=(0,c.useState)(!1),[U,R]=(0,c.useState)(!0),[F,P]=(0,c.useState)(!1),[H,w]=(0,c.useState)(new Set),B=(0,d.df)(),{popToast:g}=(0,N.d)(),{iString:k}=(0,E.GO)(),{language:f}=(0,E.GO)(),h=(0,O.NN)(f),{refetch:L}=(0,_.st)({pathname:"/api/v1/cookie_preferences",method:"POST"});(0,c.useEffect)(()=>{let e=async()=>{R(!0),Y(!1);try{var e,t,i,n;let a=await (0,S.x6)("/api/v1/cookie_preferences"),s=null==(e=a.pubPreferences)?void 0:e.find(e=>e.pubId===(null==B?void 0:B.id)),r=new Set([...null!=(i=null==(t=a.substackPreferences)?void 0:t.disabledCookies)?i:[],...null!=(n=null==s?void 0:s.disabledCookies)?n:[]]);w(r)}catch(e){w(new Set([...O.FB,...O.F7]))}finally{R(!1)}};t&&((0,l.u4)(l.qY.COOKIE_MANAGEMENT_MODAL_SEEN,{}),e())},[t,null==B?void 0:B.id]);let D=async e=>{let{substackDisabledCookies:t,pubDisabledCookies:i}=e;r.set(y.HY.HIDE_COOKIE_BANNER,new Date().toJSON(),{expires:365}),await L({json:{pubDisabledCookies:i,substackDisabledCookies:t}})},M=async()=>{let e,t;if(F)return;P(!0);let i=Array.from(H),r=Object.values(y.Pv),o=Object.values(y.HY);A?(t=i.filter(e=>r.includes(e)),e=i.filter(e=>o.includes(e))):(t=[...O.F7],e=[...O.FB]);try{await D({substackDisabledCookies:e,pubDisabledCookies:t});let r=A?i:[...O.FB,...O.F7];(0,l.u4)(l.qY.COOKIE_PREFERENCES_SET,{disabledCookies:r,tab:a}),(0,l.u4)(l.qY.COOKIE_MANAGEMENT_MODAL_SUBMITTED,{disabledCookies:r,tab:a}),g(()=>(0,s.Y)(N.y,{text:k("Preferences saved")})),window.location.reload(),n()}catch(e){g(()=>(0,s.Y)(N.y,{text:k("Failed to save preferences. Please try again.")})),P(!1)}},b=async()=>{if(!F){P(!0);try{await D({substackDisabledCookies:[],pubDisabledCookies:[]}),(0,l.u4)(l.qY.COOKIE_PREFERENCES_SET,{disabledCookies:[],tab:a}),(0,l.u4)(l.qY.COOKIE_MANAGEMENT_MODAL_SUBMITTED,{disabledCookies:[],tab:a}),g(()=>(0,s.Y)(N.y,{text:k("Preferences saved")})),window.location.reload(),n()}catch(e){g(()=>(0,s.Y)(N.y,{text:k("Failed to save preferences. Please try again.")})),P(!1)}}},K=e=>{A||Y(!0),w(t=>{let i=new Set(t);return i.has(e)?i.delete(e):i.add(e),i}),(0,l.u4)(l.qY.COOKIE_MANAGEMENT_MODAL_COOKIE_TOGGLED,{cookie:e})},v=[{value:y.pz.PUBLISHER,label:"Publisher"},{value:y.pz.SUBSTACK,label:"Substack"}];return(0,s.FD)(I.aF,{isOpen:t,onClose:M,className:"modal-bBpQD3",disableCloseOnBackdropClick:!0,children:[(0,s.Y)(I.rQ,{showClose:!0,onClose:()=>{(0,l.u4)(l.qY.COOKIE_MANAGEMENT_MODAL_DISMISSED,{}),M()},title:k("Cookie Preferences")}),(0,s.Y)(I.cw,{className:"grow-CBXF8f",children:U?(0,s.Y)(T.VP,{flex:"grow",justifyContent:"center",alignItems:"center",children:(0,s.Y)(u.y$,{})}):(0,s.FD)(T.I1,{flex:"fill",gap:8,children:[i&&(0,s.Y)(C.r,{tabs:v,value:a,onChange:o}),(0,s.FD)(T.I1,{flex:"fill",children:["publisher"===a&&(0,s.Y)(m,{cookies:h.filter(e=>e.owner===y.pz.PUBLISHER),disabledCookies:H,toggleState:K}),"substack"===a&&(0,s.Y)(m,{cookies:h.filter(e=>e.owner===y.pz.SUBSTACK),disabledCookies:H,toggleState:K})]})]})}),(0,s.Y)(I.jl,{primaryButton:(0,s.Y)(p.$n,{onClick:M,disabled:U||F,children:A?k("Save preferences"):k("Reject All")}),secondaryButton:(0,s.Y)(p.$n,{onClick:b,disabled:U||F,children:k("Accept all")}),showDivider:!0})]})},m=e=>{let{cookies:t,disabledCookies:i,toggleState:r}=e;return(0,s.Y)("table",{className:"table-m2WTld",children:(0,s.Y)("tbody",{children:t.map(e=>(0,s.Y)(P,(0,a._)((0,n._)({},e),{onToggle:()=>r(e.id),enabled:!i.has(e.id)})))})})},P=e=>{let{name:t,type:i,description:n,enabled:a,onToggle:r}=e;return(0,s.FD)("tr",{className:"rowBorderBottom-tHD_Mb",children:[(0,s.Y)("td",{className:R,children:(0,s.FD)(T.I1,{gap:2,alignItems:"start",children:[(0,s.Y)(Y.EY.B4,{children:t}),(0,s.Y)(H,{cookieType:i})]})}),(0,s.Y)("td",{className:R,children:(0,s.Y)(Y.EY.B5,{color:"secondary",children:n})}),(0,s.Y)("td",{className:R,children:i!==y.UF.NECESSARY&&(0,s.Y)(A.S,{checked:a,onChange:r})})]},t)},H=e=>{let{cookieType:t}=e,{language:i}=(0,E.GO)(),n=(0,O.ks)(i);return(0,s.Y)(U.m_,{text:n[t],children:(0,s.FD)(T.Ye,{justifyContent:"start",alignItems:"center",gap:4,children:[(0,s.Y)(Y.EY.Meta,{children:t}),(0,s.Y)(o.A,{size:16,stroke:"var(--color-fg-secondary)"})]})})}},45378:function(e,t,i){i.d(t,{i:()=>n});async function n(e,t){let{editImage:n}=await Promise.all([i.e("40397"),i.e("67363")]).then(i.bind(i,57998));return n(e,t)}},23380:function(e,t,i){i.d(t,{F7:()=>c,FB:()=>o,NN:()=>r,ks:()=>s});var n=i(96400),a=i(91392);let s=e=>{let{iString:t}=n.TH.i(e||"en");return{Necessary:t("These cookies are essential for you to browse the website and use its features."),Performance:t("These cookies collect information about how you use a website, like which pages you visited and which links you clicked on."),Functionality:t("These cookies allow us to remember choices you have made in the past, and do things like auto-login")}},r=e=>{let{iString:t}=n.TH.i(e||"en");return[{name:"_ga family",id:a.Pv.GA_TRACKING,type:a.UF.PERFORMANCE,description:t("3rd party analytics tracking."),owner:a.pz.PUBLISHER},{name:"Google Tag Manager",id:a.Pv.GA_TAG_MANAGER,type:a.UF.PERFORMANCE,description:t("Used for Google tag management and 3rd party analytics tracking."),owner:a.pz.PUBLISHER},{name:"Facebook Pixel",id:a.Pv.FB_PIXEL,type:a.UF.PERFORMANCE,description:t("Used for facebook ad campaign 3rd party analytics."),owner:a.pz.PUBLISHER},{name:"Twitter Pixel",id:a.Pv.TWITTER_PIXEL,type:a.UF.PERFORMANCE,description:t("Used for X (formerly known as Twitter) ad campaign 3rd party analytics."),owner:a.pz.PUBLISHER},{name:"Parse.ly Pixel",id:a.Pv.PARSELY_PIXEL,type:a.UF.PERFORMANCE,description:t("Used for parse.ly 3rd party analytics."),owner:a.pz.PUBLISHER},{name:"intro_popup_last_hidden_at",id:a.HY.INTRO_POPUP_LAST_HIDDEN_AT,type:a.UF.FUNCTIONALITY,description:t("Prevents showing introductory information the user has already seen."),owner:a.pz.SUBSTACK},{name:"muxData",id:a.HY.MUX_DATA,type:a.UF.FUNCTIONALITY,description:t("Used for anonymous video metric collection and aggregation."),owner:a.pz.SUBSTACK},{name:"like_upsell_last_shown_at",id:a.HY.LIKE_UPSELL_LAST_SHOWN_AT,type:a.UF.FUNCTIONALITY,description:t("Prevents users from repeatedly being shown features."),owner:a.pz.SUBSTACK},{name:"chatbot_terms_last_accepted_at",id:a.HY.CHATBOT_TERMS_LAST_ACCEPTED_AT,type:a.UF.FUNCTIONALITY,description:t("Prevents users from repeatedly having to accept chatbot terms."),owner:a.pz.SUBSTACK},{name:"preferred_language",id:a.HY.PREFERRED_LANGUAGE,type:a.UF.FUNCTIONALITY,description:t("Stores the user's preferred language"),owner:a.pz.SUBSTACK},{name:"visit_id",id:a.HY.VISIT_ID,type:a.UF.PERFORMANCE,description:t("First party analytics tracking."),owner:a.pz.SUBSTACK},{name:"ajs_anonymous_id",id:a.HY.ANONYMOUS_ID,type:a.UF.PERFORMANCE,description:t("First party analytics tracking."),owner:a.pz.SUBSTACK},{name:"ab_testing_id",id:a.HY.AB_TESTING_ID,type:a.UF.PERFORMANCE,description:t("First party analytics tracking."),owner:a.pz.SUBSTACK},{name:"ab_experiment_sampled",id:a.HY.AB_EXPERIMENT_SAMPLED,type:a.UF.PERFORMANCE,description:t("First party analytics tracking."),owner:a.pz.SUBSTACK},{name:"_ga family",id:a.HY.GA_TRACKING,type:a.UF.PERFORMANCE,description:t("3rd party analytics tracking."),owner:a.pz.SUBSTACK},{name:"AdQuick tracking pixel",id:a.HY.AD_QUICK_TRACKING_PIXEL,type:a.UF.PERFORMANCE,description:t("3rd party analytics tracking."),owner:a.pz.SUBSTACK},{name:"Meta tracking pixel",id:a.HY.META_TRACKING_PIXEL,type:a.UF.PERFORMANCE,description:t("3rd party analytics tracking."),owner:a.pz.SUBSTACK},{name:"_dd_s",id:a.HY.DATADOG_S,type:a.UF.PERFORMANCE,description:t("First party cookie used to identify and diagnose technical problems on the site."),owner:a.pz.SUBSTACK},{name:"fs_uid",id:a.HY.FULLSTORY_UID,type:a.UF.PERFORMANCE,description:t("Used to track user actions across the site for debugging purposes."),owner:a.pz.SUBSTACK},{name:"__zlcmid",id:a.HY.ZENDESK_ID,type:a.UF.PERFORMANCE,description:t("Stores visitorâ€™s machine-id for authentication with Zendesk chat widget."),owner:a.pz.SUBSTACK},{name:"substack.sid",id:a.HY.SESSION_SID,type:a.UF.NECESSARY,description:t("Session identifier."),owner:a.pz.SUBSTACK},{name:"connect.sid",id:a.HY.CUSTOM_DOMAIN_SESSION_SID,type:a.UF.NECESSARY,description:t("Session identifier."),owner:a.pz.SUBSTACK},{name:"substack.lli",id:a.HY.LIKELY_LOGGED_IN,type:a.UF.NECESSARY,description:t("Communicates login state across first party domains"),owner:a.pz.SUBSTACK},{name:"disable_html_pixels",id:a.HY.DISABLE_HTML_PIXELS,type:a.UF.NECESSARY,description:t("Ensures a consistent user experience across network requests."),owner:a.pz.SUBSTACK},{name:"experiment_",id:a.HY.DISABLE_EXPERIMENTS,type:a.UF.NECESSARY,description:t("Ensures a consistent user experience across network requests."),owner:a.pz.SUBSTACK},{name:"hideCookieBanner",id:a.HY.HIDE_COOKIE_BANNER,type:a.UF.NECESSARY,description:t("Ensures a consistent user experience across network requests."),owner:a.pz.SUBSTACK},{name:"cf_clearance",id:a.HY.CF_CLEARENCE,type:a.UF.NECESSARY,description:t("Used to grant access to our servers from our Content Delivery Network."),owner:a.pz.SUBSTACK},{name:"__cf_bm",id:a.HY.CF_BM,type:a.UF.NECESSARY,description:t("Used to block bot access to the site"),owner:a.pz.SUBSTACK},{name:"AWSALBTG / AWSALBTGCORS",id:a.HY.AWSALB,type:a.UF.NECESSARY,description:t("Ensures a consistent user experience across network requests."),owner:a.pz.SUBSTACK},{name:"cookie_storage_key",id:a.HY.COOKIE_STORAGE_KEY,type:a.UF.NECESSARY,description:t("Allows us to store your cookie preferences."),owner:a.pz.SUBSTACK},{name:"substack.oauth_interaction",id:a.HY.OAUTH_INTERACTION,type:a.UF.NECESSARY,description:t("Manages your current step in a multi-stage OAuth process like login or consent."),owner:a.pz.SUBSTACK},{name:"substack.oauth_session",id:a.HY.OAUTH_SESSION,type:a.UF.NECESSARY,description:t("Keeps your OAuth logins active."),owner:a.pz.SUBSTACK},{name:"substack.oauth_resume",id:a.HY.OAUTH_RESUME,type:a.UF.NECESSARY,description:t("Helps continue a multi-stage process after you have completed an action, like logging in or giving consent."),owner:a.pz.SUBSTACK}]},o=r().filter(e=>e.owner===a.pz.SUBSTACK&&e.type!==a.UF.NECESSARY).map(e=>e.id),c=r().filter(e=>e.owner===a.pz.PUBLISHER&&e.type!==a.UF.NECESSARY).map(e=>e.id),E={[a.HY.GA_TRACKING]:"_ga",[a.HY.GA_TAG_MANAGER]:"_ga",[a.HY.MUX_DATA]:"muxData",[a.HY.ANONYMOUS_ID]:a.FI.ANONYMOUS_ID,[a.HY.VISIT_ID]:a.FI.VISIT_ID,[a.HY.AB_TESTING_ID]:a.FI.AB_TESTING_ID,[a.HY.AB_EXPERIMENT_SAMPLED]:a.FI.AB_EXPERIMENT_SAMPLED,[a.HY.LIKE_UPSELL_LAST_SHOWN_AT]:a.FI.LIKE_UPSELL_LAST_SHOWN_AT,[a.HY.INTRO_POPUP_LAST_HIDDEN_AT]:a.FI.INTRO_POPUP_LAST_HIDDEN_AT,[a.HY.DISABLE_HTML_PIXELS]:a.FI.DISABLE_HTML_PIXELS,[a.HY.COOKIE_STORAGE_KEY]:a.FI.COOKIE_STORAGE_KEY,[a.HY.OAUTH_INTERACTION]:a.FI.OAUTH_INTERACTION,[a.HY.OAUTH_SESSION]:a.FI.OAUTH_SESSION,[a.HY.OAUTH_RESUME]:a.FI.OAUTH_RESUME,[a.HY.EXPERIMENTS]:"experiment_",[a.HY.DATADOG_S]:"_dd_s",[a.HY.FULLSTORY_UID]:"fs_",[a.HY.ZENDESK_ID]:"__zlcmid",[a.Pv.GA_TAG_MANAGER]:"_ga",[a.Pv.GA_TRACKING]:"_ga",[a.Pv.FB_PIXEL]:"_fbp",[a.Pv.TWITTER_PIXEL]:"_twq",[a.Pv.PARSELY_PIXEL]:"_parsely_visitor"};a.HY.AB_TESTING_ID,a.HY.AB_EXPERIMENT_SAMPLED,a.HY.ANONYMOUS_ID,a.HY.VISIT_ID,a.HY.EXPERIMENTS,a.HY.DISABLE_HTML_PIXELS,a.HY.DISABLE_EXPERIMENTS,a.HY.COOKIE_STORAGE_KEY,null==E||E[a.HY.ANONYMOUS_ID]},55714:function(e,t,i){function n(e){let{streamId:t}=e;return"live-stream:".concat(t)}i.d(t,{sl:()=>n}),RegExp("^live-stream:(?<streamId>\\d+)$"),RegExp("^live-stream:(?<streamId>\\d+)-pub:(?<pubId>\\d+)$")}}]);