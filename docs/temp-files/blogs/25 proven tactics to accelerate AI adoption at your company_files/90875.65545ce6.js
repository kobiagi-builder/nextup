"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["90875"],{95836:function(e,t,n){n.d(t,{A:()=>l});let l={attachment:"attachment-E9mJrI",logoContainer:"logoContainer-vqxwR7",bgImage:"bgImage-OTU5LC",header:"header-d8U2_d",gradientBG:"gradientBG-jbdaN9",gradientBg:"gradientBG-jbdaN9",button:"button-uDQ6x4"}},41301:function(e,t,n){n.d(t,{A:()=>l});let l={tag:"tag-vx6tKM"}},4438:function(e,t,n){n.d(t,{A:()=>l});let l={link:"link-LIBpto"}},1218:function(e,t,n){n.d(t,{A:()=>l});let l={videoPlayer:"videoPlayer-AdXrEr",videoPlayerContainer:"videoPlayerContainer-rPl28G",tagContainer:"tagContainer-S_oHWt"}},64843:function(e,t,n){n.d(t,{q:()=>E});var l=n(69277),i=n(4006),r=n(32485),a=n.n(r),o=n(93540),d=n(43850),c=n(17402),s=n(23623),u=n(31452),m=n(46271),h=n(94328),p=n(68349),f=n(68410),v=n(89490),g=n(76977),y=n(63136),w=n(68391),b=n(43296),Y=n(13348),S=n(59294),k=n(1235),I=n(55714),_=n(49807),C=n(57324);let E=e=>{var t,n;let{activeLiveStream:r,fromPub:E=!1,listenForViewerCount:x=!0,isFeedItem:B=!1,videoPlayerProps:F,startMuted:P=!1}=e,T=(0,c.useRef)(null),A=(0,c.useRef)(null),[N,D]=(0,c.useState)(!B);(0,w.C4)({videoPlayerRef:T,showPaywall:!1,disable:N}),(0,c.useEffect)(()=>{if(N){let e=()=>{D(!1)};return window.addEventListener("scroll",e),()=>{window.removeEventListener("scroll",e)}}},[N]),(0,c.useEffect)(()=>{var e;let t=null==(e=T.current)?void 0:e.player,n=()=>{t&&t.duration&&t.duration>1&&!isNaN(t.duration)&&(t.currentTime=t.duration-1),t&&(t.playbackRate=1)};return t&&t.addEventListener("play",n),()=>{null==t||t.removeEventListener("play",n)}},[T.current]);let O=(0,S.AC)(A),[L,j]=(0,c.useState)(r.liveStreamInformation.currentViewerCount),[U,z]=(0,c.useState)(!1),{isMobile:M}=(0,f.sM)(),R=(0,m.Qg)().autoPlayVideo,[G,H]=(0,c.useState)(!1);(0,c.useEffect)(()=>{let e;return G&&(e=setTimeout(()=>{H(!1)},4e3)),()=>{clearTimeout(e)}},[G]);let V=(0,b.XW)();(0,c.useEffect)(()=>{if(x)return null==V?void 0:V.listen({[(0,I.sl)({streamId:r.liveStream.id})]:e=>{var t,n;let{data:l}=e;(null==l||null==(t=l.message)?void 0:t.type)==="live-stream:viewer-count-updated"&&j(l.message.current_viewer_count),(null==l||null==(n=l.message)?void 0:n.type)==="live-stream:ended"&&z(!0)}})},[V,x]);let J=r.liveStreamInformation.isExplicit||"active"!==r.liveStream.status;return U?null:(0,i.FD)(g.pT,{position:"relative",overflow:"hidden",radius:"sm",ref:A,className:"liveStreamContainer-NKIioJ",onClick:e=>{if(e.stopPropagation(),"active"===r.liveStream.status){let e=(0,p.rr)()?(0,_.Xrv)({liveStreamId:r.liveStream.id,utm_campaign:C._9.substackProfile,params:(0,l._)({utm_medium:C.Jn.web},E&&{fromPub:E})}):(0,_.UUj)({noBase:!0,liveStreamId:r.liveStream.id,params:(0,l._)({utm_campaign:C._9.substackProfile,utm_medium:C.Jn.web},E&&{fromPub:E})});(0,p.rr)()?document.location.href=e:(0,p.V2)(e)}else H(!0)},cursor:"pointer",children:[J?(0,i.FD)(i.FK,{children:[r.liveStreamInformation.isExplicit&&(0,i.Y)(v.az,{position:"absolute",inset:0,zIndex:1,children:(0,i.FD)(g.I1,{className:"liveStreamExplicitLabel-roJA52",alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.Y)(o.A,{stroke:"white",size:24}),(0,i.Y)(y.EY.B5,{color:"white",textAlign:"center",translated:!0,children:"May contain sensitive content"})]})}),(0,i.Y)("img",{className:a()("liveStreamThumbnail-uER3zj",r.liveStreamInformation.isExplicit&&"explicit-tw5du6"),src:r.liveStreamInformation.desktopThumbnailGifUrl,alt:"Live stream thumbnail"})]}):(0,i.Y)(u.N,(0,l._)({className:"liveStreamVideoPlayer-tm5aYT",ref:T,liveStreamId:r.liveStream.id,noKeyboardShortcuts:!0,noControls:!0,autoPlay:R,pub:r.pub||null,mediaUpload:{id:"ls-".concat(r.liveStream.id),width:1920,height:1080},noJoin:!0,thumbnailUrl:r.liveStreamInformation.desktopThumbnailPhotoUrl,isLive:!0,renderPlayButton:B?()=>(0,i.Y)(Y.ro,{isPlaying:!1,size:M?40:56}):void 0,startMuted:P},F),!0),"active"===r.liveStream.status&&(0,i.FD)(g.Ye,{gap:8,className:"viewerCountContainer-uxBWdH",children:[(0,i.Y)(h.LM,{}),(0,i.Y)(h.u8,{viewerCount:L})]}),G&&(0,i.Y)(g.Ye,{className:"endedMessage-Z3p5RL",children:(0,i.FD)(g.I1,{className:"endedMessageContent-d_enFy",padding:12,radius:"md",alignItems:"center",justifyContent:"center",gap:4,children:[(0,i.Y)(d.A,{size:24,stroke:"white"}),(0,i.Y)(y.EY.B3,{color:"white",children:"Live video has ended"})]})}),(0,i.Y)("div",{className:"backDrop-FxvQIL"}),(0,i.FD)(g.Ye,{position:"absolute",style:{left:0,right:0,bottom:0,width:"100%",pointerEvents:"none"},direction:"row-reverse",alignItems:"end",children:[!J&&(0,i.Y)(v.az,{padding:12,onClick:e=>{e.stopPropagation()},style:{pointerEvents:"auto"},children:(0,i.Y)(k.A,{hideVolumeBar:!0,disableShortcuts:!1,disableTooltips:!1,isFocused:O,mediaRef:T})}),(0,i.Y)(s.a,{children:(0,i.Y)(g.I1,{className:"liveStreamTitle-xahUfX",gap:4*!B,padding:B?12:16,style:{pointerEvents:"none"},children:B?(0,i.FD)(i.FK,{children:[(0,i.Y)(y.EY.B3,{weight:"semibold",color:"vibrance-primary",children:r.liveStream.title}),(0,i.Y)(y.EY.B4,{color:"vibrance-secondary",children:null==(t=r.pub)?void 0:t.name})]}):(0,i.FD)(i.FK,{children:[(0,i.Y)(y.EY.H4,{color:"vibrance-primary",children:r.liveStream.title}),(0,i.Y)(y.EY.B3,{color:"vibrance-secondary",children:null==(n=r.pub)?void 0:n.name})]})})})]})]})}},7984:function(e,t,n){n.d(t,{a:()=>u,x:()=>d});var l=n(4006),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function d(e){let{country:t,type:n,id:r}=e,{iString:d}=(0,i.GO)(),s="https://embed.music.apple.com/".concat(t,"/").concat(n,"/").concat(r,"?theme=auto&app=music");return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.appleMusic,children:(0,l.Y)(c,{src:s,height:"song"===n?"175":"450",frameBorder:0,allow:"encrypted-media *",title:d("Apple Music player"),sandbox:"allow-forms allow-popups allow-same-origin allow-scripts allow-storage-access-by-user-activation allow-top-navigation-by-user-activation"})})}let c=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),s=["album","playlist","song","artist","station"];function u(e){if(!e)return null;try{let t=new URL(e);if(!["music.apple.com","www.music.apple.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<3)return null;let[l,i,...r]=n,a=r[r.length-1];if(!l||!i||!a)return null;if("album"===i&&t.searchParams.has("i")){let e=t.searchParams.get("i");if(e)return{country:l,type:"song",id:e}}if(!s.includes(i))return null;return{country:l,type:i,id:a}}catch(e){return null}}},95887:function(e,t,n){n.d(t,{G:()=>p});var l=n(4006),i=n(17402),r=n(64843),a=n(68349),o=n(76977),d=n(42588),c=n(20437),s=n(74171),u=n(49807),m=n(57324),h=n(44307);function p(e){let{activeLiveStream:t,onAttachmentClick:n,maxWidth:p,videoPlayerProps:f,feedItem:v}=e,g=(0,a.rr)(),y=(0,i.useRef)(null),w=(0,c.wF)(y,p);if("scheduled"===t.liveStream.status)return(0,l.Y)(d.S,{liveStream:t,post:null,feedItem:v});let b=s.mc/s.ld,Y={};if(g){let e=null!=w?w:c.PH;Y={width:"".concat(e,"px"),height:"".concat(e/b,"px")}}else{let e=null!=w?w:c.di;Y={width:"".concat(e,"px"),height:"".concat(e/b,"px")}}return(0,l.Y)(o.I1,{width:"100%",ref:y,onClick:()=>{null==n||n({attachmentType:"live_stream",attachmentId:t.liveStream.id.toString()});let e=g?(0,u.Xrv)({liveStreamId:t.liveStream.id,utm_campaign:m._9.substackProfile,params:{utm_medium:m.Jn.web,appStoreRedirect:!!g}}):(0,u.UUj)({noBase:!0,liveStreamId:t.liveStream.id,params:{utm_campaign:m._9.substackProfile,utm_medium:m.Jn.web}});g?document.location.href=e:(0,a.V2)(e)},children:(0,l.Y)(o.I1,{style:Y,radius:"md",overflow:"hidden",position:"relative",className:h.A.videoPlayerContainer,children:(0,l.Y)(r.q,{activeLiveStream:t,listenForViewerCount:!1,isFeedItem:!0,videoPlayerProps:f,startMuted:!0})})})}},26401:function(e,t,n){n.d(t,{G:()=>m});var l=n(4006),i=n(17402),r=n(78649),a=n(84605),o=n(42686),d=n(35369),c=n(76977),s=n(63136),u=n(504);function m(e){let{attachment:t,readOnly:n,isRestack:m,onAttachmentClick:h,utm_content:p}=e,f=["you-blocked","you-muted"].includes(t.reason)&&!!t.hidden_attachment,[v,g]=(0,i.useState)(!1),{iString:y}=(0,a.GO)();return v&&t.hidden_attachment?(0,l.Y)(o.wR,{attachment:t.hidden_attachment,readOnly:n,isRestack:m,onAttachmentClick:h,utm_content:p}):(0,l.Y)(r.Q,{children:(0,l.FD)(c.pT,{bg:"primary",border:"detail",justifyContent:f?"space-between":"center",alignItems:"center",radius:"md",padding:16,children:[(0,l.Y)(s.EY.B4,{color:"secondary",align:"center",children:"you-blocked"===t.reason?"This note is from someone you blocked.":"you-muted"===t.reason?"This note is from someone you muted.":"This attachment is not available."}),f&&(0,l.Y)(d.Nm,{resetCss:!0,onClick:()=>{var e;(0,u.qx)(t.id,t.reason,{noteId:null==(e=t.hidden_attachment)?void 0:e.id}),g(!0)},children:(0,l.Y)(s.EY,{weight:"bold",size:14,color:"secondary",children:y("Show")})})]})})}n(50129)},65547:function(e,t,n){n.d(t,{E:()=>c});var l=n(4006),i=n(17402),r=n(84605),a=n(89490),o=n(76977),d=n(44307);function c(e){let{fullEmbedUrl:t}=e,{iString:n}=(0,r.GO)(),a=(0,i.useRef)(null),[c,u]=(0,i.useState)(120);return(0,i.useEffect)(()=>{let e=e=>{a.current&&e.source===a.current.contentWindow&&e.data.iframeHeight&&"number"==typeof e.data.iframeHeight&&u(e.data.iframeHeight)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[]),(0,l.Y)(o.pT,{radius:"md",outline:"detail",overflow:"hidden",className:d.A.polymarket,maxWidth:360,width:360,children:(0,l.Y)(s,{ref:a,src:t,height:c,frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:n("Polymarket embed"),sandbox:"allow-scripts allow-same-origin allow-popups allow-popups-to-escape-sandbox"})})}let s=(0,a.I4)({border:"unset",bg:"white",flex:"grow",radius:"md"},"iframe")},77181:function(e,t,n){n.d(t,{Y:()=>d,l:()=>s});var l=n(4006),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function d(e){let{url:t,type:n}=e,{iString:r}=(0,i.GO)(),d=encodeURIComponent(t);return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.soundcloud,children:(0,l.Y)(c,{src:"https://w.soundcloud.com/player/?url=".concat(d,"&color=%23ff6719&auto_play=false&hide_related=true&show_comments=false&show_user=true&show_reposts=false&show_teaser=false&visual=true"),height:"track"===n?"166":"300",frameBorder:0,scrolling:"no",title:r("Soundcloud player"),allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",sandbox:"allow-scripts allow-same-origin"})})}let c=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe");function s(e){if(!e)return null;try{let t=new URL(e);if(!["soundcloud.com","www.soundcloud.com","m.soundcloud.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let l="track";return n.includes("sets")?l="set":n.length>=2&&(l="track"),{url:e,type:l}}catch(e){return null}}},25667:function(e,t,n){n.d(t,{E:()=>d,x:()=>u});var l=n(4006),i=n(84605),r=n(89490),a=n(76977),o=n(44307);function d(e){let{embedType:t,resourceId:n}=e,{iString:r}=(0,i.GO)();if(!n)return null;let d="https://open.spotify.com/embed/".concat(t,"/").concat(n);return(0,l.Y)(a.pT,{radius:"md",outline:"detail",overflow:"hidden",className:o.A.spotify,children:(0,l.Y)(c,{src:d,height:"playlist"===t||"album"===t?"352":"152",frameBorder:0,allow:"clipboard-write; encrypted-media; fullscreen; picture-in-picture",title:r("Spotify player"),sandbox:"allow-scripts allow-same-origin"})})}let c=(0,r.I4)({border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe"),s=["track","playlist","show","episode","artist","album"];function u(e){if(!e)return null;try{let t=new URL(e);if(!["spotify.com","www.spotify.com","open.spotify.com","play.spotify.com","embed.spotify.com"].includes(t.host))return null;let n=t.pathname.split("/").filter(Boolean);if(n.length<2)return null;let[l,i]=n;if(!s.includes(l))return null;return{embedType:l,resourceId:i}}catch(e){return null}}},81992:function(e,t,n){n.d(t,{ot:()=>u});var l=n(4006),i=n(2675),r=n(25859),a=n(63136),o=n(83629),d=n(50129),c=n(49807),s=n(11993);function u(e){let{attachments:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e;if(0===t.length)return null;let a=t.filter(e=>"image"!==e.type&&"video"!==e.type&&!("post"===e.type&&e.postSelection));return(0,l.Y)(l.FK,{children:a.map(e=>(0,l.Y)(m,{attachment:e,readOnly:n,onAttachmentClick:i,utm_content:r},e.id))})}function m(e){let{attachment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,o=null;return(0,d._d)(t)?null:("textlink"===t.type&&(o=(0,l.Y)(h,{url:t.url,readOnly:n,onClick:()=>{null==i||i()}})),"link"===t.type&&(o=(0,l.Y)(p,{readOnly:n,onClick:i,url:t.linkMetadata.url},t.id)),"post"===t.type&&(o=(0,l.Y)(f,{readOnly:n,post:t.post,publication:t.publication,onClick:i},t.id)),"comment"===t.type&&(o=(0,l.Y)(g,{comment:t.comment,readOnly:n,onAttachmentClick:i,utm_content:r},t.id)),"publication"===t.type&&(o=(0,l.Y)(v,{readOnly:n,publication:t.publication,onClick:i},t.id)),o?(0,l.Y)(a.EY.B4,{color:"highlight",children:o}):null)}function h(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.Y)(a.EY.B4,{decoration:"hover-underline",style:{color:"var(--color-link-fg)"},children:(0,l.Y)(r.Yq,{onClick:i,href:n?void 0:t,rel:"nofollow noopener ugc",target:"_blank",children:(0,s.H)(t,48)})})}function p(e){let{url:t,readOnly:n,onClick:i}=e;return(0,l.Y)(h,{url:t,readOnly:n,onClick:i})}function f(e){let{post:t,publication:n,readOnly:r,onClick:a}=e,o=(0,c.wu9)(n,t,{feedViewer:!1}),d=(0,i.vZ)({post:t,publication:n,readOnly:r,onClick:a});return(0,l.Y)(h,{url:o,readOnly:r,onClick:()=>{d(new MouseEvent("click"))}})}function v(e){let{publication:t,readOnly:n,onClick:i}=e;return(0,l.Y)(h,{url:t.base_url,readOnly:n,onClick:i})}function g(e){let{comment:t,readOnly:n,onAttachmentClick:i,utm_content:r}=e,a=(0,c.Zgx)(t,{noBase:o.Z,urlParams:{utm_content:null!=r?r:void 0}});return(0,l.Y)(h,{url:a,readOnly:n,onClick:()=>null==i?void 0:i({commentId:String(t.id)})})}},9079:function(e,t,n){n.d(t,{k:()=>o});var l=n(4006),i=n(89490),r=n(76977),a=n(44307);function o(e){let{videoId:t}=e;return(0,l.Y)(r.pT,{radius:"md",outline:"detail",overflow:"hidden",className:a.A.tiktok,children:(0,l.Y)(d,{src:"https://www.tiktok.com/player/v1/".concat(t,"?").concat("volume_control=0&loop=1&timestamp=0&closed_caption=0&play_button=1&fullscreen_button=0"),frameBorder:0})})}let d=(0,i.I4)({className:a.A.tiktokIframe,border:"unset",bg:"black",flex:"grow",radius:"md"},"iframe")},90856:function(e,t,n){n.d(t,{f:()=>w});var l=n(69277),i=n(70408),r=n(4006),a=n(78649),o=n(58050),d=n(84605),c=n(46271),s=n(99662),u=n(24078),m=n(35369),h=n(89718),p=n(76977),f=n(81203),v=n(63136),g=n(39318),y=n(44307);function w(e){let{attachment:t,readOnly:n,onClick:l,noteId:i}=e,{user:a}=t,{iString:o}=(0,d.GO)(),c=a.primaryPublication,s=a.name||o("Substack user");return(0,r.Y)(b,{readOnly:n,onClick:l,user:a,children:(0,r.FD)(p.VP,{gap:12,padding:12,children:[(0,r.FD)(p.fI,{gap:12,alignItems:"start",children:[(0,r.FD)(p.VP,{gap:8,minWidth:0,flex:"grow",children:[(0,r.FD)(p.VP,{children:[(0,r.Y)(v.EY.B2,{color:"primary",weight:"medium",ellipsis:!0,nowrap:!0,children:s}),a.handle&&(0,r.FD)(v.EY.B4,{color:"secondary",ellipsis:!0,nowrap:!0,children:["@",a.handle]})]}),a.bio&&(0,r.Y)(v.EY.B4,{color:"primary",clamp:3,children:a.bio})]}),(0,r.Y)(u.eu,{user:a,size:72,radius:"full"})]}),c&&(0,r.Y)(p.fI,{children:(0,r.Y)(h.v,{leading:(0,r.Y)(f.Nq,{pub:c,size:20,radius:"full"}),href:(0,g.fOI)(c),newTab:!0,onClick:e=>{e.stopPropagation(),null==l||l()},children:c.name})}),a.subscriberCountString&&(0,r.Y)(v.EY.B4,{color:"secondary",children:a.subscriberCountString}),!n&&(0,r.Y)(Y,{user:a,noteId:i,onClick:l})]})})}let b=e=>{let{readOnly:t,onClick:n,user:l,children:i}=e,o=(0,g.gYq)({id:l.id,name:l.name,handle:l.handle});return(0,r.Y)(a.Q,{children:(0,r.Y)(p.VP,{as:t?"div":"a",className:y.A.postAttachment,position:"relative",bg:"primary",radius:"md",target:(0,s.y)()?"_blank":void 0,rel:(0,s.y)()?"noopener noreferrer":void 0,minWidth:0,onClick:n,href:t?void 0:o,draggable:!1,showFocus:!0,animate:!0,children:i})})};function Y(e){let{user:t,noteId:n,onClick:a}=e,{iString:s}=(0,d.GO)(),u=(0,c.Jd)(),{isFollowing:h,buttonProps:p}=(0,o.km)(t,"user-attachment",n);if((null==u?void 0:u.id)===t.id){let e=(0,g.gYq)({id:t.id,name:t.name,handle:t.handle});return(0,r.Y)(m.$n,{size:"md",priority:"secondary-outline",width:"100%",href:e,onClick:e=>{e.stopPropagation(),null==a||a()},children:s("View profile")})}return(0,r.Y)(m.$n,(0,i._)((0,l._)({size:"md",priority:h?"secondary":"primary",width:"100%"},p),{onClick:e=>{e.preventDefault(),e.stopPropagation(),null==a||a(),p.onClick()},children:s(h?"Following":"Follow")}))}},46478:function(e,t,n){n.d(t,{H:()=>o});var l=n(4006),i=n(89490),r=n(76977),a=n(44307);function o(e){let{videoId:t}=e;return(0,l.Y)(r.pT,{radius:"md",outline:"detail",overflow:"hidden",className:a.A.youtube,children:(0,l.Y)(d,{src:"https://www.youtube.com/embed/".concat(t),frameBorder:0})})}let d=(0,i.I4)({className:a.A.youtubeIframe,border:"unset",bg:"black",flex:"grow"},"iframe")},89718:function(e,t,n){n.d(t,{v:()=>c});var l=n(4006),i=n(32485),r=n.n(i),a=n(17402),o=n(17028),d=n(75303);let c=(0,a.forwardRef)((e,t)=>{let{children:n,trailing:i,leading:a,href:c,onClick:s,fillIcon:u,newTab:m,flex:h,className:p,disabled:f}=e,v=c||s,g=!a&&!i;return(0,l.FD)(o.Nm,{resetCss:!0,ref:t,className:r()("chip-lJKwY5",u&&"fillIcon-jYnt2U",v&&"clickable-IxUlBk",g&&"textOnly-SPwDNp",f&&"disabled-F1nG5l",p),flex:h,href:c,onClick:s,pressable:v?"sm":void 0,newTab:m,disabled:f,children:[a&&(0,l.Y)(d.ov,{className:"leading-TvXpau",children:a}),(0,l.Y)(o.EY.B4,{color:f?"tertiary":"primary",userSelect:"none",ellipsis:!0,children:n}),i&&(0,l.Y)(d.ov,{className:"trailing-lhDVKn",children:i})]})})},42588:function(e,t,n){n.d(t,{S:()=>b});var l=n(4006),i=n(17402),r=n(23623),a=n(64843),o=n(84605),d=n(94729),c=n(56804),s=n(68349),u=n(89490),m=n(35369),h=n(76977),p=n(63136),f=n(504),v=n(38992),g=n(16291),y=n(49807);let w="countdownTimer-Hez1AS";function b(e){var t;let{liveStream:n,post:b,feedItem:S}=e,{iString:k}=(0,o.GO)(),{liveStream:I}=(0,v.u)({liveStream:n}),[_,C]=(0,i.useState)((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).valueOf()-Date.now()),[E,x]=(0,i.useState)((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).isAfter((0,g.A)().add(15,"minutes")));if((0,i.useEffect)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&x((0,g.A)(I.liveStream.scheduled_at).isAfter((0,g.A)().add(15,"minutes")))},[I]),(0,i.useEffect)(()=>{(null==I?void 0:I.liveStream.scheduled_at)&&C((0,g.A)(I.liveStream.scheduled_at).valueOf()-Date.now());let e=setInterval(()=>{C((0,g.A)(null==I?void 0:I.liveStream.scheduled_at).valueOf()-Date.now())},1e3);return()=>clearInterval(e)},[I]),!(null==I?void 0:I.liveStream.id))return null;if((null==I?void 0:I.liveStream.status)==="active")return(0,l.Y)(a.q,{activeLiveStream:I,isFeedItem:!0,listenForViewerCount:!1});let B=Math.max(_/1e3,0),F=Math.floor(B/60/60/24),P=Math.floor(B/60/60%24),T=Math.floor(B/60%60),A=String(F).padStart(2,"0"),N=String(P).padStart(2,"0"),D=String(T).padStart(2,"0"),O=String(Math.floor(B%60)).padStart(2,"0"),L=(0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id});return(0,l.Y)(r.a,{children:(0,l.FD)(u.az,{as:"a",onClick:e=>{S&&((0,f.Qb)(S,"permalink","attachment",{extraEventProps:{live_stream_id:null==I?void 0:I.liveStream.id,post_id:null==b?void 0:b.id}}),(0,c.o)(e,L))},href:(0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id}),radius:"md",overflow:"hidden",children:[(0,l.Y)(h.pT,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"black",children:E?(0,l.Y)(h.pT,{className:w,justifyContent:"center",alignItems:"center",children:(0,l.FD)(h.pT,{children:[F>0?(0,l.FD)(l.FK,{children:[(0,l.Y)(Y,{value:A,unit:"DAYS"}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(p.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})})]}):null,(0,l.Y)(Y,{value:N,unit:"HR"}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(p.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(Y,{value:D,unit:"MIN"}),0===F?(0,l.FD)(l.FK,{children:[(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(p.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(Y,{value:O,unit:"SEC"})]}):null]})}):(0,l.FD)(h.I1,{className:w,justifyContent:"center",alignItems:"center",gap:4,children:[(0,l.FD)(h.pT,{children:[(0,l.Y)(Y,{value:D}),(0,l.Y)(h.pT,{height:40,width:20,alignItems:"end",justifyContent:"center",children:(0,l.Y)(p.EY.B4,{color:"white",fontSize:30,lineHeight:30,children:":"})}),(0,l.Y)(Y,{value:O})]}),(0,l.Y)(p.EY.B4,{color:"vibrance-secondary",transform:"uppercase",children:k("Starting soon...")})]})}),(0,l.FD)(h.pT,{gap:12,padding:12,alignItems:"center",justifyContent:"space-between",bg:"secondary",borderTop:"detail",children:[(0,l.FD)(h.I1,{gap:4,children:[(0,l.Y)(p.EY.B4,{color:"vibrance-secondary",children:null==I||null==(t=I.liveStream.user)?void 0:t.name}),(0,l.Y)(p.EY.B4,{weight:"bold",color:"white",children:null==I?void 0:I.liveStream.title})]}),(0,l.Y)(m.$n,{priority:"primary",onClick:async e=>{null==e||e.preventDefault(),null==e||e.stopPropagation(),S&&(0,f.Qb)(S,"permalink","add_to_calendar",{extraEventProps:{live_stream_id:null==I?void 0:I.liveStream.id,post_id:null==b?void 0:b.id}});try{await (0,d.x6)("/api/v1/live_stream/".concat(null==I?void 0:I.liveStream.id,"/rsvp"),{method:"PUT"})}catch(e){console.error(e)}(0,s.V2)((0,y.Xrv)({liveStreamId:null==I?void 0:I.liveStream.id}),{local_navigation:!1})},children:E?"Interested":"Join now"})]})]})})}let Y=e=>{let{value:t,unit:n}=e;return(0,l.FD)(h.I1,{alignItems:"center",gap:4,children:[(0,l.Y)(h.I1,{justifyContent:"end",alignItems:"center",height:40,children:(0,l.Y)(p.EY.B4,{font:"digit",fontSize:30,lineHeight:30,color:"white",children:t})}),n&&(0,l.Y)(p.EY.B4,{color:"vibrance-secondary",children:n})]})}},38992:function(e,t,n){n.d(t,{u:()=>d});var l=n(17402),i=n(94729),r=n(43296),a=n(16291),o=n(55714);let d=e=>{var t,n;let{liveStream:d}=e,c=(0,r.XW)(),[s,u]=(0,l.useState)(null),[m,h]=(0,l.useState)(d),[p,f]=(0,l.useState)(null);return(0,l.useEffect)(()=>{h(d)},[d]),(0,l.useEffect)(()=>{if(!m||"scheduled"!==m.liveStream.status)return;let e=(0,a.A)(m.liveStream.scheduled_at),t=(0,a.A)();if(9e5>e.diff(t)){let e=setInterval(()=>{(0,i.x6)("/api/v1/live_stream/".concat(m.liveStream.id)).then(e=>{"scheduled"!==e.activeLiveStream.liveStream.status&&(u(null),f(e.activeLiveStream))}).catch(e=>{console.error(e)})},1e3);u(e)}return null==c?void 0:c.listen({[(0,o.sl)({streamId:m.liveStream.id})]:e=>{var t;let{data:n}=e;(null==n||null==(t=n.message)?void 0:t.type)==="live-stream:started"&&((0,i.x6)("/api/v1/live_stream/".concat(m.liveStream.id)).then(e=>{f(e.activeLiveStream)}).catch(e=>{console.error(e)}),s&&u(null))}})},[null==m||null==(t=m.liveStream)?void 0:t.id,null==m||null==(n=m.liveStream)?void 0:n.status,c]),(0,l.useEffect)(()=>{if(p){let e=p.liveStream.is_rtmp?p.liveStreamInformation.playbackUrl:p.liveStreamInformation.desktopPlaybackUrl;if(e){let t=setInterval(()=>{(0,i.x6)(e).then(()=>{u(null),h(p),f(null)})},1e3);u(t)}}},[p]),(0,l.useEffect)(()=>()=>{s&&clearInterval(s)},[s]),{liveStream:m,setLiveStream:h}}},95147:function(e,t,n){n.d(t,{B:()=>function e(t){let n=0;if(t)if(t.content&&t.content.length>0)for(let l of t.content)n+=e(l);else{var l,i;n+=null!=(i=null==(l=t.text)?void 0:l.length)?i:0}return n},M:()=>r});var l=n(88420),i=n(79207);function r(e){let t=0;return(0,i.jE)(e,e=>{e.type&&l.b.includes(e.type)&&("codeBlock"===e.type&&e.content?e.content.forEach(e=>{if("text"===e.type){var n,l;t+=(null!=(l=(null!=(n=e.text)?n:"").match(/\n/g))?l:[]).length+1}}):t++)}),t}},41245:function(e,t,n){n.d(t,{Z:()=>function e(t,n){var r;let o=[],d=!1,c=0;for(let l of null!=(r=t.content)?r:[]){if(l.type&&a.b.includes(l.type)){if(++c===n){d=!0,o.push(l);break}}else if(l.content){let t=e(l,n-c);if(c+=t.blockCount,t.isTruncated){o.push(t.doc),d=!0;break}}o.push(l)}let s=(0,i._)((0,l._)({},t),{content:o});return t.text&&(s.text=t.text.split(/\n/g).slice(0,n).join("\n")),{doc:s,blockCount:c,isTruncated:d}},x:()=>function e(t){let{limit:n=420}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=null,o=0,d=!1;if(t){var c,s,u,m;if(n<=0)d=!0;else if(t.content&&t.content.length>0)for(let r of(a=(0,i._)((0,l._)({},t),{content:[]}),t.content)){let t=e(r,{limit:n-o});if(t.doc){if(null==(c=a.content)||c.push(t.doc),o+=t.length,t.isTruncated){d=!0;break}}else{d=!0;break}}else o+=null!=(m=null==(s=(a=(0,i._)((0,l._)({},t),{text:null!=(u=(0,r.truncateText)(t.text,n))?u:void 0})).text)?void 0:s.length)?m:0,t.text!==a.text&&(d=!0)}return{doc:a,length:o,isTruncated:d}}});var l=n(69277),i=n(70408),r=n(82776),a=n(88420)}}]);