"use strict";(self.webpackChunksubstack=self.webpackChunksubstack||[]).push([["99376"],{78340:function(e,t,n){n.d(t,{A:()=>i});let i={buttonBase:"buttonBase-GK1x3M",buttonText:"buttonText-X0uSmG",grow:"grow-R0h_fk",size_xs:"size_xs-Q62jAa",sizeXs:"size_xs-Q62jAa",size_sm:"size_sm-G3LciD",sizeSm:"size_sm-G3LciD",size_md:"size_md-gCDS3o",sizeMd:"size_md-gCDS3o",size_lg:"size_lg-A_bUNK",sizeLg:"size_lg-A_bUNK",rounded:"rounded-SYxRdz",buttonStyle:"buttonStyle-r7yGCK",priority_primary:"priority_primary-RfbeYt",priorityPrimary:"priority_primary-RfbeYt","priority_primary-mono":"priority_primary-mono-P_CW5x",priorityPrimaryMono:"priority_primary-mono-P_CW5x",priority_destructive:"priority_destructive-NKsm9Q",priorityDestructive:"priority_destructive-NKsm9Q","priority_secondary-destructive":"priority_secondary-destructive-xg9221",prioritySecondaryDestructive:"priority_secondary-destructive-xg9221",loading:"loading-ddiesl",priority_secondary:"priority_secondary-S63h9o",prioritySecondary:"priority_secondary-S63h9o","priority_secondary-accent":"priority_secondary-accent-WwlIuq",prioritySecondaryAccent:"priority_secondary-accent-WwlIuq","priority_secondary-outline":"priority_secondary-outline-MgyjoK",prioritySecondaryOutline:"priority_secondary-outline-MgyjoK",priority_tertiary:"priority_tertiary-rlke8z",priorityTertiary:"priority_tertiary-rlke8z","priority_tertiary-accent":"priority_tertiary-accent-_S602l",priorityTertiaryAccent:"priority_tertiary-accent-_S602l",priority_quaternary:"priority_quaternary-kpMibu",priorityQuaternary:"priority_quaternary-kpMibu",media:"media-XfKJl4",textButton:"textButton-CeUBxU",iconButtonBase:"iconButtonBase-dJGHgN buttonBase-GK1x3M",iconButton:"iconButton-mq_Et5 iconButtonBase-dJGHgN buttonBase-GK1x3M",buttonSpinner:"buttonSpinner-GMiUY5"}},56335:function(e,t,n){n.d(t,{A:()=>i});let i={placeholder:"placeholder-ICMYsF",pulse:"pulse-_o4ZmV"}},2256:function(e,t,n){n.d(t,{r:()=>o});var i=n(4006),r=n(10996);function o(e){let{children:t}=e;return(0,i.Y)(r.NP,{theme:"coverTheme-PJLqY5",children:t})}},23623:function(e,t,n){n.d(t,{a:()=>o});var i=n(4006),r=n(10996);let o=e=>{let{children:t,disable:n}=e;return n?(0,i.Y)(i.FK,{children:t}):(0,i.Y)(r.NP,{theme:"dark-theme",children:t})}},8853:function(e,t,n){n.d(t,{c:()=>u});var i=n(69277),r=n(70408),o=n(32641),a=n(4006),s=n(17028),l=n(39891),c=n(69706);function u(e){let t;var n,u,d,{src:p,width:f,height:m,aspectRatio:h,sourceFormats:g=["webp"],options:_}=e,b=(0,o._)(e,["src","width","height","aspectRatio","sourceFormats","options"]);let y=(n=f,u=m,t=(d=h)?c.UH[d]:void 0,n&&u?{finalWidth:n,finalHeight:u}:n&&t?{finalWidth:n,finalHeight:Math.round(n/t)}:u&&t?{finalWidth:Math.round(u*t),finalHeight:u}:null);if(!y)return null;let{finalWidth:v,finalHeight:w}=y,S=[1,2,3].map(e=>({w:v*e,h:w*e})),E=(0,r._)((0,i._)({crop:"fill"},_),{height:w}),T="".concat(v,"px");return(0,a.FD)(s.az,{as:"picture",display:"contents",children:[g.map(e=>(0,a.Y)("source",{type:"image/".concat(e),sizes:T,srcSet:S.map(t=>{let{w:n,h:o}=t;return"".concat((0,l.dJ)(p,n,(0,r._)((0,i._)({},E),{height:o,format:e}))," ").concat(n,"w")}).join(", ")},e)),(0,a.Y)(s.az,(0,i._)({as:"img",src:(0,l.dJ)(p,v,E),srcSet:S.map(e=>{let{w:t,h:n}=e;return"".concat((0,l.dJ)(p,t,(0,r._)((0,i._)({},E),{height:n}))," ").concat(t,"w")}).join(", "),sizes:T,width:f,height:m,aspectRatio:h},b))]})}},9266:function(e,t,n){n.d(t,{Ay:()=>V,Be:()=>H});var i=n(69277),r=n(70408),o=n(79785),a=n(4006),s=n(32485),l=n.n(s),c=n(12215),u=n(87677),d=n(48697),p=n(17402),f=n(2256),m=n(97432),h=n(33764),g=n(70780),_=n(84605),b=n(53989),y=n(85478),v=n(34835),w=n(39520),S=n(86500),E=n(53928),T=n(68349),k=n(89490),P=n(35369),I=n(76977),A=n(81203),R=n(63136),C=n(54754),N=n(21398),x=n(11510),U=n(61554),D=n(49095),M=n(28194),L=n(56262),F=n(39318),B=n(41086),O=n(82776),Y=n(57324),W=n(82121);function G(){let e=(0,o._)(["By ",""]);return G=function(){return e},e}let q="intro_popup_last_hidden_at";function H(e){let{includePrice:t=!0,includeRankingDetail:i=!0,includeByline:r=!0,includeBadge:o=!1,rankingDetailOverrideText:s=null,language:l="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=l||e.language,{iTemplate:u}=I18N.i(l||e.language),d=(0,O.getByLine)(e),p=null;return i&&(p=s||(e.rankingDetailByLanguage&&"en"!==c&&e.rankingDetailByLanguage[c]?e.rankingDetailByLanguage[c].rankingDetail:e.rankingDetail)),(0,a.FD)(C.r,{separator:" \xb7 ",children:[r&&d?(0,a.FD)(I.pT,{inline:!0,gap:4,children:[u(G(),d),o&&(0,a.Y)(N.Ic,{module:"../user_badge/UserBadge",resolve:e=>e.UserStatusSymbols,onRequest:()=>Promise.resolve().then(n.bind(n,49095)),size:"sm",tier:e.author_bestseller_tier,userId:e.author_id,whileLoading:e.author_bestseller_tier?(0,a.Y)(I.pT,{alignItems:"center",children:(0,a.Y)(D.UserStatusSymbols,{size:"sm",tier:e.author_bestseller_tier})}):(0,a.Y)(a.FK,{})})]}):null,p,t&&function(e,t){let{language:n}=t,i=!e.disable_monthly_subscriptions&&e.plans&&e.plans.filter(e=>"month"===e.interval).sort((e,t)=>e.amount-t.amount)[0],r=!e.disable_annual_subscriptions&&e.plans&&e.plans.filter(e=>"year"===e.interval).sort((e,t)=>e.amount-t.amount)[0],o=i||r;if(o)return(0,M.xB)(o,{language:n})}(e,{language:l})]})}let V=(0,p.memo)(e=>{var t,n;let{publication:o,user:s,post:l,onHide:u,freeSignup:d,hidden:m,alwaysShow:h,showOnMount:g,freeSignupEmail:_,email:b,referralCode:w,blurbs:E,launchWelcomePage:k}=e,{getConfigFor:P}=(0,y.mJ)(),I=P("welcome_page_query_params"),[A,R]=(0,p.useState)(!1),[C,N]=(0,p.useState)(!!(k||h)),x=(e,t)=>{var n;return I&&null!=(n=(0,B.y)(e))?n:t},[U]=(0,p.useState)(x("no_skip",void 0)),[D]=(0,p.useState)(x("no_blurbs",!1)),[M]=(0,p.useState)(()=>{let e=x("hero_text",void 0);return e?decodeURIComponent(e):void 0});(0,p.useEffect)(()=>{let e=e=>{"Escape"===e.key&&H(!0)};if(C)return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[C]),(0,p.useEffect)(()=>{if(k&&!V()||G()){if("undefined"!=typeof window&&(0,T.iQ)(document.documentElement,"has-intro-popup"),(0,B.y)("r")){let e=(0,B.y)("r");s&&(0,O.userReferralKey)(s)===e||(0,S.u4)(S.qY.COVER_PAGE_REFERRAL_VISIT,{referral_key:e,referring_user:(0,O.userFromReferralKey)(e)})}W()}else u&&u(),(0,v.E)({hide_intro_popup:!0}),"undefined"!=typeof window&&(0,T.vy)(document.documentElement,"has-intro-popup"),!h&&"undefined"!=typeof window&&(0,T.nB)(document.documentElement,"show-intro-popup")&&(0,T.vy)(document.documentElement,"show-intro-popup");return["no_skip","no_blurbs","hero_text","hide_intro_popup"].forEach(e=>(0,T.qm)(e)),()=>{"undefined"!=typeof window&&(0,T.vy)(document.documentElement,"has-intro-popup"),H(!0)}},[]);let W=()=>{"undefined"!=typeof window&&((0,T.iQ)(document.documentElement,"show-intro-popup"),(0,S.u4)(S.qY.COVER_PAGE_SHOWN,{has_cover_photo:!!o.cover_photo_url,has_free_signup_email:!!_,has_free_signup:!!d,functional_version:!0,launch_welcome_page:k,always_show:h,hidden:m,screen_height:"undefined"!=typeof window?window.innerHeight:null,screen_width:"undefined"!=typeof window?window.innerWidth:null}),h||(0,S.b8)("pageview",{dl:"".concat(document.location.origin,"/welcome").concat(document.location.search)})),N(!0)},G=(0,p.useCallback)(()=>!!h||!m&&(!!g||!!A||!V()&&!!(null==l||l&&!(0,L.isPaidAudience)(l.audience))&&!d&&(!s||!s.is_free_subscribed&&!s.is_subscribed)),[h,d,m,l,g,A,s]),H=e=>{e||(j(),setTimeout(()=>{(0,v.E)({hide_intro_popup:!0})},500)),u&&u(),!h&&"undefined"!=typeof window&&(0,T.nB)(document.documentElement,"show-intro-popup")&&(0,T.vy)(document.documentElement,"show-intro-popup")},V=()=>{let e=c.get(q);if(e&&new Date(e)>new Date(Date.now()-864e5))return!0;return!1},j=()=>{c.set(q,new Date().toJSON(),{expires:3650})},z=async e=>{(0,S.u4)(S.qY.COVER_PAGE_EMAIL_SUBMITTED,{is_paying_sub:!!e.body.prompt_to_login,has_plans:!!o.plans,functional_version:!0,homepage_type:o.homepage_type}),j(),R(!0),(0,v.E)({freeSignup:!0,freeSignupEmail:e.body.email});let t=h?"/":document.location.href;e.body.prompt_to_login?setTimeout(()=>{document.location.href=(0,F.yRP)("/account/login",{redirect:t,email:e.body.email})},30):document.location.href=(0,F.yRP)("/subscribe",(0,r._)((0,i._)({next:t,later:!0,just_signed_up:!0},e.body.subscription_id&&{subscription_id:e.body.subscription_id},e.body.referral_token&&{referral_token:e.body.referral_token}),{requires_confirmation:e.body.requires_confirmation?"true":"",utm_source:Y.VU.coverPage,email:e.body.email,skip_redirect_check:!0}))};return C&&G()?(0,a.Y)(f.r,{children:(0,a.Y)("div",{className:"intro-popup",children:(0,a.Y)("div",{className:"intro-popup-page",children:(0,a.Y)($,{source:"cover_page",email:b,pub:o,user:null!=s?s:null,freeSignup:d,freeSignupEmail:_,referralCode:w,forceSignup:null!=(n=null!=(t=(0,B.y)("force"))?t:U)?n:void 0,onMaybeLater:U?void 0:()=>{(0,S.u4)(S.qY.COVER_PAGE_MAYBE_LATER_CLICKED,{functional_version:!0}),H()},onFreeSignup:z,onSubscribeInApp:()=>H(),blurbs:E,hideBlurbs:D,overrideSubtitle:M})})})}):null}),$=e=>{let{autoFocus:t=!0,pub:r,user:o,email:s,freeSignup:c,freeSignupEmail:d,referralCode:f,source:h,forceSignup:v,submitButtonText:w,onMaybeLater:T,onFreeSignup:A,onSubscribeInApp:C,blurbs:D,hideBlurbs:M,overrideSubtitle:L}=e,O=(0,p.useContext)(b.l9),G=(0,x.Iu)(),{iString:q}=(0,_.GO)(),{getConfigFor:H}=(0,y.mJ)(),V=(0,B.y)("referralCode"),$=(0,B.y)("refSource"),K=q("Learn More"),X=O.getSettingFor("welcome_page_opt_out_text"),Z="No thanks"===X?q("No thanks"):null!=X?X:q("No thanks"),Q=(0,F.DNs)(r,{params:(0,i._)({utm_source:Y.VU.subscribeEmail,utm_content:Y.fL.learnMore},V&&{referralCode:V},$&&{refSource:$})});(0,p.useEffect)(()=>{"subscribe_page"===h&&(0,S.u4)(S.qY.SUBSCRIBE_EMAIL_FULL_SCREEN_SHOWN,{functional_version:!0}),(0,S.u4)(S.qY.FULL_EMAIL_FORM_SHOWN,{source:h,functional_version:!0}),(0,E.jN)(E.ti.TRACK_REGISTRATION_SHOWN)},[h]);let ee=D&&!M?D.filter(e=>""!=e.description):[],et=!v&&!r.invite_only&&G&&!(null==o?void 0:o.reader_installed_at)&&H("welcome_page_app_button");return(0,a.FD)("div",{className:"full-email-form",children:[(0,a.FD)("div",{className:"vertically-centered",children:[T&&!r.invite_only&&(0,a.Y)(z,{onClick:T}),(0,a.Y)(j,{pub:r,overrideSubtitle:L}),!r.invite_only||o&&o.is_free_subscribed?(0,a.FD)(a.FK,{children:[(0,a.Y)(I.Ye,{justifyContent:"center",style:{width:"100%"},children:(0,a.FD)(I.I1,{gap:4,style:{width:"100%",maxWidth:"380px"},children:[(0,a.Y)(I.I1,{className:W.A.emailFormContainer,justifyContent:"center",alignItems:"center",children:(0,a.Y)(m.A,{email:s,isWelcomePageColor:!0,freeSignup:c,freeSignupEmail:d,pub:r,referralCode:f,source:h,submitButtonText:w,user:o,onConfirmationRequired:"enabled"===r.payments_state?()=>null:void 0,onSuccess:A||(()=>document.location.href="/"),autoFocus:t})}),(0,a.Y)(k.az,{paddingX:{mobile:16,desktop:0},paddingTop:16,className:W.A.tosText,children:(0,a.Y)(U.U,{includeCheckbox:!1,addSubscribePreamble:!0,color:"secondary",textAlign:"center",pub:r})})]})}),!v&&(T?(0,a.FD)(P.$n,{priority:"quaternary",className:W.A.maybeLater,onClick:T,"data-testid":"maybeLater",children:[Z,(0,a.Y)(u.A,{size:20})]}):(0,a.FD)(P.$n,{priority:"quaternary",className:W.A.maybeLater,href:Q,localNavigation:!1,children:[K,(0,a.Y)(u.A,{size:20})]}))]}):(0,a.Y)(N.Ic,{onRequest:()=>n.e("60273").then(n.bind(n,66312)),resolve:e=>e.InviteActions,module:"./InviteActions",pub:r,user:o,freeSignupEmail:d}),!!(null==ee?void 0:ee.length)&&(0,a.Y)("div",{className:"blurb-buffer"}),!!(null==ee?void 0:ee.length)&&(0,a.Y)(I.Ye,{className:"blurbs",gap:20,children:ee.map(e=>(0,a.FD)(I.I1,{gap:8,className:"blurb",children:[(0,a.Y)(R.EY.B4,{className:l()("blurb-text",W.A.blurbText),children:(0,a.Y)(J,{text:"“".concat(e.description,"”")})}),(0,a.FD)(R.EY.B4,{weight:"semibold",className:l()("blurb-text",W.A.blurbText),children:[e.author_name||e.recommendingPublication.email_from_name||e.recommendingPublication.copyright,", ",(0,a.Y)("a",{href:(0,F.$_T)(e.recommendingPublication),children:e.recommendingPublication.name})]})]}))})]}),et&&(0,a.Y)(g.T,{publication:r,user:o,email:s,onSubscribeSuccess:C})]})},j=e=>{let{pub:t,overrideSubtitle:n}=e,{getSettingFor:r}=(0,b.Pu)(),{language:o}=(0,_.GO)(),{title:s,subtitle:c,logoUrl:u,coverPhotoUrl:d,hideTitle:p,hideSubtitle:f}=((e,t)=>{let n,i,r,o,a,s,{getConfigFor:l}=(0,y.mJ)();if(l("section_specific_welcome_pages")&&e.section){var c;n=e.section.name,i=e.section.description,r=null!=(c=e.section.logo_url)?c:e.logo_url,a=!!((o=e.section.cover_photo_url)&&e.section.hide_intro_title),s=!!(o&&e.section.hide_intro_subtitle)}else n=e.name,i=e.hero_text,r=e.logo_url,a=!!((o=e.cover_photo_url)&&e.hide_intro_title),s=!!(o&&e.hide_intro_subtitle);return t&&(i=t),{title:n,subtitle:i,logoUrl:r,coverPhotoUrl:o,hideTitle:a,hideSubtitle:s}})(t,n),m=r("display_welcome_page_details"),g=d&&(0,F.d4Y)(d);return(0,a.FD)(a.FK,{children:[d?(0,a.Y)(h.o,{className:"publication-cover-photo",src:d,imageProps:{quality:"auto:best"},maxWidth:1360,loading:"eager",style:(0,i._)({},g&&g.width&&{height:"min(35vh, ".concat(680*g.height/g.width,"px)")})}):u&&(0,a.Y)(k.az,{paddingBottom:32,"data-testid":"intro-popup-logo",children:(0,a.Y)(A.Nq,{logoUrl:u,size:88})}),!p&&(0,a.Y)("h1",{className:l()("publication-name",{"no-logo":!u,"with-cover":d},W.A.balancedText),children:s}),!f&&c&&(0,a.Y)("p",{className:l()("publication-tagline with-cover",{verbose:!0,"with-cover":d},W.A.balancedText),children:c}),(0,a.Y)("div",{className:"publication-meta",children:H(t,{includePrice:!1,includeBadge:!0,rankingDetailOverrideText:t.rankingDetailFreeSubscriberCount,includeRankingDetail:!!m,language:o})})]})},z=e=>{let{onClick:t}=e;return(0,a.Y)(P.K0,{onClick:t,"aria-label":"Close","data-testid":"close-welcome-modal",priority:"tertiary",className:W.A.closeWelcomeModal,children:(0,a.Y)(d.A,{size:20})})},J=e=>{let{text:t}=e,{truncatedText:n,measureRef:i}=(0,w.L)({text:t,truncationRules:[{minLines:5,truncateTo:4}],ellipsesText:"...”"}),r=n?"".concat(n,"...”"):t;return(0,a.FD)("div",{style:{position:"relative"},children:[(0,a.Y)("div",{children:r}),(0,a.Y)("div",{ref:i,style:{visibility:"hidden",position:"absolute",width:"100%"}})]})}},34206:function(e,t,n){n.d(t,{Ay:()=>S,Me:()=>_,Oo:()=>b,YV:()=>g,gq:()=>v});var i=n(99851),r=n(69277),o=n(70408),a=n(32641),s=n(4006),l=n(32485),c=n.n(l),u=n(17402),d=n(84565),p=n(86500),f=n(94729),m=n(63136),h=n(82776);function g(e,t){if("undefined"==typeof window||void 0===window.Stripe)return null;let n={};return t&&t.stripe_user_id?h.NO_PLATFORM_CUSTOMER_CLONE_COUNTRIES.includes(t.stripe_country)&&(n.stripeAccount=t.stripe_user_id):console.warn("No publication passed for Stripe connection"),window.Stripe(e,n)}function _(e){return e.elements({locale:window._preloads&&window._preloads.language||"auto"}).create("card",{style:{base:{fontSize:"14px",lineHeight:"40px",fontFamily:'-apple-system, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"'}},disableLink:!0})}class b extends u.Component{componentDidMount(){!this.props.disabled&&(this.props.element&&this.props.element.mount(this.elementContainer),this.props.addressElement&&this.props.addressElement.mount(this.addressContainer))}componentDidUpdate(e){this.props.disabled||(this.props.element&&!e.element&&this.props.element.mount(this.elementContainer),this.props.addressElement&&!e.addressElement&&this.props.addressElement.mount(this.addressContainer))}componentWillUnmount(){try{this.props.element&&this.props.element.unmount(this.elementContainer),this.props.addressElement&&this.props.addressElement.unmount(this.addressContainer)}catch(e){}}render(){let{className:e,element:t,isPaymentElement:n,addressElement:i,disabled:r}=this.props;return t||n?(0,s.FD)("div",{className:c()("fancy-stripe",e,{"payment-element":n}),children:[i&&(0,s.Y)("div",{ref:this.assignAddressContainer,style:{paddingBottom:"24px"}}),(0,s.Y)("div",{ref:this.assignElementContainer}),r&&(0,s.Y)(m.EY.B4,{translated:!0,color:"error",children:"This type of purchase is currently unavailable in your region."})]}):null}constructor(...e){super(...e),(0,i._)(this,"elementContainer",void 0),(0,i._)(this,"addressContainer",void 0),(0,i._)(this,"assignElementContainer",e=>{this.elementContainer=e}),(0,i._)(this,"assignAddressContainer",e=>{this.addressContainer=e})}}class y extends u.Component{async componentDidMount(){let e=!1;if(this.state.paymentRequest){try{let t=await this.state.paymentRequest.canMakePayment();t&&t.applePay&&(e=!0)}catch(e){console.error(e)}(0,p.u4)(p.qY.APPLE_PAY_SETUP_FINISHED,{success:e})}if(await this.setState({canMount:e}),e){if(this.button||await new Promise(e=>setTimeout(e,0)),!this.state.stripeButton)return void console.error("stripeButton not ready");if(this.state.stripeButton.mount(this.button),!this.state.paymentRequest)return void console.error("paymentRequest not ready");this.state.paymentRequest.on("token",e=>this.onTokenReceived(e)),this.state.paymentRequest.update({currency:this.props.plan.currency,total:this.getPaymentTotal()})}else this.props.onVisibilityChanged&&this.props.onVisibilityChanged(!1)}componentDidUpdate(e){let t=!1;for(let r of["pub","plan","quantity","coupon","notRecurring","variableAmount"]){var n,i;if(e[r]!==this.props[r]||"coupon"===r&&e[r]&&(null==(n=e[r])?void 0:n.loading)&&(!this.props[r]||!(null==(i=this.props[r])?void 0:i.loading))){t=!0;break}}t&&this.state.paymentRequest&&this.state.paymentRequest.update({currency:this.props.plan.currency,total:this.getPaymentTotal()})}componentWillUnmount(){if(this.state.paymentRequest&&this.state.paymentRequest.off("token"),this.state.stripeButton)try{this.state.stripeButton.unmount(this.button)}catch(e){}}async onTokenReceived(e){(0,p.u4)(p.qY.APPLE_PAY_ATTEMPED);try{if(!this.props.onSuccess)return void console.error("No onSuccess handler for Apple Pay");await this.props.onSuccess({email:e.payerEmail,name:e.payerName,stripe_token:e.token}),e.complete("success"),(0,p.u4)(p.qY.APPLE_PAY_SUCCEEDED)}catch(t){console.error("Apple Pay submission failed:",e,t),e.complete("fail"),(0,p.u4)(p.qY.APPLE_PAY_FAILED,{reason:t.message})}}getPaymentTotal(){var e,t,n,i;let r,{pub:o,plan:a,quantity:s,coupon:l,notRecurring:c,variableAmount:u}=this.props,d=0,p=Math.max(0,a.trial_period_days||0,l&&!l.error&&!l.loading&&l.trial_period_days||0,o.trial_end_override&&Math.ceil((o.trial_end_override-Date.now()/1e3)/60/60/24));c&&(p=0);let f=((null==(e=a.metadata)?void 0:e.founding)?null!=(t=u||a.amount)?t:0:null!=(n=a.amount)?n:0)*(s||1),m=f;return l&&!l.error&&!l.loading&&(l.percent_off?m=Math.round(m*(1-(l.percent_off_precise||l.percent_off)/100)):l.amount_off&&(m=Math.max(0,m-l.amount_off)),m<=0&&(m=f,"once"===l.duration?"year"===a.interval?d+=12*a.interval_count:d+=a.interval_count:"repeating"===l.duration&&(d+=null!=(i=l.duration_in_months)?i:0))),c?r="one-time":(r="".concat(this.props.plan.interval,"ly"),this.props.quantity>1&&(r+=" per person"),d?(p>15&&(d+=Math.floor(p/30)),r+=" with ".concat(d,"-month trial")):p&&(r+=" with ".concat(p,"-day trial"))),{label:r,amount:m}}render(){var e;let{children:t,className:n,error:i}=this.props,{canMount:r}=null!=(e=this.state)?e:{};return void 0===r||r||"undefined"==typeof window?(0,s.FD)("div",{className:"apple-pay-parent-container",children:[r?(0,s.Y)("div",{className:"apple-pay-element ".concat(n||""),ref:this.assignButton}):(0,s.Y)("p",{className:"apple-pay-loader ".concat(n||""),children:"Loading…"}),i&&(0,s.Y)("div",{className:"error",children:i}),t]}):null}constructor(e,t){if(super(e,t),(0,i._)(this,"button",void 0),(0,i._)(this,"assignButton",e=>{this.button=e}),e.stripe&&e.pub.stripe_country){(0,p.u4)(p.qY.APPLE_PAY_SETUP_STARTED);try{const t=e.stripe.paymentRequest({country:this.props.pub.stripe_country,currency:this.props.plan.currency,total:this.getPaymentTotal(),requestPayerName:!0,requestPayerEmail:!0}),n=e.stripe.elements().create("paymentRequestButton",{paymentRequest:t});this.state={paymentRequest:t,stripeButton:n}}catch(e){console.error(e),(0,p.u4)(p.qY.APPLE_PAY_SETUP_FINISHED,{success:!1})}}}}class v extends u.Component{render(){let e=this.props,{children:t,ref:n,defaultValue:i}=e,o=(0,a._)(e,["children","ref","defaultValue"]);return this.state,(0,s.FD)("div",{className:"fancy-input",children:[(0,s.Y)("input",(0,r._)({ref:this.assignInput,defaultValue:i},o)),t]})}blur(){this._input&&this._input.blur()}constructor(...e){super(...e),(0,i._)(this,"_input",void 0),(0,i._)(this,"assignInput",e=>{this._input=e})}}class w extends u.Component{getInputs(){let e=[];if(this.base)for(let t of Array.from(this.base.getElementsByTagName("*")))["INPUT","TEXTAREA","SELECT"].includes(t.nodeName)&&t.getAttribute("name")&&"g-recaptcha-response"!==t.id&&e.push(t);return e}resetErrors(){this.setState({_paramErrors:{},_otherErrors:[]})}clear(){for(let e of(this.resetErrors(),this.getInputs()))e.blur&&e.blur(),"checkbox"===e.type?e.checked=!1:"select"===e.type?e.selectedIndex=-1:"radio"===e.type?e.checked=!1:"target"in e&&e.target?e.target.value="":e.value=""}handleStripeChange(e){let{error:t}=e;t?this.setState({_stripeError:t.message}):this.setState({_stripeError:null})}componentDidMount(){this._mountTime=new Date,this._stripeCardOrPaymentElement&&this._stripeCardOrPaymentElement.addEventListener("change",e=>this.handleStripeChange(e))}componentDidUpdate(e){let{country:t,currency:n,email:i,name:o,pub:a,stripeClientSecret:s,stripeElementAppearance:l,themeVariables:c,useStripePaymentElement:u,enableLink:d}=this.props;if(u){var p,f;if(e.useStripePaymentElement||(null==(p=this._stripeCardOrPaymentElement)||p.destroy(),this._stripeCardOrPaymentElement=null),s!==e.stripeClientSecret)if(s){this.setState({loading:!0});let e=this.props.isPlatformCustomer?this._stripe:this._connectedStripe;if(!e)return void console.error("Stripe instance not available in componentDidUpdate");({elements:this._stripeElements,addressElement:this._stripeAddressElement,paymentElement:this._stripeCardOrPaymentElement}=function(e,t){let{withAddressElement:n=!1,currency:i,email:o,name:a,country:s,stripeElementAppearance:l={},themeVariables:{color_theme_accent:c,color_theme_bg_contrast_1:u,print_on_pop:d,print_on_web_bg_color:p,print_secondary_on_web_bg_color:f}={},enableLink:m=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},h={clientSecret:t,currency:i,appearance:(0,r._)({theme:"flat",variables:{borderRadius:"8px",colorBackground:u||void 0,colorPrimary:c||"rgb(255, 103, 25)",accessibleColorOnColorPrimary:d||void 0,colorText:p||void 0,colorTextPlaceholder:f||void 0,colorTextSecondary:f||void 0}},l),locale:window._preloads&&window._preloads.language||"auto"},g=e.elements(h);return{elements:g,addressElement:n?g.create("address",{mode:"billing",defaultValues:{name:a,address:{country:s}}}):void 0,paymentElement:g.create("payment",{layout:{type:"tabs",defaultCollapsed:!1},defaultValues:{billingDetails:{email:o,name:a,address:{country:s}}},wallets:{link:m?"auto":"never"},terms:{card:"never",applePay:"never",googlePay:"never"}})}}(e,s,{withAddressElement:(null==a?void 0:a.stripe_country)==="IN",currency:n,email:i,name:null!=o?o:void 0,country:t,stripeElementAppearance:l,themeVariables:c,enableLink:d})),this.setState({loading:!1})}else e.stripeClientSecret&&(null==(f=this._stripeCardOrPaymentElement)||f.destroy(),this._stripeCardOrPaymentElement=null)}}componentWillUnmount(){this._stripeCardOrPaymentElement&&this._stripeCardOrPaymentElement.destroy()}onInputBlur(e){this.props.analyticsName&&this._mountTime&&new Date().getTime()-this._mountTime.getTime()>1e3&&e.target&&e.target.value&&!e.target._blurTracked&&((0,p.u4)("".concat(this.props.analyticsName," Input Filled"),{name:e.target.name}),e.target._blurTracked=!0)}async onPaymentRequestAttempt(e){let t=await this.handleSubmitAsync(null,e);if(t)throw t}handleSubmit(e){e&&e.preventDefault(),this.handleSubmitAsync(e).catch(e=>{console.error(e)})}async handleSubmitAsync(e){let t,n,i,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e&&e.preventDefault(),this.props.analyticsName&&(0,p.u4)("".concat(this.props.analyticsName," Submit Pressed")),this.props.loading||this.state.loading||this.props.disableSubmit)return;this.resetErrors(),this.setState({loading:!0});let a=null;if(this.stripeElement&&!o.stripe_token&&!this.props.useStripePaymentElement){let{token:e=null,error:t}=this._stripe?await this._stripe.createToken(this._stripeCardOrPaymentElement):{error:{message:""}};if(e)a=e;else{this.setState({loading:!1,_stripeError:t&&t.message}),this.props.analyticsName&&(console.log("error",t),(0,p.u4)("".concat(this.props.analyticsName," Missing Payment"),{type:t&&t.type,code:t&&t.code,decline_code:t&&t.decline_code,reason:t&&t.message}));return}}if(this.stripeElement&&this.props.useStripePaymentElement){var s,l,c,u=this;if(t=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=u.props.isPlatformCustomer?u._stripe:u._connectedStripe;return t?u._stripeElements?t.confirmSetup({elements:u._stripeElements,redirect:"if_required",confirmParams:e}):void console.error("Stripe elements not available"):void console.error("Stripe instance not available")},!this.props.performSubmit){let{setupIntent:e}=await t();if(!e)return void this.setState({loading:!1});n=e.payment_method}}let d={};for(let e of this.getInputs())if(e.blur&&e.blur(),"checkbox"==e.type)d[e.name]=!!e.checked;else if("radio"==e.type)e.checked&&(d[e.name]=e.value);else if("select"===e.type){let t=e.options[e.selectedIndex];t?d[e.name]=t.value:console.error("No selected option in select element")}else d[e.name]=e.value;if(Object.keys(o).forEach(e=>{!d[e]&&o[e]&&(d[e]=o[e])}),a?d.stripe_token=a:n&&(d.paymentMethodId=n),this.props.prepareData)try{let t=await this.props.prepareData(d,e);t&&(d=t)}catch(e){throw this.setState({loading:!1}),e}this.props.onChangeLoadingState&&this.props.onChangeLoadingState(!0);try{this.props.performSubmit?i=this.props.useStripePaymentElement?await this.props.performSubmit(d,{confirmSetup:t}):await this.props.performSubmit(d):this.props.action?i=this.props.method&&"get"===this.props.method?{body:await (0,f.x6)(this.props.action,{query:d,method:this.props.method})}:{body:await (0,f.x6)(this.props.action,{json:d,method:this.props.method||"POST"})}:this.props.onSubmit&&this.props.onSubmit(d)}catch(t){let e=t.response&&t.response.body instanceof ReadableStream;t.response&&t.body&&e?t.response={body:t.body,status:null==(l=t.response)?void 0:l.status}:t.response&&t.body&&!t.response.body&&(t.response.body=t.body),r=t}if((null==i||null==(s=i.body)?void 0:s.confirmPaymentUrl)&&i.body.clientSecret&&this._connectedStripe){(0,p.u4)(p.qY.PAYMENT_CONFIRMATION_STARTED);let e=await this._connectedStripe.confirmCardPayment(i.body.clientSecret);if(e.error){(0,p.u4)(p.qY.PAYMENT_CONFIRMATION_FAILED,{error:null==(c=e.error)?void 0:c.message});let t={error:e.error.message||"Failed to confirm payment"};r={response:{body:t,text:JSON.stringify(t)}}}else(0,p.u4)(p.qY.PAYMENT_CONFIRMATION_SUCCEEDED)}if(this.setState({loading:!1}),this.props.onChangeLoadingState&&this.props.onChangeLoadingState(!1),r){if(this.processErrors(r.response),this.props.onError&&this.props.onError(r,d),!r.response)throw r}else this.props.onSuccess&&this.props.onSuccess(i,d);return r}processErrors(e){let t={},n=[];if(e&&e.body&&e.body.errors){let i=this.getInputs();e.body.errors.forEach(e=>{!0!==this.props.noInlineErrors&&e.param&&i.filter(t=>t.getAttribute("name")===e.param).length>0?t[e.param]?(console.log("Discarding repeated error"),console.log(e)):t[e.param]=e:n.push(e)})}else e&&e.body&&"string"==typeof e.body.error?n.push({msg:e.body.error}):n.push({msg:"Something went wrong"});this.setState({_paramErrors:t,_otherErrors:n}),this.props.analyticsName&&(0,p.u4)("".concat(this.props.analyticsName," Error"),{paramErrors:JSON.stringify(t),otherErrors:JSON.stringify(n)})}render(){var e;let t=this.props,n=null!=(e=this.state)?e:{},i=t.autoLock&&n.loading||t.loading,a=!1,l=!1,d=t.getConfigFor("disable_card_element_in_europe")&&!t.useStripePaymentElement&&t.pub&&h.EEA_COUNTRIES.includes(t.pub.stripe_country)&&(!t.currency||"eur"===t.currency),p=e=>{let f=[];return u.Children.toArray(e).forEach(e=>{if(!e)return null;if("object"==typeof e&&(e.type===v||"input"===e.type||"textarea"===e.type||"select"===e.type)&&e.props&&"name"in e.props&&e.props.name){let t=e.props.name;if(f.push((0,u.cloneElement)(e,{disabled:i||"disabled"in e.props&&e.props.disabled,onChange:t=>{let n=e.props&&"onChange"in e.props&&e.props.onChange||e.props&&"onInput"in e.props&&e.props.onInput;n&&"function"==typeof n&&n(t),this.props.onChange&&this.props.onChange(t)},onInput:t=>{e.props&&"onInput"in e.props&&e.props.onInput&&"function"==typeof e.props.onInput&&e.props.onInput(t),this.props.onInput&&this.props.onInput(t)},onBlur:t=>{this.onInputBlur(t),e.props&&"onBlur"in e.props&&e.props.onBlur&&"function"==typeof e.props.onBlur&&e.props.onBlur(t)}})),n._paramErrors[null!=t?t:"undefined"]&&!i){let e=n._paramErrors[null!=t?t:"undefined"];if(!e)return void console.error("No error for",t);e.msgHTML?f.push((0,s.Y)("div",(0,o._)((0,r._)({className:"error"},t&&{name:t}),{dangerouslySetInnerHTML:{__html:e.msgHTML}}))):f.push((0,s.Y)("div",(0,o._)((0,r._)({className:"error"},t&&{name:t}),{children:e.msg||"Invalid"})))}}else if("object"==typeof e&&e.props&&"type"in e.props&&"submit"===e.props.type)f.push((0,u.cloneElement)(e,{disabled:i||"disabled"in e.props&&e.props.disabled,loading:i||"loading"in e.props&&e.props.loading,onClick:t=>{e.props&&"onClick"in e.props&&e.props.onClick&&"function"==typeof e.props.onClick&&!1!==e.props.onClick(t)&&this.handleSubmit(t)}}));else if("object"==typeof e&&e.props&&"id"in e.props&&"error-container"===e.props.id){if(n._otherErrors&&!i){let t=n._otherErrors.map(e=>e.msgHTML?(0,s.Y)("div",{className:"error other-error",dangerouslySetInnerHTML:{__html:e.msgHTML}}):(0,s.Y)("div",{className:"error other-error",children:e.msg})).concat(e.props&&e.props.children?u.Children.toArray(e.props.children):[]);f.push((0,u.cloneElement)(e,{},t))}}else if("object"==typeof e&&"type"in e&&e.type===b){if(a)throw Error("Can only handle one stripe element");a=!0,f.push((0,u.cloneElement)(e,{ref:t=>{e.props&&e.props.ref&&e.props.ref(t),this.stripeElement=t},element:this._stripeCardOrPaymentElement,isPaymentElement:this.props.useStripePaymentElement,addressElement:this._stripeAddressElement,disabled:d})),!n._stripeError&&this._stripeCardOrPaymentElement||i||"undefined"==typeof window||f.push((0,s.Y)("div",{className:c()("error",t.stripeErrorClassName),role:"alert",children:n._stripeError||"Stripe payments not loaded. Are there blocked scripts?"}))}else if("object"==typeof e&&"type"in e&&e.type===y){if(l)throw Error("Can only handle one stripe payment request button");l=!0,f.push((0,u.cloneElement)(e,{ref:t=>{e.props&&e.props.ref&&e.props.ref(t),this.stripePaymentRequestButton=t},stripe:this._stripe,onSuccess:t=>(e.props&&"onSuccess"in e.props&&e.props.onSuccess&&"function"==typeof e.props.onSuccess&&e.props.onSuccess(t),this.onPaymentRequestAttempt(t))}))}else"object"==typeof e&&"props"in e&&e.props&&e.props.children?f.push((0,u.cloneElement)(e,{},p(e.props.children))):f.push(e)}),f};return(0,s.Y)("form",(0,o._)((0,r._)({className:"form ".concat(t.className||""),action:t.noJsAction||t.action,method:t.method&&["get","post"].includes(t.method.toLowerCase())&&t.method.toLowerCase()||"post",autoComplete:t.autoComplete,onSubmit:e=>this.handleSubmit(e),noValidate:!0},t.enctype&&{enctype:t.enctype},t.id&&{id:t.id}),{children:p(t.children)}))}constructor(e,t){super(e,t),(0,i._)(this,"_stripe",void 0),(0,i._)(this,"_connectedStripe",void 0),(0,i._)(this,"_stripeCardOrPaymentElement",void 0),(0,i._)(this,"_mountTime",void 0),(0,i._)(this,"_stripeElements",void 0),(0,i._)(this,"_stripeAddressElement",void 0),(0,i._)(this,"stripeElement",void 0),(0,i._)(this,"stripePaymentRequestButton",void 0),this.state={_paramErrors:{},_otherErrors:[],_stripeError:null,loading:!1},this.props.stripe_publishable_key&&(this._stripe=g(this.props.stripe_publishable_key,this.props.pub),this._stripe&&(this.props.useStripePaymentElement||(this._stripeCardOrPaymentElement=_(this._stripe)),this._connectedStripe=function(e,t){if("undefined"==typeof window||void 0===window.Stripe||!(null==t?void 0:t.stripe_user_id))return null;let n={stripeAccount:t.stripe_user_id};return window.Stripe(e,n)}(this.props.stripe_publishable_key,this.props.pub)))}}let S=(0,d.yq)(w)},56778:function(e,t,n){n.d(t,{A:()=>c});var i=n(99851),r=n(4006),o=n(32485),a=n.n(o),s=n(17402),l=n(68349);class c extends s.Component{async componentDidMount(){"undefined"!=typeof window&&(this.ref||await new Promise(e=>setTimeout(e,0)),this.checkVisibility(),(this.props.parent||window).addEventListener("scroll",this.checkVisibility))}componentWillUnmount(){"undefined"!=typeof window&&(this.props.parent||window).removeEventListener("scroll",this.checkVisibility)}render(){let{className:e,children:t}=this.props;return(0,r.Y)("div",{ref:this.assignRef,className:a()("visibility-check",e),children:t})}constructor(...e){super(...e),(0,i._)(this,"ref",void 0),(0,i._)(this,"assignRef",e=>{this.ref=e}),(0,i._)(this,"checkVisibility",()=>{if(!this.ref)return;let e=this.ref.getBoundingClientRect(),t=this.props.threshold||0,n=this.props.parent?this.props.parent.clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight),i=!(e.bottom<0-t||e.top>=n+t);(0,l.qr)(this,async(e,t)=>{if(e.isVisible!==i)this.setState({isVisible:i});else if(!t.noDedupe)return;let n=i?"hadFirstVisible":"hadFirstInvisible",r=!e[n];r&&this.setState({[n]:!0}),(await Promise.all([i&&t.onVisible&&t.onVisible(),i&&t.onFirstVisible&&r&&t.onFirstVisible(),!i&&t.onInvisible&&t.onInvisible(),!i&&t.onFirstInvisible&&r&&t.onFirstInvisible()])).reduce((e,t)=>!0===t||e)&&this.checkVisibility()})})}}},74322:function(e,t,n){n.d(t,{P:()=>l,v:()=>s});var i=n(4006),r=n(17402),o=n(85902);let a=(0,r.createContext)(!1);function s(e){let{children:t,context:n}=e;return(0,i.Y)(o.vd,{context:n,children:(0,i.Y)(a.Provider,{value:!0,children:t})})}function l(){return(0,r.useContext)(a)}},95899:function(e,t,n){n.d(t,{HW:()=>u,xc:()=>d});var i=n(4006),r=n(17402),o=n(46271),a=n(94729),s=n(58278),l=n(82776);let c=(0,r.createContext)({viewerProfile:{profile:null,loading:!1},setViewerProfile:()=>void 0,profiles:new Map,setProfile:()=>void 0});function u(e){let{value:t,handle:n,children:o}=e,[a,s]=(0,r.useState)({profile:null,loading:!1}),[l,u]=(0,r.useState)(new Map(t?[[n||t.id,{profile:t,loading:!1}]]:[])),d={viewerProfile:a,setViewerProfile:(0,r.useCallback)((e,t)=>{s(n=>n.profile===e&&n.loading===t?n:{profile:e,loading:t})},[]),profiles:l,setProfile:(0,r.useCallback)((e,t,n)=>{u(i=>{var r,o;if((null==(r=i.get(e))?void 0:r.profile)===t&&(null==(o=i.get(e))?void 0:o.loading)===n)return i;let a=new Map(i);return a.set(e,{profile:t,loading:n}),a})},[])};return(0,i.Y)(c.Provider,{value:d,children:o})}function d(){var e,t,n,i;let{subjectId:u,subjectName:d,delayLoading:p}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=(0,o.Jd)(),{viewerProfile:m,setViewerProfile:h,profiles:g,setProfile:_}=(0,r.useContext)(c),[b,y]=(0,r.useState)(null);if("string"==typeof u)if(u.includes("-")){let e=u.split("-");u=e[0],d=e.slice(1).join("-")}else u.startsWith("@")&&(u=u.slice(1));let v=u?g.get(u):null,w=(0,r.useCallback)(async e=>{h(m.profile,!0);let t=(0,s.JG)(e.name,{hashIfEmpty:!0});try{let n=await (0,a.x6)("/api/v1/user/".concat(e.id,"-").concat(t,"/public_profile/self"));h(n,!1)}catch(e){e instanceof Error&&y(e),h(null,!1)}},[m,h,y]),S=null==v?void 0:v.profile,E=m.profile,T=(0,r.useCallback)(async e=>{!E&&f&&w(f),_(e,S,!0);try{let t=d&&(0,s.JG)(d,{hashIfEmpty:!0}),n=await (t?(0,a.x6)("/api/v1/user/".concat(e,"-").concat(t,"/public_profile")):(0,a.x6)("/api/v1/user/".concat(e,"/public_profile")));_(e,n,!1)}catch(t){t instanceof Error&&y(t),_(e,S,!1)}},[S,_,d,E,w,f]);(0,r.useEffect)(()=>{p||(null==v?void 0:v.profile)||(null==v?void 0:v.loading)||b||!u||T(u),p||m.loading||m.profile||b||!f||w(f)},[p,u,T,v,b,m,w,f]);let k=(null==(t=m.profile)||null==(e=t.publicationUsers)?void 0:e.find(e=>(0,l.isAtLeastContributorRole)(e.role)))||{publication:null==f||null==(n=f.dashboard_pubs)?void 0:n[0]};return{loading:!!(null==v?void 0:v.loading),viewerProfile:m.profile,subjectProfile:null==v?void 0:v.profile,viewingOwnProfile:!!(m.profile&&m.profile.id===(null==v||null==(i=v.profile)?void 0:i.id)),firstEligibleViewerPublication:k,refetch:T,error:b}}c.displayName="ProfileContext"},25006:function(e,t,n){n.d(t,{Eo:()=>u,df:()=>c,pP:()=>l});var i,r,o=n(4006),a=n(17402);let s="undefined"!=typeof window&&null!=(r=null==(i=window._preloads)?void 0:i.pub)?r:null,l=(0,a.createContext)(s);function c(){return(0,a.useContext)(l)}function u(e){let{children:t,pub:n}=e;return(0,o.Y)(l.Provider,{value:null!=n?n:null,children:t})}l.displayName="PubContext"},98747:function(e,t,n){n.d(t,{oY:()=>a,wX:()=>s});var i=n(4006),r=n(17402);let o=(0,r.createContext)({hasThemedBackground:!1});function a(){var e;return!!(null==(e=(0,r.useContext)(o))?void 0:e.hasThemedBackground)}function s(e){let{value:t,children:n}=e,a=(0,r.useMemo)(()=>t,Object.values(t));return(0,i.Y)(o.Provider,{value:a,children:n})}o.displayName="ThemeContext"},2797:function(e,t,n){n.d(t,{$j:()=>p,Tu:()=>u,Zi:()=>c,oo:()=>d});var i=n(12215),r=n(68349),o=n(96400),a=n(91392),s=n(39318),l=n(9036);async function c(e){var t;(null==(t=window._preloads)?void 0:t.language)&&void 0===window._preloads.customPublicationThemePreviewId&&o.ri.indexOf(window._preloads.language)>-1&&"function"==typeof fetch&&await fetch("/api/v1/i18n/translations?language=".concat(e),{method:"GET"}).then(e=>e.json()).then(t=>{o.TH.l(e,t)}).catch(()=>{})}function u(){let e=(0,l.m)(window.location.href);if(!e.token&&!e.lli||!window.history.replaceState)return;e.token&&!e.pt&&delete e.token,delete e.lli;let t="".concat((0,s.yRP)(window.location.pathname,e)).concat(window.location.hash);window.history.replaceState({},document.title,t)}function d(){if("object"==typeof window._analyticsConfig&&null!==window._analyticsConfig&&!window._analyticsConfig.anonymousId){let e;try{let t=i.get(a.FI.ANONYMOUS_ID);t&&(e=JSON.parse(t))}catch(e){}e||(e=(0,r.QT)(),i.set(a.FI.ANONYMOUS_ID,JSON.stringify(e),{expires:365})),window._analyticsConfig.anonymousId=e}}function p(){var e,t;!(null==(e=console)?void 0:e.log)||window.location.hostname.includes(".localhost")||window.location.pathname.startsWith("/embed")||window.location.pathname.startsWith("/visited-surface-frame")||null!=(t=window._preloads.user)&&t.is_global_admin||console.log("%c\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░ SUBSTACK WANTS YOU ░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▒▒▒▒▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▓▓▓▓▒░░░░░░░░▒▓▓▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▓▓▓▒▒░░░░░░░░░░░░░░▒▒▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▓▓▓▓▒░░░░░░░░░░░░░░░░░░░░░░▒▓▓▓▓▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░▓▒░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░▒▓░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░ TO BUILD A NEW ECONOMIC ENGINE FOR CULTURE ░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░\n                   https://substack.com/jobs\n","font-family:monospace")}n(20363)},34835:function(e,t,n){let i;n.d(t,{A:()=>d,E:()=>p});var r,o,a=n(4006);n(17402);var s=n(50172),l=n(74322),c=n(2797),u=n(86500);function d(e){if(i)throw Error("Cannot re-render the things");i=e,window._preloads&&(window._preloads.original_url=window.location.href),(0,u.Bu)(),(0,c.oo)(),(0,c.Tu)(),function(){if(!window.history||!window.history.pushState||!window.scrollTo)return;let e=window.history.pushState;history.pushState=function(t,n,i){var r;let o=e.apply(history,arguments);return(null==(r=null==t?void 0:t.resetScroll)||r)&&-1===i.indexOf("#")&&window.scrollTo(0,0),o}}(),(0,c.Zi)(window._preloads.language).finally(()=>{f()}),(0,c.$j)()}function p(e){let t=!1;if("object"==typeof window._preloads&&null!==window._preloads)for(let n in e)("object"==typeof e[n]&&null!==e[n]||e[n]!==window._preloads[n])&&(window._preloads[n]=e[n],t=!0);t&&f()}function f(){if(!i)return;let e=document.getElementById("entry");(0,s.render)((0,a.Y)(l.v,{children:(0,a.Y)(i,{initialData:window._preloads})}),e||document.body)}n(20363),"undefined"!=typeof window&&(null==(o=window._preloads)||null==(r=o.user)?void 0:r.is_global_admin)&&new URLSearchParams(window.location.search).get("devtools")&&n(14858)},86500:function(e,t,n){n.d(t,{$5:()=>i.$5,Bu:()=>a.T,Jw:()=>o.Jw,TM:()=>o.TM,YT:()=>o.YT,b8:()=>r.b8,fN:()=>o.fN,kE:()=>o.kE,qY:()=>o.qY,sM:()=>o.sM,u4:()=>o.u4});var i=n(25757),r=n(66565),o=n(44803),a=n(43880)},44803:function(e,t,n){n.d(t,{Jw:()=>x,MY:()=>Y,TM:()=>R,YT:()=>L,fN:()=>N,fe:()=>O,j6:()=>P,kE:()=>M,qY:()=>w,sH:()=>U,sM:()=>D,u4:()=>C,wc:()=>B});var i,r,o=n(69277),a=n(72343),s=n(53928),l=n(4392),c=n(66565),u=n(7354),d=n(13022),p=n(82260),f=n(68349),m=n(40659),h=n(16291),g=n(18189),_=n(39318),b=n(41086),y=n(94402),v=n(82776);let w=g.q,S="undefined"!=typeof window,E=!!(S&&window.navigator&&window.navigator.sendBeacon),T=!(0,f.lT)()&&E,k=new u.W({batchOptions:T?{maxBatchSize:8,maxBatchDataSize:1e4}:void 0,send:function(e,t){S&&(T&&t&&e.push(G(e,t)),new Image().src=(0,_.yRP)(T?"/api/v1/firehose/batch":"/api/v1/firehose",{_:new Date().getTime(),d:e.join(",")}))},beacon:function(e,t){if(!S)return;e.push(G(e,"beacon",t));let n=new Blob([JSON.stringify(e)],{type:"application/json"});navigator.sendBeacon("/api/v1/firehose/batch",n)}}),P=()=>{S&&T&&(window.addEventListener("beforeunload",e=>{k.sendBeacon(e)}),window.addEventListener("pagehide",e=>{k.sendBeacon(e)}),document.addEventListener("visibilitychange",e=>{"hidden"===document.visibilityState&&k.sendBeacon(e)}),setInterval(()=>{k.intervalFlush()},6e4))},I=S&&window!=window.top&&(0,y.G)(f.QT),A="browser";function R(){return I}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{var n;if(["development","test"].includes((n="production",void 0!==n)?n:"")&&!e)throw Error("`undefined` event passed to FRONTEND track call");q(e,Object.assign({},t))}catch(e){try{window.Sentry&&window.Sentry.captureException(e)}catch(t){console.error("Failed to track event",e)}}}function N(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};C(w.PUBLICATION_VISITED,(0,o._)({visited_publication_id:e.id,visited_publication_subdomain:e.subdomain,source:t},n,(0,v.extractEventAttributionDataFromRecord)((0,m.cf)())))}function x(e){let{post:t,hasPaywall:n,surface:i,markRead:r,user:a,trackerUuid:s}=e;C(w.POST_SEEN,(0,o._)({post_id:t.id,post_audience:t.audience,post_type:t.type,has_paywall:n,post_age_minutes:t.post_date&&(0,h.A)().diff(t.post_date,"minute"),surface:i,tracker_uuid:s},(0,v.extractEventAttributionDataFromRecord)((0,m.cf)()))),(!a||r)&&U(t.id)}function U(e){return fetch("/api/v1/posts/".concat(e,"/seen"),{method:"POST"})}function D(e){let{post:t,hasPaywall:n,surface:i,trackerUuid:r}=e;C(w.POST_BOTTOM_SEEN,{post_id:t.id,post_audience:t.audience,post_type:t.type,has_paywall:n,surface:i,tracker_uuid:r})}function M(e){let{post:t}=e;(null==t?void 0:t.id)&&(C(w.POST_PAGE_PINGBACK,{seconds:0,post_id:t.id}),setTimeout(()=>{C(w.POST_PAGE_PINGBACK,{seconds:10,post_id:t.id})},1e4))}function L(e){let{previous:t,url:n}=e;!t||n.includes("_no_an=true")||Y()}S&&(navigator.standalone||(null==(i=(r=window).matchMedia)?void 0:i.call(r,"(display-mode: standalone)").matches))&&(A="standalone");let F=()=>document.location.pathname.startsWith("/p/"),B=()=>{var e,t,n;let i=window._preloads,r=(null==i||null==(e=i.post)?void 0:e.id)&&(null==i?void 0:i.pub),o=!!(null==i||null==(t=i.post)?void 0:t.slug)&&(null==i||null==(n=i.post)?void 0:n.slug)===document.location.pathname.split("/")[document.location.pathname.split("/").length-1];return!!(r&&F()&&o)},O=e=>e?e.is_subscribed?"Paid subs":e.is_free_subscribed?"Free subs":"Anonymous":"Anonymous";function Y(){var e,t,n;let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("undefined"==typeof document||document.location.pathname.startsWith("/embed")&&S&&(null==(n=window)||null==(t=n._preloads)||null==(e=t.pub)?void 0:e.embed_tracking_disabled))return;q(w.PAGES,Object.assign(function(){let e={};if(S){let t=window._preloads&&"post"in window._preloads&&window._preloads.post,n=window.location&&/^\/p\/([^\/]+)/.exec(window.location.pathname),i=window.location&&/\/p-(\d+)/.exec(window.location.pathname);if(n&&n[1]){let i=n[1];t&&t.slug===i&&(e.post_id=t.id,e.post_audience=t.audience,e.post_type=t.type),e.post_slug=i}else i&&i[1]&&(e.post_id=parseInt(i[1]))}return e}(),i));let r=(0,c.wJ)();if(r&&(new Image().src="https://www.facebook.com/tr?id=".concat(r,"&ev=PageView")),(0,p.F)("pageview"),(0,c.b8)("pageview"),(0,c.BU)("page_view"),S&&!F()&&(0,s.Mz)({path:document.location.pathname,title:document.title,sections:"",authors:""}),S&&window.PARSELY&&window.PARSELY.loaded&&window.PARSELY.beacon&&window.PARSELY.beacon.trackPageView){let e={url:document.location.origin+document.location.pathname+document.location.search,urlref:document.referrer||"",js:1,data:{}};if((0,d.Ay)("add_section_and_tag_metadata")){if(F()&&!B())return;if(F()){let t=window._preloads;e.data={audience:O(null==t?void 0:t.user)}}}window.PARSELY.beacon.trackPageView(e)}}function W(e){var t,n,i,r,o,s,c,u,d;let p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=null;try{m=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){}let h={event:e,timestamp:new Date().toISOString(),properties:Object.assign({browserSessionId:l.O,iframeVisitId:I,r:(0,b.y)("r"),magicUserId:"undefined"!=typeof window&&(null==(i=window)||null==(n=i._preloads)||null==(t=n.user)?void 0:t.is_magic)?window._preloads.user.id:void 0},p),context:{client_type:"web",displayMode:A,page:{referrer:document.referrer,title:document.title,url:document.location.href,height:null!=(s="undefined"!=typeof window&&window.innerHeight)?s:0,width:null!=(c="undefined"!=typeof window&&window.innerWidth)?c:0},campaign:(0,a.t)(),timezone:m,screen:{height:null!=(u="undefined"!=typeof window&&(null==(r=window.screen)?void 0:r.height))?u:0,width:null!=(d="undefined"!=typeof window&&(null==(o=window.screen)?void 0:o.width))?d:0}}};return(0,f.Cw)(JSON.stringify(h))}function G(e,t,n){let i=e.length,r=e.map(e=>e.length).reduce((e,t)=>e+t,0);return W(w.FIREHOSE_BATCH_SENT,{dataSize:r,batchSize:i,batchType:t,eventType:null==n?void 0:n.type})}function q(e){var t,n,i;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"==typeof window||"undefined"==typeof document)return;let o=W(e,r);k.add(o),(null==(i=window)||null==(n=i._preloads)||null==(t=n.user)?void 0:t.is_global_admin)&&console.log("EVENT: ".concat(e),r)}},31392:function(e,t,n){n.d(t,{D2:()=>s,Hh:()=>a,Ut:()=>o});var i=n(99851),r=n(17402);function o(){let[e,t]=(0,r.useState)(()=>{if("undefined"!=typeof window){let e=localStorage.getItem("colorScheme"),t="dark"===e?"dark":"light"===e?"light":null;return t||(t=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t}return"light"});return(0,r.useEffect)(()=>{let e=e=>{t(e.scheme)};return window.addEventListener("substackcolorschemechange",e),()=>{window.removeEventListener("substackcolorschemechange",e)}},[]),e}class a extends Event{constructor(e,t){super("substackcolorschemechange",t),(0,i._)(this,"scheme",void 0),this.scheme=e}}function s(){let[e,t]=(0,r.useState)(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-color-scheme: dark)").matches);return(0,r.useEffect)(()=>{let e=e=>{t(e.matches)},n=window.matchMedia("(prefers-color-scheme: dark)");return n.addEventListener("change",e),()=>{n.removeEventListener("change",e)}},[]),{darkMode:e}}},17186:function(e,t,n){n.d(t,{X3:()=>a,xm:()=>o});var i=n(87369),r=n.n(i);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"undefined"!=typeof window?r().get(e,t):t},a=(e,t)=>{if("undefined"!=typeof window)return r().set(e,t)}},68349:function(e,t,n){n.d(t,{A9:()=>em,Cw:()=>eb,EW:()=>M,Eh:()=>eR,FK:()=>ef,Gr:()=>eu,H7:()=>et,Hm:()=>L,I5:()=>Y,J5:()=>eo,LJ:()=>W,LQ:()=>eF,Lm:()=>e_,NN:()=>D,Q2:()=>K,QT:()=>ek,Sd:()=>ep,TJ:()=>eN,Tf:()=>el,Uj:()=>N,V2:()=>ew,Wy:()=>eL,YK:()=>ed,aS:()=>eI,ar:()=>ee,cH:()=>ec,cX:()=>z,dJ:()=>ev,dO:()=>C,gI:()=>j,gK:()=>eA,gm:()=>V,iQ:()=>en,jL:()=>eg,lT:()=>H,lW:()=>Z,m0:()=>$,nB:()=>er,nr:()=>J,o7:()=>G,qm:()=>eP,qr:()=>eE,rr:()=>q,sg:()=>x,uX:()=>B,vL:()=>eT,vy:()=>ei,wb:()=>eS,wp:()=>eC,zY:()=>U,zs:()=>O});var i=n(79785),r=n(4006),o=n(99862),a=n(14242);n(74894);var s=n(16291),l=n(96400);n(35884);var c=n(39318),u=n(9036),d=n(98949),p=n(82776);function f(){let e=(0,i._)(["","% off first month"]);return f=function(){return e},e}function m(){let e=(0,i._)(["","% off first year"]);return m=function(){return e},e}function h(){let e=(0,i._)(["","% off first week"]);return h=function(){return e},e}function g(){let e=(0,i._)(["","% off first day"]);return g=function(){return e},e}function _(){let e=(0,i._)(["","% off first payment"]);return _=function(){return e},e}function b(){let e=(0,i._)(["","% off forever"]);return b=function(){return e},e}function y(){let e=(0,i._)([""," off first month"]);return y=function(){return e},e}function v(){let e=(0,i._)([""," off first year"]);return v=function(){return e},e}function w(){let e=(0,i._)([""," off first week"]);return w=function(){return e},e}function S(){let e=(0,i._)([""," off first day"]);return S=function(){return e},e}function E(){let e=(0,i._)([""," off first payment"]);return E=function(){return e},e}function T(){let e=(0,i._)([""," off forever"]);return T=function(){return e},e}function k(){let e=(0,i._)([" at ",""]);return k=function(){return e},e}function P(){let e=(0,i._)([" at ",""]);return P=function(){return e},e}function I(){let e=(0,i._)([" at ",""]);return I=function(){return e},e}function A(){let e=(0,i._)([" at ",""]);return A=function(){return e},e}let R="undefined"==typeof window||!window.addEventListener;R||window.addEventListener("load",()=>{R=!0},!1),"undefined"!=typeof window&&window._preloads;let C="undefined"!=typeof window?new a.A:null,N=e=>{R?e():window.addEventListener("load",e,!1)},x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=null;return function(){null!==i&&clearTimeout(i),"undefined"!=typeof window&&(i=window.setTimeout(()=>e.apply(n,arguments),t))}},U=function(e,t){var n,i,r,o,a,s;let c,{language:u="en"}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{iTemplate:d,iPlural:k}=l.TH.i(u);if(e&&!e.loading&&!e.error){if(e.trial_period_days)c=k("1 day free trial","%1 day free trial",e.trial_period_days);else if(e.extra_seats)c=k("an additional seat","%1 additional seats",e.extra_seats);else if(e.percent_off)if("once"===e.duration)if(t)switch(t.interval){case"month":c=d(f(),Math.round(e.percent_off_precise||e.percent_off));break;case"year":c=d(m(),Math.round(e.percent_off_precise||e.percent_off));break;case"week":c=d(h(),Math.round(e.percent_off_precise||e.percent_off));break;case"day":c=d(g(),Math.round(e.percent_off_precise||e.percent_off))}else c=d(_(),Math.round(e.percent_off_precise||e.percent_off));else c="repeating"===e.duration?null===e.duration_in_months||e.duration_in_months%12==0?k("%2% off for 1 year","%2% off for %1 years",(null!=(n=e.duration_in_months)?n:0)/12,"".concat(Math.round(e.percent_off_precise||e.percent_off))):k("%2% off for 1 month","%2% off for %1 months",e.duration_in_months,"".concat(Math.round(e.percent_off_precise||e.percent_off))):d(b(),Math.round(e.percent_off_precise||e.percent_off));else if(e.amount_off)if("once"===e.duration)if(t)switch(t.interval){case"month":c=d(y(),(0,p.centsToPriceString)(e.amount_off,t.currency));break;case"year":c=d(v(),(0,p.centsToPriceString)(e.amount_off,t.currency));break;case"week":c=d(w(),(0,p.centsToPriceString)(e.amount_off,t.currency));break;case"day":c=d(S(),(0,p.centsToPriceString)(e.amount_off,t.currency))}else{let n=(0,p.centsToPriceString)(e.amount_off,null!=(i=null==t?void 0:t.currency)?i:"");c=d(E(),n)}else if("repeating"===e.duration)if(null===e.duration_in_months||e.duration_in_months%12==0){let n=(0,p.centsToPriceString)(e.amount_off,null!=(r=null==t?void 0:t.currency)?r:"");c=k("%2 off for 1 year","%2 off for %1 years",(null!=(o=e.duration_in_months)?o:0)/12,n)}else{let n=(0,p.centsToPriceString)(e.amount_off,null!=(a=null==t?void 0:t.currency)?a:"");c=k("%2 off for 1 month","%2 off for %1 months",e.duration_in_months,n)}else{let n=(0,p.centsToPriceString)(e.amount_off,null!=(s=null==t?void 0:t.currency)?s:"");c=d(T(),n)}return c}},D=function(e,t){let n=new Image;n.onload=()=>{n.onload=n.onerror=null,t&&t(n)},n.onerror=n.onload,n.src=e},M=e=>{let t=document.createElement("a");return t.href=e,(t.hostname||"").replace(/\.localhost$/,"")},L=e=>{let t=document.createElement("a");return t.href=e,t.pathname||""},F=e=>{let t=document.createElement("a");return t.href=e,(t.pathname||"")+(t.search||"")+(t.hash||"")},B=(e,t)=>{var n;return W((null==e?void 0:e.body)||(null==e||null==(n=e.response)?void 0:n.body),t)},O=e=>{var t,n,i;let r=(null==e?void 0:e.body)||(null==e||null==(t=e.response)?void 0:t.body);return r&&r.error?{msg:r.error}:r&&r.errors&&r.errors.length>0?{html:null==(n=r.errors[r.errors.length-1])?void 0:n.msgHTML,msg:null==(i=r.errors[r.errors.length-1])?void 0:i.msg}:void 0},Y=(e,t)=>{let n;try{n=e?JSON.parse(e&&e.responseText):e}catch(e){}return W(n,t)},W=(e,t)=>{if(t=t||"Something went wrong",e&&e.error)return e.error;if(e&&e.errors&&e.errors.length>0){var n;return(null==(n=e.errors[e.errors.length-1])?void 0:n.msg)||t}return t},G=function(){return[(0,r.Y)("input",{type:"email",name:"fake_email",placeholder:"email",style:"position:absolute;top:-10000px;left:-10000px","aria-hidden":"true",tabIndex:-1}),(0,r.Y)("input",{type:"password",name:"fake_password",placeholder:"password",style:"position:absolute;top:-10000px;left:-10000px","aria-hidden":"true",tabIndex:-1})]},q=function(){if("undefined"!=typeof navigator||"undefined"!=typeof window){let e=navigator.userAgent||navigator.vendor||window.opera;if(e&&(0,d.fJ)(e,{checkFirst4:!0}))return!0}return!1},H=()=>"undefined"!=typeof window&&!!window.navigator&&!!window.navigator.userAgent&&/(MSIE|Trident)/i.test(window.navigator.userAgent),V=()=>"undefined"!=typeof window&&!!window.navigator&&!!window.navigator.userAgent&&/Firefox/i.test(window.navigator.userAgent),$=()=>"undefined"!=typeof window&&!!window.navigator&&!!window.navigator.userAgent&&/Android/i.test(window.navigator.userAgent),j=()=>!!X(),z=e=>{if("undefined"==typeof window||e||(e=window.navigator),!e)return!1;let t=e;return t.userAgentData&&t.userAgentData.platform?/macOS/.test(t.userAgentData.platform):/Mac/.test(e.platform)},J=()=>!!navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent),K=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z();return e?"⌘":"^"},X=()=>"undefined"==typeof window?null:(0,d.UN)(),Z=e=>{if("undefined"!=typeof window&&e){if(navigator.clipboard&&navigator.clipboard.writeText)return void navigator.clipboard.writeText(e).catch(()=>{Q(e)});Q(e)}},Q=e=>{var t,n,i;let r;(t=window,n=document,i=navigator,{copy:e=>{let o,a;(r=n.createElement("textArea")).value=e,n.body.appendChild(r),i.userAgent.match(/ipad|iphone/i)?((o=n.createRange()).selectNodeContents(r),(a=t.getSelection()).removeAllRanges(),a.addRange(o),r.setSelectionRange(0,999999)):r.select(),n.execCommand("copy"),n.body.removeChild(r)}}).copy(e);let o=t=>{t&&t.clipboardData?(t.clipboardData.setData("text/plain",e),t.preventDefault()):window.clipboardData&&window.clipboardData.setData("Text",e)};X()||window.addEventListener("copy",o),setTimeout(()=>{try{let t=document.createElement("input");t.style="position: absolute; top: 0; right: 0; height: 1px; width: 1px;",document.documentElement.appendChild(t),t.value=e,t.contentEditable="true",t.readOnly=!1;let n=document.createRange();n.selectNodeContents(t);let i=window.getSelection();null==i||i.removeAllRanges(),null==i||i.addRange(n),t.setSelectionRange(0,999999),document.execCommand("copy"),document.documentElement.removeChild(t)}catch(e){}window.removeEventListener("copy",o)},0)},ee=()=>"undefined"!=typeof window&&window.location.hash?decodeURIComponent(window.location.hash.slice(1)):null,et=function(e){let t=ee();if(!t)return;let n=document.getElementById(t);n&&("number"!=typeof e&&(e=-122),document.documentElement.scrollTop=Math.max(0,((e,t)=>{let n="offset".concat((0,p.toTitleCase)(t)),i=0;for(;e&&e!==document.body;)i+=e[n],e="offsetParent"in e&&e.offsetParent||e.parentNode;return i})(n,"top")+e))},en=(e,t)=>{e.className+=" ".concat(t)},ei=(e,t)=>{e&&(e.className=e.className.replace(RegExp("\\b".concat(t,"\\b"),"g"),"").trim())},er=(e,t)=>RegExp("\\b".concat(t,"\\b"),"g").test(e.className),eo=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return ea(document.activeElement,...t)},ea=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];let r=e;for(;r;){for(let e of n)if("function"==typeof e?e(r):r===e)return!0;r=r.parentNode}return!1},es=()=>{let e,t;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),{visibilityChange:e,hidden:t}},el=()=>{let{hidden:e}=es();return!e||!document[e]},ec=e=>{let{visibilityChange:t}=es();t&&document.addEventListener(t,e,!1)},eu=e=>{let{visibilityChange:t}=es();t&&document.removeEventListener(t,e,!1)},ed=e=>new Promise((t,n)=>{if(!window.FileReader)return void n(TypeError("File reader API not found"));let i=new FileReader;i.onerror=n,i.onload=()=>{t(i.result)},i.readAsDataURL(e)}),ep=async e=>{let t,n;if(e){try{t=await ed(e)}catch(e){console.error("Failed to get data URL from file:",e),alert(e.message);return}try{n=await new Promise((t,n)=>{if(!window.FileReader)return void n(TypeError("File reader API not found"));if(!window.DataView)return void n(TypeError("DataView API not found"));let i=new FileReader;i.onerror=n,i.onload=()=>{let e=new DataView(i.result);if(65496!=e.getUint16(0,!1))return t(-2);let n=e.byteLength,r=2;for(;r<n;){if(8>=e.getUint16(r+2,!1))return t(-1);let n=e.getUint16(r,!1);if(r+=2,65505==n){if(0x45786966!=e.getUint32(r+=2,!1))return t(-1);let n=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,n);let i=e.getUint16(r,n);r+=2;for(let o=0;o<i;o++)if(274==e.getUint16(r+12*o,n))return t(e.getUint16(r+12*o+8,n))}else if((65280&n)!=65280)break;else r+=e.getUint16(r,!1)}t(-1)},i.readAsArrayBuffer(e)})}catch(e){console.error("Failed to extract EXIF data from file:",e)}}return{url:t,orientation:n}},ef=e=>{switch(e){case 2:return"rotateY(180deg)";case 3:return"rotateZ(-180deg)";case 4:return"rotateZ(-180deg) rotateY(180deg)";case 5:return"rotateZ(-90deg) rotateY(180deg)";case 6:return"rotateZ(90deg)";case 7:return"rotateZ(90deg) rotateY(180deg)";case 8:return"rotateZ(-90deg)";default:return""}},em=()=>Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)-window.innerHeight,eh=function(){let{redirect:e,email:t,justTrying:n,with_password:i=!1,useOriginalUrl:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"string"!=typeof e&&(e=(0,c.RY1)({useOriginalUrl:r})),(0,c.yRP)("/account/login",{redirect:e||"",email:t||"",with_password:i?"1":"",justTrying:n||""})},eg=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};document.location.href=eh(e)},e_=e=>{window.location.assign((0,c.FCy)(e))},eb=e=>{let t,n,i,r,o,a,s,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",c="",u=0;for(e=ey(e);u<e.length;)t=e.charCodeAt(u++),n=e.charCodeAt(u++),i=e.charCodeAt(u++),r=t>>2,o=(3&t)<<4|n>>4,a=(15&n)<<2|i>>6,s=63&i,isNaN(n)?a=s=64:isNaN(i)&&(s=64),c=c+l.charAt(r)+l.charAt(o)+l.charAt(a)+l.charAt(s);return c},ey=e=>{let t="";for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t},ev=e=>{let t=[window.scrollX,window.scrollY];ew(e),window.scrollTo(...t)},ew=function(e){let{event:t=null,local_navigation:n=!0,replace:i=!1,newTab:r=!1,state:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t&&t.preventDefault(),!e||"string"!=typeof e)return;try{let t=new URL(e);if(!["http:","https:","substack:"].includes(t.protocol))return}catch(e){}if(e.startsWith("#")&&n){if(window.location.hash!==e){var s;i&&(null==(s=window.history)?void 0:s.replaceState)?window.history.replaceState(null!=a?a:window.history.state,null,e):window.location.hash=e}et();return}if(n&&M(e)&&M(e)!==M(window.location.href)&&(n=!1),r||t&&("metaKey"in t&&t.metaKey||"ctrlKey"in t&&t.ctrlKey))return void window.open(e,"_blank");let l=history.state;if(n){if("react-router"===window.__SUBSTACK_ROUTER_TYPE__)return void window.__reactRouterNavigate(F(e),{replace:i,state:a});if((0,o.route)(F(e),i)){void 0!==a?history.replaceState(a,""):i&&void 0!==l&&history.replaceState(l,""),setTimeout(()=>et(),0);return}}window.location.href=e},eS=(e,t)=>new Promise(n=>{e.setState(t,n)}),eE=(e,t)=>new Promise((n,i)=>{let r=async function(){for(var r=arguments.length,o=Array(r),a=0;a<r;a++)o[a]=arguments[a];try{n(await t.apply(e,o))}catch(e){i(e)}};e.setState(r)}),eT=async function(e,t,n){let{force:i}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return"function"==typeof t&&(n=t,t="lock"),await eE(e,async function(r){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];if(r[t]&&!i)return;await eS(e,{[t]:!0});let l=await n.call(e,r,...a);return await eS(e,{[t]:!1}),l})},ek=()=>{let e=window.crypto||window.msCrypto;if("function"==typeof(null==e?void 0:e.randomUUID))return e.randomUUID();if(e)return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,t=>(t^e.getRandomValues(new Uint8Array(1)[0])&15>>t/4).toString(16));let t=new Date().getTime(),n="undefined"!=typeof performance&&performance.now&&1e3*performance.now()||0;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{let i=16*Math.random();return t>0?(i=(t+i)%16|0,t=Math.floor(t/16)):(i=(n+i)%16|0,n=Math.floor(n/16)),("x"===e?i:3&i|8).toString(16)})},eP=function(e){var t;let{stripHash:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("undefined"!=typeof window&&(null==(t=window.history)?void 0:t.replaceState)){let t=(0,u.m)(window.location.href);if(Array.isArray(e))for(let n of e)delete t[n];else delete t[e];let i="".concat((0,c.yRP)(window.location.pathname,t)).concat(n?"":window.location.hash);window.history.replaceState(window.history.state,document.title,i)}},eI=()=>"undefined"!=typeof window&&(void 0!==document.webkitCurrentFullScreenElement?null!==document.webkitCurrentFullScreenElement:void 0!==document.fullscreenElement&&null!==document.fullscreenElement),eA=e=>"undefined"!=typeof window&&(e.requestFullScreen?(e.requestFullScreen(),!0):e.webkitRequestFullScreen?(e.webkitRequestFullScreen(),!0):!!e.mozRequestFullScreen&&(e.mozRequestFullScreen(),!0)),eR=()=>{if(!eI())return!1;if(document.exitFullscreen)return document.exitFullscreen(),!0;if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)return document.mozCancelFullScreen(),!0;else if(document.msExitFullscreen)return document.msExitFullscreen(),!0;return!1},eC=()=>"undefined"!=typeof window&&!!document.pictureInPictureElement&&!!document.exitPictureInPicture&&(document.exitPictureInPicture(),!0),eN=e=>{let t=document.createElement("a");document.body.appendChild(t),t.href=e,t.target="_blank",t.click(),document.body.removeChild(t)},ex=new Intl.DateTimeFormat(void 0,{timeStyle:"short"}),eU=new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}),eD=new Intl.DateTimeFormat(void 0,{dateStyle:"long"}),eM=new Intl.DateTimeFormat(void 0,{dateStyle:"long"}),eL=function(e){let{includeTime:t,language:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,s.A)(e).locale(n||"en"),r=(0,s.A)(),{iTemplate:o}=l.TH.i(n);return i.isBefore(r.startOf("year"))?eD.format(i.toDate())+(t?o(k(),ex.format(i.toDate())):""):i.isBefore(r.startOf("day"))?eU.format(i.toDate())+(t?o(P(),ex.format(i.toDate())):""):i.isAfter(r.endOf("year"))?eM.format(i.toDate())+(t?o(I(),ex.format(i.toDate())):""):i.isAfter(r.endOf("day"))?eU.format(i.toDate())+(t?o(A(),ex.format(i.toDate())):""):ex.format(i.toDate())},eF=()=>"undefined"!=typeof window&&!!window._preloads.isDevelopmentEnvironment},10238:function(e,t,n){n.d(t,{AG:()=>l,GJ:()=>o,QW:()=>a,Up:()=>s,eQ:()=>i,iC:()=>r});let i=1003,r=1002,o=1001,a=1e3,s=999,l=998},20500:function(e,t,n){n.d(t,{EE:()=>l,yn:()=>c});var i=n(69277),r=n(32641),o=n(4006),a=n(17402),s=n(63136);let l=(0,a.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);return(0,o.Y)(s.EY.B4,(0,i._)({as:"span",color:"secondary",ref:t,className:n},a))}),c=(0,a.forwardRef)((e,t)=>{var{className:n}=e,a=(0,r._)(e,["className"]);return(0,o.Y)(s.EY.B4,(0,i._)({as:"span",color:"error",ref:t,className:n},a))})},76171:function(e,t,n){n.d(t,{JU:()=>f,Sy:()=>h,sb:()=>m});var i=n(69277),r=n(70408),o=n(32641),a=n(4006),s=n(75159),l=n(32485),c=n.n(l),u=n(17402),d=n(76977),p=n(63136);let f=(0,u.forwardRef)((e,t)=>{var{className:n,children:l,htmlFor:u}=e,d=(0,o._)(e,["className","children","htmlFor"]);return(0,a.Y)(s.b,{asChild:!0,htmlFor:u,children:(0,a.Y)(p.EY.B4,(0,r._)((0,i._)({as:"label",weight:"medium",color:"primary",ref:t,cursor:"inherit",className:c()("pencraft",n)},d),{children:l}))})}),m=(0,u.forwardRef)((e,t)=>{var{className:n,children:s}=e,l=(0,o._)(e,["className","children"]);return(0,a.Y)(f,(0,r._)((0,i._)({ref:t,className:n},l),{children:(0,a.FD)(d.Ye,{gap:4,alignItems:"center",children:[s,(0,a.Y)(_,{})]})}))}),h=(0,u.forwardRef)((e,t)=>{var{className:n,children:s,hint:l}=e,c=(0,o._)(e,["className","children","hint"]);return(0,a.Y)(f,(0,r._)((0,i._)({ref:t,className:n},c),{children:(0,a.FD)(d.Ye,{gap:4,justifyContent:"space-between",children:[s,(0,a.Y)(g,{text:l})]})}))}),g=e=>{let{text:t}=e;return(0,a.Y)(p.EY,{color:"secondary",weight:"regular",children:t})},_=()=>(0,a.Y)(p.EY,{as:"span",color:"error",children:"*"})},84843:function(e,t,n){n.d(t,{$q:()=>b,Io:()=>_,J:()=>v,P0:()=>C,UG:()=>A,Ud:()=>E,fS:()=>U,ph:()=>y,qx:()=>S,rQ:()=>g});var i=n(69277),r=n(4006),o=n(38390),a=n(32485),s=n.n(a),l=n(48697),c=n(23623),u=n(73164),d=n(89490),p=n(35369),f=n(76977),m=n(63136),h=n(74084);function g(e){let t,n,{onClose:i,showClose:o=!1,title:a,description:s,icon:l,showDivider:c=!1,alignItems:u="start",isInsideDialog:d=!0}=e;return"center"===u?(t=c?N:R,n=D):(t=c?C:A,n=U),(0,r.FD)(t,{children:[l,(0,r.FD)(n,{children:[a&&(0,r.Y)(b,{text:a,isInsideDialog:d}),s&&(0,r.Y)(y,{text:s,isInsideDialog:d})]}),o&&i&&(0,r.Y)(v,{onClose:i})]})}function _(e){let{onClose:t,showClose:n=!1,image:i}=e;return(0,r.FD)(A,{children:[i,n&&t&&(0,r.Y)(w,{onClose:t})]})}function b(e){let{text:t,isInsideDialog:n}=e,i=n?o.hE:"span";return(0,r.Y)(i,{asChild:!0,children:(0,r.Y)(m.EY.B2,{weight:"semibold",color:"primary",as:"span",children:t})})}function y(e){let{text:t,isInsideDialog:n}=e,i=n?o.VY:"span";return(0,r.Y)(i,{asChild:!0,children:(0,r.Y)(m.EY.B3,{color:"secondary",as:"span",children:t})})}function v(e){let{onClose:t,position:n="absolute"}=e;return(0,r.Y)(p.K0,{priority:"quaternary",size:"sm",title:"Close",onClick:t,"aria-label":"close",position:n,className:s()(h.A.closeButton,h.A[n]),children:(0,r.Y)(l.A,{size:20})})}function w(e){let{onClose:t}=e;return(0,r.Y)(c.a,{children:(0,r.Y)(o.bm,{asChild:!0,children:(0,r.Y)(p.mZ,{priority:"secondary",size:"sm",title:"Close",onClick:t,"aria-label":"close",position:"absolute",className:h.A.imageCloseButton,children:(0,r.Y)(l.A,{size:20})})})})}function S(e){let{icon:t,bg:n}=e;return(0,r.Y)(T,{bg:n,children:t})}function E(){return(0,r.Y)(T,{bg:"accent-orange",children:(0,r.Y)(u.A,{height:20})})}function T(e){let{children:t,bg:n="secondary"}=e;return(0,r.Y)(f.fI,{display:"flex",flex:"auto",width:48,height:48,bg:n,radius:"sm",alignItems:"center",justifyContent:"center",outline:"detail",children:t})}let k={display:"flex",direction:"column",gap:16,paddingX:20,paddingTop:20},P={paddingTop:16,paddingBottom:16,borderBottom:"detail"},I={alignItems:"center"},A=(0,d.I4)((0,i._)({},k)),R=(0,d.I4)((0,i._)({},k,I)),C=(0,d.I4)((0,i._)({},k,P)),N=(0,d.I4)((0,i._)({},k,P,I)),x={display:"flex",direction:"column",gap:4},U=(0,d.I4)((0,i._)({},x)),D=(0,d.I4)((0,i._)({},x,{alignItems:"center",textAlign:"center"}))},81929:function(e,t,n){n.d(t,{Jq:()=>b,Oi:()=>h,vw:()=>_});var i=n(69277),r=n(70408),o=n(32641),a=n(4006),s=n(32485),l=n.n(s),c=n(17402),u=n(89490),d=n(35369),p=n(76977),f=n(63136);n(67140);var m=n(62614);let h={size:14,strokeWidth:2.5},g={display:"flex",height:20,paddingX:6,paddingY:2,gap:4,font:"text",fontSize:11,fontWeight:"medium",alignItems:"center"},_=(0,c.forwardRef)((e,t)=>{var{className:n,theme:s="default",priority:c="secondary",leading:f,trailing:h,children:_,fillIcon:b,radius:y="xs",onClick:v,href:w}=e,S=(0,o._)(e,["className","theme","priority","leading","trailing","children","fillIcon","radius","onClick","href"]);let E=void 0!==v||void 0!==w;return(0,a.FD)(d.Nm,(0,r._)((0,i._)({},g,S),{className:l()(n,function(e){let{theme:t="default",priority:n="secondary",clickable:o,radius:a="xs"}=e;return l()(m.A.tag,m.A["theme_".concat(t)],m.A["priority_".concat(n)],o&&m.A.clickable,(0,u.iF)((0,r._)((0,i._)({},g),{cursor:o?"pointer":"inherit",radius:a})))}({theme:s,priority:c,clickable:E,radius:y})),onClick:v,href:w,ref:t,tabIndex:E?0:-1,children:[f&&(0,a.Y)(p.pT,{className:l()(m.A.leading,b&&m.A.fillIcon),alignItems:"center",children:f}),_,h&&(0,a.Y)(p.pT,{className:l()(m.A.trailing,b&&m.A.fillIcon),alignItems:"center",children:h})]}))}),b=(0,c.forwardRef)((e,t)=>{var{className:n,priority:s="primary",leading:c,trailing:u,children:h,fillIcon:_,radius:b="xs",onClick:y,href:v,title:w}=e,S=(0,o._)(e,["className","priority","leading","trailing","children","fillIcon","radius","onClick","href","title"]);let E=void 0!==y||void 0!==v;return(0,a.FD)(d.Nm,(0,r._)((0,i._)((0,r._)((0,i._)({},S),{className:l()(n,m.A.tag,m.A.media,m.A["priority_".concat(s)],E&&m.A.clickable),onClick:y,href:v,ref:t,radius:b,cursor:E?"pointer":"inherit",tabIndex:E?0:-1,minWidth:0,title:null!=w?w:void 0}),g),{children:[c&&(0,a.Y)(p.pT,{className:l()(m.A.leading,_&&m.A.fillIcon),alignItems:"center",children:c}),(0,a.Y)(f.EY,{ellipsis:!0,children:h}),u&&(0,a.Y)(p.pT,{className:l()(m.A.trailing,_&&m.A.fillIcon),alignItems:"center",children:u})]}))});b.displayName="MediaTag"},17028:function(e,t,n){n.d(t,{$n:()=>i.$n,EY:()=>a.EY,I1:()=>o.I1,I4:()=>r.I4,Jb:()=>i.az,K0:()=>i.K0,Nm:()=>i.Nm,QW:()=>s.Q,VP:()=>o.VP,Ye:()=>o.Ye,Yq:()=>a.Yq,az:()=>r.az,cG:()=>l.c,fI:()=>o.fI,iC:()=>c.iC,iF:()=>r.iF,mZ:()=>i.mZ,nS:()=>a.nS,ov:()=>o.ov,pT:()=>o.pT,vj:()=>l.v,yw:()=>r.yw});var i=n(35369),r=n(89490),o=n(76977),a=n(63136),s=n(92028),l=n(16074),c=n(10238)},32848:function(e,t,n){n.d(t,{C8:()=>h,K5:()=>_,NL:()=>b,Of:()=>f,n7:()=>g,xA:()=>y});var i=n(69277),r=n(70408),o=n(32641),a=n(50014),s=n.n(a),l=n(17402),c=n(94729),u=n(38704),d=n(82776);let p={hasLoadedOnce:!1,publications:[],subscriptions:[],publicationUsers:[],publicationMap:new Map,subscriptionMap:new Map,publicationUserMap:new Map,publicationsWithPledges:[]};function f(e){let{isLoggedIn:t,includePodcasts:n}=e,[o,a]=(0,l.useState)((0,r._)((0,i._)({},p),{hasLoadedOnce:!t})),d=e=>{a(t=>{let n=s()([...t.publications,...e.publications],e=>e.id),r=s()([...t.subscriptions,...e.subscriptions],e=>e.publication_id),o=s()([...t.publicationUsers,...e.publicationUsers],e=>e.publication_id);return{hasLoadedOnce:!0,publications:n,subscriptions:r,publicationUsers:o,publicationMap:new Map(n.map(e=>[e.id,e])),subscriptionMap:new Map(r.map(e=>[e.publication_id,e])),publicationUserMap:new Map(o.map(e=>[e.publication_id,e])),publicationsWithPledges:[...t.publicationsWithPledges,...e.publicationsWithPledges],latestVoiceoverData:(0,i._)({},t.latestVoiceoverData,null==e?void 0:e.latestVoiceoverData),latestPodcastEpisodeData:(0,i._)({},t.latestPodcastEpisodeData,null==e?void 0:e.latestPodcastEpisodeData)}})};(0,l.useEffect)(()=>{if("serviceWorker"in navigator){let e=async e=>{var t;if((null==(t=e.data)?void 0:t.type)==="subscriptions-update"){let{payload:t}=e.data;t.ok&&d(t.json)}};return navigator.serviceWorker.addEventListener("message",e),()=>{navigator.serviceWorker.removeEventListener("message",e)}}},[]),(0,l.useEffect)(()=>{t&&(async()=>{try{for await(let e of v("/api/v1/subscriptions",{query:{include_podcasts:n?"1":void 0},getPageInit(e,t){let n=null==e?void 0:e.nextCursor;return n?(0,r._)((0,i._)({},t),{query:(0,r._)((0,i._)({},t.query),{cursor:n})}):null}}))d(e)}catch(e){console.warn(e)}})()},[t]);let f=(e,t)=>{let{subscription:n,publicationUser:o}=t;a(t=>{var a,s,l;let c;return t=n?(0,r._)((0,i._)({},t),{subscriptions:t.subscriptions.map(e=>e.publication_id===n.publication_id?n:e),subscriptionMap:(0,u.Jb)(t.subscriptionMap,e,n)}):m(t,e),t=o?(0,r._)((0,i._)({},t),{publicationUsers:(a=t.publicationUsers,s=t=>t.publication_id===e,l=o,(c=(a=a.slice()).findIndex(s))>=0?a[c]=l:a.push(l),a),publicationUserMap:(0,u.Jb)(t.publicationUserMap,e,o)}):(0,r._)((0,i._)({},t),{publicationUsers:t.publicationUsers.filter(t=>t.publication_id!==e),publicationUserMap:(0,u.QT)(t.publicationUserMap,e)})})},h=async e=>{try{let t=await (0,c.x6)("/api/v1/subscription/".concat(e));f(e,t)}catch(t){t instanceof c.fk&&(404===t.response.status?a(t=>m(t,e)):console.error(t))}};return{result:o,isLoading:!1,hasLoadedOnce:o.hasLoadedOnce,refetch:async()=>o,refetchPublication:h,updatePublication:f,removeByPubId:e=>a(t=>m(t,e)),updateSubscriptions:e=>{a(t=>(0,r._)((0,i._)({},t),{subscriptions:e,subscriptionMap:new Map(e.map(e=>[e.publication_id,e]))}))}}}function m(e,t){let n=e.subscriptions.filter(e=>e.publication_id!==t);return(0,r._)((0,i._)({},e),{subscriptions:n,subscriptionMap:new Map(n.map(e=>[e.publication_id,e]))})}let h=(0,l.createContext)({result:null,isLoading:!1,hasLoadedOnce:!1,refetch:()=>Promise.resolve(p),refetchPublication:()=>Promise.resolve(),updatePublication(){},removeByPubId:()=>{},updateSubscriptions:()=>{}});function g(){return(0,l.useContext)(h)}function _(e){var t;let{subscriptionMap:n,publicationUserMap:i,publicationsWithPledges:r}=null!=(t=g().result)?t:{subscriptionMap:new Map,publicationUserMap:new Map,publicationsWithPledges:[]};return{subscription:n.get(e),publicationUser:i.get(e),is_pledged:!!(null==r?void 0:r.includes(e))}}function b(e){let{subscription:t,publicationUser:n,is_pledged:i}=_(e),r=(null==t?void 0:t.membership_state)==="free_signup",o=(null==t?void 0:t.membership_state)==="subscribed",a=!!(null==t?void 0:t.is_founding),s=!!(n&&(0,d.isAtLeastContributorRole)(n.role));return{subscription:t,publicationUser:n,isFreeSubscribed:r,isPaid:o,isSubscribed:r||o||s,isAuthor:s,isFounding:a,isPledged:i}}function y(e){var t,n;let{publicationUsers:i}=null!=(t=g().result)?t:{publicationUsers:[]};return null!=(n=i.find(t=>t.publication_id===e))?n:null}async function*v(e,t){var{getPageInit:n}=t,i=(0,o._)(t,["getPageInit"]);let r=await (0,c.x6)(e,i);yield r;let a=n(r,i);for(;null!=a;)r=await (0,c.x6)(e,a),yield r,a=n(r,i)}},40659:function(e,t,n){n.d(t,{Fg:()=>y,HM:()=>_,cf:()=>p,l:()=>f,rG:()=>v,wX:()=>g});var i=n(4006),r=n(17402),o=n(25006),a=n(17186),s=n(49807),l=n(82776),c=n(84985);let u="session_attribution";function d(e){try{(0,a.X3)(u,e)}catch(e){console.error("cannot set attribution data",e)}}function p(){let e;try{var t;e=null!=(t=(0,a.xm)(u))?t:{}}catch(e){return{}}return(0,l.extractAttributionDataFromRecord)(e)}function f(){if("undefined"!=typeof window&&"undefined"!=typeof document){if(null==window.location)return;let e={href:window.location.href,referrer:document.referrer,timestamp:+new Date};window.location.hostname===s.sXh.hostname&&function(e){let t=(0,a.xm)(u);if(null==t)d({sessionStart:e.timestamp,originalReferrer:e.referrer,landingPage:e.href,landingSurface:m(e.href),landingSurfaceId:h(e.href),landingPublicationId:e.publicationId,visits:[e]});else{var n,i;let r,o=+new Date;(null==(n=t.visits)?void 0:n.length)===0&&(r=!0),(null==t||null==(i=t.visits)?void 0:i.length)>0&&o-t.visits[0].timestamp>=9e5&&(r=!0),(null==e.referrer||""==e.referrer)&&(r=!0),e.timestamp-t.sessionStart<700&&null==t.landingPublicationId&&null!=e.publicationId&&(r=!0),d({sessionStart:r?e.timestamp:t.sessionStart,originalReferrer:r?e.referrer:t.originalReferrer,landingPage:r?e.href:t.landingPage,landingSurface:r?m(e.href):t.landingSurface,landingSurfaceId:r?h(e.href):t.landingSurfaceId,landingPublicationId:r?e.publicationId:t.landingPublicationId,visits:[e,...t.visits].slice(0,20)})}}(e)}}let m=e=>{let t=new URL((0,s.Ewe)()).hostname;if(null==e)return"feed";let n=new URL(e);return t!==n.hostname?"publisher":n.pathname.startsWith("/chat/")?"chat":e.includes("/note/c-")?"note":e.includes("/post/p-")||n.pathname.startsWith("/p/")||n.pathname.startsWith("/inbox/post/")?"post":e.includes("/profile")||n.pathname.startsWith("/@")?"profile":void 0},h=e=>{if(null==e)return;let t=e.match(/\/[a-z]-(\w+)$/i);return t?t[1]:void 0},g=()=>{let{iframeRef:e,frameReady:t,setFrameReady:n}=b(),a=(0,o.df)();(0,r.useEffect)(()=>(window.addEventListener("message",l),()=>window.removeEventListener("message",l)),[]);let l=e=>{var t;(null==(t=e.data)?void 0:t.attributionReady)===!0&&n()};return((0,r.useEffect)(()=>{var n,i;if(t&&(null==e||null==(n=e.current)?void 0:n.contentWindow)){let t=e.current.contentWindow,n={href:window.location.href,referrer:document.referrer,timestamp:+new Date,type:"log_attribution",publicationId:null!=(i=null==a?void 0:a.id)?i:void 0};null==t||t.postMessage(n,"".concat((0,s.Ewe)()))}},[t,a]),"undefined"==typeof window)?null:(0,i.Y)("iframe",{className:c.A.visitedSurfacesIFrame,ref:e,src:"".concat((0,s.Ewe)(),"/session-attribution-frame"),width:"0",height:"0"})},_=(0,r.createContext)({iframeRef:null,getSessionAttribution:async()=>({}),isDefaultValue:!0,frameReady:!1,setFrameReady:()=>{}}),b=()=>(0,r.useContext)(_),y=e=>{let t,{children:n}=e,o=b(),[a,s]=(0,r.useState)(!1),l=(0,r.useRef)(null);return t=o.isDefaultValue?{iframeRef:l,getSessionAttribution:async()=>new Promise(e=>{var t;let n=t=>{null!=t.data.attributionData&&(window.removeEventListener("message",n),e(t.data.attributionData))};(null==(t=l.current)?void 0:t.contentWindow)!=null?(window.addEventListener("message",n),l.current.contentWindow.postMessage({type:"fetch_attribution"},"*")):e(p())}),isDefaultValue:!1,frameReady:a,setFrameReady:()=>s(!0)}:{iframeRef:o.iframeRef,getSessionAttribution:o.getSessionAttribution,isDefaultValue:!1,frameReady:o.frameReady,setFrameReady:o.setFrameReady},(0,i.Y)(_.Provider,{value:t,children:n})};function v(){let{getSessionAttribution:e,frameReady:t}=b(),[n,i]=(0,r.useState)({});return(0,r.useEffect)(()=>{t&&(async()=>{i(await e())})()},[e,t]),n}},56458:function(e,t,n){n.d(t,{$P:()=>D,Ed:()=>b,Fk:()=>g,G8:()=>T,Jh:()=>A,Jy:()=>d,NJ:()=>U,QN:()=>w,QP:()=>v,Vr:()=>R,XP:()=>_,Xk:()=>N,a8:()=>y,cK:()=>f,fP:()=>S,fk:()=>P,m4:()=>E,pf:()=>I,rI:()=>C,th:()=>p,wq:()=>x,zN:()=>m});var i=n(4016),r=n(27162),o=n(67734),a=n(39318),s=n(49807),l=n(82776);let c=e=>{var t;return!!(null==e?void 0:e.sections)&&(null==(t=e.sections)?void 0:t.length)>0},u=e=>!!(null==e?void 0:e.podcast_enabled),d=e=>!!e&&(e=>{if(!e)return 0;let t=[];return c(e)&&(t=p(e)),+!!u(e)+t.length})(e)>0,p=e=>e&&c(e)?e.sections.filter(e=>e.is_podcast):[],f=e=>!!e&&!!(e.is_free_subscribed&&!e.is_subscribed),m=e=>!!e&&"enabled"===e.payments_state,h=function(e){let{usePreview:t=!1,useDraft:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(null==e?void 0:e.type){case"newsletter":return n?e.draftVoiceoverUpload:e.voiceoverUpload;case"podcast":if(t)return n?e.draftPodcastPreviewUpload:e.podcastPreviewUpload;return n?e.draftPodcastUpload:e.podcastUpload;case"video":return n?e.draftVideoUpload:e.videoUpload;default:return null}},g=function(e){let{usePreview:t=!1,useDraft:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return null;let i=h(e,{usePreview:t,useDraft:n});if(i){var r;return null!=(r=i.duration)?r:null}if((null==e?void 0:e.type)==="podcast"&&!t){let t=n?e.draft_podcast_duration:e.podcast_duration;return null!=t?t:null}return null},_=e=>!!e&&"podcast"===e.type&&!!e.podcastUpload&&!!e.podcastUpload.is_free_preview,b=e=>{var t;let{post:n}=e;return!!n&&!!(null==(t=n.podcastFields)?void 0:t.free_podcast_url)},y=e=>{var t,n;return e.is_www?null!=(n=e.logo_url)?n:void 0:e.logo_url||e.cover_photo_url||e.author_photo_url||(null==(t=e.author)?void 0:t.photo_url)},v=e=>{var t;return e&&"plans"in e&&Array.isArray(null==e?void 0:e.plans)&&null!=(t=e.plans.find(e=>(0,r.T)({plan:e})))?t:null},w=e=>!!v(e),S=e=>{let{pub:t,currency:n}=e,i=v(t);return i?(0,o.oW)(i,n):null},E=e=>{var t,n;if((0,i.s7)({pub:e}))return"Founders";let r=v(e);return null!=(n=null==r||null==(t=r.metadata)?void 0:t.short_description)?n:null},T=(e,t)=>(null==t?void 0:t.audience)==="founding"&&E(e)||"paid",k=e=>{let{pub:t,url:n}=e;return!!n.includes("api.substack.com")&&(n.includes("/feed/podcast/".concat(t.id,"/s/"))||n.includes("/feed/podcast/".concat(t.id,".rss")))},P=e=>!!e&&!!e.podcast_enabled&&(!e.podcast_feed_url||!k({pub:e,url:e.podcast_feed_url})),I=e=>{var t;let{pub:n,section:i}=e;if(!i.is_podcast)return!1;let r=(null==(t=i.podcastSettings)?void 0:t.podcast_feed_url)||null;return!r||!k({pub:n,url:r})},A=e=>{var t,n;let{pub:i,includeMainPub:r,excludePodcasts:o}=e;if(!i)return[];let c=[];return r&&c.push({name:i.name,description:null!=(n=i.hero_text)?n:"",logoUrl:i.logo_url,sectionId:null,linkUrl:(0,a.qy7)(i),defaultOn:!0}),null==(t=i.sections)||t.forEach(e=>{(!o||!e.is_podcast||(0,l.sectionIsSpecificallyMarkedAsNewsletter)({section:e,pub:i}))&&c.push({name:e.name,description:e.description,logoUrl:e.logo_url,sectionId:e.id,linkUrl:(0,s.Dor)(i,{section:e}),defaultOn:e.is_default_on})}),c};function R(e){let{sub:t}=e;return!!t&&!!t.plan&&!!t.is_founding&&"metadata"in t.plan&&!!t.plan.metadata&&!t.plan.metadata.fixed_price}let C=e=>{var t;let{post:n,section:i,pub:r}=e;return!!n.videoUpload&&("video"===n.type||!!(null==(t=n.podcastFields)?void 0:t.hide_from_feed)||!!(!i&&!r.podcast_enabled)||!!(i&&!i.is_podcast))};function N(e){var t;let{post:n,pub:i,section:r}=e;return(null==(t=n.podcastFields)||!t.hide_from_feed)&&(r?r.is_podcast:u(i))}let x=e=>{var t,n,i,r,o;return!!(null==e||null==(i=e.videoUpload)||null==(n=i.extractedAudio)||null==(t=n.transcription)?void 0:t.transcript_url)||!!(null==e||null==(o=e.podcastUpload)||null==(r=o.transcription)?void 0:r.transcript_url)},U=e=>{var t,n,i,r,o,a;return null!=(a=null!=(o=null==e||null==(n=e.videoUpload)||null==(t=n.extractedAudio)?void 0:t.transcription)?o:null==e||null==(i=e.podcastUpload)?void 0:i.transcription)?a:null==e||null==(r=e.videoUpload)?void 0:r.transcription},D=e=>{var t,n;let{pub:i}=e;return(null==i||null==(t=i.theme)?void 0:t.home_posts)==="list"&&!!(null==i||null==(n=i.theme)?void 0:n.hide_images_from_list)}},4016:function(e,t,n){n.d(t,{C3:()=>I,JQ:()=>d,NO:()=>function e(t){return"pub"in t?e({pubId:t.pub.id}):10845===t.pubId},O3:()=>p,S2:()=>s,Tu:()=>A,V6:()=>l,d4:()=>h,dm:()=>E,eh:()=>P,lu:()=>c,ob:()=>m,ot:()=>k,rD:()=>w,ri:()=>g,s7:()=>a,wj:()=>f,zM:()=>_});var i=n(83673),r=n.n(i);let o=new Set([0x83c163a,0x82bc701,0x81adcb6,0x8455987,0x8487b09,0x85eb9a5,0x861de49,0x8653d00,0x868d293,0x86f9884,0x872b528,0x8798da8,0x87d48d6,0x8809a67,0x883f640,0x8961657,0x8aedf0b,0x8bc9b46,0x8559743,0x887329b,0x888f704,0x88a9886,0x8910626,0x8999664,0x89d3d02,0x8a084ae,0x8c6f81e,0x8cb3c01,0x8cf2aa9,0x90a54a4,0x9aa80e8]);function a(e){let{pub:t,includeTheRampart:n=!1}=e;return!!t&&(!!n&&1620566===t.id||87281===t.id)}function s(e){let{pub:t}=e;return!!t&&228030===t.id}let l=e=>"privatewires"===e?"https://privatewires.net":"pwprod"===e?"https://pirate-wires-island.vercel.app":"piratewires"===e?"https://www.piratewires.com":"thefreedomfrequency"===e?"https://thefreedomfrequency.org":"preamblestaging521"===e?"https://staging-thepreamble.vercel.app":"sharonmcmahon"===e?"https://thepreamble.com":void 0;function c(e){var t;let{pub:n}=e;return!!n&&[260347,3116199].includes(null!=(t=n.id)?t:0)}let u=[/the front page/i,/tgif/i,/things worth remembering/i],d=e=>{let{pub:t}=e;return r()(u.map(e=>t.sections.find(t=>t.name.match(e)))).map(e=>e.id)};function p(e){let{pub:t}=e;return 220361===t.id}function f(e){let{pub:t}=e;return 2325511===t.id}function m(e){let{pub:t}=e;return 5619506===t.id}function h(e){let{pub:t}=e;return 2857530===t.id}function g(e){let{pub:t}=e;return 471923===t.id}function _(e){let{post:t}=e;return!!t&&o.has(t.id)&&!!t.podcast_preview_upload_id}let b={87908:"morning-shots",87934:"the-triad",87969:"press-pass",87950:"overtime",87957:"bulwark-podcast",87956:"screen-time",87963:"the-next-level",104848:"george-conway-explains-it-all",87971:"the-focus-group",87958:"beg-to-differ",87975:"movie-aisle",87961:"the-secret-podcast",87964:"between-us",87978:"thursday-night-bulwark",135716:"the-michael-steele-podcast",111316:"shield-of-the-republic"},y={62624:"morning-shots",62631:"the-triad",62634:"overtime",62636:"press-pass",62639:"bulwark-podcast",62641:"beg-to-differ",62642:"the-secret-podcast",62644:"the-next-level",62645:"movie-aisle",62646:"between-us",62647:"the-focus-group",62648:"thursday-night-bulwark"},v=new Set(["beg-to-differ","between-us","bulwark-podcast","george-conway-explains-it-all","the-focus-group","the-next-level","the-secret-podcast","thursday-night-bulwark","the-michael-steele-podcast"]),w=e=>{let{sectionId:t}=e;return!!t&&(v.has(b[t])||v.has(y[t]))},S=new Set(["between-us","the-secret-podcast","thursday-night-bulwark"]),E=e=>{let{sectionId:t}=e;return!!t&&(S.has(b[t])||S.has(y[t]))},T=new Set(["bulwark-podcast","the-focus-group","beg-to-differ","george-conway-explains-it-all","the-next-level","the-michael-steele-podcast","shield-of-the-republic"]),k=e=>{let{sectionId:t}=e;return t&&(T.has(b[t])||T.has(y[t]))?["audio","video"]:["audio"]},P=e=>{let{user:t}=e;return t.is_founding?"/account/gifts/founding":"/subscribe?gift=true"};function I(e){let{pub:t}=e;return"privatewires"===t.subdomain||"pwprod"===t.subdomain||"piratewires"===t.subdomain}function A(e){var t;let{post:n,pub:i}=e;if(!I({pub:i}))return!1;let r=null!=(t=n.draft_section_id)?t:n.section_id;if(r&&i.sections){let e=i.sections.find(e=>e.id===r);if(e&&"Pirate Wires Daily"===e.name)return!0}return!1}},56262:function(e,t,n){n.r(t),n.d(t,{getAllAudiences:()=>d,getAudiencesForPublicListing:()=>p,getCommentAuthor:()=>I,getCoverImageUrl:()=>A,getDurationForPostPreview:()=>C,getFoundingAudiences:()=>m,getFreePodcastUrl:()=>R,getPaidAudiences:()=>f,getPostAuthor:()=>P,getPreamble:()=>N,isFoundingAudience:()=>g,isPaidAudience:()=>h,isSubscriptionLevel:()=>_,previewSubHasFullAccessToPost:()=>k,pubRoleHasFullAccessToPost:()=>E,pubRolesHaveFullAccessToPost:()=>T,subHasFullAccessToPost:()=>w,userHasCommentAccess:()=>S,userHasFullAccessToPost:()=>v});var i=n(69277),r=n(32641),o=n(82776);let a=["founding","only_paid","everyone","only_free"],s=["founding","only_paid","everyone"],l=["founding","only_paid"],c=["founding"],u=["free","paid","founding"];function d(){return[...a]}function p(){return[...s]}function f(){return[...l]}function m(){return[...c]}function h(e){return f().includes(e)}function g(e){return m().includes(e)}function _(e){return u.map(String).includes(e)}function b(e,t){if(!t||(null==e?void 0:e.subscription_publication_id)===t){if((null==e?void 0:e.is_founding)||(null==e?void 0:e.is_contributor))return"founding";if(null==e?void 0:e.is_subscribed)return"paid"}return"free"}function y(e){switch(e){case"founding":return["founding"];case"only_paid":return["paid","founding"];case"only_free":return["free"];case"everyone":return["free","paid","founding"];default:throw Error("Unknown audience: ".concat(e))}}function v(e,t){if(!t)return!1;if(!t.audience)throw Error("Post has no audience");if(e&&e.is_contributor&&e.subscription_publication_id===t.publication_id)return!0;let n=b(e,t.publication_id);return y(t.audience).includes(n)}function w(e,t){if(!t)return!1;if(!t.audience)throw Error("Post has no audience");let n=function(e,t){if(!t||(null==e?void 0:e.publication_id)===t){if((null==e?void 0:e.membership_state)==="subscribed"&&(null==e?void 0:e.is_founding))return"founding";if((null==e?void 0:e.membership_state)==="subscribed")return"paid"}return"free"}(e,t.publication_id);return y(t.audience).includes(n)}function S(e,t){if(!t)return!1;if(e&&e.is_contributor&&e.subscription_publication_id===t.publication_id)return!0;let n=b(e,t.publication_id);return"everyone"===t.write_comment_permissions?!!e:"only_paid"===t.write_comment_permissions&&("founding"===n||"paid"===n)}function E(e,t){if(!t)return!1;if(!t.audience)throw Error("Post has no audience");let n=(0,o.isAtLeastContributorRole)(null==e?void 0:e.role)||(null==e?void 0:e.membership_state)==="subscribed"&&(null==e?void 0:e.is_founding)?"founding":(null==e?void 0:e.membership_state)==="subscribed"?"paid":"free";return y(t.audience).includes(n)}function T(e,t){return!!(t&&E(null==e?void 0:e[t.publication_id],t))}function k(e,t,n){let{audienceOverride:i}=n;if(!t)return!1;if(!t.audience&&!i)throw Error("Post has no audience");return y(null!=i?i:t.audience).includes(e)}function P(e,t){var n;let a=null==t||null==(n=t.publishedBylines)?void 0:n[0];if(a)return a;let s=e.contributors.find(e=>e.owner);if(s){let{user_id:e}=s,t=(0,r._)(s,["user_id"]);return(0,i._)({id:e},t)}let l=e.contributors.find(e=>(0,o.isAtLeastContributorRole)(e.role));if(l){let{user_id:e}=l,t=(0,r._)(l,["user_id"]);return(0,i._)({id:e},t)}return{id:e.author_id,name:e.author_name,photo_url:e.author_photo_url,bio:e.author_bio}}function I(e){var t,n,i,r,o,a,s,l,c,u,d,p,f,m,h,g,_,b;return{id:null!=(c=null!=(l=null==(t=e.user)?void 0:t.id)?l:e.user_id)?c:-1,name:null!=(d=null!=(u=null==(n=e.user)?void 0:n.name)?u:e.name)?d:"",handle:null!=(p=null==(i=e.user)?void 0:i.handle)?p:e.handle,photo_url:null!=(f=null==(r=e.user)?void 0:r.photo_url)?f:e.photo_url,bestseller_tier:null!=(h=null!=(m=null==(o=e.user)?void 0:o.bestseller_tier)?m:e.user_bestseller_tier)?h:null,status:null!=(_=null!=(g=null==(a=e.user)?void 0:a.status)?g:e.userStatus)?_:null,primary_publication:null!=(b=null==(s=e.user)?void 0:s.primary_publication)?b:e.user_primary_publication}}function A(e){return!e.cover_image||/12634ced-0eb6-4238-a94a-70ab242c5ad8/.test(e.cover_image)||/fa15c776-f514-42fe-8ee0-4c94148a0a8a/.test(e.cover_image)||/8826edac-0d50-4ba0-b861-f3ed9336878b/.test(e.cover_image)||/49be2356-6491-4a6f-84a5-15e99d23b6d1/.test(e.cover_image)?null:e.cover_image}function R(e){var t,n;let{post:i}=e;return null!=(n=null==(t=i.podcastFields)?void 0:t.free_podcast_url)?n:null}function C(e){var t,n,i,r,o,a,s,l;let{post:c}=e;return null!=(l=null!=(s=null!=(a=null!=(o=null==(t=c.videoUpload)?void 0:t.duration)?o:null==(i=c.podcastUpload)||null==(n=i.full_podcast_info)?void 0:n.duration)?a:null==(r=c.podcastUpload)?void 0:r.duration)?s:c.podcast_duration)?l:0}function N(e,t,n){let{is_freemail:i,is_free_preview:r,sectionEmailRenderElements:a}=n,s=(e,n)=>{var i,r;let o=!("section"in t&&(null==(i=t.section)?void 0:i.ignore_publication_email_settings));return null!=(r=null==a?void 0:a[n])?r:o?null==e?void 0:e[n]:null};return r?s(e.email_render_elements,"free_preview_preamble"):(0,o.isPaidPub)(e)?"everyone"===t.audience?s(e,i?"public_post_free_signup_preamble":"public_post_subscriber_preamble"):h(t.audience)?s(e,"subscriber_post_subscriber_preamble"):void 0:s(e.email_render_elements,"email_preamble_for_free_writer")}},58278:function(e,t,n){n.d(t,{HN:()=>c,ID:()=>u,JG:()=>s,d9:()=>a,uB:()=>l});var i=n(12550),r=n.n(i),o=n(82776);let a=function(e){let{softMax:t=32,hardMax:n=48,extension:i=!1,extensionSeparator:o="-"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=s(e);if(a.length>t){let e=a.indexOf("-",t);-1!==e&&(a=a.substr(0,e))}a.length>n&&(a=a.substr(0,n));let l=i&&"string"==typeof i?i:r()().substr(0,3);return a?i&&(a+="".concat(o).concat(l)):a=l,a},s=function(e){let{hashIfEmpty:t=!1,allowUnicode:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(e||"").toString().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().trim().replace(/\s+/g,"-").replace(/&/g,"-and-").replace(n?RegExp("[^\\p{L}\\p{N}-]+","gu"):/[^\w-]+/g,"").replace(/-+/g,"-").replace(/^-|-$/g,"");return e&&"string"==typeof e&&!i&&t?Array.from(e).map(e=>e.codePointAt(0)).map(e=>{var t;return null!=(t=null==e?void 0:e.toString(16))?t:""}).join("").substring(0,12):i},l=(e,t)=>s((0,o.truncateText)(e,500,{ellipsis:""}),{allowUnicode:t}),c=(e,t)=>{let n=l(e,!0),i=l(e,!1);return t<0x3f9b46c&&n!==i?i:n},u=e=>{var t;let n,{pub:i,slugOrId:r}=e,{id:o,slug:s}=isNaN(n=parseInt(r))||"".concat(n)!==r?{slug:a(r),id:null}:{slug:null,id:n};return i.authorPagesInfo&&null!=(t=i.authorPagesInfo.find(e=>o?e.user_id===o:a(e.name)===s))?t:null}},23246:function(e,t,n){n.d(t,{Z5:()=>i});let i=["hate","private_information","plagiarism","impersonation","illegal_activity","spam","pornography","copyright_violation","other"]},19945:function(e,t,n){n.d(t,{Tb:()=>r,pQ:()=>i});let i=["list","grid","grid-groups","custom"],r={layout:"stacked",navPosition:"top",navStyle:"text"}},37764:function(e,t,n){n.d(t,{E:()=>i.E,S8:()=>o.S8,Tb:()=>a.Tb,Yj:()=>r.Y,j3:()=>o.j3,tL:()=>o.tL}),n(12632),n(15606);var i=n(47851),r=n(43708),o=n(75914);n(23246);var a=n(19945);n(96129)},49807:function(e,t,n){n.d(t,{$_T:()=>l.$_,AAD:()=>b,ADu:()=>L,AF5:()=>G,BpC:()=>l.Bp,Bss:()=>el,Bte:()=>B,D0i:()=>p.D0,Dlv:()=>H,Dor:()=>K,EVw:()=>d.EV,Ewe:()=>l.Ew,FCy:()=>p.FC,H$$:()=>I,Hj9:()=>j,Hr8:()=>c.Hr,I_8:()=>E,I_S:()=>p.I_,JQq:()=>ee,LG3:()=>A,LRz:()=>ef,M$q:()=>c.M$,MGs:()=>Z,MWx:()=>P,PcW:()=>ei,Pmx:()=>l.Pm,PuM:()=>en,Q6R:()=>_,QMq:()=>M,RKl:()=>w,RVH:()=>c.RV,RYA:()=>c.RY,Rtp:()=>e_,SJN:()=>N,ScI:()=>eh,Sns:()=>z,TJD:()=>c.TJ,Tkp:()=>c.Tk,UUj:()=>D,U_V:()=>er,VRc:()=>c.VR,Vvu:()=>c.Vv,W$o:()=>m.W$,Xrv:()=>U,Z96:()=>R,Zgx:()=>c.Zg,_h3:()=>F,_nG:()=>et,ahR:()=>ec,bzS:()=>V,cSL:()=>J,d4Y:()=>d.d4,d5y:()=>l.d5,dJ9:()=>d.dJ,e$6:()=>S,eV6:()=>v,eX$:()=>p.eX,ehp:()=>eu,erJ:()=>q,fmI:()=>m.fm,gAK:()=>ea,gTK:()=>x,gYq:()=>m.gY,ii9:()=>$,j5y:()=>W,jED:()=>T,jQ6:()=>eb,jQM:()=>ed,jS:()=>es,k5Q:()=>ey,kGL:()=>c.kG,lz6:()=>em,naY:()=>eg,o4H:()=>m.o4,oT5:()=>c.oT,pU7:()=>y,pi1:()=>c.pi,py2:()=>p.py,q$n:()=>c.q$,qdI:()=>l.qd,rfn:()=>m.rf,sWz:()=>Y,sXh:()=>l.sX,so2:()=>c.so,stX:()=>p.st,tLs:()=>eo,tvl:()=>h,v6Q:()=>g,vrI:()=>C,w1V:()=>c.w1,w4p:()=>l.w4,wVQ:()=>X,wu9:()=>p.wu,wv4:()=>ep,xJz:()=>l.xJ,xWO:()=>O,xdH:()=>k,yRP:()=>l.yR});var i=n(69277),r=n(70408),o=n(98111),a=n(4016),s=n(58278),l=n(92636),c=n(70189),u=n(41086),d=n(39891),p=n(18947),f=n(82776),m=n(28700);let h="/".concat("inbox"),g="/".concat("chat"),_="/".concat("activity"),b="/explore",y="/".concat("search");function v(e){let{root:t,user:n,addBase:i,skipToken:r=!1,doNotAutoSubmit:o=!1,params:a={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t?/[&?]$/.test(t)||(t.includes("?")||t.endsWith("%%")?t+="&":t+="?"):t=i?"".concat((0,l.$_)(e),"/subscribe?"):"/subscribe?",null==n?void 0:n.email)a.autoSubmit=!o,a.email=null==n?void 0:n.email;else if(!a.token&&!r){var s;a.token="undefined"!=typeof window&&(null==(s=window._preloads)?void 0:s.original_url)?(0,u.y)(window._preloads.original_url,"token"):null}return t+(0,l.Bp)(a)}function w(e){var t,n;let{pub:r,user:o,params:s}=e;return v(r,{addBase:!0,user:o,params:(0,i._)({},s,(0,a.s7)({pub:r})?{plan:"yearly300usd",upgrade_to_founding:!0}:{selectedPlanId:null==(n=r.plans)||null==(t=n.find(e=>{var t;return null==(t=e.metadata)?void 0:t.founding}))?void 0:t.id})})}function S(e){var t,n;let{pubId:i,postId:r,commentId:o,params:a,noBase:s,jumpToDestination:c}=e,u=!c&&(0,l.PH)()&&(!i||"undefined"!=typeof window&&(null==(n=window._preloads)||null==(t=n.pub)?void 0:t.id)===i),d=u?"/publish":s?"":(0,l.Ew)();return(0,l.yR)("".concat(d,"/chat").concat(i&&!u?"/".concat(i):"").concat(r?"/post/".concat(r):"").concat(o?"/reply/".concat(o):""),a)}function E(e){let{pub:t,params:n}=e;return(0,l.yR)("".concat((0,l.qd)(),"/send-reader-gifts/").concat(t.id),n)}function T(e){let{pub:t,params:n}=e;return(0,l.yR)("".concat((0,l.$_)(t),"/account/gifts"),n)}function k(e){let{giftId:t,token:n,params:r}=e;return(0,l.yR)("".concat((0,l.qd)(),"/accept-gift/").concat(t),(0,i._)({token:n},r))}function P(e){return"".concat((0,l.$_)(e),"/account")}function I(e){let{pub:t,params:n}=e;return(0,l.yR)("".concat((0,l.$_)(t),"/publish/stats/earnings"),n)}function A(e){let{pub:t}=e;return(0,l.yR)("".concat((0,l.$_)(t),"/account"),{extra_seats:!0})}function R(e){let{addBase:t,params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?(0,l.$_)(e):"",r="".concat(i,"/publish/home");return n?(0,l.yR)(r,n):r}function C(e,t){let{addBase:n,params:o,referrer:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n?(0,l.$_)(e):"",c="".concat(s,"/meetings/book/").concat(t),u=(0,r._)((0,i._)({},o),{referrer:a});return o||a?(0,l.yR)(c,u):c}function N(e){let{addBase:t,params:n,referrer:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t?(0,l.$_)(e):"",s="".concat(a,"/meetings"),c=(0,r._)((0,i._)({},n),{referrer:o});return n||o?(0,l.yR)(s,c):s}function x(e){let{user_id:t,user_name:n,utm_source:i,utm_campaign:r,redirect:o}=e,a="".concat((0,l.qd)(),"/users/").concat(t),c=(0,s.JG)(n,{hashIfEmpty:!0});return c&&(a+="-".concat(c)),(0,l.yR)(a,{utm_source:i,utm_campaign:r,redirect:o})}function U(e){let{liveStreamId:t,utm_source:n,utm_campaign:r,params:o}=e;return(0,l.yR)("".concat((0,l.qd)(),"/live-stream/").concat(t),(0,i._)({utm_source:n,utm_campaign:r},o))}function D(e){let{liveStreamId:t,utm_source:n,utm_campaign:r,noBase:o,params:a}=e,s=o?"":(0,l.$_)();return(0,l.yR)("".concat(s,"/live-stream/").concat(t),(0,i._)({utm_source:n,utm_campaign:r},a))}function M(e){let{pub:t,utm_source:n,utm_campaign:i,utm_medium:r}=e;return(0,l.yR)("".concat((0,l.$_)(t),"/livestream"),{utm_source:n,utm_campaign:i,utm_medium:r})}function L(e){let{noBase:t,isGif:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?"":(0,l.$_)();return"".concat(i,"/live-stream/").concat(e,"/preview.").concat(n?"gif":"jpg")}function F(e){let{tab:t,utm_source:n,utm_campaign:i,redirect:r}=e;return(0,l.yR)("".concat((0,l.qd)(),"/").concat(t),{utm_source:n,utm_campaign:i,redirect:r})}function B(e){let{subdomain:t,utm_source:n,utm_campaign:i,redirect:r}=e;return(0,l.yR)("".concat((0,l.qd)(),"/pub/").concat(t),{utm_source:n,utm_campaign:i,redirect:r})}function O(e){let{pubKey:t,utm_source:n,utm_campaign:i,r,redirect:o,modal:a}=e;return(0,l.yR)("".concat((0,l.qd)(),"/pub/").concat(t,"/chat"),{utm_source:n,utm_campaign:i,redirect:o,modal:a,r})}function Y(e){let{postId:t,targetReplyId:n,utm_source:i,utm_campaign:r,showTarget:o,redirect:a,modal:s}=e;return(0,l.yR)("".concat((0,l.qd)(),"/chat/posts/").concat(t),{target_reply_id:n,utm_source:i,utm_campaign:r,showTarget:o,redirect:a,modal:s})}function W(e){let{commentId:t,targetReplyId:n,utm_source:i,utm_campaign:r,showTarget:o,redirect:a,modal:s}=e;return(0,l.yR)("".concat((0,l.qd)(),"/chat/replies/").concat(t),{target_reply_id:n,showTarget:o,utm_source:i,utm_campaign:r,redirect:a,modal:s})}function G(e){let{urlParams:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,c.Zg)(e,{baseUrl:(0,l.qd)(),urlParams:t})}function q(e){let{pub:t,params:n,section:i}=e;return i?(0,l.yR)("".concat((0,l.$_)(t),"/listen/").concat(i.slug,"/archive"),n):(0,l.yR)("".concat((0,l.$_)(t),"/podcast/archive"),n)}function H(e){let t=e.trim();if(/\s/.test(t))return null;try{let e=new URL(t);if(!["http:","https:"].includes(e.protocol))return null;return e}catch(e){return null}}let V=(e,t,n,i)=>{switch(e){case"user":default:return x({user_id:t,user_name:n,utm_source:"mentions"});case"pub":return i?(0,l.yR)(i,{utm_source:"mentions"}):""}};function $(e,t){let{addBase:n=!1,query:i={}}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,l.yR)("".concat(n?(0,l.$_)(e):"","/t/").concat(t.slug),i)}function j(e){if(e){if(e.startsWith(l.w4)||e.startsWith("https://res.cloudinary.com")||e.startsWith("https://bucketeer"))return!0;let t="https://".concat((0,f.getPostMediaBucketName)(),".s3.amazonaws.com");if(e.startsWith(t))return!0}return!1}function z(e){return!!function(e){let t;if(!e)return null;try{t=new URL(e)}catch(e){return null}if(!t.hostname.startsWith("open.substack.com"))return null;let n=/\/pub\/([^/?#]+)\/p\/([^/?#]+)/.exec(t.pathname);return n&&n[1]&&n[2]?{subdomain:n[1],slug:n[2],urlParams:Object.fromEntries(t.searchParams)}:null}(e)}function J(e,t){var n,i;let{addBase:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.section?K(e,{addBase:r,section:t.section}):t.post?(0,p.wu)(e,t.post,{noBase:!r}):t.postTag?$(e,t.postTag,{addBase:r}):r&&/^\/[^/]/.test(null!=(n=t.link_url)?n:"")?"".concat((0,l.$_)(e)).concat(t.link_url):null!=(i=t.link_url)?i:""}function K(e){let{addBase:t,section:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(n=n||(null==e?void 0:e.section)))throw Error("Section not found");let i=t?(0,l.$_)(e):"";return"".concat(i,"/s/").concat(n.slug||n.id)}let X=e=>{var t;let n="".concat(null!=(t=null==e?void 0:e.base)?t:"","/api/v1/fb/auth");return e?(0,l.yR)(n,e):n};function Z(e,t){let{token:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,l.yR)("".concat((0,l.$_)(e),"/api/v1/post/pdf"),{postId:t,token:n})}function Q(e){var t;let n=e.match(/^https?:\/\/open\.substack\.com(?:\.localhost:5000)?\/pub\/([^\/]+)/);return n||(n=e.match(/^https?:\/\/([^\.]+)\.substack\.com/))?null!=(t=n[1])?t:null:null}function ee(e){let{url:t,currentSubdomain:n,currentCustomDomain:i}=e;if(z(t))return n===Q(t);let r=!!t.match(/http:\/\/\w*\.substack\.com\.localhost:5000/),o=n?(0,a.V6)(n):void 0;return o?new URL(o).hostname.replace(/^www\./,"")===new URL(t).hostname.replace(/^www\./,""):i&&!r?i.replace(/^www\./,"")===new URL(t).hostname.replace(/^www\./,""):n===Q(t)}let et=function(e){let{addBase:t,params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?(0,l.$_)(e):"";return(0,l.yR)("".concat(i,"/account/cancel"),n)},en=function(e,t){let{addBase:n,referrer:o,params:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=n?(0,l.$_)(e):"",c="".concat(s,"/publish/posts/detail/").concat(t),u=(0,r._)((0,i._)({},a),{referrer:o});return a||o?(0,l.yR)(c,u):c},ei=function(e,t){let{pinnedEntityId:n,addBase:o,referrer:a,params:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=o?(0,l.$_)(e):"",u="".concat(c,"/publish/posts/detail/").concat(t,"/discussion"),d=(0,r._)((0,i._)({},s),{referrer:a,pinnedEntityId:n});return s||a?(0,l.yR)(u,d):u},er=function(e,t){let{addBase:n,referrer:o,params:a,selectionForQuote:s,alreadyPublished:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=n?(0,l.$_)(e):"",d="".concat(u,"/publish/posts/detail/").concat(t,"/share-center"),p=(0,r._)((0,i._)({},a),{referrer:o,selectionForQuote:s,alreadyPublished:c});return a||o||s||c?(0,l.yR)(d,p):d},eo=function(e,t){let{addBase:n,params:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!(null==e?void 0:e.id))return"";let o=n?(0,l.$_)(e):"";return(0,l.yR)("".concat(o,"/leaderboard?"),(0,i._)({},r,(null==t?void 0:t.id)&&{referrer_token:t.id.toString(36)}))},ea=(e,t)=>{if(!e)return"";let n=(0,l.$_)(e);return"".concat(o.T.SURVEY_URL_PREFIX).concat(n,"/survey/").concat(t,"?token=").concat(o.T.SURVEY_TOKEN)};function es(e){return"".concat((0,l.Ew)(),"/browse/").concat(e)}function el(e,t){return(0,l.c$)("/collection/".concat(e),t)}function ec(e){return(0,l.c$)(h,e)}function eu(e){return(0,l.c$)(g,e)}function ed(e){return(0,l.c$)(_,e)}function ep(e){return"".concat((0,l.Ew)(),"/api/v1/list/cover_image/").concat(e.id,".jpg")}function ef(e){let{userId:t,userName:n}=e;return"".concat(t,"-").concat((0,s.d9)(n))}function em(e){let{userId:t,userName:n,noBase:i=!0}=e,r=ef({userId:t,userName:n}),o=i?"":(0,l.Ew)();return"".concat(o,"/api/v1/user/").concat(r,"/public_profile")}function eh(e){return!!e&&e.includes("generic.png")}function eg(){let{utm_medium:e,post_id:t,publication_subdomain:n,downloadAll:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.yR)("".concat((0,l.$_)({subdomain:null!=n?n:""},{forceSubdomain:!0}),"/publish/post/").concat(t),{tab:"clips",utm_medium:e,downloadAll:i})}function e_(e){let{categoryId:t,ranking:n,utm_source:i,focusedPubId:r,backAction:o}=e;return(0,l.yR)("".concat((0,l.$_)(),"/leaderboard/").concat(t).concat("for-you"===t?"":"/".concat("trending"===n?"rising":n)),{utm_source:i,focusedPubId:r,backAction:o})}function eb(){return"".concat((0,l.Ew)(),"/explore")}function ey(e){let{query:t,utm_source:n}=e;return(0,l.yR)("/search/".concat(encodeURIComponent(t)),{utm_source:n})}},39318:function(e,t,n){n.d(t,{$_T:()=>_.$_T,ADu:()=>eh,Aih:()=>eU,BpC:()=>_.BpC,CHS:()=>P,Cv_:()=>e6,D09:()=>g.D0,DNs:()=>F,DS2:()=>eZ,Dlv:()=>_.Dlv,EVw:()=>_.EVw,EZZ:()=>eq,Erh:()=>m.Er,Ewe:()=>_.Ewe,FCy:()=>_.FCy,G79:()=>e9,Gn4:()=>eY,H10:()=>eJ,H_d:()=>eR,I_S:()=>_.I_S,J2y:()=>eT,Ji1:()=>g.Ji,L56:()=>T,LJG:()=>eb,M:()=>C,MYz:()=>eH,Nlh:()=>ex,OFB:()=>ea,OKG:()=>eE,Ojn:()=>eL,P1Q:()=>K,Po_:()=>ef,Pzx:()=>eK,Q1d:()=>eB,RF$:()=>$,RPh:()=>ep,RY1:()=>X,SAZ:()=>e_,T$x:()=>eV,T86:()=>eP,TRu:()=>ev,Tnu:()=>ey,Tvl:()=>en,U4Y:()=>et,UuW:()=>eX,W$o:()=>h.W$,WY0:()=>G,XV8:()=>x,Xt9:()=>L,YII:()=>ee,YL9:()=>e$,Z96:()=>_.Z96,_cT:()=>eA,_nG:()=>_._nG,a7q:()=>Z,aJp:()=>j,b1y:()=>ej,bGb:()=>B,bgT:()=>eW,c8C:()=>N,cxW:()=>y.cx,cxh:()=>e8,d4Y:()=>_.d4Y,dJ9:()=>_.dJ9,dVy:()=>eO,eV6:()=>ei,ed9:()=>ek,f5H:()=>eo,fOI:()=>S,fsB:()=>eS,fxv:()=>q,gEL:()=>eN,gKg:()=>e1,gWk:()=>H,gYq:()=>_.gYq,hdL:()=>k,laT:()=>el,mWT:()=>ec,man:()=>e2,my9:()=>W,nUM:()=>er,n_I:()=>es,oMA:()=>I,oOP:()=>E,oRR:()=>w,oSl:()=>eG,oT5:()=>p.oT,pIF:()=>g.pI,pJR:()=>eI,q$g:()=>A,qCG:()=>e4,qw6:()=>eC,qy7:()=>M,r$1:()=>e0,rDG:()=>U,rfn:()=>_.rfn,rj:()=>Q,rmE:()=>ez,sTG:()=>e3,stX:()=>_.stX,t6y:()=>D,t77:()=>z,tFi:()=>V,tbS:()=>eM,w8b:()=>Y,wHz:()=>y.wH,wpu:()=>J,wu9:()=>_.wu9,yRA:()=>O,yRP:()=>_.yRP,yX_:()=>eQ,zw3:()=>y.zw});var i=n(69277),r=n(70408),o=n(32641),a=n(69843),s=n.n(a),l=n(3843),c=n(66684),u=n(4016),d=n(58278),p=n(70189),f=n(9036),m=n(18947),h=n(28700),g=n(46058),_=n(49807),b=n(57324),y=n(55298);let v=[/\/embed$/,/\/embed\/podcast\//];function w(e,t){let{skipHash:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof e&&(t=e,e=document.location.pathname+document.location.search+document.location.hash);let i=(0,_.yRP)(e.split("?")[0].split("#")[0],Object.assign((0,f.m)(e),t));return -1===e.indexOf("#")||n||(i+=e.substr(e.indexOf("#"))),i}let S=function(e){let{params:t={},signedIn:n=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,_.D0i)(n,e);return(0,_.yRP)("".concat((0,_.$_T)(e),"/"),(0,i._)({lli:r},t))},E=e=>!e||!e.startsWith("/")||e.startsWith("//")||!/\.svg(\?|#|$)/.test(e)?e:"".concat(_.w4p,"/").concat(e),T=e=>(e||"").replace(/^(\w+:)?\/\//g,""),k=e=>{let t=(0,_.Ewe)();return"".concat(t,"/discover/stocks/").concat(e)},P=e=>{let t=(0,_.$_T)({subdomain:"admin"});return e?"".concat(t,"/users/").concat(e):t},I=(e,t)=>{let n=(0,_.$_T)({subdomain:"admin"});return(0,_.yRP)("".concat(n,"/customer_support_mode"),{for_pub:t?t.subdomain:void 0,redirect:e})},A=function(){let{utm_source:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=_.xJz;return(0,_.yRP)((0,_.d5y)("".concat("reader",".").concat(t)),{utm_source:e})},R=function(e){let{query:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=_.xJz;return(0,_.yRP)("".concat((0,_.d5y)(n)).concat(e),t)},C=e=>R("/activity",{query:e}),N=e=>R("/inbox/saved",e),x=function(e,t){let{params:n={},redirect:r=null,source:o=null,postUuid:a=null,inbox:s=null,hostOverride:l=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e||!t)return"";let c=l?a?"".concat(l,"/p/").concat(a):"".concat(l,"/p/").concat(t):a?"".concat((0,_.qdI)(),"/pub/").concat(e,"/drafts/").concat(a):"".concat((0,_.qdI)(),"/pub/").concat(e,"/p/").concat(t),u=(0,i._)({utm_source:o,redirect:r,inbox:s},n);return(0,_.yRP)(c,u)};function U(e,t,n,i){let{maxParents:r=3,token:o}=i;if(!n||!n.ancestor_path)return(0,m.Er)(e,t,n);let a=n.ancestor_path.split("."),s=a.length<r?0:a.length-r;return(0,_.wu9)(e,t,{comments:!0,commentId:n.id,commentContextId:a[s],urlParams:{token:o}})}let D=e=>{let{pub:t,section:n,addBase:i=!0}=e,r=i?(0,_.$_T)(t):"";return n?"".concat(r,"/listen/").concat(n.slug||n.id):"".concat(r,"/podcast")},M=function(e){let{params:t,section:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n?"/s/".concat(n.slug||n.id):"";return(0,_.yRP)("".concat(i,"/archive"),t)},L=function(e){let{addBase:t,params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?(0,_.$_T)(e):"";return(0,_.yRP)("".concat(i,"/archive"),n)},F=function(e){let{addBase:t,params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?(0,_.$_T)(e):"";return(0,_.yRP)("".concat(i,"/about"),n)},B=function(e){let{addBase:t,params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?(0,_.$_T)(e):"";return(0,_.yRP)("".concat(i,"/sitemap"),n)},O=function(e){let t,{params:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.primary_publication)t=(0,_.$_T)(e.primary_publication);else{if(!e.subdomain)return;t=(0,_.$_T)({subdomain:e.subdomain})}let i="".concat(t,"/publish/home");return(0,_.yRP)(i,n)},Y=function(e,t){let{addBase:n,tab:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n?(0,_.$_T)(e):"",o={tab:i};return"string"==typeof t?o.email=t:t&&"object"==typeof t&&"email"in t?o.email=t.email:t&&"object"==typeof t&&"userId"in t&&(o.userId=t.userId),(0,_.yRP)("".concat(r,"/publish/subscribers/details"),o)},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,_.yRP)("".concat((0,_.$_T)(e),"/subscribe"),t);return -1===n.indexOf("?")?"".concat(n,"?"):n},G=function(e){return"".concat((0,_.$_T)(e),"/subscribe?plan=founding&")},q=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.yRP)("/account/login",e)},H=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?(0,_.yRP)("".concat((0,_.Ewe)(),"/refer/").concat(e),t):null},V=function(){let{utm_source:e,section:t,highlightNotification:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.yRP)("".concat((0,_.Ewe)(),"/settings"),{utm_source:e,section:t,highlightNotification:n})},$=function(){let{utm_source:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.yRP)("".concat((0,_.Ewe)(),"/settings/subscriptions"),{utm_source:e})},j=e=>"".concat((0,_.$_T)(e),"/?utm_source=").concat(b.VU.substack,"&utm_medium=").concat(b.Jn.email,"&utm_content=").concat(b.fL.share,"&action=share"),z=(e,t)=>{var{startAtSubscribeFlow:n}=t,r=(0,o._)(t,["startAtSubscribeFlow"]);let a="".concat((0,_.$_T)(e),"/listen");if(r){let e=(0,_.BpC)(r);e&&(a+="?".concat(e))}return n?ei(e,(0,i._)({addBase:!0,next:a,skipPodcastSetupPage:!0},r)):a},J=function(e){var t;let{addBase:n,params:o,noSection:a,section:s,user:l,startAtSubscribeFlow:c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d="";if(n&&(d+=(0,_.$_T)(e)),(s=null!=(t=null!=s?s:(null==e?void 0:e.is_www)?null:null==e?void 0:e.section)?t:null)&&!a&&(d+="/s/".concat(s.slug||s.id)),d+="/account/add-podcast",l&&l.email&&!(0,u.lu)({pub:e})&&(o=(0,r._)((0,i._)({},o),{email:l.email}),d+="/email"),o){let e=(0,_.BpC)(o);e&&(d+="?".concat(e))}return c?ei(e,(0,i._)({addBase:!0,next:d,skipPodcastSetupPage:!0},o)):d},K=e=>{for(let t=0;t<v.length;t++)if(v[t].test(e))return!0;return!1},X=e=>{let{useOriginalUrl:t}=e;if(t&&"undefined"!=typeof window&&window._preloads.original_url)try{let e=new URL(window._preloads.original_url);return"".concat(e.pathname).concat(e.search).concat(e.hash)}catch(e){}return"".concat(document.location.pathname).concat(document.location.search).concat(document.location.hash)},Z=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{for_pub:t,email:n,prefilled_email:i,with_password:r,error:o,message:a,change_user:s,justTrying:l,useOriginalUrl:c,isOAuth:u,only_allow_signin:d}=e,{redirect:p}=e;return"string"!=typeof p&&(p=X({useOriginalUrl:null!=c&&c})),(0,_.yRP)("".concat((0,_.Ewe)(),"/sign-in"),{redirect:p,for_pub:t,email:n,prefilled_email:i,with_password:r,error:o,message:a,change_user:s,justTrying:l,isOAuth:u,only_allow_signin:d})},Q=function(){let{params:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.yRP)("".concat((0,_.Ewe)(),"/profile/edit"),e)},ee=function(){let{isAbbreviated:e,redirect:t,postRedirectToast:n,pubId:r=null,referringUserKey:o=null,params:a={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=null;if(t)try{s=new URL(t),n&&s.searchParams.set("profile-setup-message",n)}catch(e){s=new URL((0,_.Ewe)())}let l=(0,i._)({isAbbreviated:e,redirect:s?s.toString():null,pubId:r},a);return o&&(l.r=o),(0,_.yRP)("".concat((0,_.Ewe)(),"/reader-onboarding"),l)},et=(e,t)=>"".concat((0,_.Ewe)(),"/discover").concat(e?"/category/".concat(e.slug):"/recomendations").concat("all"===t?"/all":""),en=function(){let{query:e,params:t={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n="".concat((0,_.Ewe)(),"/search");return e&&(n="".concat((0,_.Ewe)(),"/search/").concat(encodeURIComponent(e))),w(n,t)};function ei(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var{signedIn:n=!1,addBase:r=!1,root:a,user:s}=t,l=(0,o._)(t,["signedIn","addBase","root","user"]);let c=(0,_.D0i)(n,e);return(0,_.eV6)(e,{root:a,user:s,addBase:r,params:(0,i._)({},void 0===c?{}:{lli:c},l)})}let er=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,_.yRP)("".concat((0,_.$_T)(e),"/recommendations"),t)},eo=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return w("".concat((0,_.Ewe)(),"/signup"),e)},ea=function(e){let{addBase:t,baseUrlOptions:n,params:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?(0,_.$_T)(e,n):"";return(0,_.yRP)("".concat(r,"/publish/recommendations"),i)},es=e=>"".concat((0,_.$_T)(e),"/invite"),el=function(e,t){let{utm_source:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_.gYq)(e,{utm_source:n})},ec=e=>{let{pub:t,token:n=null}=e,{section:i}=t;if(i){var r;return(null==(r=i.podcastSettings)?void 0:r.podcast_feed_url)?i.podcastSettings.podcast_feed_url:eu({pubId:t.id,sectionId:i.id,token:n})}return t.podcast_feed_url?t.podcast_feed_url:eu({pubId:t.id,sectionId:null,token:n})};function eu(e){let{pubId:t,sectionId:n,token:i}=e;if(n){let e="".concat((0,_.$_T)({subdomain:"api"}),"/feed/podcast/").concat(t,"/s/");return i?e+="".concat(n,"/private/").concat(i,".rss"):e+="".concat(n,".rss"),e}let r="".concat((0,_.$_T)({subdomain:"api"}),"/feed/podcast/").concat(t);return i?r+="/private/".concat(i,".rss"):r+=".rss",r}let ed=function(e){let{noOverride:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?e.support_email&&!t?e.support_email:"support+".concat(e.subdomain,"@substack.com"):"support@substack.com"},ep=(e,t)=>"https://support.substack.com/hc/en-us?s=".concat(encodeURIComponent(ed(e,t))),ef=(e,t)=>{let n=em(e,t);return(0,_.dJ9)(n,null,{skipDomainValidation:!0,quality:"auto:best",version:4})},em=(e,t)=>(0,_.yRP)("".concat((0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/post_preview/").concat(t.id,"/twitter.jpg"),{isDraft:t.is_draft||t.is_scheduled}),eh=e=>{let t=eg(e);return(0,_.dJ9)(t,null,{skipDomainValidation:!0,quality:"auto:best",version:1})},eg=e=>"".concat((0,_.Ewe)(),"/live-stream/").concat(e.liveStream.id,"/card.jpg"),e_=(e,t,n,i,r)=>{let o=eb(e,t,n,i);return(0,_.dJ9)(o,null,{skipDomainValidation:!0,quality:"auto:best",version:11,attachment:!!r,filename:r})},eb=(e,t,n,r)=>(0,_.yRP)("".concat((0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/post_selection_image/").concat(t.id,"/").concat(n,".jpg"),(0,i._)({},r)),ey=(e,t,n)=>(0,_.yRP)("".concat((0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/post_selection_image/").concat(t.id,"/image/").concat(n,".jpg")),ev=e=>(0,_.dJ9)("".concat(ew(e)),null,{quality:"auto:best",version:9,skipDomainValidation:!0}),ew=e=>{let{hashString:t}=n(82776),i="".concat((0,_.$_T)(e,{forceSubdomain:!0}),"/twitter/subscribe-card.jpg"),r=t("".concat(e.logo_url,":").concat(e.hero_text,":").concat(e.name,":").concat(e.author_name,":").concat(e.subdomain));return r?i+="?v=".concat(r):i+="?v=bust",i},eS=(e,t,n,i)=>{let r=eE(e,t,n);return(0,_.dJ9)(r,null,{quality:"auto:best",skipDomainValidation:!0,version:13,attachment:!!i,filename:i})},eE=(e,t,o)=>{let{hashString:a}=n(82776),s=a("".concat(t.social_title+t.title+t.description+t.cover_image));return(0,_.yRP)("".concat((0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/press_kit/").concat(t.id,".jpg"),(0,r._)((0,i._)({},o),{isDraft:"is_draft"in t&&t.is_draft,hash:s}))},eT=e=>{let{pub:t,postId:n,variant:i,type:r,aspectRatio:o,mode:a,audience:s,preloadS3Assets:l,version:c}=e,u=(e=>{let{pub:t,postId:n,variant:i,type:r,aspectRatio:o,mode:a,audience:s,preloadS3Assets:l}=e,c="".concat((0,_.$_T)(t),"/api/v1/press_kit/asset/").concat(n,"/").concat(i,"/").concat(r),u=new URLSearchParams;o&&u.append("aspectRatio",o),a&&u.append("mode",a),s&&u.append("audience",s),l&&u.append("preloadS3Assets","true");let d=u.toString();return d?"".concat(c,"?").concat(d):c})({pub:t,postId:n,variant:i,type:r,aspectRatio:o,mode:a,audience:s,preloadS3Assets:l});return(0,_.dJ9)(u,null,{quality:"auto:best",version:c})},ek=function(e,t,n,i){let{useRootDomain:r=!1}=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=eP(e,t,n,{useRootDomain:r});return(0,_.dJ9)(o,null,{quality:"auto:best",skipDomainValidation:!0,version:10,attachment:!!i,filename:i})},eP=function(e,t,n){let{useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=null;if(Object.values(l.Fh).includes(t))o="arr";else if(Object.values(l.ai).includes(t))o="subscribers";else throw Error("endpoint for milestone not found [".concat(t,"]"));return(0,_.yRP)("".concat(r?(0,_.$_T)():(0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/milestone_assets/").concat(o,".jpg"),(0,i._)({milestone:t},n,r&&{subdomain:e.subdomain}))},eI=function(e,t,n){let{fileToDownload:i="",useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=eA(e,t,n,{useRootDomain:r});return(0,_.dJ9)(o,null,{quality:"auto:best",skipDomainValidation:!0,version:10,attachment:!!i,filename:i})},eA=function(e,t,n){let{useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,_.yRP)("".concat(r?(0,_.$_T)():(0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/subscription_note_assets/").concat(t.id,".png"),(0,i._)({},n,r&&{subdomain:e.subdomain}))},eR=function(e,t,n){let{fileToDownload:i="",useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=eC(e,t,n,{useRootDomain:r});return(0,_.dJ9)(o,null,{quality:"auto:best",skipDomainValidation:!0,version:10,attachment:!!i,filename:i})},eC=function(e,t,n){let{useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return(0,_.yRP)("".concat(r?(0,_.$_T)():(0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/pledge_note_assets/").concat(t.id,".jpg"),(0,i._)({},n,r&&{subdomain:e.subdomain}))},eN=function(e,t,n){let{fileToDownload:i="",useRootDomain:r=!1}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=ex(e,n,{useRootDomain:r});return(0,_.dJ9)(o,null,{quality:"auto:best",skipDomainValidation:!0,version:11,attachment:!!i,filename:i})},ex=function(e,t){let{useRootDomain:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_.yRP)("".concat(n?(0,_.$_T)():(0,_.$_T)(e,{forceSubdomain:!0}),"/api/v1/publication_assets/image.jpg"),(0,i._)({},t,n&&{subdomain:e.subdomain}))},eU=e=>{let{userId:t,variant:n,aspectRatio:i}=e;return(0,_.dJ9)(eD({userId:t,variant:n,aspectRatio:i}),null,{quality:"auto:best",skipDomainValidation:!0,version:1})},eD=e=>{let{userId:t,variant:n,aspectRatio:i}=e;return(0,_.yRP)("".concat((0,_.$_T)(),"/api/v1/profile/assets/").concat(t,"/").concat(n),{aspectRatio:i})},eM=e=>{let{noteId:t,variant:n,type:i,aspectRatio:r="stories"}=e;return(0,_.yRP)("".concat((0,_.$_T)(),"/api/v1/note/asset/").concat(t,"/").concat(n,"/").concat(i),{aspectRatio:"stories"===r?void 0:"grid"})},eL=e=>{let t=eF(e);return(0,_.dJ9)(t,null,{quality:"auto:best",version:9})},eF=e=>(0,_.yRP)("/api/v1/latex/jpeg",{expression:e}),eB=e=>"substack://publications/".concat(e.id,"/threads"),eO=e=>e.startsWith("/publish"),eY=e=>{var t,n;let i;return(i=(0,_.Dlv)(e))&&i.pathname.startsWith("/p/")&&null!=(n=null==(t=(0,_.Dlv)(e))?void 0:t.pathname.split("/")[2])?n:null},eW=function(){let{redirect:e,for_pub:t,utm_source:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=e||"",(0,_.yRP)("".concat((0,_.Ewe)(),"/sign-out"),{redirect:e,for_pub:t,utm_source:n})},eG=550,eq=728,eH=[424,848,1272,1456],eV=1200,e$=2880,ej=320,ez=550,eJ=function(e){var t,n;let{post:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return;let r="substack-video";if("audio"===e.media_type&&(s()(e.thumbnail_id)||1===e.thumbnail_id))return null==i||null==(t=i.podcast_episode_image_info)?void 0:t.url;let o=e.post_id?"https://".concat(r,".s3.amazonaws.com/video_upload/post/").concat(e.post_id):"https://".concat(r,".s3.amazonaws.com/video_upload/user/").concat(e.user_id);return"".concat(o,"/").concat(e.id,"/transcoded-").concat((null!=(n=e.thumbnail_id)?n:1).toString().padStart(5,"0"),".png")},eK=function(e){var t;let{isStatic:i,post:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{videoPlayerDimensions:o}=n(82776),{height:a,width:s}=o(e,{isStatic:i});return(0,_.dJ9)(null!=(t=eJ(e,{post:r}))?t:"",2*s,{crop:s/a<1920/1080?"pad":"fill",height:2*a,trailingSegments:i?["l_".concat("play_button_usfui2",",w_144,e_colorize:0")]:[]})},eX=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,_.yRP)("https://substack.com/app-link/publications/".concat(e.id,"/drafts/").concat(t),n)},eZ=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,_.yRP)("".concat((0,_.Ewe)(),"/app"),e)},eQ=function(){let{pathOnly:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/img/podcast/generic.png";return e?t:"".concat((0,_.Ewe)()).concat(t)},e0=()=>{let e=eQ({pathOnly:!0});return(0,_.dJ9)(e,1400)},e1=e=>(0,_.yRP)("https://twitter.com/intent/tweet",e),e2=e=>{let{text:t,query:n}=e;return(0,_.yRP)("https://bsky.app/intent/compose",(0,r._)((0,i._)({},n),{text:t}))},e6=e=>{var t;let{post:n,height:i}=e;return(null==(t=n.videoUpload)?void 0:t.is_mux)?"/api/v1/video/upload/".concat(n.videoUpload.id,"/preview.gif?height=").concat(i):null},e8=e=>{let{userId:t,pub:n,addBase:i=!1}=e;if(!n.authorPagesInfo)return null;let r=n.authorPagesInfo.find(e=>e.user_id===t);if(!r)return null;let o=i?(0,_.$_T)(n):"";return"".concat(o,"/w/").concat((0,d.d9)(r.name))},e4=e=>{let{campaignId:t,medium:n,userId:i,pubId:r,url:o,postId:a,referrer:s}=e,l=null;o&&(l=encodeURIComponent((0,c.A)(o)));let u=null;s&&(u=encodeURIComponent((0,c.A)(s)));let d=a?String(a).replace(/\D/g,""):null;return a&&/\D/.test(String(a))&&console.log('Corrupted postId detected: "'.concat(a,'" (cleaned to: "').concat(d,'")'),{medium:n,campaignId:t,pubId:r,userId:i,url:o,postId:a}),"".concat((0,_.$_T)(),"/sponsorship-campaigns/").concat(t,"/link?pub_id=").concat(r,"&medium=").concat(n).concat(i?"&user_id=".concat(i):"").concat(d?"&post_id=".concat(d):"").concat(u?"&referrer=".concat(u):"").concat(l?"&url=".concat(l):"")},e3=e=>{let{campaignId:t,pub:n}=e;return"".concat((0,_.$_T)(n),"/publish/sponsorship-campaigns/").concat(t)},e9=(e,t)=>e&&t?"".concat((0,_.$_T)(e),"/api/v1/video/upload/").concat(t,"/download"):""},70189:function(e,t,n){n.d(t,{EX:()=>m,Hr:()=>N,Kg:()=>x,M$:()=>w,Oh:()=>d,RV:()=>S,RY:()=>b,TJ:()=>l,Tk:()=>U,VR:()=>T,Vv:()=>P,XX:()=>C,Zg:()=>y,a5:()=>I,kG:()=>E,oT:()=>h,pi:()=>A,q$:()=>_,so:()=>k,st:()=>g,w1:()=>v});var i=n(69277),r=n(56262),o=n(37764),a=n(92636),s=n(28700);let l="/".concat("home"),c="/notes",u="".concat(l,"/");function d(e){return e===l||e.startsWith(u)}new RegExp("".concat(l,"/(").concat(Object.values(o.j3).join("|"),")/([^\\/]+)"));let p=/^\/profile\/(\d+)-([^\/]+)\/note\/c-(\d+)(\/stats)?$/,f=/^\/@[^\/]+\/note\/c-(\d+)(\/stats)?$/;function m(e){let t=e.match(p);if(t){let e=t[3],n=t[2];if(e&&n)return{type:"comment",id:Number(e),author:{id:Number(t[1]),name:n},isStats:!!t[4]}}let n=e.match(f);return n?{type:"comment",id:Number(n[1]),isStats:!!n[2]}:null}function h(){var e;let{baseUrl:t,urlParams:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=l,r=null!=t?t:(0,a.Ew)();return"undefined"!=typeof window&&(null==(e=window.location.href)?void 0:e.startsWith(r))||(i=r+i),(0,a.yR)(i,n)}function g(){let{baseUrl:e,urlParams:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=h({baseUrl:e});return(0,a.yR)("".concat(n,"/suggestions"),t)}function _(e,t){var n,i;let{noBase:o,urlParams:l,mediaClip:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=(null==(n=t.publishedBylines)?void 0:n[0])?null==(i=t.publishedBylines)?void 0:i[0]:e?(0,r.getPostAuthor)(e,t):{id:0,name:"someone"},d=c?R(c.id):null;return(0,a.yR)("".concat((0,s.gY)(u,{noBase:o}),"/note/").concat(null!=d?d:A(t.id)),l)}function b(e,t){let{isPreview:n=!1}=t;return"".concat((0,a.Ew)(),"/embed/c/").concat(e.id,"?origin=").concat(window.location.origin).concat(n?"&isPreview=true":"")}function y(e){let{noBase:t,baseUrl:n,urlParams:i,noHandle:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.user_id?(0,a.yR)("".concat((0,s.gY)((0,r.getCommentAuthor)(e),{baseUrl:n,noBase:t,noHandle:o}),"/note/").concat(I(e.id)),i):h({baseUrl:n})}function v(e,t){let{noBase:n,baseUrl:i,noHandle:r,urlParams:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.yR)("".concat((0,s.gY)(t,{noBase:n,noHandle:r,baseUrl:i}),"/note/").concat(R(e.id)),o)}function w(e){let{noBase:t,baseUrl:n,urlParams:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"":null!=n?n:(0,a.Ew)();return(0,a.yR)("".concat(r,"/note/").concat(e),i)}function S(e){let{noBase:t,urlParams:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?"":(0,a.$_)();return(0,a.yR)("".concat(i,"/note/").concat(I(e)),n)}function E(e){let{noBase:t,urlParams:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t?"":(0,a.$_)();return(0,a.yR)("".concat(i).concat(l,"/post/").concat(A(e)),n)}function T(e){let t=e.noBase?"":(0,a.$_)();return"handle"in e?(0,a.yR)("".concat(t,"/@").concat(e.handle,"/").concat(A(e.postId)),e.urlParams):(0,a.yR)("".concat((0,s.gY)(e.readerProfileUser,{noBase:!0}),"/").concat(A(e.postId)),e.urlParams)}function k(e,t){return(0,a.c$)("/note/".concat(A(e),"/restacks"),t)}function P(e,t){return"".concat("comment"===t?"c":"media_clip"===t?"m":"p","-").concat(e)}function I(e){return"c-".concat(e)}function A(e){return"p-".concat(e)}function R(e){return"m-".concat(e)}function C(e){return(0,a.yR)(h(),(0,i._)({action:"compose"},e))}function N(e){let{noBase:t,isSmall:n,attachmentsOnly:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t?"":(0,a.$_)();return(0,a.yR)("".concat(r,"/note/").concat(I(e),"/preview.jpeg"),{size:n?"sm":"md",attachmentsOnly:i?"1":void 0})}function x(e){let{noBase:t,baseUrl:n,urlParams:i,noHandle:o}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.user_id?(0,a.yR)("".concat((0,s.gY)((0,r.getCommentAuthor)(e),{baseUrl:n,noBase:t,noHandle:o}),"/note/").concat(I(e.id),"/stats"),i):h({baseUrl:n})}function U(e){let{type:t,id:n}=e;return"base"===t?h():"".concat(h(),"/").concat(t,"/").concat(n)}new RegExp("".concat(l,"/(short|post)/p-(\\d+)")),new RegExp("^".concat(c,"(/?)")),new RegExp("^".concat(c,"/comment/(d+)$"))},28700:function(e,t,n){n.d(t,{W$:()=>d,dt:()=>a,fm:()=>l,gY:()=>c,o4:()=>u,rf:()=>s});var i=n(69277),r=n(58278),o=n(92636);function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,o.c$)("/profile/".concat(e),(0,i._)({},t))}function s(e,t){let{searchParams:n,noBase:i,baseUrl:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i?"":null!=a?a:(0,o.Ew)(),l="".concat(s,"/profile/").concat(function(e){let{id:t,name:n,handle:i}=e;if(i)return"@".concat(i);let o=(0,r.JG)(n,{hashIfEmpty:!0});return"".concat(t).concat(o?"-".concat(o):"")}({id:e,name:t}));return(0,o.yR)(l,n)}let l=function(e){let{searchParams:t,noBase:n,baseUrl:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n?"":null!=i?i:(0,o.Ew)(),a="".concat(r,"/@").concat(e);return(0,o.yR)(a,t)};function c(e){let{utm_source:t,utm_content:n,utm_campaign:r,noBase:o,baseUrl:a,noHandle:c,extraParams:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=(0,i._)({},u,t||n||r?{utm_source:t,utm_content:n,utm_campaign:r}:void 0),p=c?void 0:(null==e?void 0:e.handle)||(null==e?void 0:e.author_handle);return p?l(p,{noBase:o,baseUrl:a,searchParams:d}):s(e.author_id||e.user_id||e.id,e.user_profile_name||e.author_name||e.name,{noBase:o,baseUrl:a,searchParams:d})}function u(e,t,n){return(0,o.c$)("".concat(c(e,{noBase:!0}),"/").concat(null!=t?t:"subscribers"),n)}function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,o.yR)("".concat((0,o.Ew)(),"/profile/start"),e)}},98949:function(e,t,n){n.d(t,{Fr:()=>a,UN:()=>l,aR:()=>c,fJ:()=>s,m0:()=>p,nq:()=>f,ux:()=>u});let i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,r=/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i;function o(){let e="undefined"!=typeof navigator?navigator.userAgent||navigator.vendor:void 0;return e||"undefined"==typeof window||(e=window.opera),e}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o();return!!t&&s(t,e)}function s(e){let{checkFirst4:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return i.lastIndex=0,r.lastIndex=0,!!(i.test(e)||t&&r.test(e.substr(0,4)))}function l(){if("undefined"==typeof navigator)return null;var e=navigator.userAgent;if(!e.match(/iPad/i)&&!e.match(/iPhone/i))return null;let t=e.indexOf("OS ");return -1===t?null:parseInt(e.substr(t+3,3).replace("_","."))||null}function c(){return!!l()}function u(){return"undefined"!=typeof navigator&&c()&&/Version\//.test(navigator.userAgent)}let d=/Android/i;function p(){var e;return"undefined"!=typeof navigator&&(e=navigator.userAgent,d.lastIndex=0,!!e&&d.test(e))}function f(){return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toLowerCase().includes("linkedin")}(o())}},82776:function(e,t,n){n.r(t),n.d(t,{AUDIENCE_ADJECTIVES:()=>eE,CENTS_PER_EMAIL:()=>eG,CORE_SUPPORTED_LANGUAGES:()=>eF,ChatError:()=>e$,DEFAULT_GIFT_LENGTH_DAYS:()=>eI,DEFAULT_GRANT_NUMBER:()=>eA,DEFAULT_MAX_BYLINES:()=>ic,DEFAULT_PREVIEW_LIMIT:()=>er,DEFAULT_PREVIEW_LIMIT_EMAIL:()=>eo,DEFAULT_PROFILE_PAGE_SUBSCRIPTIONS_LIMIT:()=>ei,EEA_COUNTRIES:()=>tf,EU_COUNTRIES:()=>tp,FIRST_ILLEGAL_POSTGRES_INTEGER:()=>ed,GIFT_LENGTH_MONTHS:()=>eP,GRACE_PERIOD_COUPON_TRIAL_DAYS:()=>en,GRACE_PERIOD_DAYS:()=>Q,HOMEPAGE_TYPE_CHANGE_CUTOFF:()=>ek,LINK_SUPPORTED_COUNTRIES:()=>tm,LIVE_STREAM_CONTENT_WARNINGS:()=>iN,MANUAL_BILLING_DAYS_UNTIL_DUE:()=>ee,MAX_BANK_PAYMENT_ATTEMPTS:()=>es,MAX_FILE_SIZE:()=>O,MAX_INT32:()=>eu,MAX_MEDIA_FILE_SIZE:()=>F,MAX_MEDIA_UPLOAD_CHUNK_SIZE:()=>B,MAX_PODCAST_FIELD_LENGTH:()=>ep,MAX_PODCAST_FILE_SIZE:()=>L,MAX_SECTION_DESCRIPTION_LENGTH:()=>ef,MIN_MONTH_GAP_BETWEEN_PAUSES:()=>ea,MISSING_IMAGE_HEIGHT:()=>v.xS,MISSING_IMAGE_URL:()=>v.lJ,MISSING_IMAGE_WIDTH:()=>v.GD,MONTH_NAMES:()=>eD,NO_PLATFORM_CUSTOMER_CLONE_COUNTRIES:()=>eY,NO_REPLY_EMAIL:()=>e8,NZD_COUNTRIES:()=>th,OLD_PODCAST_CATEGORIES:()=>eU,PODCAST_CATEGORIES:()=>ex,PODCAST_SECTIONS_TO_MARK_AS_NEWSLETTERS:()=>eq,PUBLICATION_TIER_DESCRIPTIONS:()=>ia,PUB_IDS_TO_NOT_SHOW_FOLLOW_PROMPT_ON:()=>N,READ_WORDS_PER_MINUTE:()=>el,SCHEDULED_LIVE_STREAM_NOTIFY_WINDOW_HOURS:()=>eH,SECURITY_QUESTIONS:()=>eS,SENDER_REMINDER_2_DELAY_SINCE_LAST_REMINDER:()=>eC,SENDER_REMINDER_3_DELAY_SINCE_LAST_REMINDER:()=>eN,SENDER_REMINDER_DELAY:()=>eR,SPEAK_WORDS_PER_MINUTE:()=>ec,SPECIAL_SUBDOMAINS:()=>ew,STRIPE_COUNTRIES_WITH_TRANSFERS_ENABLED:()=>ix,STRIPE_DAYS_UNTIL_DUE:()=>et,STRIPE_TAX_ID_TYPES:()=>eM,SUBSCRIPTION_WORDS:()=>nX,SUBSTACK_PUBLICATION_IDS:()=>J,SUBSTACK_PUBLICATION_ID_BETA:()=>V,SUBSTACK_PUBLICATION_ID_BLOGOLD:()=>H,SUBSTACK_PUBLICATION_ID_COMPANY:()=>W,SUBSTACK_PUBLICATION_ID_LIBRARYOLD:()=>G,SUBSTACK_PUBLICATION_ID_ON:()=>Y,SUBSTACK_PUBLICATION_ID_PRODUCTLAB:()=>z,SUBSTACK_PUBLICATION_ID_READ:()=>$,SUBSTACK_PUBLICATION_ID_STORIESOLD:()=>q,SUBSTACK_PUBLICATION_ID_THREADSPILOT:()=>j,SUBSTACK_USER_ID:()=>K,SUBSTACK_USER_IDS:()=>Z,SUBSTACK_WRITERS_USER_ID:()=>X,SUPPORTED_CURRENCIES:()=>tg,SUPPORTED_LANGUAGES:()=>eL,SUPPORTED_LANGUAGES_IN_LANGUAGE:()=>eB,SUPPORTED_SEARCH_LANGUAGES:()=>eO,TERSE_AUDIENCE_ADJECTIVES:()=>eT,TRANSPARENT_IMAGE_URL:()=>v.rd,WEEK_IN_SECONDS:()=>eW,anonymousName:()=>nJ,areCommentsLocked:()=>nd,areHuesEqual:()=>tF,assertIsDefined:()=>x,assertIsError:()=>U,averageVectors:()=>iR,balanceTextWithCharacterWidths:()=>tu,baschezScoreToEmojis:()=>t$,baschezToCategory:()=>tV,canDeleteComment:()=>n_,canDeletePost:()=>ny,canEditComment:()=>ng,canManageCommentAsPrimaryUser:()=>nh,canPostComments:()=>np,canReplyToPost:()=>e6,canReportComment:()=>nv,canSeeCommenterEmails:()=>nl,canSeeComments:()=>nc,canSeeTranscription:()=>nu,centsToDollarString:()=>tT,centsToPriceString:()=>tE,colorLightness:()=>tY,colorLuma:()=>tW,commentsEnabledForPost:()=>no,couldPostCommentsIfSubscribed:()=>nf,coverPageFreeSubscriberCount:()=>t8,currencySymbol:()=>tw,decimalToPercent:()=>t7,defaultAudienceForPub:()=>nE,defaultCommentLevelForPub:()=>nA,defaultSendEmailForPub:()=>nR,dollarFormatter:()=>tk,dollarStringToCents:()=>tP,endsWithPunctuation:()=>ti,ensureInList:()=>iA,escapeNewlines:()=>nr,extractAttributionDataFromRecord:()=>iD,extractEventAttributionDataFromRecord:()=>iM,flowTextBasedOnWidth:()=>iT,formatArray:()=>tq,formatBytes:()=>n$,formatEllipsis:()=>tn,formatPercentForDisplay:()=>t5,formatPodcastDuration:()=>im,formatPodcastDurationLower:()=>ih,formattedBytesToNumber:()=>nj,foundingMemberDescription:()=>n6,fromEnv:()=>iS,getAttributionDirectMap:()=>n9,getAttributionOptions:()=>n7,getAttributionPatternMatchPlatforms:()=>n5,getByLine:()=>ej,getBylineUsers:()=>nO,getCopyrightedContentBucketName:()=>ey,getCurrencyForCountry:()=>t_,getGiftValueText:()=>tR,getGlobalBanMessage:()=>em,getImageUrlFromBucketKey:()=>eb,getInitalPayment:()=>tA,getModerationPolicyName:()=>eg,getNext5HoursAfterMidnight:()=>ip,getNumberWithCommas:()=>t6,getOpennodePaymentUrl:()=>n8,getPlanTitle:()=>iv,getPostCtaPresentParticiple:()=>nM,getPostCtaText:()=>nD,getPostEmbedMeta:()=>eK,getPostMediaBucketName:()=>e_,getPrintedByline:()=>nY,getPrintedPostType:()=>nL,getPublicationBanMessage:()=>eh,getReadableAttribution:()=>n3,getRemovedContentBucketName:()=>ev,getRestackEmailSubject:()=>nF,getScheduledAt:()=>ne,getSectionBasedSubjectOverride:()=>iU,getSubscribeText:()=>eJ,getSubscriptionSentenceWithCustomWords:()=>n0,getSubscriptionWord:()=>n1,getSuperscriptNumberString:()=>n2,getTrialEndOverride:()=>nC,getValidAudienceLevels:()=>nk,getWithIndefiniteArticle:()=>i_,get_month_name:()=>nN,guessFirstName:()=>y.$k,guessLastName:()=>y.fF,handleDocumentLinkClick:()=>nH,hasFoundingPlan:()=>nT,hashString:()=>ib,hexToHSV:()=>tD,hexToRgb:()=>tM,hidePaidPostsFor:()=>eZ,isAppAttribution:()=>ie,isAtLeastContributorRole:()=>eX,isDefaultMarblePhoto:()=>v.DH,isNotMainEntry:()=>nV,isNotesAttribution:()=>it,isPaidPub:()=>nS,isPinnable:()=>il,isProbablyEmail:()=>ir,isSearchEngineCrawlerQuick:()=>nz,isSubstackNetworkAttribution:()=>ii,isTouchDevice:()=>ik,isUUID:()=>nW,isValidCommentLevel:()=>nI,isZeroDecimalCurrency:()=>ty,joinLines:()=>tj,kFormatter:()=>iy,longestSetOfWordsBelowCost:()=>tc,mode:()=>nU,normalizeHex:()=>tU,numberToHumanFileSize:()=>n4,numberToOrderOfMagnitude:()=>tQ,numberToOrderOfMagnitudeString:()=>t0,numberToOrdinal:()=>tX,numberToRoughRankingString:()=>t2,numberToRoughShortString:()=>t1,numberToString:()=>tZ,onlyOwnsRootComment:()=>nb,oxfordComma:()=>nx,paymentPeriodToPlan:()=>is,pluralize:()=>nn,possessive:()=>ni,postSocialDescription:()=>nK,preventOrphans:()=>te,profilePageFreeSubscriberCountString:()=>t9,pubCurrency:()=>tb,pubHasPaymentsEnabled:()=>nw,pubRoleForManagingComment:()=>nm,pubUsesZeroDecimalCurrency:()=>tv,pubsWithCustomSubscriptionWords:()=>nQ,randomString:()=>tz,resolveTwitterShareText:()=>ez,restacksEnabledForPost:()=>na,rgbToHex:()=>tL,rgbaToString:()=>tB,roughFreeSubscriberCount:()=>t4,roughFreeSubscriberCountString:()=>t3,roundPriceUp:()=>tI,sanitizeInlineText:()=>io,satoshiToBitcoin:()=>tS,secondsToHHMMSS:()=>tN,secondsToLargestUnit:()=>tC,sectionIsSpecificallyMarkedAsNewsletter:()=>eV,setDateToMidnightPST:()=>id,shouldHidePostFromArchive:()=>nB,shouldUseInlineComments:()=>eQ,showCommentsOnPost:()=>ns,simpleBalanceText:()=>to,sortSubscriptions:()=>e1,spellOutNumber:()=>nt,startsWithVowel:()=>ig,streamToBuffer:()=>iE,stringCost:()=>tl,stripInvalidBytes:()=>e4,subscriptionTypeText:()=>e2,textLengthAlphaNumericMinimumValidator:()=>iw,toFlagEmoji:()=>iC,toMillis:()=>nG,toSentenceCase:()=>tK,toTitleCase:()=>tJ,transformDocumentLink:()=>nq,truncAndFormatArray:()=>tG,truncateBytes:()=>e3,truncateNumber:()=>tH,truncateText:()=>e5,truncateToValidBytes:()=>e9,truncateWords:()=>e7,twitterScreenNames:()=>C,userFromReferralKey:()=>iI,userReferralKey:()=>iP,validCommentLevels:()=>nP,validateColor:()=>tO,validateHex:()=>tx,videoPlayerDimensions:()=>iu});var i=n(99851),r=n(69277),o=n(70408),a=n(79785),s=n(2404),l=n.n(s),c=n(69843),u=n.n(c),d=n(6585),p=n.n(d),f=n(3843),m=n(98111),h=n(4016);n(50129);var g=n(44289),_=n(48863),b=n(60639),y=n(50963),v=n(18742),w=n(65606),S=n(49705).Buffer;function E(){let e=(0,a._)(["We've removed your publication from public view due to a violation of Substack's ",". If you believe this was a mistake, you can submit an appeal to our Standards & Enforcement team"]);return E=function(){return e},e}function T(){let e=(0,a._)(["","k"]);return T=function(){return e},e}function k(){let e=(0,a._)(["","m"]);return k=function(){return e},e}function P(){let e=(0,a._)(["","b"]);return P=function(){return e},e}function I(){let e=(0,a._)(["","t"]);return I=function(){return e},e}function A(){let e=(0,a._)(["Over "," subscribers"]);return A=function(){return e},e}function R(){let e=(0,a._)(["Get "," in your inbox"]);return R=function(){return e},e}let C=f.im,N=[21267,260347];function x(e){if(null==e)throw new b.uV("Expected value to be defined, but received ".concat(e))}function U(e){if(!(e instanceof Error))throw new b.uV("Expected value to be an Error, but received ".concat(e))}let D=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],M=["CA","AU","HK","NZ"],L=0x15e00000,F=0x500000000,B=0x3200000,O=0x2bc00000,Y=1,W=46438,G=86696,q=81318,H=87805,V=508885,$=737237,j=1014268,z=1056696,J=[1,46438,86696,81318,87805,508885,737237,1014268,1056696],K=0x4d8b0ef,X=0x27ead30,Z=[0x4d8b0ef,0x27ead30],Q=16,ee=45,et=30,en=2/24,ei=1e3,er=356,eo=256,ea=6,es=3,el=220,ec=150,eu=0x7fffffff,ed=0x80000000,ep=25e4,ef=1e3;function em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";return"Your account is currently suspended. Something you posted may have violated Substack's ".concat(eg(e),". If you believe this is a mistake, you can submit an appeal to our Standards & Enforcement team here:")}function eh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iTemplate:n}=I18N.i(t);return n(E(),eg(e,t))}function eg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iString:n}=I18N.i(t);switch(e){case"hate":return n("Hate policy");case"illegal":return n("Illegal & Harmful Activities policy");case"impersonation":return n("Impersonation policy");case"plagiarism":return n("Plagiarism policy");case"porn":return n("Nudity, Porn, & Erotica policy");case"private_information":return n("Private Information policy");case"spam":return n("Spam & Phishing policy");default:return n("Content Guidelines, Terms of Service, or Publisher Agreement")}}function e_(){let e="substack-post-media";if(!e)throw new b.uV("postMediaBucketName is not defined");return e}function eb(e){return"https://".concat(e_(),".s3.amazonaws.com/").concat(e)}function ey(){return"substack-post-media"===e_()?"substack-copyrighted-media":"substack-copyrighted-media-staging"}function ev(){return"substack-post-media"===e_()?"substack-removed-media":"substack-removed-media-staging"}let ew=["cdn","cloudinary","delivery","jobs","mailgun","mail","support","www","callback","api","admin","reader","sublink","random","your","dashboard","open"],eS=["In what city or town did your parents meet?","What was your first teacher's last name?","What is your earliest memory?","What was the make and model of your first car?","What was the first concert you attended?","Where did you go on your first date?","What was your first favorite band?","What was your first computer or smartphone?","What is your least favorite color?","What was the first video game you beat?","Who was your favorite artist, musician, or celebrity when you were a teenager?"],eE={everyone:"public",only_free:"free-only",only_paid:"subscribers-only",founding:"founding-only"},eT={everyone:"public",only_free:"free-only",only_paid:"subscriber's",founding:"subscriber's"},ek=new Date("2020-01-16"),eP=1,eI=30,eA=3,eR=2592e5,eC=6048e5,eN=1728e6,ex={Arts:["Books","Design","Fashion & Beauty","Food","Performing Arts","Visual Arts"],Business:["Careers","Entrepreneurship","Investing","Management","Marketing","Non-Profit"],Comedy:["Comedy Interviews","Improv","Stand-Up"],Education:["Courses","How To","Language Learning","Self-Improvement"],Fiction:["Comedy Fiction","Drama","Science Fiction"],Government:[],History:[],"Health & Fitness":["Alternative Health","Fitness","Medicine","Mental Health","Nutrition","Sexuality"],"Kids & Family":["Education for Kids","Parenting","Pets & Animals","Stories for Kids"],Leisure:["Animation & Manga","Automotive","Aviation","Crafts","Games","Hobbies","Home & Garden","Video Games"],Music:["Music Commentary","Music History","Music Interviews"],News:["Business News","Daily News","Entertainment News","News Commentary","Politics","Sports News","Tech News"],"Religion & Spirituality":["Buddhism","Christianity","Hinduism","Islam","Judaism","Religion","Spirituality"],Science:["Astronomy","Chemistry","Earth Sciences","Life Sciences","Mathematics","Natural Sciences","Nature","Physics","Social Sciences"],"Society & Culture":["Documentary","Personal Journals","Philosophy","Places & Travel","Relationships"],Sports:["Baseball","Basketball","Cricket","Fantasy Sports","Football","Golf","Hockey","Rugby","Running","Soccer","Swimming","Tennis","Volleyball","Wilderness","Wrestling"],Technology:[],"True Crime":[],"TV & Film":["After Shows","Film History","Film Interviews","Film Reviews","TV Reviews"]},eU={Arts:["Books","Design","Fashion & Beauty","Food","Literature","Performing Arts","Visual Arts"],Business:["Business News","Careers","Investing","Management & Marketing","Shopping"],Comedy:[],Education:["Educational Technology","Higher Education","K-12","Language Courses","Training"],"Games & Hobbies":["Automotive","Aviation","Hobbies","Other Games","Video Games"],"Government & Organizations":["Local","National","Non-Profit","Regional"],Health:["Alternative Health","Fitness & Nutrition","Self-Help","Sexuality"],"Kids & Family":[],Music:[],"News & Politics":[],"Religion & Spirituality":["Buddhism","Christianity","Hinduism","Islam","Judaism","Other","Spirituality"],"Science & Medicine":["Medicine","Natural Sciences","Social Sciences"],"Society & Culture":["History","Personal Journals","Philosophy","Places & Travel"],"Sports & Recreation":["Amateur","College & High School","Outdoor","Professional"],Technology:["Gadgets","Tech News","Podcasting","Software How-To"],"TV & Film":[]},eD=["January","February","March","April","May","June","July","August","September","October","November","December"],eM=[{name:"eu_vat",description:"European VAT number"},{name:"au_abn",description:"Australian Business Number (AU ABN)"},{name:"au_arn",description:"Australian Taxation Office Reference Number"},{name:"br_cnpj",description:"Brazilian CNPJ number"},{name:"br_cpf",description:"Brazilian CPF number"},{name:"bg_uic",description:"Bulgaria Unified Identification Code"},{name:"ca_bn",description:"Canadian BN"},{name:"ca_gst_hst",description:"Canadian GST/HST number"},{name:"ca_pst_bc",description:"Canadian PST number (British Columbia)"},{name:"ca_pst_mb",description:"Canadian PST number (Manitoba)"},{name:"ca_pst_sk",description:"Canadian PST number (Saskatchewan)"},{name:"ca_qst",description:"Canadian QST number (Qu\xe9bec)"},{name:"cl_tin",description:"Chilean TIN"},{name:"eu_oss_vat",description:"European One Stop Shop VAT number for non-Union scheme"},{name:"ge_va",description:"Georgian VAT"},{name:"hk_br",description:"Hong Kong BR number"},{name:"hu_tin",description:"Hungary tax number (ad\xf3sz\xe1m)"},{name:"is_vat",description:"Icelandic VAT"},{name:"in_gst",description:"Indian GST number"},{name:"id_npwp",description:"Indonesian NPWP number"},{name:"il_vat",description:"Israel VAT"},{name:"jp_cn",description:"Japanese Corporate Number (*Hōjin Bangō*)"},{name:"jp_rn",description:"Japanese Registered Foreign Businesses' Registration Number (*Tōroku Kokugai Jigyōsha no Tōroku Bangō*) "},{name:"li_uid",description:"Liechtensteinian UID number"},{name:"my_frp",description:"Malaysian FRP number"},{name:"my_itn",description:"Malaysian ITN C"},{name:"my_sst",description:"Malaysian SST number"},{name:"mx_rfc",description:"Mexican RFC number"},{name:"nz_gst",description:"New Zealand GST number"},{name:"no_vat",description:"Norwegian VAT number"},{name:"ru_inn",description:"Russian INN"},{name:"ru_kpp",description:"Russian KPP"},{name:"sa_vat",description:"Saudi Arabia VAT"},{name:"sg_gst",description:"Singaporean GST"},{name:"sg_uen",description:"Singaporean UEN"},{name:"si_tin",description:"Slovenia tax number (davčna številka)"},{name:"za_vat",description:"South African VAT number"},{name:"kr_brn",description:"Korean BRN"},{name:"es_cif",description:"Spanish CIF number"},{name:"ch_vat",description:"Switzerland VAT number"},{name:"tw_vat",description:"Taiwanese VAT"},{name:"th_vat",description:"Thai VAT"},{name:"ua_vat",description:"Ukrainian VAT"},{name:"ae_trn",description:"United Arab Emirates TRN"},{name:"gb_vat",description:"United Kingdom VAT number"},{name:"us_ein",description:"United States EIN"}],eL={da:"Danish",de:"German",es:"Spanish",fr:"French",it:"Italian",nb:"Norwegian",nl:"Dutch",pl:"Polish",pt:"Portuguese","pt-br":"Brazilian Portuguese",sv:"Swedish",tr:"Turkish"},eF=["en","da","de","es","fr","it","nb","nl","pl","pt","sv","tr"],eB={da:"Dansk",de:"Deutsch",es:"Espa\xf1ol",fr:"Fran\xe7ais",it:"Italiano",nb:"Norsk",nl:"Nederlands",pl:"Polski",pt:"Portugu\xeas","pt-br":"Portugu\xeas do Brasil",sv:"Svenska",tr:"T\xfcrk\xe7e"},eO=["ar","cs","de","el","en","es","fr","hi","hu","id","it","ja","ko","la","nl","no","pl","pt","ro","ru","sv","th","tr","vi","zh"],eY=["IN"],eW=604800,eG=.0064,eq={therampart:{sectionIds:[62635]},thebulwark:{sectionIds:[87956]}},eH=3,eV=e=>{var t;let{section:n,pub:i}=e;return!!(null==(t=eq[i.subdomain])?void 0:t.sectionIds.includes(n.id))};class e$ extends Error{constructor({status:e,errType:t,errMessage:n,pub:a,body:s}){super(n),(0,i._)(this,"name",void 0),(0,i._)(this,"status",void 0),(0,i._)(this,"response",void 0),this.name=this.constructor.name,this.status=e,this.response={body:(0,o._)((0,r._)({},s),{status:t,error:n})},a&&(this.response.body.publication=a),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}}function ej(e){var t,n,i,r;let{skipMultiContributorCheck:o=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("popularinformation"===e.subdomain)return"Judd Legum";if("whyisthisinteresting"===e.subdomain)return"Noah & Colin";if("informant"===e.subdomain)return"Nick Martin";if("colinmeloy"===e.subdomain)return"Colin Meloy";if("petition"===e.subdomain||"russiandissent"===e.subdomain)return null;if("mattlabash"===e.subdomain)return"Matt Labash";if("wmbrown"===e.subdomain)return"Matt Hranek";if("bigtechontrial"===e.subdomain)return"Matt Stoller";if("thegreenspoon"===e.subdomain)return"Greta and Fanny";if("exponentialview"===e.subdomain)return"Azeem Azhar";if("thegodpod"===e.subdomain)return"God";if(!o&&"object"==typeof e&&"contributors"in e&&(null==(r=e.contributors)?void 0:r.length)>1)return null;let a=e.name||e.subdomain;for(let r of["object"==typeof e&&"contributors"in e&&(null==(n=e.contributors)||null==(t=n[0])?void 0:t.name),"object"==typeof e&&"author_name"in e&&e.author_name,e.email_from_name,null==e||null==(i=e.author)?void 0:i.name])if(r&&(r=r.split(/(,|\||\s-|-\s|\bfrom\b|\bat\b)/g)[0].trim())&&!r.startsWith(a)&&!a.startsWith(r)&&!r.endsWith(a)&&!a.endsWith(r))return r;return null}function ez(e){var t;let{pub:n,post:i}=e,r=(null==n?void 0:n.twitter_screen_name)||n&&C[null==n?void 0:n.subdomain],o=null!=(t=null==i?void 0:i.title)?t:null==n?void 0:n.name;return n&&!i&&(o="Subscribe to ".concat(o)),r&&(!i||n&&(!i.publishedBylines.length||i.publishedBylines.some(e=>e.id===n.author_id)))&&(o+=", by @".concat(r)),o}function eJ(e){let{now:t=!1,isFreeSubscribed:n=!1,isMobile:i=!1,isPledged:r=!1,pledgesEnabled:o=!1,language:a,foundingUpsell:s,isFoundingSubscribed:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"Subscribe";let{iString:c}=I18N.i(a||e.language);return n0(e,()=>{if(n&&e.plans&&s&&!l)return c("Upgrade to founding");if(n&&e.plans&&i&&t)return c("Upgrade now");if(n&&e.plans&&i&&!t)return c("Upgrade");if(n&&e.plans&&!i&&t)return c("Upgrade to paid now");if(n&&e.plans&&!i&&!t)return c("Upgrade to paid");else if(n&&o&&!r&&t)return c("Pledge your support now");else if(n&&o&&!r&&!t)return c("Pledge your support");else if(t)return c("Subscribe now");return c("Subscribe")},a=>(n&&e.plans?tK(i?a.upgrade:a.upgradeToPaid):n&&o&&!r?"Pledge your support":tK(n1(e,"subscribe")))+(t?" now":""))}function eK(e){let{date:t,bylines:i,like_count:r,comment_count:o,language:a="en"}=e,{iPlural:s}=I18N.i(a),l=n(16291).A,c=[];return c.push(l(t).locale(a).fromNow()),r&&c.push(s("1 like","%1 likes",r)),o&&c.push(s("1 comment","%1 comments",o)),i&&i.length&&c.push(tq(i.map(e=>e.name).filter(e=>null!==e),a)),c.join(" \xb7 ")}function eX(e){return!!e&&g.q.includes(e)}let eZ=["astralcodexten"];function eQ(e,t){return!(!["astralcodexten","company","library","on","blog","stories"].includes(null==e?void 0:e.subdomain)&&((null==t?void 0:t.type)!=="podcast"||(0,h.lu)({pub:e}))&&((null==t?void 0:t.type)!=="video"||(0,h.lu)({pub:e})))}let e0=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.toUpperCase().replace(/^(THE|A|AN)\s+/,"")};function e1(e){return e.sort((e,t)=>{var n,i;if(!e)return 1;if(!t||"subscribed"===e.membership_state&&"subscribed"!==t.membership_state)return -1;if("subscribed"===t.membership_state&&"subscribed"!==e.membership_state)return 1;let r=e0(null==(n=e.publication)?void 0:n.name),o=e0(null==(i=t.publication)?void 0:i.name);return r<o?-1:+(r>o)})}function e2(e){if(e.expiry&&new Date(e.expiry)>new Date)switch(e.type){case"gift":return"Gifted Subscription";case"comp":return"Comped Subscription";default:return"Paid Subscriber"}return!e.email_disabled||e.email_settings&&Object.values(e.email_settings||{}).some(e=>"individual"===e)?"Free Subscriber":e.email_settings&&Object.values(e.email_settings||{}).some(e=>"digest"===e)?"Follows in Digests":"Emails Disabled"}function e6(e){let{post:t,user:n}=e;return!!(t&&n&&n.has_publication&&!n.is_admin&&!n.is_contributor&&"coming-soon"!==t.slug)}let e8="no-reply@substack.com";function e4(e){if(!e||"string"!=typeof e)return e;e=e.replace(/[\u0000-\u0008\u000B-\u001F\u007F]/g,e=>e.length>1?e:" ");try{return encodeURIComponent(e),e}catch(e){}return e.replace(/[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g,e=>e.length>1?e:" ")}function e3(e,t){let n=new TextEncoder().encode(e);return n.length>t?new TextDecoder().decode(n.slice(0,t)):e}function e9(e){for(;;)try{return encodeURIComponent(e),e}catch(t){e=e.substring(0,e.length-1)}}function e5(e,t){let{words:n=null,ellipsis:i="…",extension:r=null}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return e;let o=!1;if(n){let t=new RegExp("^(\\w+\\W+){".concat(n-1,"}\\w+")).exec(e);t&&(o=!0,e=t[0])}return t&&e.length>t&&(o=!0,e=e.substring(0,t-i.length)),o&&(e=e9(e)+i,r&&(e+=r)),e}function e7(e,t){let{ellipsis:n="…",quotationMarks:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e)return e;i&&(t-=2);let r=e;if(e&&e.length>t){let i=e.split(/\s+/),o=[],a=0;for(;a<=t;){let e=i.shift();if(!e||a+e.length>t)break;o.push(e),a+=e.length+1}r=tn(o.join(" "),n)}return i&&(r.endsWith(" ")||r.startsWith(" "))&&(r=r.trim()),i?'"'.concat(r,'"'):r}let te=e=>{var t;if(!e)return"";let n=e.trim(),i=n.split(/\s/);return(null!=(t=i[i.length-1])?t:"").length>5?n:n.replace(/(\s)(\S+)$/,"\xa0$2")},tt=/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,\-./:;<=>?@[\]^_`{|}~]+$/g;function tn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"…";return"".concat(e.replace(tt,"")).concat(t)}function ti(e){return/[!.?](?:\s+)?$/.test(e)}let tr=new Set([" ","-"]);function to(e){let{maxCharsPerLine:t=55,maxLines:n=2,preferWide:i=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.length<=t)return[e];let r=t*n;if(e.length>r){let t=r;for(;t>=0&&" "!==e.charAt(t);)t--;e=tn(e.slice(0,t))}let o=i?t:Math.floor(e.length/n),a=-1,s=0,l=[];for(;s+o<e.length-1;){for(s+=o;s<=e.length-1&&!tr.has(e.charAt(s));)s++;let t="-"===e.charAt(s);l.push(e.slice(a+1,t?s+1:s)),a=s}return s<e.length-1&&l.push(e.slice(a+1)),l}let ta=e=>/[A-Z]/.test(e),ts=e=>/[\s-]/.test(e);function tl(e,t){let n=0;for(let r=0;r<e.length;r+=1){var i;ta(null!=(i=e[r])?i:"")?n+=t:n+=1}return n}function tc(e,t,n){let i=[],r=0,o=!1;for(let t=0;t<e.length;t+=1){var a;if(ts(null!=(a=e[t])?a:"")){o=!0;continue}o&&(i.push(e.slice(r,t)),r=t,o=!1)}if(r<e.length&&i.push(e.slice(r)),!i[0])return"";let s=[i[0]],l=tl(i[0],t);for(let e of i.slice(1))if((l+=tl(e,t))<=n)s.push(e);else break;return s.join("")}function tu(e){let{maxCostPerLine:t=55,maxLines:n=2,capitalCost:i=1.2}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e;if(tl(e,i)<=t)return[e];let o=[];for(let r=0;r<n;r+=1){let n=tc(e,i,t);if(n)o.push(n),e=e.slice(n.length);else break}if(o.reduce((e,t)=>e+t.length,0)<r.length){var a,s;o[o.length-1]=tn(null==(s=o[o.length-1])?void 0:s.slice(0,(null==(a=o[o.length-1])?void 0:a.length)-1))}return o}let td=["AT","BE","CY","DE","EE","ES","FI","FR","GR","HR","IE","IT","LT","LU","LV","MT","NL","PT","SI","SK"],tp=[...td,"BG","CZ","DK","HU","PL","RO","SE"],tf=[...tp,"IS","LI","NO"],tm=[...tp,"AE","AU","CA","CH","GB","GI","HK","JP","LI","MX","MY","NO","NZ","SG","US"],th=["NZ","CK","NU","PN","TK"],tg=["usd","eur","gbp","cad","aud","nzd","brl","mxn","inr","pln"];function t_(e){return"AU"===e?"aud":"BR"===e?"brl":"CA"===e?"cad":"LI"===e||"CH"===e?"chf":"DK"===e||"FO"===e||"GL"===e?"dkk":td.includes(e)?"eur":"GB"===e?"gbp":"MX"===e?"mxn":"BV"===e||"NO"===e||"SJ"===e?"nok":th.includes(e)?"nzd":"PL"===e?"pln":"SE"===e?"sek":"US"===e?"usd":null}let tb=e=>{var t,n;return(null==(n=e.draft_plans)||null==(t=n[0])?void 0:t.currency)||"usd"};function ty(e){return["BIF","CLP","DJF","GNF","JPY","KMF","KRW","MGA","PYG","RWF","UGX","VND","VUV","XAF","XOF","XPF"].includes(e.toUpperCase())}function tv(e){return ty(tb(e))}function tw(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(0).replace(/\d/,"").trim()}let tS=e=>e/1e8;function tE(e,t){let{forceDecimals:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:n||e%100&&!ty(t)?2:0,maximumFractionDigits:"btc"===t?8:2}).format("btc"===t?tS(e):ty(t)?e:e/100);return"usd"===t&&"undefined"!=typeof window&&window._preloads&&window._preloads.country&&M.includes(window._preloads.country)&&(i="US".concat(i)),i}function tT(e){return new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(e/100)}let tk=new Intl.NumberFormat("en-US",{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0});function tP(e){if(!e)return null;if("string"!=typeof e)throw Error("Bad type for dollar string");let t=e.replace(/[^0-9.]/g,"");return t?Math.round(100*Number(t)):null}function tI(e){let t=e/100;return 100*(t=t<50?Math.ceil(t):5*Math.ceil(t/5))}function tA(e){let{quantity:t=1,coupon:n=null,noTrial:i=!1,trial_end_override:r=null}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i&&(e.trial_period_days||n&&n.trial_period_days||r&&r>Date.now()/1e3+120))return 0;let o=e.amount*t;return n&&n.percent_off?o=Math.round(o*(1-(n.percent_off_precise||n.percent_off)/100)):n&&n.amount_off&&(o=Math.max(0,o-n.amount_off)),o}function tR(e){let t,n,i,r,{interval:o="month",interval_count:a=eP,multiplier:s=1,min:l=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(let r of e){if(i){if(i!=r.currency)continue}else i=r.currency;"month"==r.interval?(!t||r.amount<t)&&(t=r.amount):"year"==r.interval&&(!n||r.amount<n)&&(n=r.amount)}let c=t;if(!c&&n&&(c=n/12),!c)return null;switch(o){case"month":r=c;break;case"day":r=c/30;break;case"year":r=n||12*c;break;default:throw Error("bad interval: ".concat(o))}let u=r*a*s;return(u=100*Math.floor(u/100))<l?null:tE(u,i)}function tC(e){let t,{secondsCutoff:n,minutesCutoff:i,hoursCutoff:r,daysCutoff:o,weeksCutoff:a,long:s,noNumber:l,noWord:c,lessThanMinute:u,language:d="en",appendAgo:p,appendLeft:f}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{iCombo:m}=I18N.i(d);if((e=Math.round(e))<(n||60))return(t=Math.round(e),c)?t:l&&s?m("secondsToLargestUnit","second","seconds",t):l&&!s?m("secondsToLargestUnit","sec","secs",t):!s&&p?m("secondsToLargestUnit","%1 sec ago","%1 secs ago",t):!s&&f?m("secondsToLargestUnit","%1 sec left","%1 secs left",t):s?p?m("secondsToLargestUnit","%1 second ago","%1 seconds ago",t):f?m("secondsToLargestUnit","%1 second left","%1 seconds left",t):m("secondsToLargestUnit","%1 second","%1 seconds",t):m("secondsToLargestUnit","%1 sec","%1 secs",t);if(e<(i||3600)&&u&&!c&&!l)return(t=Math.round(e/60),!s&&p)?m("secondsToLargestUnit","%1 min ago","%1 mins ago",t):!s&&f?m("secondsToLargestUnit","%1 min left","%1 mins left",t):s?p?m("secondsToLargestUnit","less than %1 second ago","less than %1 seconds ago",t):f?m("secondsToLargestUnit","less than %1 second left","less than %1 seconds left",t):m("secondsToLargestUnit","less than %1 minute","less than %1 minutes",t):m("secondsToLargestUnit","less than %1 min","less than %1 mins",t);if(e<(i||3600))return(t=Math.round(e/60),c)?t:l&&s?m("secondsToLargestUnit","minute","minutes",t):l&&!s?m("secondsToLargestUnit","min","mins",t):!s&&p?m("secondsToLargestUnit","%1 min ago","%1 mins ago",t):!s&&f?m("secondsToLargestUnit","%1 min left","%1 mins left",t):s?p?m("secondsToLargestUnit","%1 minute ago","%1 minutes ago",t):f?m("secondsToLargestUnit","%1 minute left","%1 minutes left",t):m("secondsToLargestUnit","%1 minute","%1 minutes",t):m("secondsToLargestUnit","%1 min","%1 mins",t);if(e<(r||86400))return(t=Math.round(e/60/60),c)?t:l&&s?m("secondsToLargestUnit","hour","hours",t):l&&!s?m("secondsToLargestUnit","hr","hrs",t):!s&&p?m("secondsToLargestUnit","%1 hr ago","%1 hrs ago",t):!s&&f?m("secondsToLargestUnit","%1 hr left","%1 hrs left",t):s?p?m("secondsToLargestUnit","%1 hour ago","%1 hours ago",t):p?m("secondsToLargestUnit","%1 hour left","%1 hours left",t):m("secondsToLargestUnit","%1 hour","%1 hours",t):m("secondsToLargestUnit","%1 hr","%1 hrs",t);if(e<(o||604800))return(t=Math.round(e/60/60/24),c)?t:l?m("secondsToLargestUnit","day","days",t):p?m("secondsToLargestUnit","%1 day ago","%1 days ago",t):f?m("secondsToLargestUnit","%1 day left","%1 days left",t):m("secondsToLargestUnit","%1 day","%1 days",t);else if(e<(a||0x1e187e0))return(t=Math.round(e/60/60/24/7),c)?t:l&&s?m("secondsToLargestUnit","week","weeks",t):l&&!s?m("secondsToLargestUnit","wk","wks",t):!s&&p?m("secondsToLargestUnit","%1 wk ago","%1 wks ago",t):!s&&f?m("secondsToLargestUnit","%1 wk left","%1 wks left",t):s?p?m("secondsToLargestUnit","%1 week ago","%1 weeks ago",t):f?m("secondsToLargestUnit","%1 week left","%1 weeks left",t):m("secondsToLargestUnit","%1 week","%1 weeks",t):m("secondsToLargestUnit","%1 wk","%1 wks",t);return(t=Math.round(e/60/60/24/365.25),c)?t:l&&s?m("secondsToLargestUnit","year","years",t):l&&!s?m("secondsToLargestUnit","yr","yrs",t):!s&&p?m("secondsToLargestUnit","%1 yr ago","%1 yrs ago",t):!s&&f?m("secondsToLargestUnit","%1 yr left","%1 yrs left",t):s?p?m("secondsToLargestUnit","%1 year ago","%1 years ago",t):f?m("secondsToLargestUnit","%1 year left","%1 years left",t):m("secondsToLargestUnit","%1 year","%1 years",t):m("secondsToLargestUnit","%1 yr","%1 yrs",t)}function tN(e){let{strict:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{strict:!1},n=Math.floor(e/60/60),i=Math.floor(e/60)%60,r=Math.floor(e%60);if(!t)return"".concat((n?"".concat(n,":"):"")+(n?"0".concat(i).slice(-2):i),":").concat("0".concat(r).slice(-2));let o=e=>e.toString().padStart(2,"0"),a=o(n),s=o(i),l=o(r);return"".concat(a,":").concat(s,":").concat(l)}function tx(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)}function tU(e){return"#"!==e[0]&&(e="#".concat(e)),e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(e,t,n,i)=>t+t+n+n+i+i)}function tD(e){let t;function n(e,t){"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)&&(e="100%");let n="string"==typeof e&&-1!=e.indexOf("%");return(e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),1e-6>Math.abs(e-t))?1:e%t/parseFloat(t)}e=tU(e);let i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e),r=parseInt(null==i?void 0:i[1],16),o=parseInt(null==i?void 0:i[2],16),a=parseInt(null==i?void 0:i[3],16);r=n(r,255);let s=Math.max(r,o=n(o,255),a=n(a,255)),l=Math.min(r,o,a),c=s-l;if(s==l)t=0;else{switch(s){case r:t=(o-a)/c+6*(o<a);break;case o:t=(a-r)/c+2;break;case a:t=(r-o)/c+4}t/=6}return{h:t,s:0===s?0:c/s,v:s}}function tM(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(tU(e));return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function tL(e){let{r:t,g:n,b:i}=e;return"#".concat(t.toString(16).padStart(2,"0")).concat(n.toString(16).padStart(2,"0")).concat(i.toString(16).padStart(2,"0"))}function tF(e,t){let n="string"==typeof e?tM(e):e,i="string"==typeof t?tM(t):t;return l()((0,o._)((0,r._)({},n),{a:1}),(0,o._)((0,r._)({},i),{a:1}))}function tB(e){if(e)return"rgb(".concat(e.r," ").concat(e.g," ").concat(e.b).concat(void 0!==e.a?" / ".concat(e.a):"",")")}function tO(e){let t=tD(e);if(t.h>.11&&t.h<.56){if(t.s>.25&&t.v>.5){if(t.s<.6&&t.v>.8)return!0;else if(t.s>.6)return!0}}else if(t.s>.25&&t.v>.5)return!0;return!1}function tY(e,t){let n=tM(e);return n?(n.r=Math.max(0,Math.min(255,Math.round(n.r*t))),n.g=Math.max(0,Math.min(255,Math.round(n.g*t))),n.b=Math.max(0,Math.min(255,Math.round(n.b*t))),tL(n)):e}function tW(e){let{r:t,g:n,b:i}=tM(e);return t/=255,n/=255,i/=255,.2126*(t=t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(i=i<=.03928?i/12.92:Math.pow((i+.055)/1.055,2.4))}function tG(e,t){let{name:n=e=>e,restWord:i="other",noNames:r="people",pluralizeRest:o=!0,showRestCount:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=e.map(n).filter(Boolean).slice(0,t);if(0===s.length)s.push(nn(e.length,r));else if(s.length<e.length){let t=e.length-s.length;s.push("".concat(a?t:""," ").concat(i).concat(t>1&&o?"s":""))}return tq(s)}function tq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iString:n}=I18N.i(t),i="";return 1===e.length?i=e[0]:2===e.length?i=e.join(" ".concat(n("and")," ")):e.length>2&&(i="".concat(e.slice(0,-1).join(", "),", ").concat(n("and")," ").concat(e.slice(-1))),i}function tH(e){let{minSignificantDigits:t=1,language:n="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e<1e3)return e.toString();let{iTemplate:i}=I18N.i(n),r=e=>{let n=Math.max(t-1-Math.floor(Math.log10(e)),0);return Math.round(e*Math.pow(10,n))/Math.pow(10,n)};return 1e3>Math.round(e/1e3)?(e/=1e3,i(T(),r(e))):1e3>Math.round(e/1e6)?(e/=1e6,i(k(),r(e))):1e3>Math.round(e/1e9)?(e/=1e9,i(P(),r(e))):(e/=1e12,i(I(),r(e)))}let tV=e=>Math.max(0,Math.min(5,Math.floor(Math.log(Math.max(e,1))/Math.LN10+1e-9))-1),t$=e=>"\uD83D\uDD25".repeat(tV(e));function tj(e,t,n){let i=(e||"").trim().split(/[\s\r]*\n[\s\r]*/g).map(e=>e.trim()).filter(e=>e),r=[];for(;i.length>0;){let e=i.shift(),o=r[r.length-1];o&&o.length<n?r[r.length-1]+=t+e:r.push(e)}return r.join("\n")}function tz(){return Math.random().toString(36).replace(/^0\./,"")}function tJ(e){return e.trim().split(/\s+/).filter(Boolean).map(e=>{var t;return(null==(t=e[0])?void 0:t.toUpperCase())+e.substr(1).toLowerCase()}).join(" ")}function tK(e,t){var n;let i=t?e.substr(1).toLowerCase():e.substr(1);return(null==(n=e[0])?void 0:n.toUpperCase())+i}function tX(e){let t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}function tZ(e){let{precision:t=0,language:n="en"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&(e=Number(e.replace(/,/g,""))),new Intl.NumberFormat(n,{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:t}).format(e)}function tQ(e){return u()(e)?0:Math.pow(10,Math.floor(Math.log10(e)))||0}function t0(e,t){let{iString:n}=I18N.i(t);if(e<100)return n("tens");if(e<1e3)return n("hundreds");if(e<1e4)return n("thousands");if(e<1e5)return n("tens of thousands");if(e<1e6)return n("hundreds of thousands");else if(e<1e7)return n("millions");else if(e<1e8)return n("tens of millions");else if(e<1e9)return n("hundreds of millions");else if(e<1e10)return n("billions");else if(e<1e11)return n("tens of billions");else if(e<1e12)return n("hundreds of billions");else if(e<1e13)return n("trillions");else if(e<1e14)return n("tens of trillions");else if(e<1e15)return n("hundreds of trillions");return n("gagillions")}function t1(e){let{maximumFractionDigits:t=1,plusSignifier:n="+"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e.toLocaleString(void 0,{notation:"compact",maximumFractionDigits:t,roundingMode:"floor"});return e>=1e3?"".concat(i).concat(n):e>0?i:"0"}function t2(e){return e<=10?"#".concat(e):e<=25?"Top 25":e<=50?"Top 50":e<=100?"Top 100":""}function t6(e){if(e<1e3)return null;let t=1e3*Math.floor(e/1e3);return t>=1e6&&(t=1e5*Math.floor(e/1e5)),tZ(t)}function t8(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iTemplate:n}=I18N.i(t),i=t6(e);return i?n(A(),i):null}function t4(e){let t;return e?(t=e<1e3?1:e<1e4?100:e<1e6?1e3:1e5,Math.floor(e/t)*t):0}function t3(e){let t=t4(e);return t&&0!==t?t1(t):null}function t9(e,t){let{iString:n}=I18N.i(t);return e&&0!==e?"".concat(t3(e)," ").concat(n(1===e?"subscriber":"subscribers")):n("See subscribers")}let t5=e=>1>Number(e)?"< 1%":"".concat(e,"%");function t7(e){let{rounded:t=!1,display:n=!1,decimalPlaces:i=-1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=100*parseFloat(e);return(i>=0&&(r=r.toFixed(i)),t&&(r=Math.floor(r)),n)?t5(Number(r)):r}function ne(e){var t;return(null==e||null==(t=e.postSchedules)?void 0:t.length)&&e.postSchedules[0]&&e.postSchedules[0].trigger_at?new Date(e.postSchedules[0].trigger_at):"scheduled_at"in e&&e&&e.scheduled_at?e.email_sent_at&&e.should_send_email?void 0:new Date(Math.max(new Date(e.scheduled_at).getTime(),Date.now())):void 0}function nt(e){if(0===e)return"zero";if(1===e)return"one";if(2===e)return"two";if(3===e)return"three";if(4===e)return"four";else if(5===e)return"five";else if(6===e)return"six";else if(7===e)return"seven";else if(8===e)return"eight";else if(9===e)return"nine";else if(10===e)return"ten";else if(11===e)return"eleven";else if(12===e)return"twelve";return tZ(e)}function nn(e,t){let n,i,{zero_fallback:r="",just_word:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=t.lastIndexOf(" ")+1,s=t.substr(a),l=t.substr(0,a);return(["person","people"].includes(s)?(n="".concat(l,"person"),i="".concat(l,"people")):["Person","People"].includes(s)?(n="".concat(l,"Person"),i="".concat(l,"People")):["reply","replies"].includes(s)?(n="".concat(l,"reply"),i="".concat(l,"replies")):["Reply","Replies"].includes(s)?(n="".concat(l,"Reply"),i="".concat(l,"Replies")):["entry","entries"].includes(s)?(n="".concat(l,"entry"),i="".concat(l,"entries")):["Entry","Entries"].includes(s)?(n="".concat(l,"Entry"),i="".concat(l,"Entries")):["match","matches"].includes(s)?(n="".concat(l,"match"),i="".concat(l,"matches")):["Match","Matches"].includes(s)?(n="".concat(l,"Match"),i="".concat(l,"Matches")):(n=t,i="".concat(t,"s")),o||(n="".concat(tZ(e)," ").concat(n),i="".concat(tZ(e)," ").concat(i)),!e&&r)?r:1==e?n:i}function ni(e){return"".concat(e,"’").concat("s"===e[e.length-1]?"":"s")}function nr(e){return e.replace(/\n/g,"\\n")}function no(e){let{publication:t,post:n}=e;return!(!n||["adhoc_email","page"].includes(null==n?void 0:n.type))&&t.community_enabled&&n&&"none"!==n.write_comment_permissions}function na(e){let{publication:t,post:n}=e;return!!(t.community_enabled&&n)}function ns(e){let{publication:t,post:n}=e;return(null==n?void 0:n.type)!=="page"&&(null==n?void 0:n.type)!=="adhoc_email"&&(null==n?void 0:n.slug)!=="coming-soon"&&(n&&n.comment_count>0||no({publication:t,post:n}))}let nl=e=>!!(e&&e.is_contributor);function nc(e,t){let{bypassContentAccessCheck:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{userHasFullAccessToPost:r}=n(56262);return!t.is_geoblocked&&(!!(e&&t.publishedBylines&&t.publishedBylines.find(t=>t.id===e.id))||i||r(e,t))}function nu(e,t){let{bypassContentAccessCheck:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{userHasFullAccessToPost:r}=n(56262);return!!(e&&t.publishedBylines&&t.publishedBylines.find(t=>t.id===e.id))||i||r(e,t)}let nd=e=>"thread"===e.type&&"none"===e.write_comment_permissions;function np(e,t,i){let{userHasFullAccessToPost:r,isFoundingAudience:o}=n(56262),a=e&&"id"in e?e.id:null;if(a&&t.publishedBylines&&t.publishedBylines.find(e=>e.id===a)||e&&e.is_contributor)return{canReply:!0};switch(t.write_comment_permissions||i.default_write_comment_permissions){case"everyone":return{canReply:!0};case"none":return{canReply:!1,repliesDisabledReason:"comments_disabled"};case"only_paid":{if(o(t.audience)){let n=!!e&&r(e,t);return{canReply:n,repliesDisabledReason:n?void 0:"founding_subscription_required"}}let n=!!(e&&e.is_subscribed);return{canReply:n,repliesDisabledReason:n?void 0:"paid_subscription_required"}}}return{canReply:!1}}function nf(e,t,n){return np((0,o._)((0,r._)({},e),{is_subscribed:!0}),t,n).canReply}function nm(e,t){var n;return e&&t&&(null==(n=e.dashboard_pubs)?void 0:n.find(e=>e.can_post_notes_as_primary_user&&e.primary_user_id===t.user_id&&(!(null==t?void 0:t.publication_id)||(null==t?void 0:t.publication_id)===(null==e?void 0:e.id))))||null}function nh(e,t){return!!nm(e,t)}let ng=(e,t)=>!!(t&&e&&e.id===t.user_id||nh(e,t));function n_(e,t,n){let{pub:i,parentComments:r}=n;if(!e||!t)return!1;if(e.id===t.user_id)return!0;if(t.publication_id&&t.post_id){if(ny(e,i))return!0}else if(nb({user:e,comment:t,parentComments:r}))return!0;else if(nh(e,t))return!0;else if(i&&i.contributors.find(t=>t.user_id===e.id&&"community_moderator"===t.role))return!0;return!1}function nb(e){var t;let{user:n,comment:i,parentComments:r}=e;if(!n||!i||i.publication_id&&i.post_id||n.id===i.user_id||n.is_contributor)return!1;let o=Number(null==(t=i.ancestor_path)?void 0:t.split(".").filter(Boolean)[0]);if(!o)return!1;let a=null==r?void 0:r.find(e=>(null==e?void 0:e.id)===o);return n.id===(null==a?void 0:a.user_id)}function ny(e,t){return!!e&&!!(e.id===(null==t?void 0:t.author_id)||(null==t?void 0:t.contributors.find(t=>t.user_id===e.id&&eX(t.role))))}function nv(e,t){return!!e&&!!t&&e.id!==t.user_id}function nw(e){return!!e.plans}function nS(e){return!!(e.plans||e.has_subscribers)}function nE(e){let{type:t,coupon:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.plans&&"page"!==t?n?"only_free":"only_paid":"everyone"}function nT(e){let{pub:t}=e;return!!(t.plans&&t.plans.find(e=>{var t;return(null==(t=e.metadata)?void 0:t.founding)==="yes"}))}function nk(e){let{pub:t}=e;if(!t.plans)return["everyone"];let n=["everyone","only_paid"];return nT({pub:t})&&n.push("founding"),n}function nP(e,t,n){if("thread"===t)switch(e){case"only_paid":case"founding":return["only_paid"];default:return["everyone"]}switch(e){case"only_paid":case"founding":return["only_paid","none"];case"everyone":if(n)return["only_paid","everyone","none"];return["everyone","none"];default:return["none"]}}function nI(e,t,n,i){return null!=e&&nP(t,n,i).includes(e)}function nA(e,t,n,i){return nI(n.default_write_comment_permissions,e,t,i)?n.default_write_comment_permissions:nP(e,t,i)[0]}function nR(e,t,n){return"page"!==t&&("only_free"===n||!!e.default_post_publish_send_email)}function nC(e,t,n){return t&&"forever"===t.interval?0:Math.max(0,...[e.trial_end_override>Date.now()/1e3?e.trial_end_override:0,t&&"trial_period_days"in t&&t.trial_period_days&&Math.round((Date.now()+24*t.trial_period_days*36e5)/1e3),n&&n.trial_period_days&&Math.round((Date.now()+24*n.trial_period_days*36e5)/1e3)].filter(e=>e))}let nN=e=>eD[new Date(e).getMonth()];function nx(e){let{noBreakSpace:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t?"\xa0":" ",i=[];if(1==e.length&&e[0])i=[e[0]];else if(2==e.length&&e[0]&&e[1])i=[e[0],"".concat(n,"and").concat(n),e[1]];else if(e.length>=3)for(let t=0;t<e.length;t++)i.push(e[t]),t<e.length-2?i.push(",".concat(n)):t===e.length-2&&i.push(",".concat(n,"and").concat(n));return i.toString=()=>i.join(""),i}function nU(e){var t;let n=new Map;for(let t of e){let e=n.get(t);e=(e||0)+1,n.set(t,e)}return null==(t=Array.from(n).sort((e,t)=>t[1]-e[1])[0])?void 0:t[0]}function nD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iString:n}=I18N.i(t);return n("thread"===e.type?"View thread":"podcast"===e.type?"Listen":"Read")}function nM(e){let{isFinalWord:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"podcast"===e?"listening".concat(t?"":" to"):"video"===e?"watching":"reading"}function nL(e){return"newsletter"===e?"post":"podcast"===e?"episode":"adhoc_email"===e?"email":"video"===e?"video":e}function nF(e){return"".concat(e5(e.title||"Untitled post",115))}function nB(e){return 10475===e.publication_id&&18994===e.section_id}function nO(e){let{isDraft:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?((t?e.draftBylines:e.publishedBylines)||[]).filter(e=>e.name):[]}function nY(e,t){let{isDraft:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=nO(t,{isDraft:n});return i.length>0?tq(i.map(e=>e.name).filter(e=>null!==e)):null}let nW=e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e);function nG(e){return"string"==typeof e?p()(e)||0:"number"==typeof e?e:0}function nq(e){let t=e=>new RegExp("^.*".concat(e));if(e){if(e.includes(m.T.CHECKOUT_URL))return e.replace(t(m.T.CHECKOUT_URL),"/subscribe?");else if(e.includes(m.T.FOUNDING_CHECKOUT_URL))return e.replace(t(m.T.FOUNDING_CHECKOUT_URL),"/subscribe?plan=founding&");else if(e.includes(m.T.REFERRAL_URL))return e.replace(t(m.T.REFERRAL_URL),"/?showWelcome=true");else if(e.includes(m.T.UNSUBSCRIBE_URL))return e.replace(t(m.T.UNSUBSCRIBE_URL),"/account?");else if(e.includes(m.T.ONE_CLICK_UNSUBSCRIBE_URL))return e.replace(t(m.T.ONE_CLICK_UNSUBSCRIBE_URL),"/account?");else if(/^.*%%.*%%/.test(e))return null}return e}function nH(e){let t=nq(e);if(t){let e=window.open(t,"_blank");(null==e?void 0:e.focus)&&e.focus()}}function nV(e){var t;return!e||["publish","account"].includes(null!=(t=(document.location&&document.location.pathname||"").split("/")[1])?t:"")}function n$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";let n=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,n)).toFixed(t<0?0:t))," ").concat(D[n])}function nj(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e)return 0;let[t,n]=e.split(" "),i=D.indexOf(n);return i<0?0:Number(t)*Math.pow(1024,i)}function nz(e){return/Googlebot/i.test(e||"")?"Google":/bingbot/i.test(e||"")||/BingPreview/i.test(e||"")?"Bing":/Slurp/i.test(e||"")?"Yahoo":/DuckDuckBot/i.test(e||"")?"DDG":!!/Baiduspider/i.test(e||"")&&"Baidu"}function nJ(e,t,n,i){return e.name?e.name:(n&&n.author_id===i.id||t&&t.publishedBylines&&t.publishedBylines.find(e=>e.id===i.id))&&e.email||"Someone"}function nK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"en",{iTemplate:i}=I18N.i(n);return e&&e.description||t.hero_text||i(R(),t.name)}let nX=[{pubs:["thebulwark"],subscription:"membership",donateItem:"membership",subscriber:"member",subscribe:"join",subscribeTo:"join",upgrade:"join",upgradeTo:"join",upgradeToPaid:"join",upgradeSubscriptionTo:"upgrade your membership to"},{pubs:["georgesaunders"],donateItem:"scholarship"},{pubs:["thecoddlingmovie"],subscribe:new Date>new Date("2024-02-22T08:00:00Z")?"watch the film":"pre-order the film"}],nZ={subscription:"subscription",donateItem:"subscription",subscriber:"subscriber",subscribe:"subscribe",subscribeTo:"subscribe to",upgrade:"upgrade",upgradeTo:"upgrade to",upgradeToPaid:"upgrade to paid",upgradeSubscriptionTo:"upgrade your subscription to"},nQ=nX.flatMap(e=>e.pubs);function n0(e,t,n){let i=nX.find(t=>t.pubs.includes(null==e?void 0:e.subdomain))||null,o=i?(0,r._)({},nZ,i):null;return o?n(o):t()}function n1(e,t){let n=e?nX.find(t=>t.pubs.includes(e.subdomain)):void 0,i=n&&n[t];if(!i&&!(i=nZ[t]))throw Error("".concat(t," is not a valid subscription word"));return i}function n2(e){let t={0:8304,1:185,2:178,3:179,4:8308,5:8309,6:8310,7:8311,8:8312,9:8313};return String.fromCodePoint(...Array.from("".concat(e)).map(e=>t[e]))}let n6=e=>{var t,n,i;return null==e||null==(i=e.plans)||null==(n=i.find(e=>{var t;return null==(t=e.metadata)?void 0:t.founding}))||null==(t=n.metadata)?void 0:t.short_description},n8=e=>"https://".concat("","checkout.opennode.com/").concat(e);function n4(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=0===e?0:Math.floor(Math.log(e)/Math.log(1024));return"".concat(+(e/Math.pow(1024,t)).toPrecision(3)).concat(["B","KB","MB","GB","TB"][t])}function n3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";if(!e)return null;let{iString:n}=I18N.i(t),i=n("Substack Network"),r=n("Substack App"),o=n("Substack Live Video");if(it(e))return r;let a={"blog.substack.com":i,"library.substack.com":i,"substack-network":i,"on.substack.com":i,"open.substack.com":r,"post-end-cta":"Post Footer CTA","stories.substack.com":i,"substack-activity-items":r,"substack-app":r,"substack-boost":i,"substack-categories-discovery":r,"substack-categories-discovery-search":r,"substack-chat":r,"substack-comment-links":i,"substack-country-leaderboards":r,"substack-cross-posts":i,"substack-facepiles":i,"substack-feed-item":r,"substack-follow-recommendations":r,"substack-homepage-recommendations":i,"substack-ios-in-app-purchase":"Substack iOS In-App Purchase","substack-leaderboards":r,"substack-live-stream":o,"substack-media-player":r,"substack-mentions":i,"substack-notes":r,"substack-onboarding-discovery":r,"substack-paid-gift":r,"substack-post-embeds":i,"substack-post-reply-comment":i,"substack-presubscribe":r,"substack-publication-embeds":i,"substack-reader-discovery":r,"substack-reader-profile-discovery":r,"substack-reader-shared":"Reader sharing","substack-your-weekly-stack":n("Substack Network — Your Weekly Stack"),"substack-recommendation-email":i,"substack-recommendations-page":i,"substack-referral":i,"substack-signup-flow":i,"substack-spotify-integration":r,"substack-subscriber-referral":i,"substack-twitter-link":r,"substack-twitter-suggest":r,"substack-xp-post-template":i,"substack-xp-read-next":i,"substack.com":r,"t.co":"Twitter","www.substack.com":r,external:n("external form / api"),"googleads.g.doubleclick.net":"Google","score-upsell":n("Boost upsell to engaged subscribers"),"substack-boost-subscribe-page-upsell":n("Boost upsell on another publication")}[e];return a||(/(\b|\.)facebook\./.test(e)?"Facebook":/(\b|\.)instagram\./.test(e)?"Instagram":/(\b|\.)linkedin\./.test(e)?"LinkedIn":/(\b|\.)youtube\./.test(e)?"YouTube":/(\b|\.)duckduckgo\./.test(e)?"DuckDuckGo":/(\b|\.)medium\./.test(e)?"Medium":/(\b|\.)reddit\./.test(e)?"Reddit":/(\b|\.)bing\./.test(e)?"Bing":/(\b|\.)google\./.test(e)?"Google":(null==e?void 0:e.includes("."))?e:tJ(e.replace(/-/g," ")))}function n9(){return{"Substack Network":["blog.substack.com","library.substack.com","substack-network","on.substack.com","stories.substack.com","substack-boost","substack-comment-links","substack-cross-posts","substack-facepiles","substack-homepage-recommendations","substack-mentions","substack-post-embeds","substack-post-reply-comment","substack-publication-embeds","substack-recommendation-email","substack-recommendations-page","substack-referral","substack-signup-flow","substack-subscriber-referral","substack-xp-post-template","substack-xp-read-next","substack-your-weekly-stack"],"Substack App":["open.substack.com","substack-activity-items","substack-app","substack-categories-discovery","substack-categories-discovery-search","substack-chat","substack-country-leaderboards","substack-feed-item","substack-follow-recommendations","substack-leaderboards","substack-media-player","substack-notes","substack-onboarding-discovery","substack-paid-gift","substack-presubscribe","substack-reader-discovery","substack-reader-profile-discovery","substack-spotify-integration","substack-twitter-link","substack-twitter-suggest","substack.com","www.substack.com"],Import:["import"],Direct:["direct"],"Substack Live Video":["substack-live-stream"],"Post Footer CTA":["post-end-cta"],"Substack iOS In-App Purchase":["substack-ios-in-app-purchase"],"Reader sharing":["substack-reader-shared"],Twitter:["t.co"],Google:["googleads.g.doubleclick.net"],"external form / api":["external"],"Boost upsell to engaged subscribers":["score-upsell"],"Boost upsell on another publication":["substack-boost-subscribe-page-upsell"]}}function n5(){return["Facebook","Instagram","LinkedIn","YouTube","DuckDuckGo","Medium","Reddit","Bing"]}function n7(){return[...Object.keys(n9()),...n5()]}function ie(e){return!!it(e)||["substack-activity-items","substack-app","substack-categories-discovery","substack-categories-discovery-search","substack-chat","substack-country-leaderboards","substack-feed-item","substack-follow-recommendations","substack-ios-in-app-purchase","substack-leaderboards","substack-live-stream","substack-media-player","substack-notes","substack-onboarding-discovery","substack-paid-gift","substack-presubscribe","substack-reader-discovery","substack-reader-profile-discovery","substack-twitter-link","substack-twitter-suggest","substack.com"].includes(e)}function it(e){return["substack-feed-item","notes_inline_suggestions","notes_sidebar_suggestions","feed-nux","feed-twitter-suggestions","notes_all_suggestions","note_permalink_upsell","notes_likes","note_inline_upsell","notes_restacks","notes_quote_attachment","notes_context","substack-notes","profile-page-notes","notes-inline-suggestions","subscribe_header_notes","notes-all-suggestions","notes-like-list","new-follower-email","media-player"].includes(e)}function ii(e){return!ie(e)&&/substack/i.test(e)}let ir=e=>/^\S+@\S+\.\S+$/.test(e),io=e=>(e||"").replace(/\s+/g," "),ia={"-2":{short:"Deleted - Flagged as spam",long:"This publication is deleted and every page will show a flagged error"},"-1":{short:"Noindexed - In moderation queue",long:"This publication is temporarily not available to search engines because it is pending moderation, where it will be approved or deleted"},0:{short:"Noindexed - New Pub",long:'This publication is temporarily not available to search engines because the author needs to create a new post other than "coming-soon"'},1:{short:"Available",long:"This publication is available to search engines"},2:{short:"Available w/priority",long:"This publication is available to search engines and is given priority SEO treatment"}};function is(e){return e?e<3456e3?"monthly":e<8121600?"quarterly":e<0xf53700?"semiannual":e<3456e4?"annual":e>3888e3?"lifetime":"other":"free"}function il(e){return e&&("newspaper"===e.homepage_type||"magaziney"===e.homepage_type)}let ic=35;function iu(e){let t,n,{isStatic:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.width>=e.height*(960/540)?n=Math.round((t=i?550:960)*(e.height/e.width)):e.width>=e.height?n=Math.round((t=i?550:728)*(e.height/e.width)):t=n=i?550:728,{height:n,width:t}}function id(e){let t=n(16291).A,i=t(e);return t.utc([i.year(),i.month(),i.date(),8,0,0]).toDate()}function ip(){let{now:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n(16291).A,i=e?t(e):t(),r=i.utc().startOf("day").add(5,"hour");return r.isBefore(i)&&(r=r.utc().add(1,"day")),r}function im(e){let t=Math.round(e/60),n=Math.floor(t/60);return"".concat(n?"".concat(n,"HR "):"").concat(t%60,"M")}function ih(e){let t=Math.round(e/60),n=Math.floor(t/60),i=t%60;return n?"".concat(n,"h ").concat(i,"m"):i?"".concat(i,"m"):"".concat(Math.round(e),"s")}function ig(e){let t=e.toLowerCase()[0];return["a","e","i","o","u"].includes(null!=t?t:"")}function i_(e){return"".concat(e.toLowerCase().startsWith("uni watch")?"a":ig(e)?"an":"a"," ").concat(e)}function ib(e){return e.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0)}function iy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iContext:n}=I18N.i(t),i=n("thousandsAbbreviation","K");return Math.abs(e)>9999?"".concat(Math.sign(e)*(Math.abs(e)/1e3).toFixed(1)).concat(i):(Math.sign(e)*Math.abs(e)).toString()}function iv(e){var t,n,i,r,o;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en",{iString:s}=I18N.i(a);return s((null==(t=e.metadata)?void 0:t.short_description_english)==="Stammleser"||(null==(n=e.metadata)?void 0:n.short_description_english)==="Gr\xfcndungsmitglied"?"Founding Member":(null==(i=e.metadata)?void 0:i.short_description_english)?null==(r=e.metadata)?void 0:r.short_description_english:(null==(o=e.metadata)?void 0:o.short_description)?e.metadata.short_description:"year"===e.interval?"Annual":"forever"===e.interval?"Founding Membership":"month"===e.interval&&3===e.interval_count?"Quarterly":"month"===e.interval&&6===e.interval_count?"Semiannually":"day"===e.interval?"Daily":"week"===e.interval?"Weekly":"Monthly")}let iw=function(){let{minLength:e,maxLength:t,minAlphaNumeric:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i=>{if(!i)return"Missing input";if(e&&i.length<e)return"Must be at least ".concat(e," characters long");if(t&&i.length>t)return"Must be at most ".concat(t," characters long");let r=RegExp("\\P{P}|`","gu"),o=i.match(r);if(!o||(null==o?void 0:o.length)<(null!=n?n:e))return"Must contain at least ".concat(null!=n?n:e," non-punctuation characters");let a=["`"],s=0;return(o.forEach(e=>{a.includes(e)&&(s+=1)}),o.length-s<(null!=n?n:e))?"Must contain at least ".concat(null!=n?n:e," non-punctuation characters"):null}};function iS(e,t){let n=w.env[e];if(void 0!==n)return n;if(void 0!==t)return t;throw Error("Missing required env var ".concat(e))}function iE(e){return new Promise((t,n)=>{let i=[];e.on("data",e=>i.push(e)),e.once("end",()=>t(S.concat(i))),e.once("error",n)})}function iT(e){let{maxWidth:t=55,maxLines:n=2,charWidth:i=1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],o="",a=0;for(let s of e.split(" ")){let e=s.length*i;if(a+e<=t)o?(o+=" ".concat(s),a+=e+i):(o=s,a=e);else if(r.push(o),o=s,a=e,r.length===n)break}if(r.length===n&&o){let e=t-a;e>=3?o+="...":o="".concat(o.substring(0,o.length-(3-e)),"..."),r[n-1]=o}else o&&r.push(o);return r}function ik(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0)}function iP(e){return(null==e?void 0:e.id)&&e.id.toString(36)||null}function iI(e){if(!e)return null;try{let t=parseInt(e,36);return isNaN(t)||t>eu?null:t}catch(e){return null}}function iA(e,t){return"string"!=typeof e?t[0]:t.includes(e)?e:t[0]}function iR(e){var t,n,i;let r=Array(null==(t=e[0])?void 0:t.length).fill(0);for(let t=0;t<e.length;t++)for(let o=0;o<(null==e||null==(n=e[t])?void 0:n.length);o++)r[o]+=(null==e||null==(i=e[t])?void 0:i[o])/e.length;return r}function iC(e){return[...e].map(e=>String.fromCodePoint(e.toUpperCase().codePointAt()+127397)).join("")}let iN=[{label:"Generic",value:"generic",url:"https://substack.com/content",message:void 0},{label:"Copyright Infringement",value:"copyright_infringement",url:"https://substack.com/dispute",message:"Warning: We have detected potential copyrighted content in your stream. Please remove any unauthorized content immediately to avoid additional enforcement actions from being taken against this stream or your account."},{label:"Explicit Content",value:"explicit_content",url:"https://substack.com/content",message:"Warning: We have detected a potential violation of Substack's Nudity/Porn/Erotica policy. As a reminder, Substack does not allow visual depictions of sexual acts. Please remove any violating content to avoid additional enforcement actions from being taken against this stream or your account."},{label:"Harmful and Illegal Activities",value:"harmful_and_illegal_activities",url:"https://substack.com/content",message:"We have detected a potential violation of Substack's Harmful & Illegal Activities policy. As a reminder, Substack does not allow content that promotes harmful or illegal activities, including material that advocates, threatens, or shows your causing harm to yourself, other people, or animals. Please remove any violating content to avoid additional enforcement actions from being taken against this stream or your account."}],ix=["US","GB","CA","FR","DE","ES","IT","NL","PL","GR","BE","IE","PT"];function iU(e,t,n){var i,r;if(!(0,h.C3)({pub:e}))return;let o=null;if("section"in t&&t.section?o=t.section:t.section_id&&(o=null==(i=e.sections)?void 0:i.find(e=>e.id===t.section_id)),!o&&t.draft_section_id&&n&&(o=null==(r=e.sections)?void 0:r.find(e=>e.id===t.draft_section_id)),!(!o||(0,h.Tu)({post:t,pub:e})||o.name.includes("Pirate Wires")))return"".concat(o.name," // ").concat(t.title||t.draft_title)}function iD(e){var t,n,i;return{sessionStarted:null!=(t=e.sessionStarted)?t:e.sessionStart,landingReferrer:null!=(n=e.landingReferrer)?n:e.originalReferrer,landingUrl:null!=(i=e.landingUrl)?i:e.landingPage,landingSurface:e.landingSurface,landingSurfaceId:e.landingSurfaceId,landingPublicationId:e.landingPublicationId}}function iM(e){var t;let n,i=+new Date,r=null!=(t=e.session_started_at)?t:e.sessionStarted;null!=r&&"number"==typeof r&&(n=new Date(r<2e4?i-1e3*r:r));let o=e.landingPublicationId;null==o&&null!=e.deepLink&&(o=(0,_.qc)(e.deepLink).publicationID);let a=e.landingSurfaceId,s=e.landingSurface;if(null==a&&null==s&&null!=e.deepLink){let t=(0,_.qc)(e.deepLink);s=t.surface,a=t.surfaceID}return{session_started_at:n,deep_link:e.deepLink,referrer:e.referrer,landing_referrer:e.landingReferrer,landing_url:e.landingUrl,landing_surface:s,landing_surface_id:String(a),landing_publication_id:o}}}}]);